function Ej(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(t,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();function kj(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var $v={exports:{}},Ld={},Bv={exports:{}},me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sc=Symbol.for("react.element"),Tj=Symbol.for("react.portal"),Ij=Symbol.for("react.fragment"),Sj=Symbol.for("react.strict_mode"),Cj=Symbol.for("react.profiler"),Aj=Symbol.for("react.provider"),Rj=Symbol.for("react.context"),Pj=Symbol.for("react.forward_ref"),Dj=Symbol.for("react.suspense"),Lj=Symbol.for("react.memo"),Oj=Symbol.for("react.lazy"),zx=Symbol.iterator;function Mj(t){return t===null||typeof t!="object"?null:(t=zx&&t[zx]||t["@@iterator"],typeof t=="function"?t:null)}var zv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qv=Object.assign,Hv={};function eo(t,e,n){this.props=t,this.context=e,this.refs=Hv,this.updater=n||zv}eo.prototype.isReactComponent={};eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Wv(){}Wv.prototype=eo.prototype;function lp(t,e,n){this.props=t,this.context=e,this.refs=Hv,this.updater=n||zv}var cp=lp.prototype=new Wv;cp.constructor=lp;qv(cp,eo.prototype);cp.isPureReactComponent=!0;var qx=Array.isArray,Kv=Object.prototype.hasOwnProperty,up={current:null},Gv={key:!0,ref:!0,__self:!0,__source:!0};function Qv(t,e,n){var r,s={},a=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)Kv.call(e,r)&&!Gv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:sc,type:t,key:a,ref:o,props:s,_owner:up.current}}function Vj(t,e){return{$$typeof:sc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function dp(t){return typeof t=="object"&&t!==null&&t.$$typeof===sc}function Fj(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Hx=/\/+/g;function Oh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Fj(""+t.key):e.toString(36)}function bu(t,e,n,r,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sc:case Tj:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Oh(o,0):r,qx(s)?(n="",t!=null&&(n=t.replace(Hx,"$&/")+"/"),bu(s,e,n,"",function(d){return d})):s!=null&&(dp(s)&&(s=Vj(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Hx,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",qx(t))for(var c=0;c<t.length;c++){a=t[c];var u=r+Oh(a,c);o+=bu(a,e,n,u,s)}else if(u=Mj(t),typeof u=="function")for(t=u.call(t),c=0;!(a=t.next()).done;)a=a.value,u=r+Oh(a,c++),o+=bu(a,e,n,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Qc(t,e,n){if(t==null)return t;var r=[],s=0;return bu(t,r,"","",function(a){return e.call(n,a,s++)}),r}function Uj(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Qt={current:null},Nu={transition:null},$j={ReactCurrentDispatcher:Qt,ReactCurrentBatchConfig:Nu,ReactCurrentOwner:up};function Xv(){throw Error("act(...) is not supported in production builds of React.")}me.Children={map:Qc,forEach:function(t,e,n){Qc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Qc(t,function(){e++}),e},toArray:function(t){return Qc(t,function(e){return e})||[]},only:function(t){if(!dp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};me.Component=eo;me.Fragment=Ij;me.Profiler=Cj;me.PureComponent=lp;me.StrictMode=Sj;me.Suspense=Dj;me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$j;me.act=Xv;me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=qv({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=up.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Kv.call(e,u)&&!Gv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:sc,type:t.type,key:s,ref:a,props:r,_owner:o}};me.createContext=function(t){return t={$$typeof:Rj,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Aj,_context:t},t.Consumer=t};me.createElement=Qv;me.createFactory=function(t){var e=Qv.bind(null,t);return e.type=t,e};me.createRef=function(){return{current:null}};me.forwardRef=function(t){return{$$typeof:Pj,render:t}};me.isValidElement=dp;me.lazy=function(t){return{$$typeof:Oj,_payload:{_status:-1,_result:t},_init:Uj}};me.memo=function(t,e){return{$$typeof:Lj,type:t,compare:e===void 0?null:e}};me.startTransition=function(t){var e=Nu.transition;Nu.transition={};try{t()}finally{Nu.transition=e}};me.unstable_act=Xv;me.useCallback=function(t,e){return Qt.current.useCallback(t,e)};me.useContext=function(t){return Qt.current.useContext(t)};me.useDebugValue=function(){};me.useDeferredValue=function(t){return Qt.current.useDeferredValue(t)};me.useEffect=function(t,e){return Qt.current.useEffect(t,e)};me.useId=function(){return Qt.current.useId()};me.useImperativeHandle=function(t,e,n){return Qt.current.useImperativeHandle(t,e,n)};me.useInsertionEffect=function(t,e){return Qt.current.useInsertionEffect(t,e)};me.useLayoutEffect=function(t,e){return Qt.current.useLayoutEffect(t,e)};me.useMemo=function(t,e){return Qt.current.useMemo(t,e)};me.useReducer=function(t,e,n){return Qt.current.useReducer(t,e,n)};me.useRef=function(t){return Qt.current.useRef(t)};me.useState=function(t){return Qt.current.useState(t)};me.useSyncExternalStore=function(t,e,n){return Qt.current.useSyncExternalStore(t,e,n)};me.useTransition=function(){return Qt.current.useTransition()};me.version="18.3.1";Bv.exports=me;var I=Bv.exports;const Yv=kj(I),Bj=Ej({__proto__:null,default:Yv},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zj=I,qj=Symbol.for("react.element"),Hj=Symbol.for("react.fragment"),Wj=Object.prototype.hasOwnProperty,Kj=zj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Gj={key:!0,ref:!0,__self:!0,__source:!0};function Jv(t,e,n){var r,s={},a=null,o=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Wj.call(e,r)&&!Gj.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:qj,type:t,key:a,ref:o,props:s,_owner:Kj.current}}Ld.Fragment=Hj;Ld.jsx=Jv;Ld.jsxs=Jv;$v.exports=Ld;var i=$v.exports,Lf={},Zv={exports:{}},Nn={},ew={exports:{}},tw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,X){var re=F.length;F.push(X);e:for(;0<re;){var ve=re-1>>>1,pe=F[ve];if(0<s(pe,X))F[ve]=X,F[re]=pe,re=ve;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var X=F[0],re=F.pop();if(re!==X){F[0]=re;e:for(var ve=0,pe=F.length,De=pe>>>1;ve<De;){var Rt=2*(ve+1)-1,Bn=F[Rt],ln=Rt+1,cn=F[ln];if(0>s(Bn,re))ln<pe&&0>s(cn,Bn)?(F[ve]=cn,F[ln]=re,ve=ln):(F[ve]=Bn,F[Rt]=re,ve=Rt);else if(ln<pe&&0>s(cn,re))F[ve]=cn,F[ln]=re,ve=ln;else break e}}return X}function s(F,X){var re=F.sortIndex-X.sortIndex;return re!==0?re:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],h=1,m=null,p=3,v=!1,_=!1,R=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(F){for(var X=n(d);X!==null;){if(X.callback===null)r(d);else if(X.startTime<=F)r(d),X.sortIndex=X.expirationTime,e(u,X);else break;X=n(d)}}function N(F){if(R=!1,y(F),!_)if(n(u)!==null)_=!0,$(A);else{var X=n(d);X!==null&&B(N,X.startTime-F)}}function A(F,X){_=!1,R&&(R=!1,b(x),x=-1),v=!0;var re=p;try{for(y(X),m=n(u);m!==null&&(!(m.expirationTime>X)||F&&!P());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,p=m.priorityLevel;var pe=ve(m.expirationTime<=X);X=t.unstable_now(),typeof pe=="function"?m.callback=pe:m===n(u)&&r(u),y(X)}else r(u);m=n(u)}if(m!==null)var De=!0;else{var Rt=n(d);Rt!==null&&B(N,Rt.startTime-X),De=!1}return De}finally{m=null,p=re,v=!1}}var O=!1,j=null,x=-1,E=5,k=-1;function P(){return!(t.unstable_now()-k<E)}function L(){if(j!==null){var F=t.unstable_now();k=F;var X=!0;try{X=j(!0,F)}finally{X?D():(O=!1,j=null)}}else O=!1}var D;if(typeof w=="function")D=function(){w(L)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,V=ie.port2;ie.port1.onmessage=L,D=function(){V.postMessage(null)}}else D=function(){T(L,0)};function $(F){j=F,O||(O=!0,D())}function B(F,X){x=T(function(){F(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){_||v||(_=!0,$(A))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var re=p;p=X;try{return F()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var re=p;p=F;try{return X()}finally{p=re}},t.unstable_scheduleCallback=function(F,X,re){var ve=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ve+re:ve):re=ve,F){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=re+pe,F={id:h++,callback:X,priorityLevel:F,startTime:re,expirationTime:pe,sortIndex:-1},re>ve?(F.sortIndex=re,e(d,F),n(u)===null&&F===n(d)&&(R?(b(x),x=-1):R=!0,B(N,re-ve))):(F.sortIndex=pe,e(u,F),_||v||(_=!0,$(A))),F},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(F){var X=p;return function(){var re=p;p=X;try{return F.apply(this,arguments)}finally{p=re}}}})(tw);ew.exports=tw;var Qj=ew.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xj=I,_n=Qj;function G(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nw=new Set,El={};function Oi(t,e){Va(t,e),Va(t+"Capture",e)}function Va(t,e){for(El[t]=e,t=0;t<e.length;t++)nw.add(e[t])}var Wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Of=Object.prototype.hasOwnProperty,Yj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wx={},Kx={};function Jj(t){return Of.call(Kx,t)?!0:Of.call(Wx,t)?!1:Yj.test(t)?Kx[t]=!0:(Wx[t]=!0,!1)}function Zj(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function e2(t,e,n,r){if(e===null||typeof e>"u"||Zj(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Xt(t,e,n,r,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var At={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){At[t]=new Xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];At[e]=new Xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){At[t]=new Xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){At[t]=new Xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){At[t]=new Xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){At[t]=new Xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){At[t]=new Xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){At[t]=new Xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){At[t]=new Xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var hp=/[\-:]([a-z])/g;function fp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hp,fp);At[e]=new Xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hp,fp);At[e]=new Xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hp,fp);At[e]=new Xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){At[t]=new Xt(t,1,!1,t.toLowerCase(),null,!1,!1)});At.xlinkHref=new Xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){At[t]=new Xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function mp(t,e,n,r){var s=At.hasOwnProperty(e)?At[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(e2(e,n,s,r)&&(n=null),r||s===null?Jj(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ts=Xj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xc=Symbol.for("react.element"),ma=Symbol.for("react.portal"),pa=Symbol.for("react.fragment"),pp=Symbol.for("react.strict_mode"),Mf=Symbol.for("react.profiler"),rw=Symbol.for("react.provider"),sw=Symbol.for("react.context"),gp=Symbol.for("react.forward_ref"),Vf=Symbol.for("react.suspense"),Ff=Symbol.for("react.suspense_list"),xp=Symbol.for("react.memo"),fs=Symbol.for("react.lazy"),iw=Symbol.for("react.offscreen"),Gx=Symbol.iterator;function Uo(t){return t===null||typeof t!="object"?null:(t=Gx&&t[Gx]||t["@@iterator"],typeof t=="function"?t:null)}var Qe=Object.assign,Mh;function Yo(t){if(Mh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Mh=e&&e[1]||""}return`
`+Mh+t}var Vh=!1;function Fh(t,e){if(!t||Vh)return"";Vh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=r.stack.split(`
`),o=s.length-1,c=a.length-1;1<=o&&0<=c&&s[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==a[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Vh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yo(t):""}function t2(t){switch(t.tag){case 5:return Yo(t.type);case 16:return Yo("Lazy");case 13:return Yo("Suspense");case 19:return Yo("SuspenseList");case 0:case 2:case 15:return t=Fh(t.type,!1),t;case 11:return t=Fh(t.type.render,!1),t;case 1:return t=Fh(t.type,!0),t;default:return""}}function Uf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case pa:return"Fragment";case ma:return"Portal";case Mf:return"Profiler";case pp:return"StrictMode";case Vf:return"Suspense";case Ff:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sw:return(t.displayName||"Context")+".Consumer";case rw:return(t._context.displayName||"Context")+".Provider";case gp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case xp:return e=t.displayName||null,e!==null?e:Uf(t.type)||"Memo";case fs:e=t._payload,t=t._init;try{return Uf(t(e))}catch{}}return null}function n2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Uf(e);case 8:return e===pp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Os(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function aw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function r2(t){var e=aw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Yc(t){t._valueTracker||(t._valueTracker=r2(t))}function ow(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=aw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function zu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function $f(t,e){var n=e.checked;return Qe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Qx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Os(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lw(t,e){e=e.checked,e!=null&&mp(t,"checked",e,!1)}function Bf(t,e){lw(t,e);var n=Os(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zf(t,e.type,n):e.hasOwnProperty("defaultValue")&&zf(t,e.type,Os(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Xx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function zf(t,e,n){(e!=="number"||zu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Jo=Array.isArray;function Ia(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Os(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(G(91));return Qe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(G(92));if(Jo(n)){if(1<n.length)throw Error(G(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Os(n)}}function cw(t,e){var n=Os(e.value),r=Os(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Jx(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jc,dw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Jc=Jc||document.createElement("div"),Jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function kl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ol={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s2=["Webkit","ms","Moz","O"];Object.keys(ol).forEach(function(t){s2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ol[e]=ol[t]})});function hw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ol.hasOwnProperty(t)&&ol[t]?(""+e).trim():e+"px"}function fw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=hw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var i2=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wf(t,e){if(e){if(i2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(G(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(G(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(G(61))}if(e.style!=null&&typeof e.style!="object")throw Error(G(62))}}function Kf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gf=null;function yp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qf=null,Sa=null,Ca=null;function Zx(t){if(t=oc(t)){if(typeof Qf!="function")throw Error(G(280));var e=t.stateNode;e&&(e=Ud(e),Qf(t.stateNode,t.type,e))}}function mw(t){Sa?Ca?Ca.push(t):Ca=[t]:Sa=t}function pw(){if(Sa){var t=Sa,e=Ca;if(Ca=Sa=null,Zx(t),e)for(t=0;t<e.length;t++)Zx(e[t])}}function gw(t,e){return t(e)}function xw(){}var Uh=!1;function yw(t,e,n){if(Uh)return t(e,n);Uh=!0;try{return gw(t,e,n)}finally{Uh=!1,(Sa!==null||Ca!==null)&&(xw(),pw())}}function Tl(t,e){var n=t.stateNode;if(n===null)return null;var r=Ud(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(G(231,e,typeof n));return n}var Xf=!1;if(Wr)try{var $o={};Object.defineProperty($o,"passive",{get:function(){Xf=!0}}),window.addEventListener("test",$o,$o),window.removeEventListener("test",$o,$o)}catch{Xf=!1}function a2(t,e,n,r,s,a,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ll=!1,qu=null,Hu=!1,Yf=null,o2={onError:function(t){ll=!0,qu=t}};function l2(t,e,n,r,s,a,o,c,u){ll=!1,qu=null,a2.apply(o2,arguments)}function c2(t,e,n,r,s,a,o,c,u){if(l2.apply(this,arguments),ll){if(ll){var d=qu;ll=!1,qu=null}else throw Error(G(198));Hu||(Hu=!0,Yf=d)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function e0(t){if(Mi(t)!==t)throw Error(G(188))}function u2(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(G(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return e0(s),t;if(a===r)return e0(s),e;a=a.sibling}throw Error(G(188))}if(n.return!==r.return)n=s,r=a;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=a;break}if(c===r){o=!0,r=s,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=s;break}if(c===r){o=!0,r=a,n=s;break}c=c.sibling}if(!o)throw Error(G(189))}}if(n.alternate!==r)throw Error(G(190))}if(n.tag!==3)throw Error(G(188));return n.stateNode.current===n?t:e}function ww(t){return t=u2(t),t!==null?_w(t):null}function _w(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=_w(t);if(e!==null)return e;t=t.sibling}return null}var bw=_n.unstable_scheduleCallback,t0=_n.unstable_cancelCallback,d2=_n.unstable_shouldYield,h2=_n.unstable_requestPaint,rt=_n.unstable_now,f2=_n.unstable_getCurrentPriorityLevel,vp=_n.unstable_ImmediatePriority,Nw=_n.unstable_UserBlockingPriority,Wu=_n.unstable_NormalPriority,m2=_n.unstable_LowPriority,jw=_n.unstable_IdlePriority,Od=null,mr=null;function p2(t){if(mr&&typeof mr.onCommitFiberRoot=="function")try{mr.onCommitFiberRoot(Od,t,void 0,(t.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:y2,g2=Math.log,x2=Math.LN2;function y2(t){return t>>>=0,t===0?32:31-(g2(t)/x2|0)|0}var Zc=64,eu=4194304;function Zo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ku(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,a=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Zo(c):(a&=o,a!==0&&(r=Zo(a)))}else o=n&~s,o!==0?r=Zo(o):a!==0&&(r=Zo(a));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jn(e),s=1<<n,r|=t[n],e&=~s;return r}function v2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function w2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Jn(a),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=v2(c,e)):u<=e&&(t.expiredLanes|=c),a&=~c}}function Jf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ew(){var t=Zc;return Zc<<=1,!(Zc&4194240)&&(Zc=64),t}function $h(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ic(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jn(e),t[e]=n}function _2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Jn(n),a=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~a}}function wp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Te=0;function kw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Tw,_p,Iw,Sw,Cw,Zf=!1,tu=[],Es=null,ks=null,Ts=null,Il=new Map,Sl=new Map,ps=[],b2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function n0(t,e){switch(t){case"focusin":case"focusout":Es=null;break;case"dragenter":case"dragleave":ks=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Il.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sl.delete(e.pointerId)}}function Bo(t,e,n,r,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},e!==null&&(e=oc(e),e!==null&&_p(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function N2(t,e,n,r,s){switch(e){case"focusin":return Es=Bo(Es,t,e,n,r,s),!0;case"dragenter":return ks=Bo(ks,t,e,n,r,s),!0;case"mouseover":return Ts=Bo(Ts,t,e,n,r,s),!0;case"pointerover":var a=s.pointerId;return Il.set(a,Bo(Il.get(a)||null,t,e,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,Sl.set(a,Bo(Sl.get(a)||null,t,e,n,r,s)),!0}return!1}function Aw(t){var e=di(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=vw(n),e!==null){t.blockedOn=e,Cw(t.priority,function(){Iw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ju(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=em(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Gf=r,n.target.dispatchEvent(r),Gf=null}else return e=oc(n),e!==null&&_p(e),t.blockedOn=n,!1;e.shift()}return!0}function r0(t,e,n){ju(t)&&n.delete(e)}function j2(){Zf=!1,Es!==null&&ju(Es)&&(Es=null),ks!==null&&ju(ks)&&(ks=null),Ts!==null&&ju(Ts)&&(Ts=null),Il.forEach(r0),Sl.forEach(r0)}function zo(t,e){t.blockedOn===e&&(t.blockedOn=null,Zf||(Zf=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,j2)))}function Cl(t){function e(s){return zo(s,t)}if(0<tu.length){zo(tu[0],t);for(var n=1;n<tu.length;n++){var r=tu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Es!==null&&zo(Es,t),ks!==null&&zo(ks,t),Ts!==null&&zo(Ts,t),Il.forEach(e),Sl.forEach(e),n=0;n<ps.length;n++)r=ps[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ps.length&&(n=ps[0],n.blockedOn===null);)Aw(n),n.blockedOn===null&&ps.shift()}var Aa=ts.ReactCurrentBatchConfig,Gu=!0;function E2(t,e,n,r){var s=Te,a=Aa.transition;Aa.transition=null;try{Te=1,bp(t,e,n,r)}finally{Te=s,Aa.transition=a}}function k2(t,e,n,r){var s=Te,a=Aa.transition;Aa.transition=null;try{Te=4,bp(t,e,n,r)}finally{Te=s,Aa.transition=a}}function bp(t,e,n,r){if(Gu){var s=em(t,e,n,r);if(s===null)Yh(t,e,r,Qu,n),n0(t,r);else if(N2(s,t,e,n,r))r.stopPropagation();else if(n0(t,r),e&4&&-1<b2.indexOf(t)){for(;s!==null;){var a=oc(s);if(a!==null&&Tw(a),a=em(t,e,n,r),a===null&&Yh(t,e,r,Qu,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else Yh(t,e,r,null,n)}}var Qu=null;function em(t,e,n,r){if(Qu=null,t=yp(r),t=di(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qu=t,null}function Rw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f2()){case vp:return 1;case Nw:return 4;case Wu:case m2:return 16;case jw:return 536870912;default:return 16}default:return 16}}var _s=null,Np=null,Eu=null;function Pw(){if(Eu)return Eu;var t,e=Np,n=e.length,r,s="value"in _s?_s.value:_s.textContent,a=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[a-r];r++);return Eu=s.slice(t,1<r?1-r:void 0)}function ku(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function nu(){return!0}function s0(){return!1}function jn(t){function e(n,r,s,a,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?nu:s0,this.isPropagationStopped=s0,this}return Qe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=nu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=nu)},persist:function(){},isPersistent:nu}),e}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jp=jn(to),ac=Qe({},to,{view:0,detail:0}),T2=jn(ac),Bh,zh,qo,Md=Qe({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ep,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qo&&(qo&&t.type==="mousemove"?(Bh=t.screenX-qo.screenX,zh=t.screenY-qo.screenY):zh=Bh=0,qo=t),Bh)},movementY:function(t){return"movementY"in t?t.movementY:zh}}),i0=jn(Md),I2=Qe({},Md,{dataTransfer:0}),S2=jn(I2),C2=Qe({},ac,{relatedTarget:0}),qh=jn(C2),A2=Qe({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),R2=jn(A2),P2=Qe({},to,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),D2=jn(P2),L2=Qe({},to,{data:0}),a0=jn(L2),O2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},M2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},V2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function F2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=V2[t])?!!e[t]:!1}function Ep(){return F2}var U2=Qe({},ac,{key:function(t){if(t.key){var e=O2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ku(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?M2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ep,charCode:function(t){return t.type==="keypress"?ku(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ku(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),$2=jn(U2),B2=Qe({},Md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),o0=jn(B2),z2=Qe({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ep}),q2=jn(z2),H2=Qe({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),W2=jn(H2),K2=Qe({},Md,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G2=jn(K2),Q2=[9,13,27,32],kp=Wr&&"CompositionEvent"in window,cl=null;Wr&&"documentMode"in document&&(cl=document.documentMode);var X2=Wr&&"TextEvent"in window&&!cl,Dw=Wr&&(!kp||cl&&8<cl&&11>=cl),l0=" ",c0=!1;function Lw(t,e){switch(t){case"keyup":return Q2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ow(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ga=!1;function Y2(t,e){switch(t){case"compositionend":return Ow(e);case"keypress":return e.which!==32?null:(c0=!0,l0);case"textInput":return t=e.data,t===l0&&c0?null:t;default:return null}}function J2(t,e){if(ga)return t==="compositionend"||!kp&&Lw(t,e)?(t=Pw(),Eu=Np=_s=null,ga=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Dw&&e.locale!=="ko"?null:e.data;default:return null}}var Z2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Z2[t.type]:e==="textarea"}function Mw(t,e,n,r){mw(r),e=Xu(e,"onChange"),0<e.length&&(n=new jp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ul=null,Al=null;function eE(t){Gw(t,0)}function Vd(t){var e=va(t);if(ow(e))return t}function tE(t,e){if(t==="change")return e}var Vw=!1;if(Wr){var Hh;if(Wr){var Wh="oninput"in document;if(!Wh){var d0=document.createElement("div");d0.setAttribute("oninput","return;"),Wh=typeof d0.oninput=="function"}Hh=Wh}else Hh=!1;Vw=Hh&&(!document.documentMode||9<document.documentMode)}function h0(){ul&&(ul.detachEvent("onpropertychange",Fw),Al=ul=null)}function Fw(t){if(t.propertyName==="value"&&Vd(Al)){var e=[];Mw(e,Al,t,yp(t)),yw(eE,e)}}function nE(t,e,n){t==="focusin"?(h0(),ul=e,Al=n,ul.attachEvent("onpropertychange",Fw)):t==="focusout"&&h0()}function rE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vd(Al)}function sE(t,e){if(t==="click")return Vd(e)}function iE(t,e){if(t==="input"||t==="change")return Vd(e)}function aE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:aE;function Rl(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Of.call(e,s)||!rr(t[s],e[s]))return!1}return!0}function f0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function m0(t,e){var n=f0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=f0(n)}}function Uw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Uw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $w(){for(var t=window,e=zu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=zu(t.document)}return e}function Tp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oE(t){var e=$w(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Uw(n.ownerDocument.documentElement,n)){if(r!==null&&Tp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!t.extend&&a>r&&(s=r,r=a,a=s),s=m0(n,a);var o=m0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lE=Wr&&"documentMode"in document&&11>=document.documentMode,xa=null,tm=null,dl=null,nm=!1;function p0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nm||xa==null||xa!==zu(r)||(r=xa,"selectionStart"in r&&Tp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dl&&Rl(dl,r)||(dl=r,r=Xu(tm,"onSelect"),0<r.length&&(e=new jp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=xa)))}function ru(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ya={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},Kh={},Bw={};Wr&&(Bw=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);function Fd(t){if(Kh[t])return Kh[t];if(!ya[t])return t;var e=ya[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Bw)return Kh[t]=e[n];return t}var zw=Fd("animationend"),qw=Fd("animationiteration"),Hw=Fd("animationstart"),Ww=Fd("transitionend"),Kw=new Map,g0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zs(t,e){Kw.set(t,e),Oi(e,[t])}for(var Gh=0;Gh<g0.length;Gh++){var Qh=g0[Gh],cE=Qh.toLowerCase(),uE=Qh[0].toUpperCase()+Qh.slice(1);zs(cE,"on"+uE)}zs(zw,"onAnimationEnd");zs(qw,"onAnimationIteration");zs(Hw,"onAnimationStart");zs("dblclick","onDoubleClick");zs("focusin","onFocus");zs("focusout","onBlur");zs(Ww,"onTransitionEnd");Va("onMouseEnter",["mouseout","mouseover"]);Va("onMouseLeave",["mouseout","mouseover"]);Va("onPointerEnter",["pointerout","pointerover"]);Va("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var el="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dE=new Set("cancel close invalid load scroll toggle".split(" ").concat(el));function x0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,c2(r,e,void 0,t),t.currentTarget=null}function Gw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var a=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==a&&s.isPropagationStopped())break e;x0(s,c,d),a=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==a&&s.isPropagationStopped())break e;x0(s,c,d),a=u}}}if(Hu)throw t=Yf,Hu=!1,Yf=null,t}function Fe(t,e){var n=e[om];n===void 0&&(n=e[om]=new Set);var r=t+"__bubble";n.has(r)||(Qw(e,t,2,!1),n.add(r))}function Xh(t,e,n){var r=0;e&&(r|=4),Qw(n,t,r,e)}var su="_reactListening"+Math.random().toString(36).slice(2);function Pl(t){if(!t[su]){t[su]=!0,nw.forEach(function(n){n!=="selectionchange"&&(dE.has(n)||Xh(n,!1,t),Xh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[su]||(e[su]=!0,Xh("selectionchange",!1,e))}}function Qw(t,e,n,r){switch(Rw(e)){case 1:var s=E2;break;case 4:s=k2;break;default:s=bp}n=s.bind(null,e,n,t),s=void 0,!Xf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yh(t,e,n,r,s){var a=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=di(c),o===null)return;if(u=o.tag,u===5||u===6){r=a=o;continue e}c=c.parentNode}}r=r.return}yw(function(){var d=a,h=yp(n),m=[];e:{var p=Kw.get(t);if(p!==void 0){var v=jp,_=t;switch(t){case"keypress":if(ku(n)===0)break e;case"keydown":case"keyup":v=$2;break;case"focusin":_="focus",v=qh;break;case"focusout":_="blur",v=qh;break;case"beforeblur":case"afterblur":v=qh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=i0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=S2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=q2;break;case zw:case qw:case Hw:v=R2;break;case Ww:v=W2;break;case"scroll":v=T2;break;case"wheel":v=G2;break;case"copy":case"cut":case"paste":v=D2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=o0}var R=(e&4)!==0,T=!R&&t==="scroll",b=R?p!==null?p+"Capture":null:p;R=[];for(var w=d,y;w!==null;){y=w;var N=y.stateNode;if(y.tag===5&&N!==null&&(y=N,b!==null&&(N=Tl(w,b),N!=null&&R.push(Dl(w,N,y)))),T)break;w=w.return}0<R.length&&(p=new v(p,_,null,n,h),m.push({event:p,listeners:R}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",p&&n!==Gf&&(_=n.relatedTarget||n.fromElement)&&(di(_)||_[Kr]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(_=n.relatedTarget||n.toElement,v=d,_=_?di(_):null,_!==null&&(T=Mi(_),_!==T||_.tag!==5&&_.tag!==6)&&(_=null)):(v=null,_=d),v!==_)){if(R=i0,N="onMouseLeave",b="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(R=o0,N="onPointerLeave",b="onPointerEnter",w="pointer"),T=v==null?p:va(v),y=_==null?p:va(_),p=new R(N,w+"leave",v,n,h),p.target=T,p.relatedTarget=y,N=null,di(h)===d&&(R=new R(b,w+"enter",_,n,h),R.target=y,R.relatedTarget=T,N=R),T=N,v&&_)t:{for(R=v,b=_,w=0,y=R;y;y=ca(y))w++;for(y=0,N=b;N;N=ca(N))y++;for(;0<w-y;)R=ca(R),w--;for(;0<y-w;)b=ca(b),y--;for(;w--;){if(R===b||b!==null&&R===b.alternate)break t;R=ca(R),b=ca(b)}R=null}else R=null;v!==null&&y0(m,p,v,R,!1),_!==null&&T!==null&&y0(m,T,_,R,!0)}}e:{if(p=d?va(d):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var A=tE;else if(u0(p))if(Vw)A=iE;else{A=rE;var O=nE}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(A=sE);if(A&&(A=A(t,d))){Mw(m,A,n,h);break e}O&&O(t,p,d),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&zf(p,"number",p.value)}switch(O=d?va(d):window,t){case"focusin":(u0(O)||O.contentEditable==="true")&&(xa=O,tm=d,dl=null);break;case"focusout":dl=tm=xa=null;break;case"mousedown":nm=!0;break;case"contextmenu":case"mouseup":case"dragend":nm=!1,p0(m,n,h);break;case"selectionchange":if(lE)break;case"keydown":case"keyup":p0(m,n,h)}var j;if(kp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ga?Lw(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(Dw&&n.locale!=="ko"&&(ga||x!=="onCompositionStart"?x==="onCompositionEnd"&&ga&&(j=Pw()):(_s=h,Np="value"in _s?_s.value:_s.textContent,ga=!0)),O=Xu(d,x),0<O.length&&(x=new a0(x,t,null,n,h),m.push({event:x,listeners:O}),j?x.data=j:(j=Ow(n),j!==null&&(x.data=j)))),(j=X2?Y2(t,n):J2(t,n))&&(d=Xu(d,"onBeforeInput"),0<d.length&&(h=new a0("onBeforeInput","beforeinput",null,n,h),m.push({event:h,listeners:d}),h.data=j))}Gw(m,e)})}function Dl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=Tl(t,n),a!=null&&r.unshift(Dl(t,a,s)),a=Tl(t,e),a!=null&&r.push(Dl(t,a,s))),t=t.return}return r}function ca(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function y0(t,e,n,r,s){for(var a=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=Tl(n,a),u!=null&&o.unshift(Dl(n,u,c))):s||(u=Tl(n,a),u!=null&&o.push(Dl(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var hE=/\r\n?/g,fE=/\u0000|\uFFFD/g;function v0(t){return(typeof t=="string"?t:""+t).replace(hE,`
`).replace(fE,"")}function iu(t,e,n){if(e=v0(e),v0(t)!==e&&n)throw Error(G(425))}function Yu(){}var rm=null,sm=null;function im(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var am=typeof setTimeout=="function"?setTimeout:void 0,mE=typeof clearTimeout=="function"?clearTimeout:void 0,w0=typeof Promise=="function"?Promise:void 0,pE=typeof queueMicrotask=="function"?queueMicrotask:typeof w0<"u"?function(t){return w0.resolve(null).then(t).catch(gE)}:am;function gE(t){setTimeout(function(){throw t})}function Jh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Cl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Cl(e)}function Is(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var no=Math.random().toString(36).slice(2),hr="__reactFiber$"+no,Ll="__reactProps$"+no,Kr="__reactContainer$"+no,om="__reactEvents$"+no,xE="__reactListeners$"+no,yE="__reactHandles$"+no;function di(t){var e=t[hr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kr]||n[hr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_0(t);t!==null;){if(n=t[hr])return n;t=_0(t)}return e}t=n,n=t.parentNode}return null}function oc(t){return t=t[hr]||t[Kr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function va(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(G(33))}function Ud(t){return t[Ll]||null}var lm=[],wa=-1;function qs(t){return{current:t}}function Be(t){0>wa||(t.current=lm[wa],lm[wa]=null,wa--)}function Oe(t,e){wa++,lm[wa]=t.current,t.current=e}var Ms={},zt=qs(Ms),nn=qs(!1),bi=Ms;function Fa(t,e){var n=t.type.contextTypes;if(!n)return Ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=e[a];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function rn(t){return t=t.childContextTypes,t!=null}function Ju(){Be(nn),Be(zt)}function b0(t,e,n){if(zt.current!==Ms)throw Error(G(168));Oe(zt,e),Oe(nn,n)}function Xw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(G(108,n2(t)||"Unknown",s));return Qe({},n,r)}function Zu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ms,bi=zt.current,Oe(zt,t),Oe(nn,nn.current),!0}function N0(t,e,n){var r=t.stateNode;if(!r)throw Error(G(169));n?(t=Xw(t,e,bi),r.__reactInternalMemoizedMergedChildContext=t,Be(nn),Be(zt),Oe(zt,t)):Be(nn),Oe(nn,n)}var Pr=null,$d=!1,Zh=!1;function Yw(t){Pr===null?Pr=[t]:Pr.push(t)}function vE(t){$d=!0,Yw(t)}function Hs(){if(!Zh&&Pr!==null){Zh=!0;var t=0,e=Te;try{var n=Pr;for(Te=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,$d=!1}catch(s){throw Pr!==null&&(Pr=Pr.slice(t+1)),bw(vp,Hs),s}finally{Te=e,Zh=!1}}return null}var _a=[],ba=0,ed=null,td=0,Sn=[],Cn=0,Ni=null,Or=1,Mr="";function oi(t,e){_a[ba++]=td,_a[ba++]=ed,ed=t,td=e}function Jw(t,e,n){Sn[Cn++]=Or,Sn[Cn++]=Mr,Sn[Cn++]=Ni,Ni=t;var r=Or;t=Mr;var s=32-Jn(r)-1;r&=~(1<<s),n+=1;var a=32-Jn(e)+s;if(30<a){var o=s-s%5;a=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Or=1<<32-Jn(e)+s|n<<s|r,Mr=a+t}else Or=1<<a|n<<s|r,Mr=t}function Ip(t){t.return!==null&&(oi(t,1),Jw(t,1,0))}function Sp(t){for(;t===ed;)ed=_a[--ba],_a[ba]=null,td=_a[--ba],_a[ba]=null;for(;t===Ni;)Ni=Sn[--Cn],Sn[Cn]=null,Mr=Sn[--Cn],Sn[Cn]=null,Or=Sn[--Cn],Sn[Cn]=null}var vn=null,gn=null,He=!1,Qn=null;function Zw(t,e){var n=Rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function j0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,gn=Is(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ni!==null?{id:Or,overflow:Mr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,gn=null,!0):!1;default:return!1}}function cm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function um(t){if(He){var e=gn;if(e){var n=e;if(!j0(t,e)){if(cm(t))throw Error(G(418));e=Is(n.nextSibling);var r=vn;e&&j0(t,e)?Zw(r,n):(t.flags=t.flags&-4097|2,He=!1,vn=t)}}else{if(cm(t))throw Error(G(418));t.flags=t.flags&-4097|2,He=!1,vn=t}}}function E0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function au(t){if(t!==vn)return!1;if(!He)return E0(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!im(t.type,t.memoizedProps)),e&&(e=gn)){if(cm(t))throw e_(),Error(G(418));for(;e;)Zw(t,e),e=Is(e.nextSibling)}if(E0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(G(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=Is(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=vn?Is(t.stateNode.nextSibling):null;return!0}function e_(){for(var t=gn;t;)t=Is(t.nextSibling)}function Ua(){gn=vn=null,He=!1}function Cp(t){Qn===null?Qn=[t]:Qn.push(t)}var wE=ts.ReactCurrentBatchConfig;function Ho(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(G(309));var r=n.stateNode}if(!r)throw Error(G(147,t));var s=r,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var c=s.refs;o===null?delete c[a]:c[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(G(284));if(!n._owner)throw Error(G(290,t))}return t}function ou(t,e){throw t=Object.prototype.toString.call(e),Error(G(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function k0(t){var e=t._init;return e(t._payload)}function t_(t){function e(b,w){if(t){var y=b.deletions;y===null?(b.deletions=[w],b.flags|=16):y.push(w)}}function n(b,w){if(!t)return null;for(;w!==null;)e(b,w),w=w.sibling;return null}function r(b,w){for(b=new Map;w!==null;)w.key!==null?b.set(w.key,w):b.set(w.index,w),w=w.sibling;return b}function s(b,w){return b=Rs(b,w),b.index=0,b.sibling=null,b}function a(b,w,y){return b.index=y,t?(y=b.alternate,y!==null?(y=y.index,y<w?(b.flags|=2,w):y):(b.flags|=2,w)):(b.flags|=1048576,w)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function c(b,w,y,N){return w===null||w.tag!==6?(w=of(y,b.mode,N),w.return=b,w):(w=s(w,y),w.return=b,w)}function u(b,w,y,N){var A=y.type;return A===pa?h(b,w,y.props.children,N,y.key):w!==null&&(w.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===fs&&k0(A)===w.type)?(N=s(w,y.props),N.ref=Ho(b,w,y),N.return=b,N):(N=Pu(y.type,y.key,y.props,null,b.mode,N),N.ref=Ho(b,w,y),N.return=b,N)}function d(b,w,y,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=lf(y,b.mode,N),w.return=b,w):(w=s(w,y.children||[]),w.return=b,w)}function h(b,w,y,N,A){return w===null||w.tag!==7?(w=xi(y,b.mode,N,A),w.return=b,w):(w=s(w,y),w.return=b,w)}function m(b,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=of(""+w,b.mode,y),w.return=b,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xc:return y=Pu(w.type,w.key,w.props,null,b.mode,y),y.ref=Ho(b,null,w),y.return=b,y;case ma:return w=lf(w,b.mode,y),w.return=b,w;case fs:var N=w._init;return m(b,N(w._payload),y)}if(Jo(w)||Uo(w))return w=xi(w,b.mode,y,null),w.return=b,w;ou(b,w)}return null}function p(b,w,y,N){var A=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return A!==null?null:c(b,w,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Xc:return y.key===A?u(b,w,y,N):null;case ma:return y.key===A?d(b,w,y,N):null;case fs:return A=y._init,p(b,w,A(y._payload),N)}if(Jo(y)||Uo(y))return A!==null?null:h(b,w,y,N,null);ou(b,y)}return null}function v(b,w,y,N,A){if(typeof N=="string"&&N!==""||typeof N=="number")return b=b.get(y)||null,c(w,b,""+N,A);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Xc:return b=b.get(N.key===null?y:N.key)||null,u(w,b,N,A);case ma:return b=b.get(N.key===null?y:N.key)||null,d(w,b,N,A);case fs:var O=N._init;return v(b,w,y,O(N._payload),A)}if(Jo(N)||Uo(N))return b=b.get(y)||null,h(w,b,N,A,null);ou(w,N)}return null}function _(b,w,y,N){for(var A=null,O=null,j=w,x=w=0,E=null;j!==null&&x<y.length;x++){j.index>x?(E=j,j=null):E=j.sibling;var k=p(b,j,y[x],N);if(k===null){j===null&&(j=E);break}t&&j&&k.alternate===null&&e(b,j),w=a(k,w,x),O===null?A=k:O.sibling=k,O=k,j=E}if(x===y.length)return n(b,j),He&&oi(b,x),A;if(j===null){for(;x<y.length;x++)j=m(b,y[x],N),j!==null&&(w=a(j,w,x),O===null?A=j:O.sibling=j,O=j);return He&&oi(b,x),A}for(j=r(b,j);x<y.length;x++)E=v(j,b,x,y[x],N),E!==null&&(t&&E.alternate!==null&&j.delete(E.key===null?x:E.key),w=a(E,w,x),O===null?A=E:O.sibling=E,O=E);return t&&j.forEach(function(P){return e(b,P)}),He&&oi(b,x),A}function R(b,w,y,N){var A=Uo(y);if(typeof A!="function")throw Error(G(150));if(y=A.call(y),y==null)throw Error(G(151));for(var O=A=null,j=w,x=w=0,E=null,k=y.next();j!==null&&!k.done;x++,k=y.next()){j.index>x?(E=j,j=null):E=j.sibling;var P=p(b,j,k.value,N);if(P===null){j===null&&(j=E);break}t&&j&&P.alternate===null&&e(b,j),w=a(P,w,x),O===null?A=P:O.sibling=P,O=P,j=E}if(k.done)return n(b,j),He&&oi(b,x),A;if(j===null){for(;!k.done;x++,k=y.next())k=m(b,k.value,N),k!==null&&(w=a(k,w,x),O===null?A=k:O.sibling=k,O=k);return He&&oi(b,x),A}for(j=r(b,j);!k.done;x++,k=y.next())k=v(j,b,x,k.value,N),k!==null&&(t&&k.alternate!==null&&j.delete(k.key===null?x:k.key),w=a(k,w,x),O===null?A=k:O.sibling=k,O=k);return t&&j.forEach(function(L){return e(b,L)}),He&&oi(b,x),A}function T(b,w,y,N){if(typeof y=="object"&&y!==null&&y.type===pa&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Xc:e:{for(var A=y.key,O=w;O!==null;){if(O.key===A){if(A=y.type,A===pa){if(O.tag===7){n(b,O.sibling),w=s(O,y.props.children),w.return=b,b=w;break e}}else if(O.elementType===A||typeof A=="object"&&A!==null&&A.$$typeof===fs&&k0(A)===O.type){n(b,O.sibling),w=s(O,y.props),w.ref=Ho(b,O,y),w.return=b,b=w;break e}n(b,O);break}else e(b,O);O=O.sibling}y.type===pa?(w=xi(y.props.children,b.mode,N,y.key),w.return=b,b=w):(N=Pu(y.type,y.key,y.props,null,b.mode,N),N.ref=Ho(b,w,y),N.return=b,b=N)}return o(b);case ma:e:{for(O=y.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){n(b,w.sibling),w=s(w,y.children||[]),w.return=b,b=w;break e}else{n(b,w);break}else e(b,w);w=w.sibling}w=lf(y,b.mode,N),w.return=b,b=w}return o(b);case fs:return O=y._init,T(b,w,O(y._payload),N)}if(Jo(y))return _(b,w,y,N);if(Uo(y))return R(b,w,y,N);ou(b,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(n(b,w.sibling),w=s(w,y),w.return=b,b=w):(n(b,w),w=of(y,b.mode,N),w.return=b,b=w),o(b)):n(b,w)}return T}var $a=t_(!0),n_=t_(!1),nd=qs(null),rd=null,Na=null,Ap=null;function Rp(){Ap=Na=rd=null}function Pp(t){var e=nd.current;Be(nd),t._currentValue=e}function dm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ra(t,e){rd=t,Ap=Na=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(Ap!==t)if(t={context:t,memoizedValue:e,next:null},Na===null){if(rd===null)throw Error(G(308));Na=t,rd.dependencies={lanes:0,firstContext:t}}else Na=Na.next=t;return e}var hi=null;function Dp(t){hi===null?hi=[t]:hi.push(t)}function r_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Dp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Gr(t,r)}function Gr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ms=!1;function Lp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,_e&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Gr(t,n)}return s=r.interleaved,s===null?(e.next=e,Dp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Gr(t,n)}function Tu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wp(t,n)}}function T0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?s=a=e:a=a.next=e}else s=a=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function sd(t,e,n,r){var s=t.updateQueue;ms=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,c=h.lastBaseUpdate,c!==o&&(c===null?h.firstBaseUpdate=d:c.next=d,h.lastBaseUpdate=u))}if(a!==null){var m=s.baseState;o=0,h=d=u=null,c=a;do{var p=c.lane,v=c.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var _=t,R=c;switch(p=e,v=n,R.tag){case 1:if(_=R.payload,typeof _=="function"){m=_.call(v,m,p);break e}m=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=R.payload,p=typeof _=="function"?_.call(v,m,p):_,p==null)break e;m=Qe({},m,p);break e;case 2:ms=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[c]:p.push(c))}else v={eventTime:v,lane:p,tag:c.tag,payload:c.payload,callback:c.callback,next:null},h===null?(d=h=v,u=m):h=h.next=v,o|=p;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;p=c,c=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Ei|=o,t.lanes=o,t.memoizedState=m}}function I0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(G(191,s));s.call(r)}}}var lc={},pr=qs(lc),Ol=qs(lc),Ml=qs(lc);function fi(t){if(t===lc)throw Error(G(174));return t}function Op(t,e){switch(Oe(Ml,e),Oe(Ol,t),Oe(pr,lc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hf(e,t)}Be(pr),Oe(pr,e)}function Ba(){Be(pr),Be(Ol),Be(Ml)}function i_(t){fi(Ml.current);var e=fi(pr.current),n=Hf(e,t.type);e!==n&&(Oe(Ol,t),Oe(pr,n))}function Mp(t){Ol.current===t&&(Be(pr),Be(Ol))}var Ke=qs(0);function id(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ef=[];function Vp(){for(var t=0;t<ef.length;t++)ef[t]._workInProgressVersionPrimary=null;ef.length=0}var Iu=ts.ReactCurrentDispatcher,tf=ts.ReactCurrentBatchConfig,ji=0,Ge=null,pt=null,_t=null,ad=!1,hl=!1,Vl=0,_E=0;function Lt(){throw Error(G(321))}function Fp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function Up(t,e,n,r,s,a){if(ji=a,Ge=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Iu.current=t===null||t.memoizedState===null?EE:kE,t=n(r,s),hl){a=0;do{if(hl=!1,Vl=0,25<=a)throw Error(G(301));a+=1,_t=pt=null,e.updateQueue=null,Iu.current=TE,t=n(r,s)}while(hl)}if(Iu.current=od,e=pt!==null&&pt.next!==null,ji=0,_t=pt=Ge=null,ad=!1,e)throw Error(G(300));return t}function $p(){var t=Vl!==0;return Vl=0,t}function dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?Ge.memoizedState=_t=t:_t=_t.next=t,_t}function Vn(){if(pt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=pt.next;var e=_t===null?Ge.memoizedState:_t.next;if(e!==null)_t=e,pt=t;else{if(t===null)throw Error(G(310));pt=t,t={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},_t===null?Ge.memoizedState=_t=t:_t=_t.next=t}return _t}function Fl(t,e){return typeof e=="function"?e(t):e}function nf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=pt,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var c=o=null,u=null,d=a;do{var h=d.lane;if((ji&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,o=r):u=u.next=m,Ge.lanes|=h,Ei|=h}d=d.next}while(d!==null&&d!==a);u===null?o=r:u.next=c,rr(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do a=s.lane,Ge.lanes|=a,Ei|=a,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rf(t){var e=Vn(),n=e.queue;if(n===null)throw Error(G(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,a=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);rr(a,e.memoizedState)||(tn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,r]}function a_(){}function o_(t,e){var n=Ge,r=Vn(),s=e(),a=!rr(r.memoizedState,s);if(a&&(r.memoizedState=s,tn=!0),r=r.queue,Bp(u_.bind(null,n,r,t),[t]),r.getSnapshot!==e||a||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,Ul(9,c_.bind(null,n,r,s,e),void 0,null),Nt===null)throw Error(G(349));ji&30||l_(n,e,s)}return s}function l_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function c_(t,e,n,r){e.value=n,e.getSnapshot=r,d_(e)&&h_(t)}function u_(t,e,n){return n(function(){d_(e)&&h_(t)})}function d_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function h_(t){var e=Gr(t,1);e!==null&&Zn(e,t,1,-1)}function S0(t){var e=dr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fl,lastRenderedState:t},e.queue=t,t=t.dispatch=jE.bind(null,Ge,t),[e.memoizedState,t]}function Ul(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ge.updateQueue,e===null?(e={lastEffect:null,stores:null},Ge.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function f_(){return Vn().memoizedState}function Su(t,e,n,r){var s=dr();Ge.flags|=t,s.memoizedState=Ul(1|e,n,void 0,r===void 0?null:r)}function Bd(t,e,n,r){var s=Vn();r=r===void 0?null:r;var a=void 0;if(pt!==null){var o=pt.memoizedState;if(a=o.destroy,r!==null&&Fp(r,o.deps)){s.memoizedState=Ul(e,n,a,r);return}}Ge.flags|=t,s.memoizedState=Ul(1|e,n,a,r)}function C0(t,e){return Su(8390656,8,t,e)}function Bp(t,e){return Bd(2048,8,t,e)}function m_(t,e){return Bd(4,2,t,e)}function p_(t,e){return Bd(4,4,t,e)}function g_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function x_(t,e,n){return n=n!=null?n.concat([t]):null,Bd(4,4,g_.bind(null,e,t),n)}function zp(){}function y_(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function v_(t,e){var n=Vn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Fp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function w_(t,e,n){return ji&21?(rr(n,e)||(n=Ew(),Ge.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function bE(t,e){var n=Te;Te=n!==0&&4>n?n:4,t(!0);var r=tf.transition;tf.transition={};try{t(!1),e()}finally{Te=n,tf.transition=r}}function __(){return Vn().memoizedState}function NE(t,e,n){var r=As(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},b_(t))N_(e,n);else if(n=r_(t,e,n,r),n!==null){var s=Kt();Zn(n,t,r,s),j_(n,e,r)}}function jE(t,e,n){var r=As(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(b_(t))N_(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,c=a(o,n);if(s.hasEagerState=!0,s.eagerState=c,rr(c,o)){var u=e.interleaved;u===null?(s.next=s,Dp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=r_(t,e,s,r),n!==null&&(s=Kt(),Zn(n,t,r,s),j_(n,e,r))}}function b_(t){var e=t.alternate;return t===Ge||e!==null&&e===Ge}function N_(t,e){hl=ad=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function j_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,wp(t,n)}}var od={readContext:Mn,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useInsertionEffect:Lt,useLayoutEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useMutableSource:Lt,useSyncExternalStore:Lt,useId:Lt,unstable_isNewReconciler:!1},EE={readContext:Mn,useCallback:function(t,e){return dr().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:C0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Su(4194308,4,g_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Su(4194308,4,t,e)},useInsertionEffect:function(t,e){return Su(4,2,t,e)},useMemo:function(t,e){var n=dr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=dr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=NE.bind(null,Ge,t),[r.memoizedState,t]},useRef:function(t){var e=dr();return t={current:t},e.memoizedState=t},useState:S0,useDebugValue:zp,useDeferredValue:function(t){return dr().memoizedState=t},useTransition:function(){var t=S0(!1),e=t[0];return t=bE.bind(null,t[1]),dr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ge,s=dr();if(He){if(n===void 0)throw Error(G(407));n=n()}else{if(n=e(),Nt===null)throw Error(G(349));ji&30||l_(r,e,n)}s.memoizedState=n;var a={value:n,getSnapshot:e};return s.queue=a,C0(u_.bind(null,r,a,t),[t]),r.flags|=2048,Ul(9,c_.bind(null,r,a,n,e),void 0,null),n},useId:function(){var t=dr(),e=Nt.identifierPrefix;if(He){var n=Mr,r=Or;n=(r&~(1<<32-Jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_E++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kE={readContext:Mn,useCallback:y_,useContext:Mn,useEffect:Bp,useImperativeHandle:x_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:v_,useReducer:nf,useRef:f_,useState:function(){return nf(Fl)},useDebugValue:zp,useDeferredValue:function(t){var e=Vn();return w_(e,pt.memoizedState,t)},useTransition:function(){var t=nf(Fl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:o_,useId:__,unstable_isNewReconciler:!1},TE={readContext:Mn,useCallback:y_,useContext:Mn,useEffect:Bp,useImperativeHandle:x_,useInsertionEffect:m_,useLayoutEffect:p_,useMemo:v_,useReducer:rf,useRef:f_,useState:function(){return rf(Fl)},useDebugValue:zp,useDeferredValue:function(t){var e=Vn();return pt===null?e.memoizedState=t:w_(e,pt.memoizedState,t)},useTransition:function(){var t=rf(Fl)[0],e=Vn().memoizedState;return[t,e]},useMutableSource:a_,useSyncExternalStore:o_,useId:__,unstable_isNewReconciler:!1};function Kn(t,e){if(t&&t.defaultProps){e=Qe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Qe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zd={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=As(t),a=$r(r,s);a.payload=e,n!=null&&(a.callback=n),e=Ss(t,a,s),e!==null&&(Zn(e,t,s,r),Tu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Kt(),s=As(t),a=$r(r,s);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Ss(t,a,s),e!==null&&(Zn(e,t,s,r),Tu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Kt(),r=As(t),s=$r(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ss(t,s,r),e!==null&&(Zn(e,t,r,n),Tu(e,t,r))}};function A0(t,e,n,r,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,a,o):e.prototype&&e.prototype.isPureReactComponent?!Rl(n,r)||!Rl(s,a):!0}function E_(t,e,n){var r=!1,s=Ms,a=e.contextType;return typeof a=="object"&&a!==null?a=Mn(a):(s=rn(e)?bi:zt.current,r=e.contextTypes,a=(r=r!=null)?Fa(t,s):Ms),e=new e(n,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function R0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zd.enqueueReplaceState(e,e.state,null)}function fm(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Lp(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Mn(a):(a=rn(e)?bi:zt.current,s.context=Fa(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(hm(t,e,a,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&zd.enqueueReplaceState(s,s.state,null),sd(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function za(t,e){try{var n="",r=e;do n+=t2(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function sf(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IE=typeof WeakMap=="function"?WeakMap:Map;function k_(t,e,n){n=$r(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){cd||(cd=!0,jm=r),mm(t,e)},n}function T_(t,e,n){n=$r(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){mm(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){mm(t,e),typeof r!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function P0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new IE;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=BE.bind(null,t,e,n),e.then(t,t))}function D0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function L0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$r(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var SE=ts.ReactCurrentOwner,tn=!1;function Wt(t,e,n,r){e.child=t===null?n_(e,null,n,r):$a(e,t.child,n,r)}function O0(t,e,n,r,s){n=n.render;var a=e.ref;return Ra(e,s),r=Up(t,e,n,r,a,s),n=$p(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qr(t,e,s)):(He&&n&&Ip(e),e.flags|=1,Wt(t,e,r,s),e.child)}function M0(t,e,n,r,s){if(t===null){var a=n.type;return typeof a=="function"&&!Yp(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,I_(t,e,a,r,s)):(t=Pu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Rl,n(o,r)&&t.ref===e.ref)return Qr(t,e,s)}return e.flags|=1,t=Rs(a,r),t.ref=e.ref,t.return=e,e.child=t}function I_(t,e,n,r,s){if(t!==null){var a=t.memoizedProps;if(Rl(a,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=a,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,Qr(t,e,s)}return pm(t,e,n,r,s)}function S_(t,e,n){var r=e.pendingProps,s=r.children,a=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(Ea,hn),hn|=n;else{if(!(n&1073741824))return t=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Oe(Ea,hn),hn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Oe(Ea,hn),hn|=r}else a!==null?(r=a.baseLanes|n,e.memoizedState=null):r=n,Oe(Ea,hn),hn|=r;return Wt(t,e,s,n),e.child}function C_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function pm(t,e,n,r,s){var a=rn(n)?bi:zt.current;return a=Fa(e,a),Ra(e,s),n=Up(t,e,n,r,a,s),r=$p(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Qr(t,e,s)):(He&&r&&Ip(e),e.flags|=1,Wt(t,e,n,s),e.child)}function V0(t,e,n,r,s){if(rn(n)){var a=!0;Zu(e)}else a=!1;if(Ra(e,s),e.stateNode===null)Cu(t,e),E_(e,n,r),fm(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Mn(d):(d=rn(n)?bi:zt.current,d=Fa(e,d));var h=n.getDerivedStateFromProps,m=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&R0(e,o,r,d),ms=!1;var p=e.memoizedState;o.state=p,sd(e,r,o,s),u=e.memoizedState,c!==r||p!==u||nn.current||ms?(typeof h=="function"&&(hm(e,n,h,r),u=e.memoizedState),(c=ms||A0(e,n,c,r,p,u,d))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,s_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Kn(e.type,c),o.props=d,m=e.pendingProps,p=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Mn(u):(u=rn(n)?bi:zt.current,u=Fa(e,u));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||p!==u)&&R0(e,o,r,u),ms=!1,p=e.memoizedState,o.state=p,sd(e,r,o,s);var _=e.memoizedState;c!==m||p!==_||nn.current||ms?(typeof v=="function"&&(hm(e,n,v,r),_=e.memoizedState),(d=ms||A0(e,n,d,r,p,_,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return gm(t,e,n,r,a,s)}function gm(t,e,n,r,s,a){C_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&N0(e,n,!1),Qr(t,e,a);r=e.stateNode,SE.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=$a(e,t.child,null,a),e.child=$a(e,null,c,a)):Wt(t,e,c,a),e.memoizedState=r.state,s&&N0(e,n,!0),e.child}function A_(t){var e=t.stateNode;e.pendingContext?b0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&b0(t,e.context,!1),Op(t,e.containerInfo)}function F0(t,e,n,r,s){return Ua(),Cp(s),e.flags|=256,Wt(t,e,n,r),e.child}var xm={dehydrated:null,treeContext:null,retryLane:0};function ym(t){return{baseLanes:t,cachePool:null,transitions:null}}function R_(t,e,n){var r=e.pendingProps,s=Ke.current,a=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Oe(Ke,s&1),t===null)return um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,a?(r=e.mode,a=e.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=Wd(o,r,0,null),t=xi(t,r,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=ym(n),e.memoizedState=xm,t):qp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return CE(t,e,o,r,c,s,n);if(a){a=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Rs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?a=Rs(c,a):(a=xi(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,r=a,a=e.child,o=t.child.memoizedState,o=o===null?ym(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~n,e.memoizedState=xm,r}return a=t.child,t=a.sibling,r=Rs(a,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qp(t,e){return e=Wd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function lu(t,e,n,r){return r!==null&&Cp(r),$a(e,t.child,null,n),t=qp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function CE(t,e,n,r,s,a,o){if(n)return e.flags&256?(e.flags&=-257,r=sf(Error(G(422))),lu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=r.fallback,s=e.mode,r=Wd({mode:"visible",children:r.children},s,0,null),a=xi(a,s,o,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,e.mode&1&&$a(e,t.child,null,o),e.child.memoizedState=ym(o),e.memoizedState=xm,a);if(!(e.mode&1))return lu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(G(419)),r=sf(a,r,void 0),lu(t,e,o,r)}if(c=(o&t.childLanes)!==0,tn||c){if(r=Nt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Gr(t,s),Zn(r,t,s,-1))}return Xp(),r=sf(Error(G(421))),lu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=zE.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,gn=Is(s.nextSibling),vn=e,He=!0,Qn=null,t!==null&&(Sn[Cn++]=Or,Sn[Cn++]=Mr,Sn[Cn++]=Ni,Or=t.id,Mr=t.overflow,Ni=e),e=qp(e,r.children),e.flags|=4096,e)}function U0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),dm(t.return,e,n)}function af(t,e,n,r,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function P_(t,e,n){var r=e.pendingProps,s=r.revealOrder,a=r.tail;if(Wt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&U0(t,n,e);else if(t.tag===19)U0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Oe(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&id(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),af(e,!1,s,n,a);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&id(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}af(e,!0,n,null,a);break;case"together":af(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Cu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Qr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(G(153));if(e.child!==null){for(t=e.child,n=Rs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AE(t,e,n){switch(e.tag){case 3:A_(e),Ua();break;case 5:i_(e);break;case 1:rn(e.type)&&Zu(e);break;case 4:Op(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Oe(nd,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Oe(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?R_(t,e,n):(Oe(Ke,Ke.current&1),t=Qr(t,e,n),t!==null?t.sibling:null);Oe(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return P_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Oe(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,S_(t,e,n)}return Qr(t,e,n)}var D_,vm,L_,O_;D_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vm=function(){};L_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,fi(pr.current);var a=null;switch(n){case"input":s=$f(t,s),r=$f(t,r),a=[];break;case"select":s=Qe({},s,{value:void 0}),r=Qe({},r,{value:void 0}),a=[];break;case"textarea":s=qf(t,s),r=qf(t,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yu)}Wf(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(El.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(El.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Fe("scroll",t),a||c===u||(a=[])):(a=a||[]).push(d,u))}n&&(a=a||[]).push("style",n);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};O_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wo(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RE(t,e,n){var r=e.pendingProps;switch(Sp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(e),null;case 1:return rn(e.type)&&Ju(),Ot(e),null;case 3:return r=e.stateNode,Ba(),Be(nn),Be(zt),Vp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(au(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Qn!==null&&(Tm(Qn),Qn=null))),vm(t,e),Ot(e),null;case 5:Mp(e);var s=fi(Ml.current);if(n=e.type,t!==null&&e.stateNode!=null)L_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(G(166));return Ot(e),null}if(t=fi(pr.current),au(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[hr]=e,r[Ll]=a,t=(e.mode&1)!==0,n){case"dialog":Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":case"embed":Fe("load",r);break;case"video":case"audio":for(s=0;s<el.length;s++)Fe(el[s],r);break;case"source":Fe("error",r);break;case"img":case"image":case"link":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"input":Qx(r,a),Fe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Fe("invalid",r);break;case"textarea":Yx(r,a),Fe("invalid",r)}Wf(n,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&iu(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&iu(r.textContent,c,t),s=["children",""+c]):El.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&Fe("scroll",r)}switch(n){case"input":Yc(r),Xx(r,a,!0);break;case"textarea":Yc(r),Jx(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Yu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hr]=e,t[Ll]=r,D_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kf(n,r),n){case"dialog":Fe("cancel",t),Fe("close",t),s=r;break;case"iframe":case"object":case"embed":Fe("load",t),s=r;break;case"video":case"audio":for(s=0;s<el.length;s++)Fe(el[s],t);s=r;break;case"source":Fe("error",t),s=r;break;case"img":case"image":case"link":Fe("error",t),Fe("load",t),s=r;break;case"details":Fe("toggle",t),s=r;break;case"input":Qx(t,r),s=$f(t,r),Fe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Qe({},r,{value:void 0}),Fe("invalid",t);break;case"textarea":Yx(t,r),s=qf(t,r),Fe("invalid",t);break;default:s=r}Wf(n,s),c=s;for(a in c)if(c.hasOwnProperty(a)){var u=c[a];a==="style"?fw(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&dw(t,u)):a==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&kl(t,u):typeof u=="number"&&kl(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(El.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Fe("scroll",t):u!=null&&mp(t,a,u,o))}switch(n){case"input":Yc(t),Xx(t,r,!1);break;case"textarea":Yc(t),Jx(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Os(r.value));break;case"select":t.multiple=!!r.multiple,a=r.value,a!=null?Ia(t,!!r.multiple,a,!1):r.defaultValue!=null&&Ia(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Yu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ot(e),null;case 6:if(t&&e.stateNode!=null)O_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(G(166));if(n=fi(Ml.current),fi(pr.current),au(e)){if(r=e.stateNode,n=e.memoizedProps,r[hr]=e,(a=r.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:iu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&iu(r.nodeValue,n,(t.mode&1)!==0)}a&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hr]=e,e.stateNode=r}return Ot(e),null;case 13:if(Be(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&gn!==null&&e.mode&1&&!(e.flags&128))e_(),Ua(),e.flags|=98560,a=!1;else if(a=au(e),r!==null&&r.dehydrated!==null){if(t===null){if(!a)throw Error(G(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(G(317));a[hr]=e}else Ua(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ot(e),a=!1}else Qn!==null&&(Tm(Qn),Qn=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?gt===0&&(gt=3):Xp())),e.updateQueue!==null&&(e.flags|=4),Ot(e),null);case 4:return Ba(),vm(t,e),t===null&&Pl(e.stateNode.containerInfo),Ot(e),null;case 10:return Pp(e.type._context),Ot(e),null;case 17:return rn(e.type)&&Ju(),Ot(e),null;case 19:if(Be(Ke),a=e.memoizedState,a===null)return Ot(e),null;if(r=(e.flags&128)!==0,o=a.rendering,o===null)if(r)Wo(a,!1);else{if(gt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=id(t),o!==null){for(e.flags|=128,Wo(a,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)a=n,t=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Oe(Ke,Ke.current&1|2),e.child}t=t.sibling}a.tail!==null&&rt()>qa&&(e.flags|=128,r=!0,Wo(a,!1),e.lanes=4194304)}else{if(!r)if(t=id(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wo(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!He)return Ot(e),null}else 2*rt()-a.renderingStartTime>qa&&n!==1073741824&&(e.flags|=128,r=!0,Wo(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(n=a.last,n!==null?n.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=rt(),e.sibling=null,n=Ke.current,Oe(Ke,r?n&1|2:n&1),e):(Ot(e),null);case 22:case 23:return Qp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?hn&1073741824&&(Ot(e),e.subtreeFlags&6&&(e.flags|=8192)):Ot(e),null;case 24:return null;case 25:return null}throw Error(G(156,e.tag))}function PE(t,e){switch(Sp(e),e.tag){case 1:return rn(e.type)&&Ju(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ba(),Be(nn),Be(zt),Vp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Mp(e),null;case 13:if(Be(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(G(340));Ua()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ke),null;case 4:return Ba(),null;case 10:return Pp(e.type._context),null;case 22:case 23:return Qp(),null;case 24:return null;default:return null}}var cu=!1,Ft=!1,DE=typeof WeakSet=="function"?WeakSet:Set,ee=null;function ja(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function wm(t,e,n){try{n()}catch(r){et(t,e,r)}}var $0=!1;function LE(t,e){if(rm=Gu,t=$w(),Tp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,h=0,m=t,p=null;t:for(;;){for(var v;m!==n||s!==0&&m.nodeType!==3||(c=o+s),m!==a||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(v=m.firstChild)!==null;)p=m,m=v;for(;;){if(m===t)break t;if(p===n&&++d===s&&(c=o),p===a&&++h===r&&(u=o),(v=m.nextSibling)!==null)break;m=p,p=m.parentNode}m=v}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(sm={focusedElem:t,selectionRange:n},Gu=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var R=_.memoizedProps,T=_.memoizedState,b=e.stateNode,w=b.getSnapshotBeforeUpdate(e.elementType===e.type?R:Kn(e.type,R),T);b.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(G(163))}}catch(N){et(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return _=$0,$0=!1,_}function fl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&wm(e,n,a)}s=s.next}while(s!==r)}}function qd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function _m(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function M_(t){var e=t.alternate;e!==null&&(t.alternate=null,M_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hr],delete e[Ll],delete e[om],delete e[xE],delete e[yE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function V_(t){return t.tag===5||t.tag===3||t.tag===4}function B0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||V_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yu));else if(r!==4&&(t=t.child,t!==null))for(bm(t,e,n),t=t.sibling;t!==null;)bm(t,e,n),t=t.sibling}function Nm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Nm(t,e,n),t=t.sibling;t!==null;)Nm(t,e,n),t=t.sibling}var kt=null,Gn=!1;function ds(t,e,n){for(n=n.child;n!==null;)F_(t,e,n),n=n.sibling}function F_(t,e,n){if(mr&&typeof mr.onCommitFiberUnmount=="function")try{mr.onCommitFiberUnmount(Od,n)}catch{}switch(n.tag){case 5:Ft||ja(n,e);case 6:var r=kt,s=Gn;kt=null,ds(t,e,n),kt=r,Gn=s,kt!==null&&(Gn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Gn?(t=kt,n=n.stateNode,t.nodeType===8?Jh(t.parentNode,n):t.nodeType===1&&Jh(t,n),Cl(t)):Jh(kt,n.stateNode));break;case 4:r=kt,s=Gn,kt=n.stateNode.containerInfo,Gn=!0,ds(t,e,n),kt=r,Gn=s;break;case 0:case 11:case 14:case 15:if(!Ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&wm(n,e,o),s=s.next}while(s!==r)}ds(t,e,n);break;case 1:if(!Ft&&(ja(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){et(n,e,c)}ds(t,e,n);break;case 21:ds(t,e,n);break;case 22:n.mode&1?(Ft=(r=Ft)||n.memoizedState!==null,ds(t,e,n),Ft=r):ds(t,e,n);break;default:ds(t,e,n)}}function z0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DE),e.forEach(function(r){var s=qE.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Wn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:kt=c.stateNode,Gn=!1;break e;case 3:kt=c.stateNode.containerInfo,Gn=!0;break e;case 4:kt=c.stateNode.containerInfo,Gn=!0;break e}c=c.return}if(kt===null)throw Error(G(160));F_(a,o,s),kt=null,Gn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){et(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)U_(e,t),e=e.sibling}function U_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wn(e,t),ur(t),r&4){try{fl(3,t,t.return),qd(3,t)}catch(R){et(t,t.return,R)}try{fl(5,t,t.return)}catch(R){et(t,t.return,R)}}break;case 1:Wn(e,t),ur(t),r&512&&n!==null&&ja(n,n.return);break;case 5:if(Wn(e,t),ur(t),r&512&&n!==null&&ja(n,n.return),t.flags&32){var s=t.stateNode;try{kl(s,"")}catch(R){et(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=n!==null?n.memoizedProps:a,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&lw(s,a),Kf(c,o);var d=Kf(c,a);for(o=0;o<u.length;o+=2){var h=u[o],m=u[o+1];h==="style"?fw(s,m):h==="dangerouslySetInnerHTML"?dw(s,m):h==="children"?kl(s,m):mp(s,h,m,d)}switch(c){case"input":Bf(s,a);break;case"textarea":cw(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?Ia(s,!!a.multiple,v,!1):p!==!!a.multiple&&(a.defaultValue!=null?Ia(s,!!a.multiple,a.defaultValue,!0):Ia(s,!!a.multiple,a.multiple?[]:"",!1))}s[Ll]=a}catch(R){et(t,t.return,R)}}break;case 6:if(Wn(e,t),ur(t),r&4){if(t.stateNode===null)throw Error(G(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(R){et(t,t.return,R)}}break;case 3:if(Wn(e,t),ur(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cl(e.containerInfo)}catch(R){et(t,t.return,R)}break;case 4:Wn(e,t),ur(t);break;case 13:Wn(e,t),ur(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Kp=rt())),r&4&&z0(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ft=(d=Ft)||h,Wn(e,t),Ft=d):Wn(e,t),ur(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(m=ee=h;ee!==null;){switch(p=ee,v=p.child,p.tag){case 0:case 11:case 14:case 15:fl(4,p,p.return);break;case 1:ja(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(R){et(r,n,R)}}break;case 5:ja(p,p.return);break;case 22:if(p.memoizedState!==null){H0(m);continue}}v!==null?(v.return=p,ee=v):H0(m)}h=h.sibling}e:for(h=null,m=t;;){if(m.tag===5){if(h===null){h=m;try{s=m.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=hw("display",o))}catch(R){et(t,t.return,R)}}}else if(m.tag===6){if(h===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(R){et(t,t.return,R)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;h===m&&(h=null),m=m.return}h===m&&(h=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Wn(e,t),ur(t),r&4&&z0(t);break;case 21:break;default:Wn(e,t),ur(t)}}function ur(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(V_(n)){var r=n;break e}n=n.return}throw Error(G(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(kl(s,""),r.flags&=-33);var a=B0(t);Nm(t,a,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=B0(t);bm(t,c,o);break;default:throw Error(G(161))}}catch(u){et(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OE(t,e,n){ee=t,$_(t)}function $_(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var s=ee,a=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||cu;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Ft;c=cu;var d=Ft;if(cu=o,(Ft=u)&&!d)for(ee=s;ee!==null;)o=ee,u=o.child,o.tag===22&&o.memoizedState!==null?W0(s):u!==null?(u.return=o,ee=u):W0(s);for(;a!==null;)ee=a,$_(a),a=a.sibling;ee=s,cu=c,Ft=d}q0(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ee=a):q0(t)}}function q0(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ft||qd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ft)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Kn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&I0(e,a,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}I0(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var m=h.dehydrated;m!==null&&Cl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(G(163))}Ft||e.flags&512&&_m(e)}catch(p){et(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function H0(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function W0(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qd(4,e)}catch(u){et(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){et(e,s,u)}}var a=e.return;try{_m(e)}catch(u){et(e,a,u)}break;case 5:var o=e.return;try{_m(e)}catch(u){et(e,o,u)}}}catch(u){et(e,e.return,u)}if(e===t){ee=null;break}var c=e.sibling;if(c!==null){c.return=e.return,ee=c;break}ee=e.return}}var ME=Math.ceil,ld=ts.ReactCurrentDispatcher,Hp=ts.ReactCurrentOwner,Pn=ts.ReactCurrentBatchConfig,_e=0,Nt=null,dt=null,It=0,hn=0,Ea=qs(0),gt=0,$l=null,Ei=0,Hd=0,Wp=0,ml=null,Zt=null,Kp=0,qa=1/0,Rr=null,cd=!1,jm=null,Cs=null,uu=!1,bs=null,ud=0,pl=0,Em=null,Au=-1,Ru=0;function Kt(){return _e&6?rt():Au!==-1?Au:Au=rt()}function As(t){return t.mode&1?_e&2&&It!==0?It&-It:wE.transition!==null?(Ru===0&&(Ru=Ew()),Ru):(t=Te,t!==0||(t=window.event,t=t===void 0?16:Rw(t.type)),t):1}function Zn(t,e,n,r){if(50<pl)throw pl=0,Em=null,Error(G(185));ic(t,n,r),(!(_e&2)||t!==Nt)&&(t===Nt&&(!(_e&2)&&(Hd|=n),gt===4&&gs(t,It)),sn(t,r),n===1&&_e===0&&!(e.mode&1)&&(qa=rt()+500,$d&&Hs()))}function sn(t,e){var n=t.callbackNode;w2(t,e);var r=Ku(t,t===Nt?It:0);if(r===0)n!==null&&t0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&t0(n),e===1)t.tag===0?vE(K0.bind(null,t)):Yw(K0.bind(null,t)),pE(function(){!(_e&6)&&Hs()}),n=null;else{switch(kw(r)){case 1:n=vp;break;case 4:n=Nw;break;case 16:n=Wu;break;case 536870912:n=jw;break;default:n=Wu}n=Q_(n,B_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function B_(t,e){if(Au=-1,Ru=0,_e&6)throw Error(G(327));var n=t.callbackNode;if(Pa()&&t.callbackNode!==n)return null;var r=Ku(t,t===Nt?It:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=dd(t,r);else{e=r;var s=_e;_e|=2;var a=q_();(Nt!==t||It!==e)&&(Rr=null,qa=rt()+500,gi(t,e));do try{UE();break}catch(c){z_(t,c)}while(!0);Rp(),ld.current=a,_e=s,dt!==null?e=0:(Nt=null,It=0,e=gt)}if(e!==0){if(e===2&&(s=Jf(t),s!==0&&(r=s,e=km(t,s))),e===1)throw n=$l,gi(t,0),gs(t,r),sn(t,rt()),n;if(e===6)gs(t,r);else{if(s=t.current.alternate,!(r&30)&&!VE(s)&&(e=dd(t,r),e===2&&(a=Jf(t),a!==0&&(r=a,e=km(t,a))),e===1))throw n=$l,gi(t,0),gs(t,r),sn(t,rt()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(G(345));case 2:li(t,Zt,Rr);break;case 3:if(gs(t,r),(r&130023424)===r&&(e=Kp+500-rt(),10<e)){if(Ku(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Kt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=am(li.bind(null,t,Zt,Rr),e);break}li(t,Zt,Rr);break;case 4:if(gs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Jn(r);a=1<<o,o=e[o],o>s&&(s=o),r&=~a}if(r=s,r=rt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ME(r/1960))-r,10<r){t.timeoutHandle=am(li.bind(null,t,Zt,Rr),r);break}li(t,Zt,Rr);break;case 5:li(t,Zt,Rr);break;default:throw Error(G(329))}}}return sn(t,rt()),t.callbackNode===n?B_.bind(null,t):null}function km(t,e){var n=ml;return t.current.memoizedState.isDehydrated&&(gi(t,e).flags|=256),t=dd(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Tm(e)),t}function Tm(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function VE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!rr(a(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gs(t,e){for(e&=~Wp,e&=~Hd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jn(e),r=1<<n;t[n]=-1,e&=~r}}function K0(t){if(_e&6)throw Error(G(327));Pa();var e=Ku(t,0);if(!(e&1))return sn(t,rt()),null;var n=dd(t,e);if(t.tag!==0&&n===2){var r=Jf(t);r!==0&&(e=r,n=km(t,r))}if(n===1)throw n=$l,gi(t,0),gs(t,e),sn(t,rt()),n;if(n===6)throw Error(G(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,li(t,Zt,Rr),sn(t,rt()),null}function Gp(t,e){var n=_e;_e|=1;try{return t(e)}finally{_e=n,_e===0&&(qa=rt()+500,$d&&Hs())}}function ki(t){bs!==null&&bs.tag===0&&!(_e&6)&&Pa();var e=_e;_e|=1;var n=Pn.transition,r=Te;try{if(Pn.transition=null,Te=1,t)return t()}finally{Te=r,Pn.transition=n,_e=e,!(_e&6)&&Hs()}}function Qp(){hn=Ea.current,Be(Ea)}function gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mE(n)),dt!==null)for(n=dt.return;n!==null;){var r=n;switch(Sp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ju();break;case 3:Ba(),Be(nn),Be(zt),Vp();break;case 5:Mp(r);break;case 4:Ba();break;case 13:Be(Ke);break;case 19:Be(Ke);break;case 10:Pp(r.type._context);break;case 22:case 23:Qp()}n=n.return}if(Nt=t,dt=t=Rs(t.current,null),It=hn=e,gt=0,$l=null,Wp=Hd=Ei=0,Zt=ml=null,hi!==null){for(e=0;e<hi.length;e++)if(n=hi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=s,r.next=o}n.pending=r}hi=null}return t}function z_(t,e){do{var n=dt;try{if(Rp(),Iu.current=od,ad){for(var r=Ge.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ad=!1}if(ji=0,_t=pt=Ge=null,hl=!1,Vl=0,Hp.current=null,n===null||n.return===null){gt=1,$l=e,dt=null;break}e:{var a=t,o=n.return,c=n,u=e;if(e=It,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=c,m=h.tag;if(!(h.mode&1)&&(m===0||m===11||m===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=D0(o);if(v!==null){v.flags&=-257,L0(v,o,c,a,e),v.mode&1&&P0(a,d,e),e=v,u=d;var _=e.updateQueue;if(_===null){var R=new Set;R.add(u),e.updateQueue=R}else _.add(u);break e}else{if(!(e&1)){P0(a,d,e),Xp();break e}u=Error(G(426))}}else if(He&&c.mode&1){var T=D0(o);if(T!==null){!(T.flags&65536)&&(T.flags|=256),L0(T,o,c,a,e),Cp(za(u,c));break e}}a=u=za(u,c),gt!==4&&(gt=2),ml===null?ml=[a]:ml.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=k_(a,u,e);T0(a,b);break e;case 1:c=u;var w=a.type,y=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Cs===null||!Cs.has(y)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=T_(a,c,e);T0(a,N);break e}}a=a.return}while(a!==null)}W_(n)}catch(A){e=A,dt===n&&n!==null&&(dt=n=n.return);continue}break}while(!0)}function q_(){var t=ld.current;return ld.current=od,t===null?od:t}function Xp(){(gt===0||gt===3||gt===2)&&(gt=4),Nt===null||!(Ei&268435455)&&!(Hd&268435455)||gs(Nt,It)}function dd(t,e){var n=_e;_e|=2;var r=q_();(Nt!==t||It!==e)&&(Rr=null,gi(t,e));do try{FE();break}catch(s){z_(t,s)}while(!0);if(Rp(),_e=n,ld.current=r,dt!==null)throw Error(G(261));return Nt=null,It=0,gt}function FE(){for(;dt!==null;)H_(dt)}function UE(){for(;dt!==null&&!d2();)H_(dt)}function H_(t){var e=G_(t.alternate,t,hn);t.memoizedProps=t.pendingProps,e===null?W_(t):dt=e,Hp.current=null}function W_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=PE(n,e),n!==null){n.flags&=32767,dt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gt=6,dt=null;return}}else if(n=RE(n,e,hn),n!==null){dt=n;return}if(e=e.sibling,e!==null){dt=e;return}dt=e=t}while(e!==null);gt===0&&(gt=5)}function li(t,e,n){var r=Te,s=Pn.transition;try{Pn.transition=null,Te=1,$E(t,e,n,r)}finally{Pn.transition=s,Te=r}return null}function $E(t,e,n,r){do Pa();while(bs!==null);if(_e&6)throw Error(G(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(G(177));t.callbackNode=null,t.callbackPriority=0;var a=n.lanes|n.childLanes;if(_2(t,a),t===Nt&&(dt=Nt=null,It=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||uu||(uu=!0,Q_(Wu,function(){return Pa(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Pn.transition,Pn.transition=null;var o=Te;Te=1;var c=_e;_e|=4,Hp.current=null,LE(t,n),U_(n,t),oE(sm),Gu=!!rm,sm=rm=null,t.current=n,OE(n),h2(),_e=c,Te=o,Pn.transition=a}else t.current=n;if(uu&&(uu=!1,bs=t,ud=s),a=t.pendingLanes,a===0&&(Cs=null),p2(n.stateNode),sn(t,rt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(cd)throw cd=!1,t=jm,jm=null,t;return ud&1&&t.tag!==0&&Pa(),a=t.pendingLanes,a&1?t===Em?pl++:(pl=0,Em=t):pl=0,Hs(),null}function Pa(){if(bs!==null){var t=kw(ud),e=Pn.transition,n=Te;try{if(Pn.transition=null,Te=16>t?16:t,bs===null)var r=!1;else{if(t=bs,bs=null,ud=0,_e&6)throw Error(G(331));var s=_e;for(_e|=4,ee=t.current;ee!==null;){var a=ee,o=a.child;if(ee.flags&16){var c=a.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(ee=d;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:fl(8,h,a)}var m=h.child;if(m!==null)m.return=h,ee=m;else for(;ee!==null;){h=ee;var p=h.sibling,v=h.return;if(M_(h),h===d){ee=null;break}if(p!==null){p.return=v,ee=p;break}ee=v}}}var _=a.alternate;if(_!==null){var R=_.child;if(R!==null){_.child=null;do{var T=R.sibling;R.sibling=null,R=T}while(R!==null)}}ee=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ee=o;else e:for(;ee!==null;){if(a=ee,a.flags&2048)switch(a.tag){case 0:case 11:case 15:fl(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ee=b;break e}ee=a.return}}var w=t.current;for(ee=w;ee!==null;){o=ee;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,ee=y;else e:for(o=w;ee!==null;){if(c=ee,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:qd(9,c)}}catch(A){et(c,c.return,A)}if(c===o){ee=null;break e}var N=c.sibling;if(N!==null){N.return=c.return,ee=N;break e}ee=c.return}}if(_e=s,Hs(),mr&&typeof mr.onPostCommitFiberRoot=="function")try{mr.onPostCommitFiberRoot(Od,t)}catch{}r=!0}return r}finally{Te=n,Pn.transition=e}}return!1}function G0(t,e,n){e=za(n,e),e=k_(t,e,1),t=Ss(t,e,1),e=Kt(),t!==null&&(ic(t,1,e),sn(t,e))}function et(t,e,n){if(t.tag===3)G0(t,t,n);else for(;e!==null;){if(e.tag===3){G0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Cs===null||!Cs.has(r))){t=za(n,t),t=T_(e,t,1),e=Ss(e,t,1),t=Kt(),e!==null&&(ic(e,1,t),sn(e,t));break}}e=e.return}}function BE(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Kt(),t.pingedLanes|=t.suspendedLanes&n,Nt===t&&(It&n)===n&&(gt===4||gt===3&&(It&130023424)===It&&500>rt()-Kp?gi(t,0):Wp|=n),sn(t,e)}function K_(t,e){e===0&&(t.mode&1?(e=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):e=1);var n=Kt();t=Gr(t,e),t!==null&&(ic(t,e,n),sn(t,n))}function zE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),K_(t,n)}function qE(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(G(314))}r!==null&&r.delete(e),K_(t,n)}var G_;G_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||nn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,AE(t,e,n);tn=!!(t.flags&131072)}else tn=!1,He&&e.flags&1048576&&Jw(e,td,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Cu(t,e),t=e.pendingProps;var s=Fa(e,zt.current);Ra(e,n),s=Up(null,e,r,t,s,n);var a=$p();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rn(r)?(a=!0,Zu(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Lp(e),s.updater=zd,e.stateNode=s,s._reactInternals=e,fm(e,r,t,n),e=gm(null,e,r,!0,a,n)):(e.tag=0,He&&a&&Ip(e),Wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Cu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=WE(r),t=Kn(r,t),s){case 0:e=pm(null,e,r,t,n);break e;case 1:e=V0(null,e,r,t,n);break e;case 11:e=O0(null,e,r,t,n);break e;case 14:e=M0(null,e,r,Kn(r.type,t),n);break e}throw Error(G(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),pm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),V0(t,e,r,s,n);case 3:e:{if(A_(e),t===null)throw Error(G(387));r=e.pendingProps,a=e.memoizedState,s=a.element,s_(t,e),sd(e,r,null,n);var o=e.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=za(Error(G(423)),e),e=F0(t,e,r,n,s);break e}else if(r!==s){s=za(Error(G(424)),e),e=F0(t,e,r,n,s);break e}else for(gn=Is(e.stateNode.containerInfo.firstChild),vn=e,He=!0,Qn=null,n=n_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ua(),r===s){e=Qr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return i_(e),t===null&&um(e),r=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,im(r,s)?o=null:a!==null&&im(r,a)&&(e.flags|=32),C_(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&um(e),null;case 13:return R_(t,e,n);case 4:return Op(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=$a(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),O0(t,e,r,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,Oe(nd,r._currentValue),r._currentValue=o,a!==null)if(rr(a.value,o)){if(a.children===s.children&&!nn.current){e=Qr(t,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(a.tag===1){u=$r(-1,n&-n),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),dm(a.return,n,e),c.lanes|=n;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(G(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),dm(o,n,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ra(e,n),s=Mn(s),r=r(s),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,s=Kn(r,e.pendingProps),s=Kn(r.type,s),M0(t,e,r,s,n);case 15:return I_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Kn(r,s),Cu(t,e),e.tag=1,rn(r)?(t=!0,Zu(e)):t=!1,Ra(e,n),E_(e,r,s),fm(e,r,s,n),gm(null,e,r,!0,t,n);case 19:return P_(t,e,n);case 22:return S_(t,e,n)}throw Error(G(156,e.tag))};function Q_(t,e){return bw(t,e)}function HE(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rn(t,e,n,r){return new HE(t,e,n,r)}function Yp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function WE(t){if(typeof t=="function")return Yp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===gp)return 11;if(t===xp)return 14}return 2}function Rs(t,e){var n=t.alternate;return n===null?(n=Rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Pu(t,e,n,r,s,a){var o=2;if(r=t,typeof t=="function")Yp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case pa:return xi(n.children,s,a,e);case pp:o=8,s|=8;break;case Mf:return t=Rn(12,n,e,s|2),t.elementType=Mf,t.lanes=a,t;case Vf:return t=Rn(13,n,e,s),t.elementType=Vf,t.lanes=a,t;case Ff:return t=Rn(19,n,e,s),t.elementType=Ff,t.lanes=a,t;case iw:return Wd(n,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rw:o=10;break e;case sw:o=9;break e;case gp:o=11;break e;case xp:o=14;break e;case fs:o=16,r=null;break e}throw Error(G(130,t==null?t:typeof t,""))}return e=Rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=a,e}function xi(t,e,n,r){return t=Rn(7,t,r,e),t.lanes=n,t}function Wd(t,e,n,r){return t=Rn(22,t,r,e),t.elementType=iw,t.lanes=n,t.stateNode={isHidden:!1},t}function of(t,e,n){return t=Rn(6,t,null,e),t.lanes=n,t}function lf(t,e,n){return e=Rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KE(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$h(0),this.expirationTimes=$h(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$h(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Jp(t,e,n,r,s,a,o,c,u){return t=new KE(t,e,n,c,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Rn(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lp(a),t}function GE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ma,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function X_(t){if(!t)return Ms;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(G(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(G(171))}if(t.tag===1){var n=t.type;if(rn(n))return Xw(t,n,e)}return e}function Y_(t,e,n,r,s,a,o,c,u){return t=Jp(n,r,!0,t,s,a,o,c,u),t.context=X_(null),n=t.current,r=Kt(),s=As(n),a=$r(r,s),a.callback=e??null,Ss(n,a,s),t.current.lanes=s,ic(t,s,r),sn(t,r),t}function Kd(t,e,n,r){var s=e.current,a=Kt(),o=As(s);return n=X_(n),e.context===null?e.context=n:e.pendingContext=n,e=$r(a,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ss(s,e,o),t!==null&&(Zn(t,s,o,a),Tu(t,s,o)),o}function hd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Q0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Zp(t,e){Q0(t,e),(t=t.alternate)&&Q0(t,e)}function QE(){return null}var J_=typeof reportError=="function"?reportError:function(t){console.error(t)};function eg(t){this._internalRoot=t}Gd.prototype.render=eg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(G(409));Kd(t,e,null,null)};Gd.prototype.unmount=eg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ki(function(){Kd(null,t,null,null)}),e[Kr]=null}};function Gd(t){this._internalRoot=t}Gd.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ps.length&&e!==0&&e<ps[n].priority;n++);ps.splice(n,0,t),n===0&&Aw(t)}};function tg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function X0(){}function XE(t,e,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var d=hd(o);a.call(d)}}var o=Y_(e,r,t,0,null,!1,!1,"",X0);return t._reactRootContainer=o,t[Kr]=o.current,Pl(t.nodeType===8?t.parentNode:t),ki(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=hd(u);c.call(d)}}var u=Jp(t,0,!1,null,null,!1,!1,"",X0);return t._reactRootContainer=u,t[Kr]=u.current,Pl(t.nodeType===8?t.parentNode:t),ki(function(){Kd(e,u,n,r)}),u}function Xd(t,e,n,r,s){var a=n._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var c=s;s=function(){var u=hd(o);c.call(u)}}Kd(e,o,t,s)}else o=XE(n,e,t,s,r);return hd(o)}Tw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Zo(e.pendingLanes);n!==0&&(wp(e,n|1),sn(e,rt()),!(_e&6)&&(qa=rt()+500,Hs()))}break;case 13:ki(function(){var r=Gr(t,1);if(r!==null){var s=Kt();Zn(r,t,1,s)}}),Zp(t,1)}};_p=function(t){if(t.tag===13){var e=Gr(t,134217728);if(e!==null){var n=Kt();Zn(e,t,134217728,n)}Zp(t,134217728)}};Iw=function(t){if(t.tag===13){var e=As(t),n=Gr(t,e);if(n!==null){var r=Kt();Zn(n,t,e,r)}Zp(t,e)}};Sw=function(){return Te};Cw=function(t,e){var n=Te;try{return Te=t,e()}finally{Te=n}};Qf=function(t,e,n){switch(e){case"input":if(Bf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ud(r);if(!s)throw Error(G(90));ow(r),Bf(r,s)}}}break;case"textarea":cw(t,n);break;case"select":e=n.value,e!=null&&Ia(t,!!n.multiple,e,!1)}};gw=Gp;xw=ki;var YE={usingClientEntryPoint:!1,Events:[oc,va,Ud,mw,pw,Gp]},Ko={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},JE={bundleType:Ko.bundleType,version:Ko.version,rendererPackageName:Ko.rendererPackageName,rendererConfig:Ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ts.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ww(t),t===null?null:t.stateNode},findFiberByHostInstance:Ko.findFiberByHostInstance||QE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!du.isDisabled&&du.supportsFiber)try{Od=du.inject(JE),mr=du}catch{}}Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=YE;Nn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tg(e))throw Error(G(200));return GE(t,e,null,n)};Nn.createRoot=function(t,e){if(!tg(t))throw Error(G(299));var n=!1,r="",s=J_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Jp(t,1,!1,null,null,n,!1,r,s),t[Kr]=e.current,Pl(t.nodeType===8?t.parentNode:t),new eg(e)};Nn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(G(188)):(t=Object.keys(t).join(","),Error(G(268,t)));return t=ww(e),t=t===null?null:t.stateNode,t};Nn.flushSync=function(t){return ki(t)};Nn.hydrate=function(t,e,n){if(!Qd(e))throw Error(G(200));return Xd(null,t,e,!0,n)};Nn.hydrateRoot=function(t,e,n){if(!tg(t))throw Error(G(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",o=J_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Y_(e,null,t,1,n??null,s,!1,a,o),t[Kr]=e.current,Pl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Gd(e)};Nn.render=function(t,e,n){if(!Qd(e))throw Error(G(200));return Xd(null,t,e,!1,n)};Nn.unmountComponentAtNode=function(t){if(!Qd(t))throw Error(G(40));return t._reactRootContainer?(ki(function(){Xd(null,null,t,!1,function(){t._reactRootContainer=null,t[Kr]=null})}),!0):!1};Nn.unstable_batchedUpdates=Gp;Nn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Qd(n))throw Error(G(200));if(t==null||t._reactInternals===void 0)throw Error(G(38));return Xd(t,e,n,!1,r)};Nn.version="18.3.1-next-f1338f8080-20240426";function Z_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Z_)}catch(t){console.error(t)}}Z_(),Zv.exports=Nn;var ZE=Zv.exports,Y0=ZE;Lf.createRoot=Y0.createRoot,Lf.hydrateRoot=Y0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bl.apply(this,arguments)}var Ns;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ns||(Ns={}));const J0="popstate";function ek(t){t===void 0&&(t={});function e(r,s){let{pathname:a,search:o,hash:c}=r.location;return Im("",{pathname:a,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:fd(s)}return nk(e,n,null,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function eb(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function tk(){return Math.random().toString(36).substr(2,8)}function Z0(t,e){return{usr:t.state,key:t.key,idx:e}}function Im(t,e,n,r){return n===void 0&&(n=null),Bl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:n,key:e&&e.key||r||tk()})}function fd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ro(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function nk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,o=s.history,c=Ns.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Bl({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function m(){c=Ns.Pop;let T=h(),b=T==null?null:T-d;d=T,u&&u({action:c,location:R.location,delta:b})}function p(T,b){c=Ns.Push;let w=Im(R.location,T,b);d=h()+1;let y=Z0(w,d),N=R.createHref(w);try{o.pushState(y,"",N)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(N)}a&&u&&u({action:c,location:R.location,delta:1})}function v(T,b){c=Ns.Replace;let w=Im(R.location,T,b);d=h();let y=Z0(w,d),N=R.createHref(w);o.replaceState(y,"",N),a&&u&&u({action:c,location:R.location,delta:0})}function _(T){let b=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof T=="string"?T:fd(T);return w=w.replace(/ $/,"%20"),st(b,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,b)}let R={get action(){return c},get location(){return t(s,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(J0,m),u=T,()=>{s.removeEventListener(J0,m),u=null}},createHref(T){return e(s,T)},createURL:_,encodeLocation(T){let b=_(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:v,go(T){return o.go(T)}};return R}var ey;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ey||(ey={}));function rk(t,e,n){return n===void 0&&(n="/"),sk(t,e,n)}function sk(t,e,n,r){let s=typeof e=="string"?ro(e):e,a=ng(s.pathname||"/",n);if(a==null)return null;let o=tb(t);ik(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=xk(a);c=mk(o[u],d)}return c}function tb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,o,c)=>{let u={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(st(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Ps([r,u.relativePath]),h=n.concat(u);a.children&&a.children.length>0&&(st(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),tb(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:hk(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))s(a,o);else for(let u of nb(a.path))s(a,o,u)}),e}function nb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let o=nb(r.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function ik(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:fk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const ak=/^:[\w-]+$/,ok=3,lk=2,ck=1,uk=10,dk=-2,ty=t=>t==="*";function hk(t,e){let n=t.split("/"),r=n.length;return n.some(ty)&&(r+=dk),e&&(r+=lk),n.filter(s=>!ty(s)).reduce((s,a)=>s+(ak.test(a)?ok:a===""?ck:uk),r)}function fk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function mk(t,e,n){let{routesMeta:r}=t,s={},a="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,h=a==="/"?e:e.slice(a.length)||"/",m=pk({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Ps([a,m.pathname]),pathnameBase:_k(Ps([a,m.pathnameBase])),route:p}),m.pathnameBase!=="/"&&(a=Ps([a,m.pathnameBase]))}return o}function pk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=gk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,h,m)=>{let{paramName:p,isOptional:v}=h;if(p==="*"){let R=c[m]||"";o=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const _=c[m];return v&&!_?d[p]=void 0:d[p]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function gk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),eb(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return eb(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ng(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function yk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ro(t):t;return{pathname:n?n.startsWith("/")?n:vk(n,e):e,search:bk(r),hash:Nk(s)}}function vk(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function cf(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function rg(t,e){let n=wk(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function sg(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ro(t):(s=Bl({},t),st(!s.pathname||!s.pathname.includes("?"),cf("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),cf("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),cf("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,c;if(o==null)c=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),m-=1;s.pathname=p.join("/")}c=m>=0?e[m]:"/"}let u=yk(s,c),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Ps=t=>t.join("/").replace(/\/\/+/g,"/"),_k=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Nk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rb=["post","put","patch","delete"];new Set(rb);const Ek=["get",...rb];new Set(Ek);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zl(){return zl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},zl.apply(this,arguments)}const ig=I.createContext(null),kk=I.createContext(null),Ws=I.createContext(null),Yd=I.createContext(null),Ks=I.createContext({outlet:null,matches:[],isDataRoute:!1}),sb=I.createContext(null);function Tk(t,e){let{relative:n}=e===void 0?{}:e;so()||st(!1);let{basename:r,navigator:s}=I.useContext(Ws),{hash:a,pathname:o,search:c}=ab(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Ps([r,o])),s.createHref({pathname:u,search:c,hash:a})}function so(){return I.useContext(Yd)!=null}function Gs(){return so()||st(!1),I.useContext(Yd).location}function ib(t){I.useContext(Ws).static||I.useLayoutEffect(t)}function Yt(){let{isDataRoute:t}=I.useContext(Ks);return t?Uk():Ik()}function Ik(){so()||st(!1);let t=I.useContext(ig),{basename:e,future:n,navigator:r}=I.useContext(Ws),{matches:s}=I.useContext(Ks),{pathname:a}=Gs(),o=JSON.stringify(rg(s,n.v7_relativeSplatPath)),c=I.useRef(!1);return ib(()=>{c.current=!0}),I.useCallback(function(d,h){if(h===void 0&&(h={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=sg(d,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Ps([e,m.pathname])),(h.replace?r.replace:r.push)(m,h.state,h)},[e,r,o,a,t])}function ab(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(Ws),{matches:s}=I.useContext(Ks),{pathname:a}=Gs(),o=JSON.stringify(rg(s,r.v7_relativeSplatPath));return I.useMemo(()=>sg(t,JSON.parse(o),a,n==="path"),[t,o,a,n])}function Sk(t,e){return Ck(t,e)}function Ck(t,e,n,r){so()||st(!1);let{navigator:s}=I.useContext(Ws),{matches:a}=I.useContext(Ks),o=a[a.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Gs(),h;if(e){var m;let T=typeof e=="string"?ro(e):e;u==="/"||(m=T.pathname)!=null&&m.startsWith(u)||st(!1),h=T}else h=d;let p=h.pathname||"/",v=p;if(u!=="/"){let T=u.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(T.length).join("/")}let _=rk(t,{pathname:v}),R=Lk(_&&_.map(T=>Object.assign({},T,{params:Object.assign({},c,T.params),pathname:Ps([u,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?u:Ps([u,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,n,r);return e&&R?I.createElement(Yd.Provider,{value:{location:zl({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ns.Pop}},R):R}function Ak(){let t=Fk(),e=jk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:s},n):null,null)}const Rk=I.createElement(Ak,null);class Pk extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Ks.Provider,{value:this.props.routeContext},I.createElement(sb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Dk(t){let{routeContext:e,match:n,children:r}=t,s=I.useContext(ig);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Ks.Provider,{value:e},r)}function Lk(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let h=o.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);h>=0||st(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let m=o[h];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=h),m.route.id){let{loaderData:p,errors:v}=n,_=m.route.loader&&p[m.route.id]===void 0&&(!v||v[m.route.id]===void 0);if(m.route.lazy||_){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,m,p)=>{let v,_=!1,R=null,T=null;n&&(v=c&&m.route.id?c[m.route.id]:void 0,R=m.route.errorElement||Rk,u&&(d<0&&p===0?($k("route-fallback"),_=!0,T=null):d===p&&(_=!0,T=m.route.hydrateFallbackElement||null)));let b=e.concat(o.slice(0,p+1)),w=()=>{let y;return v?y=R:_?y=T:m.route.Component?y=I.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=h,I.createElement(Dk,{match:m,routeContext:{outlet:h,matches:b,isDataRoute:n!=null},children:y})};return n&&(m.route.ErrorBoundary||m.route.errorElement||p===0)?I.createElement(Pk,{location:n.location,revalidation:n.revalidation,component:R,error:v,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}var ob=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ob||{}),lb=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lb||{});function Ok(t){let e=I.useContext(ig);return e||st(!1),e}function Mk(t){let e=I.useContext(kk);return e||st(!1),e}function Vk(t){let e=I.useContext(Ks);return e||st(!1),e}function cb(t){let e=Vk(),n=e.matches[e.matches.length-1];return n.route.id||st(!1),n.route.id}function Fk(){var t;let e=I.useContext(sb),n=Mk(),r=cb();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Uk(){let{router:t}=Ok(ob.UseNavigateStable),e=cb(lb.UseNavigateStable),n=I.useRef(!1);return ib(()=>{n.current=!0}),I.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,zl({fromRouteId:e},a)))},[t,e])}const ny={};function $k(t,e,n){ny[t]||(ny[t]=!0)}function Bk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ag(t){let{to:e,replace:n,state:r,relative:s}=t;so()||st(!1);let{future:a,static:o}=I.useContext(Ws),{matches:c}=I.useContext(Ks),{pathname:u}=Gs(),d=Yt(),h=sg(e,rg(c,a.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(h);return I.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function je(t){st(!1)}function zk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Ns.Pop,navigator:a,static:o=!1,future:c}=t;so()&&st(!1);let u=e.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:u,navigator:a,static:o,future:zl({v7_relativeSplatPath:!1},c)}),[u,c,a,o]);typeof r=="string"&&(r=ro(r));let{pathname:h="/",search:m="",hash:p="",state:v=null,key:_="default"}=r,R=I.useMemo(()=>{let T=ng(h,u);return T==null?null:{location:{pathname:T,search:m,hash:p,state:v,key:_},navigationType:s}},[u,h,m,p,v,_,s]);return R==null?null:I.createElement(Ws.Provider,{value:d},I.createElement(Yd.Provider,{children:n,value:R}))}function qk(t){let{children:e,location:n}=t;return Sk(Sm(e),n)}new Promise(()=>{});function Sm(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,s)=>{if(!I.isValidElement(r))return;let a=[...e,s];if(r.type===I.Fragment){n.push.apply(n,Sm(r.props.children,a));return}r.type!==je&&st(!1),!r.props.index||!r.props.children||st(!1);let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Sm(r.props.children,a)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cm(){return Cm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cm.apply(this,arguments)}function Hk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,a;for(a=0;a<r.length;a++)s=r[a],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Wk(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Kk(t,e){return t.button===0&&(!e||e==="_self")&&!Wk(t)}function Am(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function Gk(t,e){let n=Am(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(a=>{n.append(s,a)})}),n}const Qk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xk="6";try{window.__reactRouterVersion=Xk}catch{}const Yk="startTransition",ry=Bj[Yk];function Jk(t){let{basename:e,children:n,future:r,window:s}=t,a=I.useRef();a.current==null&&(a.current=ek({window:s,v5Compat:!0}));let o=a.current,[c,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=I.useCallback(m=>{d&&ry?ry(()=>u(m)):u(m)},[u,d]);return I.useLayoutEffect(()=>o.listen(h),[o,h]),I.useEffect(()=>Bk(r),[r]),I.createElement(zk,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const Zk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=I.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:h,viewTransition:m}=e,p=Hk(e,Qk),{basename:v}=I.useContext(Ws),_,R=!1;if(typeof d=="string"&&eT.test(d)&&(_=d,Zk))try{let y=new URL(window.location.href),N=d.startsWith("//")?new URL(y.protocol+d):new URL(d),A=ng(N.pathname,v);N.origin===y.origin&&A!=null?d=A+N.search+N.hash:R=!0}catch{}let T=Tk(d,{relative:s}),b=tT(d,{replace:o,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:m});function w(y){r&&r(y),y.defaultPrevented||b(y)}return I.createElement("a",Cm({},p,{href:_||T,onClick:R||a?r:w,ref:n,target:u}))});var sy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(sy||(sy={}));var iy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(iy||(iy={}));function tT(t,e){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:c}=e===void 0?{}:e,u=Yt(),d=Gs(),h=ab(t,{relative:o});return I.useCallback(m=>{if(Kk(m,n)){m.preventDefault();let p=r!==void 0?r:fd(d)===fd(h);u(t,{replace:p,state:s,preventScrollReset:a,relative:o,viewTransition:c})}},[d,u,h,r,s,n,t,a,o,c])}function ub(t){let e=I.useRef(Am(t)),n=I.useRef(!1),r=Gs(),s=I.useMemo(()=>Gk(r.search,n.current?null:e.current),[r.search]),a=Yt(),o=I.useCallback((c,u)=>{const d=Am(typeof c=="function"?c(s):c);n.current=!0,a("?"+d,u)},[a,s]);return[s,o]}var ay={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},nT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[n++];e[r++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const a=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},hb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=a>>2,m=(a&3)<<4|c>>4;let p=(c&15)<<2|d>>6,v=d&63;u||(v=64,o||(p=64)),r.push(n[h],n[m],n[p],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(db(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const a=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,a==null||c==null||d==null||m==null)throw new rT;const p=a<<2|c>>4;if(r.push(p),d!==64){const v=c<<4&240|d>>2;if(r.push(v),m!==64){const _=d<<6&192|m;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const sT=function(t){const e=db(t);return hb.encodeByteArray(e,!0)},md=function(t){return sT(t).replace(/\./g,"")},fb=function(t){try{return hb.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=()=>iT().__FIREBASE_DEFAULTS__,oT=()=>{if(typeof process>"u"||typeof ay>"u")return;const t=ay.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&fb(t[1]);return e&&JSON.parse(e)},Jd=()=>{try{return aT()||oT()||lT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mb=t=>{var e,n;return(n=(e=Jd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pb=t=>{const e=mb(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},gb=()=>{var t;return(t=Jd())===null||t===void 0?void 0:t.config},xb=t=>{var e;return(e=Jd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[md(JSON.stringify(n)),md(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(qt())}function dT(){var t;const e=(t=Jd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pT(){const t=qt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gT(){return!dT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xT(){try{return typeof indexedDB=="object"}catch{return!1}}function yT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="FirebaseError";class jr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vT,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cc.prototype.create)}}class cc{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?wT(a,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new jr(s,c,r)}}function wT(t,e){return t.replace(_T,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _T=/\{\$([^}]+)}/g;function bT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function pd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const a=t[s],o=e[s];if(oy(a)&&oy(o)){if(!pd(a,o))return!1}else if(a!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function oy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function io(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function tl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,a]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function nl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function NT(t,e){const n=new jT(t,e);return n.subscribe.bind(n)}class jT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");ET(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=uf),s.error===void 0&&(s.error=uf),s.complete===void 0&&(s.complete=uf);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ET(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function uf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(t){return t&&t._delegate?t._delegate:t}class Vs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IT(e))try{this.getOrInitializeService({instanceIdentifier:ci})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:s});r.resolve(a)}catch{}}}}clearInstance(e=ci){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ci){return this.instances.has(e)}getOptions(e=ci){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ci){return this.component?this.component.multipleInstances?e:ci:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TT(t){return t===ci?void 0:t}function IT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ST{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new kT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const CT={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},AT=xe.INFO,RT={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},PT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=RT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class og{constructor(e){this.name=e,this._logLevel=AT,this._logHandler=PT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const DT=(t,e)=>e.some(n=>t instanceof n);let ly,cy;function LT(){return ly||(ly=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OT(){return cy||(cy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vb=new WeakMap,Rm=new WeakMap,wb=new WeakMap,df=new WeakMap,lg=new WeakMap;function MT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{n(Ds(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&vb.set(n,t)}).catch(()=>{}),lg.set(e,t),e}function VT(t){if(Rm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Rm.set(t,e)}let Pm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ds(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FT(t){Pm=t(Pm)}function UT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(hf(this),e,...n);return wb.set(r,e.sort?e.sort():[e]),Ds(r)}:OT().includes(t)?function(...e){return t.apply(hf(this),e),Ds(vb.get(this))}:function(...e){return Ds(t.apply(hf(this),e))}}function $T(t){return typeof t=="function"?UT(t):(t instanceof IDBTransaction&&VT(t),DT(t,LT())?new Proxy(t,Pm):t)}function Ds(t){if(t instanceof IDBRequest)return MT(t);if(df.has(t))return df.get(t);const e=$T(t);return e!==t&&(df.set(t,e),lg.set(e,t)),e}const hf=t=>lg.get(t);function BT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),c=Ds(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ds(o.result),u.oldVersion,u.newVersion,Ds(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const zT=["get","getKey","getAll","getAllKeys","count"],qT=["put","add","delete","clear"],ff=new Map;function uy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ff.get(e))return ff.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=qT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||zT.includes(n)))return;const a=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return ff.set(e,a),a}FT(t=>({...t,get:(e,n,r)=>uy(e,n)||t.get(e,n,r),has:(e,n)=>!!uy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dm="@firebase/app",dy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=new og("@firebase/app"),KT="@firebase/app-compat",GT="@firebase/analytics-compat",QT="@firebase/analytics",XT="@firebase/app-check-compat",YT="@firebase/app-check",JT="@firebase/auth",ZT="@firebase/auth-compat",eI="@firebase/database",tI="@firebase/data-connect",nI="@firebase/database-compat",rI="@firebase/functions",sI="@firebase/functions-compat",iI="@firebase/installations",aI="@firebase/installations-compat",oI="@firebase/messaging",lI="@firebase/messaging-compat",cI="@firebase/performance",uI="@firebase/performance-compat",dI="@firebase/remote-config",hI="@firebase/remote-config-compat",fI="@firebase/storage",mI="@firebase/storage-compat",pI="@firebase/firestore",gI="@firebase/vertexai-preview",xI="@firebase/firestore-compat",yI="firebase",vI="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm="[DEFAULT]",wI={[Dm]:"fire-core",[KT]:"fire-core-compat",[QT]:"fire-analytics",[GT]:"fire-analytics-compat",[YT]:"fire-app-check",[XT]:"fire-app-check-compat",[JT]:"fire-auth",[ZT]:"fire-auth-compat",[eI]:"fire-rtdb",[tI]:"fire-data-connect",[nI]:"fire-rtdb-compat",[rI]:"fire-fn",[sI]:"fire-fn-compat",[iI]:"fire-iid",[aI]:"fire-iid-compat",[oI]:"fire-fcm",[lI]:"fire-fcm-compat",[cI]:"fire-perf",[uI]:"fire-perf-compat",[dI]:"fire-rc",[hI]:"fire-rc-compat",[fI]:"fire-gcs",[mI]:"fire-gcs-compat",[pI]:"fire-fst",[xI]:"fire-fst-compat",[gI]:"fire-vertex","fire-js":"fire-js",[yI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new Map,_I=new Map,Om=new Map;function hy(t,e){try{t.container.addComponent(e)}catch(n){Xr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ti(t){const e=t.name;if(Om.has(e))return Xr.debug(`There were multiple attempts to register component ${e}.`),!1;Om.set(e,t);for(const n of ql.values())hy(n,t);for(const n of _I.values())hy(n,t);return!0}function Zd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Xn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ls=new cc("app","Firebase",bI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ls.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=vI;function _b(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Lm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ls.create("bad-app-name",{appName:String(s)});if(n||(n=gb()),!n)throw Ls.create("no-options");const a=ql.get(s);if(a){if(pd(n,a.options)&&pd(r,a.config))return a;throw Ls.create("duplicate-app",{appName:s})}const o=new ST(s);for(const u of Om.values())o.addComponent(u);const c=new NI(n,r,o);return ql.set(s,c),c}function eh(t=Lm){const e=ql.get(t);if(!e&&t===Lm&&gb())return _b();if(!e)throw Ls.create("no-app",{appName:t});return e}function bb(){return Array.from(ql.values())}function gr(t,e,n){var r;let s=(r=wI[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const c=[`Unable to register library "${s}" with version "${e}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Xr.warn(c.join(" "));return}Ti(new Vs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jI="firebase-heartbeat-database",EI=1,Hl="firebase-heartbeat-store";let mf=null;function Nb(){return mf||(mf=BT(jI,EI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Hl)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ls.create("idb-open",{originalErrorMessage:t.message})})),mf}async function kI(t){try{const n=(await Nb()).transaction(Hl),r=await n.objectStore(Hl).get(jb(t));return await n.done,r}catch(e){if(e instanceof jr)Xr.warn(e.message);else{const n=Ls.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Xr.warn(n.message)}}}async function fy(t,e){try{const r=(await Nb()).transaction(Hl,"readwrite");await r.objectStore(Hl).put(e,jb(t)),await r.done}catch(n){if(n instanceof jr)Xr.warn(n.message);else{const r=Ls.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Xr.warn(r.message)}}}function jb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=1024,II=30*24*60*60*1e3;class SI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new AI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=my();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a)?void 0:(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=II}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Xr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=my(),{heartbeatsToSend:r,unsentEntries:s}=CI(this._heartbeatsCache.heartbeats),a=md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return Xr.warn(n),""}}}function my(){return new Date().toISOString().substring(0,10)}function CI(t,e=TI){const n=[];let r=t.slice();for(const s of t){const a=n.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),py(n)>e){a.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),py(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class AI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xT()?yT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await kI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return fy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function py(t){return md(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){Ti(new Vs("platform-logger",e=>new HT(e),"PRIVATE")),Ti(new Vs("heartbeat",e=>new SI(e),"PRIVATE")),gr(Dm,dy,t),gr(Dm,dy,"esm2017"),gr("fire-js","")}RI("");function cg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Eb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PI=Eb,kb=new cc("auth","Firebase",Eb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new og("@firebase/auth");function DI(t,...e){gd.logLevel<=xe.WARN&&gd.warn(`Auth (${Vi}): ${t}`,...e)}function Du(t,...e){gd.logLevel<=xe.ERROR&&gd.error(`Auth (${Vi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,...e){throw ug(t,...e)}function wn(t,...e){return ug(t,...e)}function Tb(t,e,n){const r=Object.assign(Object.assign({},PI()),{[e]:n});return new cc("auth","Firebase",r).create(e,{appName:t.name})}function xr(t){return Tb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ug(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return kb.create(t,...e)}function te(t,e,...n){if(!t)throw ug(e,...n)}function Vr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Du(e),new Error(e)}function Yr(t,e){t||Vr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Ib(){return gy()==="http:"||gy()==="https:"}function gy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ib()||fT()||"connection"in navigator)?navigator.onLine:!0}function OI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,Yr(n>e,"Short delay should be less than long delay!"),this.isMobile=uT()||mT()}get(){return LI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t,e){Yr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new uc(3e4,6e4);function on(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Un(t,e,n,r,s={}){return Cb(t,s,async()=>{let a={},o={};r&&(e==="GET"?o=r:a={body:JSON.stringify(r)});const c=io(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return hT()||(d.referrerPolicy="no-referrer"),Sb.fetch()(Ab(t,t.config.apiHost,n,c),d)})}async function Cb(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MI),e);try{const s=new UI(t),a=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw rl(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const c=a.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw rl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw rl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Tb(t,h,d);sr(t,h)}}catch(s){if(s instanceof jr)throw s;sr(t,"network-request-failed",{message:String(s)})}}async function Qs(t,e,n,r,s={}){const a=await Un(t,e,n,r,s);return"mfaPendingCredential"in a&&sr(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Ab(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?dg(t.config,s):`${t.config.apiScheme}://${s}`}function FI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class UI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),VI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t){return t!==void 0&&t.getResponse!==void 0}function yy(t){return t!==void 0&&t.enterprise!==void 0}class $I{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return FI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(t){return(await Un(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function zI(t,e){return Un(t,"GET","/v2/recaptchaConfig",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t,e){return Un(t,"POST","/v1/accounts:delete",e)}async function Rb(t,e){return Un(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HI(t,e=!1){const n=Me(t),r=await n.getIdToken(e),s=hg(r);te(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:r,authTime:gl(pf(s.auth_time)),issuedAtTime:gl(pf(s.iat)),expirationTime:gl(pf(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function pf(t){return Number(t)*1e3}function hg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Du("JWT malformed, contained fewer than 3 sections"),null;try{const s=fb(n);return s?JSON.parse(s):(Du("Failed to decode base64 JWT payload"),null)}catch(s){return Du("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function vy(t){const e=hg(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jr&&WI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function WI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=gl(this.lastLoginAt),this.creationTime=gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Wl(t,Rb(n,{idToken:r}));te(s==null?void 0:s.users.length,n,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Pb(a.providerUserInfo):[],c=QI(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(c!=null&&c.length),h=u?d:!1,m={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Vm(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,m)}async function GI(t){const e=Me(t);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Pb(t){return t.map(e=>{var{providerId:n}=e,r=cg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(t,e){const n=await Cb(t,{},async()=>{const r=io({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=Ab(t,s,"/v1/token",`key=${a}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",Sb.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YI(t,e){return Un(t,"POST","/v2/accounts:revokeToken",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):vy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){te(e.length!==0,"internal-error");const n=vy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:a}=await XI(e,n);this.updateTokensAndExpiration(r,s,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:a}=n,o=new Da;return r&&(te(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(te(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(te(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Da,this.toJSON())}_performRefresh(){return Vr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fr{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,a=cg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Vm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Wl(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HI(this,e)}reload(){return GI(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await xd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xn(this.auth.app))return Promise.reject(xr(this.auth));const e=await this.getIdToken();return await Wl(this,qI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,a,o,c,u,d,h;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,v=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,_=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(c=n.tenantId)!==null&&c!==void 0?c:void 0,T=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,b=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:y,emailVerified:N,isAnonymous:A,providerData:O,stsTokenManager:j}=n;te(y&&j,e,"internal-error");const x=Da.fromJSON(this.name,j);te(typeof y=="string",e,"internal-error"),hs(m,e.name),hs(p,e.name),te(typeof N=="boolean",e,"internal-error"),te(typeof A=="boolean",e,"internal-error"),hs(v,e.name),hs(_,e.name),hs(R,e.name),hs(T,e.name),hs(b,e.name),hs(w,e.name);const E=new Fr({uid:y,auth:e,email:p,emailVerified:N,displayName:m,isAnonymous:A,photoURL:_,phoneNumber:v,tenantId:R,stsTokenManager:x,createdAt:b,lastLoginAt:w});return O&&Array.isArray(O)&&(E.providerData=O.map(k=>Object.assign({},k))),T&&(E._redirectEventId=T),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new Da;s.updateFromServerResponse(n);const a=new Fr({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await xd(a),a}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];te(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Pb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),c=new Da;c.updateFromIdToken(r);const u=new Fr({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Vm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=new Map;function Ur(t){Yr(t instanceof Function,"Expected a class definition");let e=wy.get(t);return e?(Yr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,wy.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Db.type="NONE";const _y=Db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e,n){return`firebase:${t}:${e}:${n}`}class La{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:a}=this.auth;this.fullUserKey=Lu(this.userKey,s.apiKey,a),this.fullPersistenceKey=Lu("persistence",s.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new La(Ur(_y),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||Ur(_y);const o=Lu(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){const m=Fr._fromJSON(e,h);d!==a&&(c=m),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new La(a,e,r):(a=u[0],c&&await a._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new La(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Lb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ub(e))return"Blackberry";if($b(e))return"Webos";if(Ob(e))return"Safari";if((e.includes("chrome/")||Mb(e))&&!e.includes("edge/"))return"Chrome";if(Fb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Lb(t=qt()){return/firefox\//i.test(t)}function Ob(t=qt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mb(t=qt()){return/crios\//i.test(t)}function Vb(t=qt()){return/iemobile/i.test(t)}function Fb(t=qt()){return/android/i.test(t)}function Ub(t=qt()){return/blackberry/i.test(t)}function $b(t=qt()){return/webos/i.test(t)}function fg(t=qt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JI(t=qt()){var e;return fg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ZI(){return pT()&&document.documentMode===10}function Bb(t=qt()){return fg(t)||Fb(t)||$b(t)||Ub(t)||/windows phone/i.test(t)||Vb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(t,e=[]){let n;switch(t){case"Browser":n=by(qt());break;case"Worker":n=`${by(qt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((o,c)=>{try{const u=e(a);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tS(t,e={}){return Un(t,"GET","/v2/passwordPolicy",on(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=6;class rS{constructor(e){var n,r,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:nS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,a,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ny(this),this.idTokenSubscription=new Ny(this),this.beforeStateQueue=new eS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ur(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await La.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Rb(this,{idToken:e}),r=await Fr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Xn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xn(this.app))return Promise.reject(xr(this));const n=e?Me(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xn(this.app)?Promise.reject(xr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xn(this.app)?Promise.reject(xr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ur(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tS(this),n=new rS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new cc("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await YI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ur(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await La.create(this,[Ur(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(c,this,"internal-error"),c.then(()=>{o||a(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&DI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ns(t){return Me(t)}class Ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=NT(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iS(t){dc=t}function mg(t){return dc.loadJS(t)}function aS(){return dc.recaptchaV2Script}function oS(){return dc.recaptchaEnterpriseScript}function lS(){return dc.gapiScript}function qb(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const cS="recaptcha-enterprise",uS="NO_RECAPTCHA";class dS{constructor(e){this.type=cS,this.auth=ns(e)}async verify(e="verify",n=!1){async function r(a){if(!n){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,c)=>{zI(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new $I(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(a,o,c){const u=window.grecaptcha;yy(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(uS)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((a,o)=>{r(this.auth).then(c=>{if(!n&&yy(window.grecaptcha))s(c,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=oS();u.length!==0&&(u+=c),mg(u).then(()=>{s(c,a,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function jy(t,e,n,r=!1){const s=new dS(t);let a;try{a=await s.verify(n)}catch{a=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Fm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await jy(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await jy(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){const n=Zd(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),a=n.getOptions();if(pd(a,e??{}))return s;sr(s,"already-initialized")}return n.initialize({options:e})}function hS(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ur);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function fS(t,e,n){const r=ns(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,a=Wb(e),{host:o,port:c}=mS(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${a}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),pS()}function Wb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function mS(t){const e=Wb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const a=s[1];return{host:a,port:Ey(r.substr(a.length+1))}}else{const[a,o]=r.split(":");return{host:a,port:Ey(o)}}}function Ey(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function pS(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vr("not implemented")}_getIdTokenResponse(e){return Vr("not implemented")}_linkToIdToken(e,n){return Vr("not implemented")}_getReauthenticationResolver(e){return Vr("not implemented")}}async function gS(t,e){return Un(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xS(t,e){return Qs(t,"POST","/v1/accounts:signInWithPassword",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yS(t,e){return Qs(t,"POST","/v1/accounts:signInWithEmailLink",on(t,e))}async function vS(t,e){return Qs(t,"POST","/v1/accounts:signInWithEmailLink",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends th{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Kl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Kl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,n,"signInWithPassword",xS);case"emailLink":return yS(e,{email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Fm(e,r,"signUpPassword",gS);case"emailLink":return vS(e,{idToken:n,email:this._email,oobCode:this._password});default:sr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oa(t,e){return Qs(t,"POST","/v1/accounts:signInWithIdp",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="http://localhost";class Ii extends th{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ii(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,a=cg(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ii(r,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Oa(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Oa(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Oa(e,n)}buildRequest(){const e={requestUri:wS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=io(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _S(t,e){return Un(t,"POST","/v1/accounts:sendVerificationCode",on(t,e))}async function bS(t,e){return Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,e))}async function NS(t,e){const n=await Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,e));if(n.temporaryProof)throw rl(t,"account-exists-with-different-credential",n);return n}const jS={USER_NOT_FOUND:"user-not-found"};async function ES(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qs(t,"POST","/v1/accounts:signInWithPhoneNumber",on(t,n),jS)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends th{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new xl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new xl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return bS(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return NS(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return ES(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:a}=e;return!r&&!n&&!s&&!a?null:new xl({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function TS(t){const e=tl(nl(t)).link,n=e?tl(nl(e)).deep_link_id:null,r=tl(nl(t)).deep_link_id;return(r?tl(nl(r)).link:null)||r||n||e||t}class pg{constructor(e){var n,r,s,a,o,c;const u=tl(nl(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,m=kS((s=u.mode)!==null&&s!==void 0?s:null);te(d&&h&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=TS(e);try{return new pg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return Kl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=pg.parseLink(n);return te(r,"argument-error"),Kl._fromEmailAndCode(e,r.code,r.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends Kb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends hc{constructor(){super("facebook.com")}static credential(e){return Ii._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xs.credentialFromTaggedObject(e)}static credentialFromError(e){return xs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xs.credential(e.oauthAccessToken)}catch{return null}}}xs.FACEBOOK_SIGN_IN_METHOD="facebook.com";xs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ii._fromParams({providerId:ys.PROVIDER_ID,signInMethod:ys.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ys.credentialFromTaggedObject(e)}static credentialFromError(e){return ys.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ys.credential(n,r)}catch{return null}}}ys.GOOGLE_SIGN_IN_METHOD="google.com";ys.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs extends hc{constructor(){super("github.com")}static credential(e){return Ii._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws extends hc{constructor(){super("twitter.com")}static credential(e,n){return Ii._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ws.credential(n,r)}catch{return null}}}ws.TWITTER_SIGN_IN_METHOD="twitter.com";ws.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(t,e){return Qs(t,"POST","/v1/accounts:signUp",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const a=await Fr._fromIdTokenResponse(e,r,s),o=ky(r);return new Si({user:a,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=ky(r);return new Si({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function ky(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd extends jr{constructor(e,n,r,s){var a;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,yd.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new yd(e,n,r,s)}}function Gb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?yd._fromErrorAndOperation(t,a,e,r):a})}async function SS(t,e,n=!1){const r=await Wl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Si._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CS(t,e,n=!1){const{auth:r}=t;if(Xn(r.app))return Promise.reject(xr(r));const s="reauthenticate";try{const a=await Wl(t,Gb(r,s,e,t),n);te(a.idToken,r,"internal-error");const o=hg(a.idToken);te(o,r,"internal-error");const{sub:c}=o;return te(t.uid===c,r,"user-mismatch"),Si._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&sr(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qb(t,e,n=!1){if(Xn(t.app))return Promise.reject(xr(t));const r="signIn",s=await Gb(t,r,e),a=await Si._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(a.user),a}async function Xb(t,e){return Qb(ns(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(t){const e=ns(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function yl(t,e,n){if(Xn(t.app))return Promise.reject(xr(t));const r=ns(t),o=await Fm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",IS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Yb(t),u}),c=await Si._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function AS(t,e,n){return Xn(t.app)?Promise.reject(xr(t)):Xb(Me(t),ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Yb(t),r})}function RS(t,e,n,r){return Me(t).onIdTokenChanged(e,n,r)}function PS(t,e,n){return Me(t).beforeAuthStateChanged(e,n)}function DS(t,e,n,r){return Me(t).onAuthStateChanged(e,n,r)}function LS(t){return Me(t).signOut()}async function OS(t){return Me(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e){return Un(t,"POST","/v2/accounts/mfaEnrollment:start",on(t,e))}const vd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(vd,"1"),this.storage.removeItem(vd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS=1e3,FS=10;class Zb extends Jb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},a=this.storage.getItem(r);ZI()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zb.type="LOCAL";const eN=Zb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN extends Jb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}tN.type="SESSION";const nN=tN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function US(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new nh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:a}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,a)),u=await US(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}nh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((c,u)=>{const d=gg("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const p=m;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return window}function BS(t){ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(){return typeof ut().WorkerGlobalScope<"u"&&typeof ut().importScripts=="function"}async function zS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HS(){return xg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN="firebaseLocalStorageDb",WS=1,wd="firebaseLocalStorage",sN="fbase_key";class fc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function rh(t,e){return t.transaction([wd],e?"readwrite":"readonly").objectStore(wd)}function KS(){const t=indexedDB.deleteDatabase(rN);return new fc(t).toPromise()}function Um(){const t=indexedDB.open(rN,WS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(wd,{keyPath:sN})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(wd)?e(r):(r.close(),await KS(),e(await Um()))})})}async function Ty(t,e,n){const r=rh(t,!0).put({[sN]:e,value:n});return new fc(r).toPromise()}async function GS(t,e){const n=rh(t,!1).get(e),r=await new fc(n).toPromise();return r===void 0?null:r.value}function Iy(t,e){const n=rh(t,!0).delete(e);return new fc(n).toPromise()}const QS=800,XS=3;class iN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>XS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=nh._getInstance(HS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zS(),!this.activeServiceWorker)return;this.sender=new $S(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await Ty(e,vd,"1"),await Iy(e,vd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Ty(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>GS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Iy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=rh(s,!1).getAll();return new fc(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iN.type="LOCAL";const aN=iN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t,e){return Un(t,"POST","/v2/accounts/mfaSignIn:start",on(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=500,ZS=6e4,hu=1e12;class eC{constructor(e){this.auth=e,this.counter=hu,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new tC(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||hu;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||hu;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||hu;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class tC{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;te(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=nC(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},ZS)},JS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function nC(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf=qb("rcb"),rC=new uc(3e4,6e4);class sC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(iC(n),e,"argument-error"),this.shouldResolveImmediately(n)&&xy(ut().grecaptcha)?Promise.resolve(ut().grecaptcha):new Promise((r,s)=>{const a=ut().setTimeout(()=>{s(wn(e,"network-request-failed"))},rC.get());ut()[gf]=()=>{ut().clearTimeout(a),delete ut()[gf];const c=ut().grecaptcha;if(!c||!xy(c)){s(wn(e,"internal-error"));return}const u=c.render;c.render=(d,h)=>{const m=u(d,h);return this.counter++,m},this.hostLanguage=n,r(c)};const o=`${aS()}?${io({onload:gf,render:"explicit",hl:n})}`;mg(o).catch(()=>{clearTimeout(a),s(wn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function iC(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class aC{async load(e){return new eC(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN="recaptcha",oC={theme:"light",type:"image"};class Sy{constructor(e,n,r=Object.assign({},oC)){this.parameters=r,this.type=oN,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ns(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;te(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new aC:new sC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const a=o=>{o&&(this.tokenChangeListeners.delete(a),s(o))};this.tokenChangeListeners.add(a),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ut()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(Ib()&&!xg(),this.auth,"internal-error"),await lC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await BI(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function lC(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=xl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function uC(t,e,n){if(Xn(t.app))return Promise.reject(xr(t));const r=ns(t),s=await dC(r,e,Me(n));return new cC(s,a=>Xb(r,a))}async function dC(t,e,n){var r;const s=await n.verify();try{te(typeof s=="string",t,"argument-error"),te(n.type===oN,t,"argument-error");let a;if(typeof e=="string"?a={phoneNumber:e}:a=e,"session"in a){const o=a.session;if("phoneNumber"in a)return te(o.type==="enroll",t,"internal-error"),(await MS(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{te(o.type==="signin",t,"internal-error");const c=((r=a.multiFactorHint)===null||r===void 0?void 0:r.uid)||a.multiFactorUid;return te(c,t,"missing-multi-factor-info"),(await YS(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await _S(t,{phoneNumber:a.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(t,e){return e?Ur(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends th{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oa(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Oa(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Oa(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function fC(t){return Qb(t.auth,new yg(t),t.bypassAuthState)}function mC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),CS(n,new yg(t),t.bypassAuthState)}async function pC(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),SS(n,new yg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n,r,s,a=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:a,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fC;case"linkViaPopup":case"linkViaRedirect":return pC;case"reauthViaPopup":case"reauthViaRedirect":return mC;default:sr(this.auth,"internal-error")}}resolve(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Yr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC=new uc(2e3,1e4);class ka extends lN{constructor(e,n,r,s,a){super(e,n,s,a),this.provider=r,this.authWindow=null,this.pollId=null,ka.currentPopupAction&&ka.currentPopupAction.cancel(),ka.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){Yr(this.filter.length===1,"Popup operations only handle one event");const e=gg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ka.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,gC.get())};e()}}ka.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC="pendingRedirect",Ou=new Map;class yC extends lN{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ou.get(this.auth._key());if(!e){try{const r=await vC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ou.set(this.auth._key(),e)}return this.bypassAuthState||Ou.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vC(t,e){const n=bC(e),r=_C(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function wC(t,e){Ou.set(t._key(),e)}function _C(t){return Ur(t._redirectPersistence)}function bC(t){return Lu(xC,t.config.apiKey,t.name)}async function NC(t,e,n=!1){if(Xn(t.app))return Promise.reject(xr(t));const r=ns(t),s=hC(r,e),o=await new yC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=10*60*1e3;class EC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cN(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cy(e))}saveEventToCache(e){this.cachedEventUids.add(Cy(e)),this.lastProcessedEventTime=Date.now()}}function Cy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function kC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(t,e={}){return Un(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SC=/^https?/;async function CC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await TC(t);for(const n of e)try{if(AC(n))return}catch{}sr(t,"unauthorized-domain")}function AC(t){const e=Mm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!SC.test(n))return!1;if(IC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new uc(3e4,6e4);function Ay(){const t=ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PC(t){return new Promise((e,n)=>{var r,s,a;function o(){Ay(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ay(),n(wn(t,"network-request-failed"))},timeout:RC.get()})}if(!((s=(r=ut().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=ut().gapi)===null||a===void 0)&&a.load)o();else{const c=qb("iframefcb");return ut()[c]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},mg(`${lS()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw Mu=null,e})}let Mu=null;function DC(t){return Mu=Mu||PC(t),Mu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new uc(5e3,15e3),OC="__/auth/iframe",MC="emulator/auth/iframe",VC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},FC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UC(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?dg(e,MC):`https://${t.config.authDomain}/${OC}`,r={apiKey:e.apiKey,appName:t.name,v:Vi},s=FC.get(t.config.apiHost);s&&(r.eid=s);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${io(r).slice(1)}`}async function $C(t){const e=await DC(t),n=ut().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:UC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:VC,dontclear:!0},r=>new Promise(async(s,a)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),c=ut().setTimeout(()=>{a(o)},LC.get());function u(){ut().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,qC=600,HC="_blank",WC="http://localhost";class Ry{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KC(t,e,n,r=zC,s=qC){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},BC),{width:r.toString(),height:s.toString(),top:a,left:o}),d=qt().toLowerCase();n&&(c=Mb(d)?HC:n),Lb(d)&&(e=e||WC,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[v,_])=>`${p}${v}=${_},`,"");if(JI(d)&&c!=="_self")return GC(e||"",c),new Ry(null);const m=window.open(e||"",c,h);te(m,t,"popup-blocked");try{m.focus()}catch{}return new Ry(m)}function GC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="__/auth/handler",XC="emulator/auth/handler",YC=encodeURIComponent("fac");async function Py(t,e,n,r,s,a){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vi,eventId:s};if(e instanceof Kb){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof hc){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const u=await t._getAppCheckToken(),d=u?`#${YC}=${encodeURIComponent(u)}`:"";return`${JC(t)}?${io(c).slice(1)}${d}`}function JC({config:t}){return t.emulator?dg(t,XC):`https://${t.authDomain}/${QC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="webStorageSupport";class ZC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=nN,this._completeRedirectFn=NC,this._overrideRedirectResult=wC}async _openPopup(e,n,r,s){var a;Yr((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await Py(e,n,r,Mm(),s);return KC(e,o,gg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const a=await Py(e,n,r,Mm(),s);return BS(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:a}=this.eventManagers[n];return s?Promise.resolve(s):(Yr(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await $C(e),r=new EC(e);return n.register("authEvent",s=>(te(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xf,{type:xf},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[xf];o!==void 0&&n(!!o),sr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Bb()||Ob()||fg()}}const eA=ZC;var Dy="@firebase/auth",Ly="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function rA(t){Ti(new Vs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;te(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zb(t)},d=new sS(r,s,a,u);return hS(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ti(new Vs("auth-internal",e=>{const n=ns(e.getProvider("auth").getImmediate());return(r=>new tA(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),gr(Dy,Ly,nA(t)),gr(Dy,Ly,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA=5*60,iA=xb("authIdTokenMaxAge")||sA;let Oy=null;const aA=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>iA)return;const s=n==null?void 0:n.token;Oy!==s&&(Oy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function oA(t=eh()){const e=Zd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Hb(t,{popupRedirectResolver:eA,persistence:[aN,eN,nN]}),r=xb("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const o=aA(a.toString());PS(n,o,()=>o(n.currentUser)),RS(n,c=>o(c))}}const s=mb("auth");return s&&fS(n,`http://${s}`),n}function lA(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}iS({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const a=wn("internal-error");a.customData=s,n(a)},r.type="text/javascript",r.charset="UTF-8",lA().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});rA("Browser");var cA="firebase",uA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gr(cA,uA,"app");var My=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var yi,uN;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(j,x){function E(){}E.prototype=x.prototype,j.D=x.prototype,j.prototype=new E,j.prototype.constructor=j,j.C=function(k,P,L){for(var D=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)D[ie-2]=arguments[ie];return x.prototype[P].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(j,x,E){E||(E=0);var k=Array(16);if(typeof x=="string")for(var P=0;16>P;++P)k[P]=x.charCodeAt(E++)|x.charCodeAt(E++)<<8|x.charCodeAt(E++)<<16|x.charCodeAt(E++)<<24;else for(P=0;16>P;++P)k[P]=x[E++]|x[E++]<<8|x[E++]<<16|x[E++]<<24;x=j.g[0],E=j.g[1],P=j.g[2];var L=j.g[3],D=x+(L^E&(P^L))+k[0]+3614090360&4294967295;x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+k[1]+3905402710&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+k[2]+606105819&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+k[3]+3250441966&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+k[4]+4118548399&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+k[5]+1200080426&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+k[6]+2821735955&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+k[7]+4249261313&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+k[8]+1770035416&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+k[9]+2336552879&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+k[10]+4294925233&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+k[11]+2304563134&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(L^E&(P^L))+k[12]+1804603682&4294967295,x=E+(D<<7&4294967295|D>>>25),D=L+(P^x&(E^P))+k[13]+4254626195&4294967295,L=x+(D<<12&4294967295|D>>>20),D=P+(E^L&(x^E))+k[14]+2792965006&4294967295,P=L+(D<<17&4294967295|D>>>15),D=E+(x^P&(L^x))+k[15]+1236535329&4294967295,E=P+(D<<22&4294967295|D>>>10),D=x+(P^L&(E^P))+k[1]+4129170786&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+k[6]+3225465664&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+k[11]+643717713&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+k[0]+3921069994&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+k[5]+3593408605&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+k[10]+38016083&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+k[15]+3634488961&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+k[4]+3889429448&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+k[9]+568446438&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+k[14]+3275163606&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+k[3]+4107603335&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+k[8]+1163531501&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(P^L&(E^P))+k[13]+2850285829&4294967295,x=E+(D<<5&4294967295|D>>>27),D=L+(E^P&(x^E))+k[2]+4243563512&4294967295,L=x+(D<<9&4294967295|D>>>23),D=P+(x^E&(L^x))+k[7]+1735328473&4294967295,P=L+(D<<14&4294967295|D>>>18),D=E+(L^x&(P^L))+k[12]+2368359562&4294967295,E=P+(D<<20&4294967295|D>>>12),D=x+(E^P^L)+k[5]+4294588738&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+k[8]+2272392833&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+k[11]+1839030562&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+k[14]+4259657740&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+k[1]+2763975236&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+k[4]+1272893353&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+k[7]+4139469664&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+k[10]+3200236656&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+k[13]+681279174&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+k[0]+3936430074&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+k[3]+3572445317&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+k[6]+76029189&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(E^P^L)+k[9]+3654602809&4294967295,x=E+(D<<4&4294967295|D>>>28),D=L+(x^E^P)+k[12]+3873151461&4294967295,L=x+(D<<11&4294967295|D>>>21),D=P+(L^x^E)+k[15]+530742520&4294967295,P=L+(D<<16&4294967295|D>>>16),D=E+(P^L^x)+k[2]+3299628645&4294967295,E=P+(D<<23&4294967295|D>>>9),D=x+(P^(E|~L))+k[0]+4096336452&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+k[7]+1126891415&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+k[14]+2878612391&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+k[5]+4237533241&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+k[12]+1700485571&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+k[3]+2399980690&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+k[10]+4293915773&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+k[1]+2240044497&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+k[8]+1873313359&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+k[15]+4264355552&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+k[6]+2734768916&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+k[13]+1309151649&4294967295,E=P+(D<<21&4294967295|D>>>11),D=x+(P^(E|~L))+k[4]+4149444226&4294967295,x=E+(D<<6&4294967295|D>>>26),D=L+(E^(x|~P))+k[11]+3174756917&4294967295,L=x+(D<<10&4294967295|D>>>22),D=P+(x^(L|~E))+k[2]+718787259&4294967295,P=L+(D<<15&4294967295|D>>>17),D=E+(L^(P|~x))+k[9]+3951481745&4294967295,j.g[0]=j.g[0]+x&4294967295,j.g[1]=j.g[1]+(P+(D<<21&4294967295|D>>>11))&4294967295,j.g[2]=j.g[2]+P&4294967295,j.g[3]=j.g[3]+L&4294967295}r.prototype.u=function(j,x){x===void 0&&(x=j.length);for(var E=x-this.blockSize,k=this.B,P=this.h,L=0;L<x;){if(P==0)for(;L<=E;)s(this,j,L),L+=this.blockSize;if(typeof j=="string"){for(;L<x;)if(k[P++]=j.charCodeAt(L++),P==this.blockSize){s(this,k),P=0;break}}else for(;L<x;)if(k[P++]=j[L++],P==this.blockSize){s(this,k),P=0;break}}this.h=P,this.o+=x},r.prototype.v=function(){var j=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);j[0]=128;for(var x=1;x<j.length-8;++x)j[x]=0;var E=8*this.o;for(x=j.length-8;x<j.length;++x)j[x]=E&255,E/=256;for(this.u(j),j=Array(16),x=E=0;4>x;++x)for(var k=0;32>k;k+=8)j[E++]=this.g[x]>>>k&255;return j};function a(j,x){var E=c;return Object.prototype.hasOwnProperty.call(E,j)?E[j]:E[j]=x(j)}function o(j,x){this.h=x;for(var E=[],k=!0,P=j.length-1;0<=P;P--){var L=j[P]|0;k&&L==x||(E[P]=L,k=!1)}this.g=E}var c={};function u(j){return-128<=j&&128>j?a(j,function(x){return new o([x|0],0>x?-1:0)}):new o([j|0],0>j?-1:0)}function d(j){if(isNaN(j)||!isFinite(j))return m;if(0>j)return T(d(-j));for(var x=[],E=1,k=0;j>=E;k++)x[k]=j/E|0,E*=4294967296;return new o(x,0)}function h(j,x){if(j.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(j.charAt(0)=="-")return T(h(j.substring(1),x));if(0<=j.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=d(Math.pow(x,8)),k=m,P=0;P<j.length;P+=8){var L=Math.min(8,j.length-P),D=parseInt(j.substring(P,P+L),x);8>L?(L=d(Math.pow(x,L)),k=k.j(L).add(d(D))):(k=k.j(E),k=k.add(d(D)))}return k}var m=u(0),p=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-T(this).m();for(var j=0,x=1,E=0;E<this.g.length;E++){var k=this.i(E);j+=(0<=k?k:4294967296+k)*x,x*=4294967296}return j},t.toString=function(j){if(j=j||10,2>j||36<j)throw Error("radix out of range: "+j);if(_(this))return"0";if(R(this))return"-"+T(this).toString(j);for(var x=d(Math.pow(j,6)),E=this,k="";;){var P=N(E,x).g;E=b(E,P.j(x));var L=((0<E.g.length?E.g[0]:E.h)>>>0).toString(j);if(E=P,_(E))return L+k;for(;6>L.length;)L="0"+L;k=L+k}},t.i=function(j){return 0>j?0:j<this.g.length?this.g[j]:this.h};function _(j){if(j.h!=0)return!1;for(var x=0;x<j.g.length;x++)if(j.g[x]!=0)return!1;return!0}function R(j){return j.h==-1}t.l=function(j){return j=b(this,j),R(j)?-1:_(j)?0:1};function T(j){for(var x=j.g.length,E=[],k=0;k<x;k++)E[k]=~j.g[k];return new o(E,~j.h).add(p)}t.abs=function(){return R(this)?T(this):this},t.add=function(j){for(var x=Math.max(this.g.length,j.g.length),E=[],k=0,P=0;P<=x;P++){var L=k+(this.i(P)&65535)+(j.i(P)&65535),D=(L>>>16)+(this.i(P)>>>16)+(j.i(P)>>>16);k=D>>>16,L&=65535,D&=65535,E[P]=D<<16|L}return new o(E,E[E.length-1]&-2147483648?-1:0)};function b(j,x){return j.add(T(x))}t.j=function(j){if(_(this)||_(j))return m;if(R(this))return R(j)?T(this).j(T(j)):T(T(this).j(j));if(R(j))return T(this.j(T(j)));if(0>this.l(v)&&0>j.l(v))return d(this.m()*j.m());for(var x=this.g.length+j.g.length,E=[],k=0;k<2*x;k++)E[k]=0;for(k=0;k<this.g.length;k++)for(var P=0;P<j.g.length;P++){var L=this.i(k)>>>16,D=this.i(k)&65535,ie=j.i(P)>>>16,V=j.i(P)&65535;E[2*k+2*P]+=D*V,w(E,2*k+2*P),E[2*k+2*P+1]+=L*V,w(E,2*k+2*P+1),E[2*k+2*P+1]+=D*ie,w(E,2*k+2*P+1),E[2*k+2*P+2]+=L*ie,w(E,2*k+2*P+2)}for(k=0;k<x;k++)E[k]=E[2*k+1]<<16|E[2*k];for(k=x;k<2*x;k++)E[k]=0;return new o(E,0)};function w(j,x){for(;(j[x]&65535)!=j[x];)j[x+1]+=j[x]>>>16,j[x]&=65535,x++}function y(j,x){this.g=j,this.h=x}function N(j,x){if(_(x))throw Error("division by zero");if(_(j))return new y(m,m);if(R(j))return x=N(T(j),x),new y(T(x.g),T(x.h));if(R(x))return x=N(j,T(x)),new y(T(x.g),x.h);if(30<j.g.length){if(R(j)||R(x))throw Error("slowDivide_ only works with positive integers.");for(var E=p,k=x;0>=k.l(j);)E=A(E),k=A(k);var P=O(E,1),L=O(k,1);for(k=O(k,2),E=O(E,2);!_(k);){var D=L.add(k);0>=D.l(j)&&(P=P.add(E),L=D),k=O(k,1),E=O(E,1)}return x=b(j,P.j(x)),new y(P,x)}for(P=m;0<=j.l(x);){for(E=Math.max(1,Math.floor(j.m()/x.m())),k=Math.ceil(Math.log(E)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),L=d(E),D=L.j(x);R(D)||0<D.l(j);)E-=k,L=d(E),D=L.j(x);_(L)&&(L=p),P=P.add(L),j=b(j,D)}return new y(P,j)}t.A=function(j){return N(this,j).h},t.and=function(j){for(var x=Math.max(this.g.length,j.g.length),E=[],k=0;k<x;k++)E[k]=this.i(k)&j.i(k);return new o(E,this.h&j.h)},t.or=function(j){for(var x=Math.max(this.g.length,j.g.length),E=[],k=0;k<x;k++)E[k]=this.i(k)|j.i(k);return new o(E,this.h|j.h)},t.xor=function(j){for(var x=Math.max(this.g.length,j.g.length),E=[],k=0;k<x;k++)E[k]=this.i(k)^j.i(k);return new o(E,this.h^j.h)};function A(j){for(var x=j.g.length+1,E=[],k=0;k<x;k++)E[k]=j.i(k)<<1|j.i(k-1)>>>31;return new o(E,j.h)}function O(j,x){var E=x>>5;x%=32;for(var k=j.g.length-E,P=[],L=0;L<k;L++)P[L]=0<x?j.i(L+E)>>>x|j.i(L+E+1)<<32-x:j.i(L+E);return new o(P,j.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uN=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,yi=o}).apply(typeof My<"u"?My:typeof self<"u"?self:typeof window<"u"?window:{});var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dN,sl,hN,Vu,$m,fN,mN,pN;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof fu=="object"&&fu];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,f){if(f)e:{var g=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var M=l[S];if(!(M in g))break e;g=g[M]}l=l[l.length-1],S=g[l],f=f(S),f!=S&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function a(l,f){l instanceof String&&(l+="");var g=0,S=!1,M={next:function(){if(!S&&g<l.length){var U=g++;return{value:f(U,l[U]),done:!1}}return S=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return a(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function d(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function m(l,f,g){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,S),l.apply(f,M)}}return function(){return l.apply(f,arguments)}}function p(l,f,g){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:m,p.apply(null,arguments)}function v(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function _(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(S,M,U){for(var Y=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)Y[Re-2]=arguments[Re];return f.prototype[M].apply(S,Y)}}function R(l){const f=l.length;if(0<f){const g=Array(f);for(let S=0;S<f;S++)g[S]=l[S];return g}return[]}function T(l,f){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(u(S)){const M=l.length||0,U=S.length||0;l.length=M+U;for(let Y=0;Y<U;Y++)l[M+Y]=S[Y]}else l.push(S)}}class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function w(l){return/^[\s\xa0]*$/.test(l)}function y(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function N(l){return N[" "](l),l}N[" "]=function(){};var A=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function O(l,f,g){for(const S in l)f.call(g,l[S],S,l)}function j(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function x(l){const f={};for(const g in l)f[g]=l[g];return f}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,f){let g,S;for(let M=1;M<arguments.length;M++){S=arguments[M];for(g in S)l[g]=S[g];for(let U=0;U<E.length;U++)g=E[U],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function P(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function L(l){c.setTimeout(()=>{throw l},0)}function D(){var l=X;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class ie{constructor(){this.h=this.g=null}add(f,g){const S=V.get();S.set(f,g),this.h?this.h.next=S:this.g=S,this.h=S}}var V=new b(()=>new $,l=>l.reset());class ${constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let B,F=!1,X=new ie,re=()=>{const l=c.Promise.resolve(void 0);B=()=>{l.then(ve)}};var ve=()=>{for(var l;l=D();){try{l.h.call(l.g)}catch(g){L(g)}var f=V;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}F=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function De(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}De.prototype.h=function(){this.defaultPrevented=!0};var Rt=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};c.addEventListener("test",g,f),c.removeEventListener("test",g,f)}catch{}return l}();function Bn(l,f){if(De.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(A){e:{try{N(f.nodeName);var M=!0;break e}catch{}M=!1}M||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ln[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Bn.aa.h.call(this)}}_(Bn,De);var ln={2:"touch",3:"pen",4:"mouse"};Bn.prototype.h=function(){Bn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var cn="closure_listenable_"+(1e6*Math.random()|0),rs=0;function Cc(l,f,g,S,M){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!S,this.ha=M,this.key=++rs,this.da=this.fa=!1}function ss(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ys(l){this.src=l,this.g={},this.h=0}Ys.prototype.add=function(l,f,g,S,M){var U=l.toString();l=this.g[U],l||(l=this.g[U]=[],this.h++);var Y=$i(l,f,S,M);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new Cc(f,this.src,U,!!S,M),f.fa=g,l.push(f)),f};function kr(l,f){var g=f.type;if(g in l.g){var S=l.g[g],M=Array.prototype.indexOf.call(S,f,void 0),U;(U=0<=M)&&Array.prototype.splice.call(S,M,1),U&&(ss(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function $i(l,f,g,S){for(var M=0;M<l.length;++M){var U=l[M];if(!U.da&&U.listener==f&&U.capture==!!g&&U.ha==S)return M}return-1}var Bi="closure_lm_"+(1e6*Math.random()|0),zi={};function mo(l,f,g,S,M){if(Array.isArray(f)){for(var U=0;U<f.length;U++)mo(l,f[U],g,S,M);return null}return g=vo(g),l&&l[cn]?l.K(f,g,d(S)?!!S.capture:!1,M):Ac(l,f,g,!1,S,M)}function Ac(l,f,g,S,M,U){if(!f)throw Error("Invalid event type");var Y=d(M)?!!M.capture:!!M,Re=qi(l);if(Re||(l[Bi]=Re=new Ys(l)),g=Re.add(f,g,S,Y,U),g.proxy)return g;if(S=po(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)Rt||(M=Y),M===void 0&&(M=!1),l.addEventListener(f.toString(),S,M);else if(l.attachEvent)l.attachEvent(xo(f.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function po(){function l(g){return f.call(l.src,l.listener,g)}const f=yo;return l}function go(l,f,g,S,M){if(Array.isArray(f))for(var U=0;U<f.length;U++)go(l,f[U],g,S,M);else S=d(S)?!!S.capture:!!S,g=vo(g),l&&l[cn]?(l=l.i,f=String(f).toString(),f in l.g&&(U=l.g[f],g=$i(U,g,S,M),-1<g&&(ss(U[g]),Array.prototype.splice.call(U,g,1),U.length==0&&(delete l.g[f],l.h--)))):l&&(l=qi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=$i(f,g,S,M)),(g=-1<l?f[l]:null)&&ar(g))}function ar(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[cn])kr(f.i,l);else{var g=l.type,S=l.proxy;f.removeEventListener?f.removeEventListener(g,S,l.capture):f.detachEvent?f.detachEvent(xo(g),S):f.addListener&&f.removeListener&&f.removeListener(S),(g=qi(f))?(kr(g,l),g.h==0&&(g.src=null,f[Bi]=null)):ss(l)}}}function xo(l){return l in zi?zi[l]:zi[l]="on"+l}function yo(l,f){if(l.da)l=!0;else{f=new Bn(f,this);var g=l.listener,S=l.ha||l.src;l.fa&&ar(l),l=g.call(S,f)}return l}function qi(l){return l=l[Bi],l instanceof Ys?l:null}var Tr="__closure_events_fn_"+(1e9*Math.random()>>>0);function vo(l){return typeof l=="function"?l:(l[Tr]||(l[Tr]=function(f){return l.handleEvent(f)}),l[Tr])}function ot(){pe.call(this),this.i=new Ys(this),this.M=this,this.F=null}_(ot,pe),ot.prototype[cn]=!0,ot.prototype.removeEventListener=function(l,f,g,S){go(this,l,f,g,S)};function xt(l,f){var g,S=l.F;if(S)for(g=[];S;S=S.F)g.push(S);if(l=l.M,S=f.type||f,typeof f=="string")f=new De(f,l);else if(f instanceof De)f.target=f.target||l;else{var M=f;f=new De(S,l),k(f,M)}if(M=!0,g)for(var U=g.length-1;0<=U;U--){var Y=f.g=g[U];M=Js(Y,S,!0,f)&&M}if(Y=f.g=l,M=Js(Y,S,!0,f)&&M,M=Js(Y,S,!1,f)&&M,g)for(U=0;U<g.length;U++)Y=f.g=g[U],M=Js(Y,S,!1,f)&&M}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],S=0;S<g.length;S++)ss(g[S]);delete l.g[f],l.h--}}this.F=null},ot.prototype.K=function(l,f,g,S){return this.i.add(String(l),f,!1,g,S)},ot.prototype.L=function(l,f,g,S){return this.i.add(String(l),f,!0,g,S)};function Js(l,f,g,S){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var M=!0,U=0;U<f.length;++U){var Y=f[U];if(Y&&!Y.da&&Y.capture==g){var Re=Y.listener,Et=Y.ha||Y.src;Y.fa&&kr(l.i,Y),M=Re.call(Et,S)!==!1&&M}}return M&&!S.defaultPrevented}function wo(l,f,g){if(typeof l=="function")g&&(l=p(l,g));else if(l&&typeof l.handleEvent=="function")l=p(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:c.setTimeout(l,f||0)}function Hi(l){l.g=wo(()=>{l.g=null,l.i&&(l.i=!1,Hi(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class Rc extends pe{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Hi(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(l){pe.call(this),this.h=l,this.g={}}_(kn,pe);var _o=[];function Wi(l){O(l.g,function(f,g){this.g.hasOwnProperty(g)&&ar(f)},l),l.g={}}kn.prototype.N=function(){kn.aa.N.call(this),Wi(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ki=c.JSON.stringify,Pc=c.JSON.parse,Dc=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Gi(){}Gi.prototype.h=null;function bo(l){return l.h||(l.h=l.i())}function or(){}var is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function as(){De.call(this,"d")}_(as,De);function Qi(){De.call(this,"c")}_(Qi,De);var lr={},No=null;function zn(){return No=No||new ot}lr.La="serverreachability";function Lc(l){De.call(this,lr.La,l)}_(Lc,De);function Zs(l){const f=zn();xt(f,new Lc(f))}lr.STAT_EVENT="statevent";function Xi(l,f){De.call(this,lr.STAT_EVENT,l),this.stat=f}_(Xi,De);function mt(l){const f=zn();xt(f,new Xi(f,l))}lr.Ma="timingevent";function Yi(l,f){De.call(this,lr.Ma,l),this.size=f}_(Yi,De);function os(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},f)}function Ir(){this.g=!0}Ir.prototype.xa=function(){this.g=!1};function Ji(l,f,g,S,M,U){l.info(function(){if(l.g)if(U)for(var Y="",Re=U.split("&"),Et=0;Et<Re.length;Et++){var Ne=Re[Et].split("=");if(1<Ne.length){var Pt=Ne[0];Ne=Ne[1];var Dt=Pt.split("_");Y=2<=Dt.length&&Dt[1]=="type"?Y+(Pt+"="+Ne+"&"):Y+(Pt+"=redacted&")}}else Y=null;else Y=U;return"XMLHTTP REQ ("+S+") [attempt "+M+"]: "+f+`
`+g+`
`+Y})}function jo(l,f,g,S,M,U,Y){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+M+"]: "+f+`
`+g+`
`+U+" "+Y})}function Sr(l,f,g,S){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+Oc(l,g)+(S?" "+S:"")})}function Eo(l,f){l.info(function(){return"TIMEOUT: "+f})}Ir.prototype.info=function(){};function Oc(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var S=g[l];if(!(2>S.length)){var M=S[1];if(Array.isArray(M)&&!(1>M.length)){var U=M[0];if(U!="noop"&&U!="stop"&&U!="close")for(var Y=1;Y<M.length;Y++)M[Y]=""}}}}return Ki(g)}catch{return f}}var ls={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ko={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zi;function qn(){}_(qn,Gi),qn.prototype.g=function(){return new XMLHttpRequest},qn.prototype.i=function(){return{}},Zi=new qn;function cr(l,f,g,S){this.j=l,this.i=f,this.l=g,this.R=S||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Mc}function Mc(){this.i=null,this.g="",this.h=!1}var Vc={},To={};function Io(l,f,g){l.L=1,l.v=ra(he(f)),l.m=g,l.P=!0,lt(l,null)}function lt(l,f){l.F=Date.now(),ea(l),l.A=he(l.v);var g=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),_x(g.i,"t",S),l.C=0,g=l.j.J,l.h=new Mc,l.g=Fx(l.j,g?f:null,!l.m),0<l.O&&(l.M=new Rc(p(l.Y,l,l.g),l.O)),f=l.U,g=l.g,S=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(_o[0]=M.toString()),M=_o);for(var U=0;U<M.length;U++){var Y=mo(g,M[U],S||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),Zs(),Ji(l.i,l.u,l.A,l.l,l.R,l.m)}cr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Ar(l)==3?f.j():this.Y(l)},cr.prototype.Y=function(l){try{if(l==this.g)e:{const Dt=Ar(this.g);var f=this.g.Ba();const la=this.g.Z();if(!(3>Dt)&&(Dt!=3||this.g&&(this.h.h||this.g.oa()||Ix(this.g)))){this.J||Dt!=4||f==7||(f==8||0>=la?Zs(3):Zs(2)),Co(this);var g=this.g.Z();this.X=g;t:if(So(this)){var S=Ix(this.g);l="";var M=S.length,U=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Cr(this),ei(this);var Y="";break t}this.h.i=new c.TextDecoder}for(f=0;f<M;f++)this.h.h=!0,l+=this.h.i.decode(S[f],{stream:!(U&&f==M-1)});S.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,jo(this.i,this.u,this.A,this.l,this.R,Dt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,Et=this.g;if((Re=Et.g?Et.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Re)){var Ne=Re;break t}}Ne=null}if(g=Ne)Sr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ao(this,g);else{this.o=!1,this.s=3,mt(12),Cr(this),ei(this);break e}}if(this.P){g=!0;let Hn;for(;!this.J&&this.C<Y.length;)if(Hn=Ih(this,Y),Hn==To){Dt==4&&(this.s=4,mt(14),g=!1),Sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Vc){this.s=4,mt(15),Sr(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else Sr(this.i,this.l,Hn,null),Ao(this,Hn);if(So(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Dt!=4||Y.length!=0||this.h.h||(this.s=1,mt(16),g=!1),this.o=this.o&&g,!g)Sr(this.i,this.l,Y,"[Invalid Chunked Response]"),Cr(this),ei(this);else if(0<Y.length&&!this.W){this.W=!0;var Pt=this.j;Pt.g==this&&Pt.ba&&!Pt.M&&(Pt.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Dh(Pt),Pt.M=!0,mt(11))}}else Sr(this.i,this.l,Y,null),Ao(this,Y);Dt==4&&Cr(this),this.o&&!this.J&&(Dt==4?Lx(this.j,this):(this.o=!1,ea(this)))}else Nj(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,mt(12)):(this.s=0,mt(13)),Cr(this),ei(this)}}}catch{}finally{}};function So(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Ih(l,f){var g=l.C,S=f.indexOf(`
`,g);return S==-1?To:(g=Number(f.substring(g,S)),isNaN(g)?Vc:(S+=1,S+g>f.length?To:(f=f.slice(S,S+g),l.C=S+g,f)))}cr.prototype.cancel=function(){this.J=!0,Cr(this)};function ea(l){l.S=Date.now()+l.I,Fc(l,l.I)}function Fc(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=os(p(l.ba,l),f)}function Co(l){l.B&&(c.clearTimeout(l.B),l.B=null)}cr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(Eo(this.i,this.A),this.L!=2&&(Zs(),mt(17)),Cr(this),this.s=2,ei(this)):Fc(this,this.S-l)};function ei(l){l.j.G==0||l.J||Lx(l.j,l)}function Cr(l){Co(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Wi(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function Ao(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||ta(g.h,l))){if(!l.K&&ta(g.h,l)&&g.G==3){try{var S=g.Da.g.parse(f)}catch{S=null}if(Array.isArray(S)&&S.length==3){var M=S;if(M[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Wc(g),qc(g);else break e;Ph(g),mt(18)}}else g.za=M[1],0<g.za-g.T&&37500>M[2]&&g.F&&g.v==0&&!g.C&&(g.C=os(p(g.Za,g),6e3));if(1>=Po(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else si(g,11)}else if((l.K||g.g==l)&&Wc(g),!w(f))for(M=g.Da.g.parse(f),f=0;f<M.length;f++){let Ne=M[f];if(g.T=Ne[0],Ne=Ne[1],g.G==2)if(Ne[0]=="c"){g.K=Ne[1],g.ia=Ne[2];const Pt=Ne[3];Pt!=null&&(g.la=Pt,g.j.info("VER="+g.la));const Dt=Ne[4];Dt!=null&&(g.Aa=Dt,g.j.info("SVER="+g.Aa));const la=Ne[5];la!=null&&typeof la=="number"&&0<la&&(S=1.5*la,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const Hn=l.g;if(Hn){const Gc=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gc){var U=S.h;U.g||Gc.indexOf("spdy")==-1&&Gc.indexOf("quic")==-1&&Gc.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&(na(U,U.h),U.h=null))}if(S.D){const Lh=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;Lh&&(S.ya=Lh,Se(S.I,S.D,Lh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var Y=l;if(S.qa=Vx(S,S.J?S.ia:null,S.W),Y.K){C(S.h,Y);var Re=Y,Et=S.L;Et&&(Re.I=Et),Re.B&&(Co(Re),ea(Re)),S.g=Y}else Px(S);0<g.i.length&&Hc(g)}else Ne[0]!="stop"&&Ne[0]!="close"||si(g,7);else g.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?si(g,7):Rh(g):Ne[0]!="noop"&&g.l&&g.l.ta(Ne),g.v=0)}}Zs(4)}catch{}}var Sh=class{constructor(l,f){this.g=l,this.map=f}};function Uc(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ro(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Po(l){return l.h?1:l.g?l.g.size:0}function ta(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function na(l,f){l.g?l.g.add(f):l.h=f}function C(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Uc.prototype.cancel=function(){if(this.i=W(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function W(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return R(l.i)}function K(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,S=0;S<g;S++)f.push(l[S]);return f}f=[],g=0;for(S in l)f[g++]=l[S];return f}function le(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const S in l)f[g++]=S;return f}}}function be(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=le(l),S=K(l),M=S.length,U=0;U<M;U++)f.call(void 0,S[U],g&&g[U],l)}var Ce=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Je(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var S=l[g].indexOf("="),M=null;if(0<=S){var U=l[g].substring(0,S);M=l[g].substring(S+1)}else U=l[g];f(U,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function yt(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof yt){this.h=l.h,Ae(this,l.j),this.o=l.o,this.g=l.g,We(this,l.s),this.l=l.l;var f=l.i,g=new Lo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),un(this,g),this.m=l.m}else l&&(f=String(l).match(Ce))?(this.h=!1,Ae(this,f[1]||"",!0),this.o=ti(f[2]||""),this.g=ti(f[3]||"",!0),We(this,f[4]),this.l=ti(f[5]||"",!0),un(this,f[6]||"",!0),this.m=ti(f[7]||"")):(this.h=!1,this.i=new Lo(null,this.h))}yt.prototype.toString=function(){var l=[],f=this.j;f&&l.push(ni(f,Do,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(ni(f,Do,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(ni(g,g.charAt(0)=="/"?sa:fe,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",ni(g,ia)),l.join("")};function he(l){return new yt(l)}function Ae(l,f,g){l.j=g?ti(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function We(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function un(l,f,g){f instanceof Lo?(l.i=f,gj(l.i,l.h)):(g||(f=ni(f,ri)),l.i=new Lo(f,l.h))}function Se(l,f,g){l.i.set(f,g)}function ra(l){return Se(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ti(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function ni(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Ch),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ch(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Do=/[#\/\?@]/g,fe=/[#\?:]/g,sa=/[#\?]/g,ri=/[#\?@]/g,ia=/#/g;function Lo(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function cs(l){l.g||(l.g=new Map,l.h=0,l.i&&Je(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=Lo.prototype,t.add=function(l,f){cs(this),this.i=null,l=aa(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function vx(l,f){cs(l),f=aa(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function wx(l,f){return cs(l),f=aa(l,f),l.g.has(f)}t.forEach=function(l,f){cs(this),this.g.forEach(function(g,S){g.forEach(function(M){l.call(f,M,S,this)},this)},this)},t.na=function(){cs(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let S=0;S<f.length;S++){const M=l[S];for(let U=0;U<M.length;U++)g.push(f[S])}return g},t.V=function(l){cs(this);let f=[];if(typeof l=="string")wx(this,l)&&(f=f.concat(this.g.get(aa(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return cs(this),this.i=null,l=aa(this,l),wx(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function _x(l,f,g){vx(l,f),0<g.length&&(l.i=null,l.g.set(aa(l,f),R(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var S=f[g];const U=encodeURIComponent(String(S)),Y=this.V(S);for(S=0;S<Y.length;S++){var M=U;Y[S]!==""&&(M+="="+encodeURIComponent(String(Y[S]))),l.push(M)}}return this.i=l.join("&")};function aa(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function gj(l,f){f&&!l.j&&(cs(l),l.i=null,l.g.forEach(function(g,S){var M=S.toLowerCase();S!=M&&(vx(this,S),_x(this,M,g))},l)),l.j=f}function xj(l,f){const g=new Ir;if(c.Image){const S=new Image;S.onload=v(us,g,"TestLoadImage: loaded",!0,f,S),S.onerror=v(us,g,"TestLoadImage: error",!1,f,S),S.onabort=v(us,g,"TestLoadImage: abort",!1,f,S),S.ontimeout=v(us,g,"TestLoadImage: timeout",!1,f,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else f(!1)}function yj(l,f){const g=new Ir,S=new AbortController,M=setTimeout(()=>{S.abort(),us(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:S.signal}).then(U=>{clearTimeout(M),U.ok?us(g,"TestPingServer: ok",!0,f):us(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(M),us(g,"TestPingServer: error",!1,f)})}function us(l,f,g,S,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),S(g)}catch{}}function vj(){this.g=new Dc}function wj(l,f,g){const S=g||"";try{be(l,function(M,U){let Y=M;d(M)&&(Y=Ki(M)),f.push(S+U+"="+encodeURIComponent(Y))})}catch(M){throw f.push(S+"type="+encodeURIComponent("_badmap")),M}}function $c(l){this.l=l.Ub||null,this.j=l.eb||!1}_($c,Gi),$c.prototype.g=function(){return new Bc(this.l,this.j)},$c.prototype.i=function(l){return function(){return l}}({});function Bc(l,f){ot.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Bc,ot),t=Bc.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Mo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||c).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Oo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Mo(this)),this.g&&(this.readyState=3,Mo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bx(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function bx(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Oo(this):Mo(this),this.readyState==3&&bx(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Oo(this))},t.Qa=function(l){this.g&&(this.response=l,Oo(this))},t.ga=function(){this.g&&Oo(this)};function Oo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Mo(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Mo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Bc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Nx(l){let f="";return O(l,function(g,S){f+=S,f+=":",f+=g,f+=`\r
`}),f}function Ah(l,f,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=Nx(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Se(l,f,g))}function Ze(l){ot.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Ze,ot);var _j=/^https?$/i,bj=["POST","PUT"];t=Ze.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zi.g(),this.v=this.o?bo(this.o):bo(Zi),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(U){jx(this,U);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var M in S)g.set(M,S[M]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const U of S.keys())g.set(U,S.get(U));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(U=>U.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(bj,f,void 0))||S||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Y]of g)this.g.setRequestHeader(U,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Tx(this),this.u=!0,this.g.send(l),this.u=!1}catch(U){jx(this,U)}};function jx(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,Ex(l),zc(l)}function Ex(l){l.A||(l.A=!0,xt(l,"complete"),xt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,xt(this,"complete"),xt(this,"abort"),zc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zc(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?kx(this):this.bb())},t.bb=function(){kx(this)};function kx(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Ar(l)!=4||l.Z()!=2)){if(l.u&&Ar(l)==4)wo(l.Ea,0,l);else if(xt(l,"readystatechange"),Ar(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var S;if(S=Y===0){var M=String(l.D).match(Ce)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),S=!_j.test(M?M.toLowerCase():"")}g=S}if(g)xt(l,"complete"),xt(l,"success");else{l.m=6;try{var U=2<Ar(l)?l.g.statusText:""}catch{U=""}l.l=U+" ["+l.Z()+"]",Ex(l)}}finally{zc(l)}}}}function zc(l,f){if(l.g){Tx(l);const g=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||xt(l,"ready");try{g.onreadystatechange=S}catch{}}}function Tx(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Ar(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),Pc(f)}};function Ix(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Nj(l){const f={};l=(l.g&&2<=Ar(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(w(l[S]))continue;var g=P(l[S]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const U=f[M]||[];f[M]=U,U.push(g)}j(f,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vo(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Sx(l){this.Aa=0,this.i=[],this.j=new Ir,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vo("baseRetryDelayMs",5e3,l),this.cb=Vo("retryDelaySeedMs",1e4,l),this.Wa=Vo("forwardChannelMaxRetries",2,l),this.wa=Vo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Uc(l&&l.concurrentRequestLimit),this.Da=new vj,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Sx.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,S){mt(0),this.W=l,this.H=f||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Vx(this,null,this.W),Hc(this)};function Rh(l){if(Cx(l),l.G==3){var f=l.U++,g=he(l.I);if(Se(g,"SID",l.K),Se(g,"RID",f),Se(g,"TYPE","terminate"),Fo(l,g),f=new cr(l,l.j,f),f.L=2,f.v=ra(he(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&c.Image&&(new Image().src=f.v,g=!0),g||(f.g=Fx(f.j,null),f.g.ea(f.v)),f.F=Date.now(),ea(f)}Mx(l)}function qc(l){l.g&&(Dh(l),l.g.cancel(),l.g=null)}function Cx(l){qc(l),l.u&&(c.clearTimeout(l.u),l.u=null),Wc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Hc(l){if(!Ro(l.h)&&!l.s){l.s=!0;var f=l.Ga;B||re(),F||(B(),F=!0),X.add(f,l),l.B=0}}function jj(l,f){return Po(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=os(p(l.Ga,l,f),Ox(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new cr(this,this.j,l);let U=this.o;if(this.S&&(U?(U=x(U),k(U,this.S)):U=this.S),this.m!==null||this.O||(M.H=U,U=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(f+=S,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Rx(this,M,f),g=he(this.I),Se(g,"RID",l),Se(g,"CVER",22),this.D&&Se(g,"X-HTTP-Session-Id",this.D),Fo(this,g),U&&(this.O?f="headers="+encodeURIComponent(String(Nx(U)))+"&"+f:this.m&&Ah(g,this.m,U)),na(this.h,M),this.Ua&&Se(g,"TYPE","init"),this.P?(Se(g,"$req",f),Se(g,"SID","null"),M.T=!0,Io(M,g,null)):Io(M,g,f),this.G=2}}else this.G==3&&(l?Ax(this,l):this.i.length==0||Ro(this.h)||Ax(this))};function Ax(l,f){var g;f?g=f.l:g=l.U++;const S=he(l.I);Se(S,"SID",l.K),Se(S,"RID",g),Se(S,"AID",l.T),Fo(l,S),l.m&&l.o&&Ah(S,l.m,l.o),g=new cr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Rx(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),na(l.h,g),Io(g,S,f)}function Fo(l,f){l.H&&O(l.H,function(g,S){Se(f,S,g)}),l.l&&be({},function(g,S){Se(f,S,g)})}function Rx(l,f,g){g=Math.min(l.i.length,g);var S=l.l?p(l.l.Na,l.l,l):null;e:{var M=l.i;let U=-1;for(;;){const Y=["count="+g];U==-1?0<g?(U=M[0].g,Y.push("ofs="+U)):U=0:Y.push("ofs="+U);let Re=!0;for(let Et=0;Et<g;Et++){let Ne=M[Et].g;const Pt=M[Et].map;if(Ne-=U,0>Ne)U=Math.max(0,M[Et].g-100),Re=!1;else try{wj(Pt,Y,"req"+Ne+"_")}catch{S&&S(Pt)}}if(Re){S=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,S}function Px(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;B||re(),F||(B(),F=!0),X.add(f,l),l.v=0}}function Ph(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=os(p(l.Fa,l),Ox(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Dx(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=os(p(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,mt(10),qc(this),Dx(this))};function Dh(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function Dx(l){l.g=new cr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=he(l.qa);Se(f,"RID","rpc"),Se(f,"SID",l.K),Se(f,"AID",l.T),Se(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Se(f,"TO",l.ja),Se(f,"TYPE","xmlhttp"),Fo(l,f),l.m&&l.o&&Ah(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=ra(he(f)),g.m=null,g.P=!0,lt(g,l)}t.Za=function(){this.C!=null&&(this.C=null,qc(this),Ph(this),mt(19))};function Wc(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function Lx(l,f){var g=null;if(l.g==f){Wc(l),Dh(l),l.g=null;var S=2}else if(ta(l.h,f))g=f.D,C(l.h,f),S=1;else return;if(l.G!=0){if(f.o)if(S==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var M=l.B;S=zn(),xt(S,new Yi(S,g)),Hc(l)}else Px(l);else if(M=f.s,M==3||M==0&&0<f.X||!(S==1&&jj(l,f)||S==2&&Ph(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),M){case 1:si(l,5);break;case 4:si(l,10);break;case 3:si(l,6);break;default:si(l,2)}}}function Ox(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function si(l,f){if(l.j.info("Error code "+f),f==2){var g=p(l.fb,l),S=l.Xa;const M=!S;S=new yt(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ae(S,"https"),ra(S),M?xj(S.toString(),g):yj(S.toString(),g)}else mt(2);l.G=0,l.l&&l.l.sa(f),Mx(l),Cx(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function Mx(l){if(l.G=0,l.ka=[],l.l){const f=W(l.h);(f.length!=0||l.i.length!=0)&&(T(l.ka,f),T(l.ka,l.i),l.h.i.length=0,R(l.i),l.i.length=0),l.l.ra()}}function Vx(l,f,g){var S=g instanceof yt?he(g):new yt(g);if(S.g!="")f&&(S.g=f+"."+S.g),We(S,S.s);else{var M=c.location;S=M.protocol,f=f?f+"."+M.hostname:M.hostname,M=+M.port;var U=new yt(null);S&&Ae(U,S),f&&(U.g=f),M&&We(U,M),g&&(U.l=g),S=U}return g=l.D,f=l.ya,g&&f&&Se(S,g,f),Se(S,"VER",l.la),Fo(l,S),S}function Fx(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ze(new $c({eb:g})):new Ze(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ux(){}t=Ux.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kc(){}Kc.prototype.g=function(l,f){return new dn(l,f)};function dn(l,f){ot.call(this),this.g=new Sx(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!w(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!w(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new oa(this)}_(dn,ot),dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Rh(this.g)},dn.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=Ki(l),l=g);f.i.push(new Sh(f.Ya++,l)),f.G==3&&Hc(f)},dn.prototype.N=function(){this.g.l=null,delete this.j,Rh(this.g),delete this.g,dn.aa.N.call(this)};function $x(l){as.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}_($x,as);function Bx(){Qi.call(this),this.status=1}_(Bx,Qi);function oa(l){this.g=l}_(oa,Ux),oa.prototype.ua=function(){xt(this.g,"a")},oa.prototype.ta=function(l){xt(this.g,new $x(l))},oa.prototype.sa=function(l){xt(this.g,new Bx)},oa.prototype.ra=function(){xt(this.g,"b")},Kc.prototype.createWebChannel=Kc.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,pN=function(){return new Kc},mN=function(){return zn()},fN=lr,$m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,Vu=ls,ko.COMPLETE="complete",hN=ko,or.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",ot.prototype.listen=ot.prototype.K,sl=or,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,dN=Ze}).apply(typeof fu<"u"?fu:typeof self<"u"?self:typeof window<"u"?window:{});const Vy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Vt.UNAUTHENTICATED=new Vt(null),Vt.GOOGLE_CREDENTIALS=new Vt("google-credentials-uid"),Vt.FIRST_PARTY=new Vt("first-party-uid"),Vt.MOCK_USER=new Vt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ci=new og("@firebase/firestore");function Go(){return Ci.logLevel}function ne(t,...e){if(Ci.logLevel<=xe.DEBUG){const n=e.map(vg);Ci.debug(`Firestore (${oo}): ${t}`,...n)}}function Jr(t,...e){if(Ci.logLevel<=xe.ERROR){const n=e.map(vg);Ci.error(`Firestore (${oo}): ${t}`,...n)}}function Ai(t,...e){if(Ci.logLevel<=xe.WARN){const n=e.map(vg);Ci.warn(`Firestore (${oo}): ${t}`,...n)}}function vg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(t="Unexpected state"){const e=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: `+t;throw Jr(e),new Error(e)}function Ie(t,e){t||oe()}function de(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends jr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class xN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Vt.UNAUTHENTICATED))}shutdown(){}}class dA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class hA{constructor(e){this.t=e,this.currentUser=Vt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let a=new Br;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Br,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string"),new gN(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string"),new Vt(e)}}class fA{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Vt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class mA{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fA(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Vt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pA{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gA{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ie(this.o===void 0);const r=a=>{a.error!=null&&ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,ne("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const s=a=>{ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string"),this.R=n.token,new pA(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=xA(40);for(let a=0;a<s.length;++a)r.length<20&&s[a]<n&&(r+=e.charAt(s[a]%e.length))}return r}}function Ee(t,e){return t<e?-1:t>e?1:0}function Ha(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Z(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new it(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ee(this.nanoseconds,e.nanoseconds):Ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ce(e)}static min(){return new ce(new it(0,0))}static max(){return new ce(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n,r){n===void 0?n=0:n>e.length&&oe(),r===void 0?r=e.length-n:r>e.length-n&&oe(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Gl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Gl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const a=e.get(s),o=n.get(s);if(a<o)return-1;if(a>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Gl{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Z(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const yA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends Gl{construct(e,n,r){return new bt(e,n,r)}static isValidIdentifier(e){return yA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new bt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const a=()=>{if(r.length===0)throw new Z(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new Z(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Z(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(a(),s++)}if(a(),o)throw new Z(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(n)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Ue.fromString(e))}static fromName(e){return new se(Ue.fromString(e).popFirst(5))}static empty(){return new se(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Ue(e.slice()))}}function vA(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ce.fromTimestamp(r===1e9?new it(n+1,0):new it(n,r));return new Fs(s,se.empty(),e)}function wA(t){return new Fs(t.readTime,t.key,-1)}class Fs{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Fs(ce.min(),se.empty(),-1)}static max(){return new Fs(ce.max(),se.empty(),-1)}}function _A(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Ee(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class NA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t){if(t.code!==q.FAILED_PRECONDITION||t.message!==bA)throw t;ne("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&oe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new H((r,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,s)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof H?n:H.resolve(n)}catch(n){return H.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):H.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):H.reject(n)}static resolve(e){return new H((n,r)=>{n(e)})}static reject(e){return new H((n,r)=>{r(e)})}static waitFor(e){return new H((n,r)=>{let s=0,a=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++a,o&&a===s&&n()},u=>r(u))}),o=!0,a===s&&n()})}static or(e){let n=H.resolve(!1);for(const r of e)n=n.next(s=>s?H.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,a)=>{r.push(n.call(this,s,a))}),this.waitFor(r)}static mapArray(e,n){return new H((r,s)=>{const a=e.length,o=new Array(a);let c=0;for(let u=0;u<a;u++){const d=u;n(e[d]).next(h=>{o[d]=h,++c,c===a&&r(o)},h=>s(h))}})}static doWhile(e,n){return new H((r,s)=>{const a=()=>{e()===!0?n().next(()=>{a()},s):r()};a()})}}function jA(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}_g.oe=-1;function sh(t){return t==null}function _d(t){return t===0&&1/t==-1/0}function EA(t){return typeof t=="number"&&Number.isInteger(t)&&!_d(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function yN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Tt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Tt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mu(this.root,e,this.comparator,!0)}}class mu{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Tt{constructor(e,n,r,s,a){this.key=e,this.value=n,this.color=r??Tt.RED,this.left=s??Tt.EMPTY,this.right=a??Tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,a){return new Tt(e??this.key,n??this.value,r??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const a=r(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,n,r),null):a===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Tt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw oe();const e=this.left.check();if(e!==this.right.check())throw oe();return e+(this.isRed()?0:1)}}Tt.EMPTY=null,Tt.RED=!0,Tt.BLACK=!1;Tt.EMPTY=new class{constructor(){this.size=0}get key(){throw oe()}get value(){throw oe()}get color(){throw oe()}get left(){throw oe()}get right(){throw oe()}copy(e,n,r,s,a){return this}insert(e,n,r){return new Tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Uy(this.data.getIterator())}getIteratorFrom(e){return new Uy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof St)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new St(this.comparator);return n.data=e,n}}class Uy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new xn([])}unionWith(e){let n=new St(bt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new xn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ha(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vN extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new vN("Invalid base64 string: "+a):a}}(e);return new jt(n)}static fromUint8Array(e){const n=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new jt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const kA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Us(t){if(Ie(!!t),typeof t=="string"){let e=0;const n=kA.exec(t);if(Ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ng(t){const e=t.mapValue.fields.__previous_value__;return bg(e)?Ng(e):e}function Ql(t){const e=Us(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n,r,s,a,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Wa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Wa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Wa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pu={mapValue:{}};function Pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bg(t)?4:SA(t)?9007199254740991:IA(t)?10:11:oe()}function _r(t,e){if(t===e)return!0;const n=Pi(t);if(n!==Pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ql(t).isEqual(Ql(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Us(s.timestampValue),c=Us(a.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return Ri(s.bytesValue).isEqual(Ri(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return nt(s.geoPointValue.latitude)===nt(a.geoPointValue.latitude)&&nt(s.geoPointValue.longitude)===nt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return nt(s.integerValue)===nt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=nt(s.doubleValue),c=nt(a.doubleValue);return o===c?_d(o)===_d(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return Ha(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},c=a.mapValue.fields||{};if(Fy(o)!==Fy(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!_r(o[u],c[u])))return!1;return!0}(t,e);default:return oe()}}function Xl(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Ka(t,e){if(t===e)return 0;const n=Pi(t),r=Pi(e);if(n!==r)return Ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ee(t.booleanValue,e.booleanValue);case 2:return function(a,o){const c=nt(a.integerValue||a.doubleValue),u=nt(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return $y(t.timestampValue,e.timestampValue);case 4:return $y(Ql(t),Ql(e));case 5:return Ee(t.stringValue,e.stringValue);case 6:return function(a,o){const c=Ri(a),u=Ri(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const c=a.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const h=Ee(c[d],u[d]);if(h!==0)return h}return Ee(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const c=Ee(nt(a.latitude),nt(o.latitude));return c!==0?c:Ee(nt(a.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return By(t.arrayValue,e.arrayValue);case 10:return function(a,o){var c,u,d,h;const m=a.fields||{},p=o.fields||{},v=(c=m.value)===null||c===void 0?void 0:c.arrayValue,_=(u=p.value)===null||u===void 0?void 0:u.arrayValue,R=Ee(((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:By(v,_)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===pu.mapValue&&o===pu.mapValue)return 0;if(a===pu.mapValue)return 1;if(o===pu.mapValue)return-1;const c=a.fields||{},u=Object.keys(c),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let m=0;m<u.length&&m<h.length;++m){const p=Ee(u[m],h[m]);if(p!==0)return p;const v=Ka(c[u[m]],d[h[m]]);if(v!==0)return v}return Ee(u.length,h.length)}(t.mapValue,e.mapValue);default:throw oe()}}function $y(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ee(t,e);const n=Us(t),r=Us(e),s=Ee(n.seconds,r.seconds);return s!==0?s:Ee(n.nanos,r.nanos)}function By(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const a=Ka(n[s],r[s]);if(a)return a}return Ee(n.length,r.length)}function Ga(t){return Bm(t)}function Bm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Us(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ri(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const a of n.values||[])s?s=!1:r+=",",r+=Bm(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",a=!0;for(const o of r)a?a=!1:s+=",",s+=`${o}:${Bm(n.fields[o])}`;return s+"}"}(t.mapValue):oe()}function zy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function zm(t){return!!t&&"integerValue"in t}function jg(t){return!!t&&"arrayValue"in t}function qy(t){return!!t&&"nullValue"in t}function Hy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fu(t){return!!t&&"mapValue"in t}function IA(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Fi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vl(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vl(t.arrayValue.values[n]);return e}return Object.assign({},t)}function SA(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vl(n)}setAll(e){let n=bt.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=vl(o):s.push(c.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,s)}delete(e){const n=this.field(e.popLast());Fu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Fi(n,(s,a)=>e[s]=a);for(const s of r)delete e[s]}clone(){return new en(vl(this.value))}}function wN(t){const e=[];return Fi(t.fields,(n,r)=>{const s=new bt([n]);if(Fu(r)){const a=wN(r.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,r,s,a,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=a,this.data=o,this.documentState=c}static newInvalidDocument(e){return new Ut(e,0,ce.min(),ce.min(),ce.min(),en.empty(),0)}static newFoundDocument(e,n,r,s){return new Ut(e,1,n,ce.min(),r,s,0)}static newNoDocument(e,n){return new Ut(e,2,n,ce.min(),ce.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,ce.min(),ce.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,n){this.position=e,this.inclusive=n}}function Wy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?r=se.comparator(se.fromName(o.referenceValue),n.key):r=Ka(o,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ky(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n="asc"){this.field=e,this.dir=n}}function CA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _N{}class ht extends _N{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new RA(e,n,r):n==="array-contains"?new LA(e,r):n==="in"?new OA(e,r):n==="not-in"?new MA(e,r):n==="array-contains-any"?new VA(e,r):new ht(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new PA(e,r):new DA(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ka(n,this.value)):n!==null&&Pi(this.value)===Pi(n)&&this.matchesComparison(Ka(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return oe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends _N{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ir(e,n)}matches(e){return bN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bN(t){return t.op==="and"}function NN(t){return AA(t)&&bN(t)}function AA(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function qm(t){if(t instanceof ht)return t.field.canonicalString()+t.op.toString()+Ga(t.value);if(NN(t))return t.filters.map(e=>qm(e)).join(",");{const e=t.filters.map(n=>qm(n)).join(",");return`${t.op}(${e})`}}function jN(t,e){return t instanceof ht?function(r,s){return s instanceof ht&&r.op===s.op&&r.field.isEqual(s.field)&&_r(r.value,s.value)}(t,e):t instanceof ir?function(r,s){return s instanceof ir&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((a,o,c)=>a&&jN(o,s.filters[c]),!0):!1}(t,e):void oe()}function EN(t){return t instanceof ht?function(n){return`${n.field.canonicalString()} ${n.op} ${Ga(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(EN).join(" ,")+"}"}(t):"Filter"}class RA extends ht{constructor(e,n,r){super(e,n,r),this.key=se.fromName(r.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class PA extends ht{constructor(e,n){super(e,"in",n),this.keys=kN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DA extends ht{constructor(e,n){super(e,"not-in",n),this.keys=kN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function kN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>se.fromName(r.referenceValue))}class LA extends ht{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jg(n)&&Xl(n.arrayValue,this.value)}}class OA extends ht{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Xl(this.value.arrayValue,n)}}class MA extends ht{constructor(e,n){super(e,"not-in",n)}matches(e){if(Xl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Xl(this.value.arrayValue,n)}}class VA extends ht{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Xl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n=null,r=[],s=[],a=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=a,this.startAt=o,this.endAt=c,this.ue=null}}function Gy(t,e=null,n=[],r=[],s=null,a=null,o=null){return new FA(t,e,n,r,s,a,o)}function Eg(t){const e=de(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>qm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),sh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ga(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ga(r)).join(",")),e.ue=n}return e.ue}function kg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!CA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!jN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ky(t.startAt,e.startAt)&&Ky(t.endAt,e.endAt)}function Hm(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n=null,r=[],s=[],a=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=a,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function UA(t,e,n,r,s,a,o,c){return new lo(t,e,n,r,s,a,o,c)}function ih(t){return new lo(t)}function Qy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function TN(t){return t.collectionGroup!==null}function wl(t){const e=de(t);if(e.ce===null){e.ce=[];const n=new Set;for(const a of e.explicitOrderBy)e.ce.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new St(bt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.ce.push(new Yl(a,r))}),n.has(bt.keyField().canonicalString())||e.ce.push(new Yl(bt.keyField(),r))}return e.ce}function yr(t){const e=de(t);return e.le||(e.le=$A(e,wl(t))),e.le}function $A(t,e){if(t.limitType==="F")return Gy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Yl(s.field,a)});const n=t.endAt?new bd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new bd(t.startAt.position,t.startAt.inclusive):null;return Gy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Wm(t,e){const n=t.filters.concat([e]);return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Nd(t,e,n){return new lo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ah(t,e){return kg(yr(t),yr(e))&&t.limitType===e.limitType}function IN(t){return`${Eg(yr(t))}|lt:${t.limitType}`}function da(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>EN(s)).join(", ")}]`),sh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ga(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ga(s)).join(",")),`Target(${r})`}(yr(t))}; limitType=${t.limitType})`}function oh(t,e){return e.isFoundDocument()&&function(r,s){const a=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):se.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,s){for(const a of wl(r))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const a of r.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=Wy(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,wl(r),s)||r.endAt&&!function(o,c,u){const d=Wy(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,wl(r),s))}(t,e)}function BA(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function SN(t){return(e,n)=>{let r=!1;for(const s of wl(t)){const a=zA(s,e,n);if(a!==0)return a;r=r||s.field.isKeyField()}return 0}}function zA(t,e,n){const r=t.field.isKeyField()?se.comparator(e.key,n.key):function(a,o,c){const u=o.data.field(a),d=c.data.field(a);return u!==null&&d!==null?Ka(u,d):oe()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return oe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,a]of r)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Fi(this.inner,(n,r)=>{for(const[s,a]of r)e(s,a)})}isEmpty(){return yN(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=new Xe(se.comparator);function Zr(){return qA}const CN=new Xe(se.comparator);function il(...t){let e=CN;for(const n of t)e=e.insert(n.key,n);return e}function AN(t){let e=CN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function mi(){return _l()}function RN(){return _l()}function _l(){return new co(t=>t.toString(),(t,e)=>t.isEqual(e))}const HA=new Xe(se.comparator),WA=new St(se.comparator);function ge(...t){let e=WA;for(const n of t)e=e.add(n);return e}const KA=new St(Ee);function GA(){return KA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tg(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_d(e)?"-0":e}}function PN(t){return{integerValue:""+t}}function DN(t,e){return EA(e)?PN(e):Tg(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(){this._=void 0}}function QA(t,e,n){return t instanceof Jl?function(s,a){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&bg(a)&&(a=Ng(a)),a&&(o.fields.__previous_value__=a),{mapValue:o}}(n,e):t instanceof Zl?ON(t,e):t instanceof ec?MN(t,e):function(s,a){const o=LN(s,a),c=Xy(o)+Xy(s.Pe);return zm(o)&&zm(s.Pe)?PN(c):Tg(s.serializer,c)}(t,e)}function XA(t,e,n){return t instanceof Zl?ON(t,e):t instanceof ec?MN(t,e):n}function LN(t,e){return t instanceof tc?function(r){return zm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Jl extends lh{}class Zl extends lh{constructor(e){super(),this.elements=e}}function ON(t,e){const n=VN(e);for(const r of t.elements)n.some(s=>_r(s,r))||n.push(r);return{arrayValue:{values:n}}}class ec extends lh{constructor(e){super(),this.elements=e}}function MN(t,e){let n=VN(e);for(const r of t.elements)n=n.filter(s=>!_r(s,r));return{arrayValue:{values:n}}}class tc extends lh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Xy(t){return nt(t.integerValue||t.doubleValue)}function VN(t){return jg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(e,n){this.field=e,this.transform=n}}function YA(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Zl&&s instanceof Zl||r instanceof ec&&s instanceof ec?Ha(r.elements,s.elements,_r):r instanceof tc&&s instanceof tc?_r(r.Pe,s.Pe):r instanceof Jl&&s instanceof Jl}(t.transform,e.transform)}class JA{constructor(e,n){this.version=e,this.transformResults=n}}class Dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Dn}static exists(e){return new Dn(void 0,e)}static updateTime(e){return new Dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class ch{}function UN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ig(t.key,Dn.none()):new gc(t.key,t.data,Dn.none());{const n=t.data,r=en.empty();let s=new St(bt.comparator);for(let a of e.fields)if(!s.has(a)){let o=n.field(a);o===null&&a.length>1&&(a=a.popLast(),o=n.field(a)),o===null?r.delete(a):r.set(a,o),s=s.add(a)}return new Xs(t.key,r,new xn(s.toArray()),Dn.none())}}function ZA(t,e,n){t instanceof gc?function(s,a,o){const c=s.value.clone(),u=Jy(s.fieldTransforms,a,o.transformResults);c.setAll(u),a.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Xs?function(s,a,o){if(!Uu(s.precondition,a))return void a.convertToUnknownDocument(o.version);const c=Jy(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll($N(s)),u.setAll(c),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bl(t,e,n,r){return t instanceof gc?function(a,o,c,u){if(!Uu(a.precondition,o))return c;const d=a.value.clone(),h=Zy(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Xs?function(a,o,c,u){if(!Uu(a.precondition,o))return c;const d=Zy(a.fieldTransforms,u,o),h=o.data;return h.setAll($N(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(a,o,c){return Uu(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function eR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),a=LN(r.transform,s||null);a!=null&&(n===null&&(n=en.empty()),n.set(r.field,a))}return n||null}function Yy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ha(r,s,(a,o)=>YA(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gc extends ch{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Xs extends ch{constructor(e,n,r,s,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $N(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Jy(t,e,n){const r=new Map;Ie(t.length===n.length);for(let s=0;s<n.length;s++){const a=t[s],o=a.transform,c=e.data.field(a.field);r.set(a.field,XA(o,c,n[s]))}return r}function Zy(t,e,n){const r=new Map;for(const s of t){const a=s.transform,o=n.data.field(s.field);r.set(s.field,QA(a,o,e))}return r}class Ig extends ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tR extends ch{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&ZA(a,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=RN();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let c=this.applyToLocalView(o,a.mutatedFields);c=n.has(s.key)?null:c;const u=UN(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ce.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Ha(this.mutations,e.mutations,(n,r)=>Yy(n,r))&&Ha(this.baseMutations,e.baseMutations,(n,r)=>Yy(n,r))}}class Sg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){Ie(e.mutations.length===r.length);let s=function(){return HA}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,r[o].version);return new Sg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct,we;function iR(t){switch(t){default:return oe();case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0}}function BN(t){if(t===void 0)return Jr("GRPC error has no .code"),q.UNKNOWN;switch(t){case ct.OK:return q.OK;case ct.CANCELLED:return q.CANCELLED;case ct.UNKNOWN:return q.UNKNOWN;case ct.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case ct.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case ct.INTERNAL:return q.INTERNAL;case ct.UNAVAILABLE:return q.UNAVAILABLE;case ct.UNAUTHENTICATED:return q.UNAUTHENTICATED;case ct.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case ct.NOT_FOUND:return q.NOT_FOUND;case ct.ALREADY_EXISTS:return q.ALREADY_EXISTS;case ct.PERMISSION_DENIED:return q.PERMISSION_DENIED;case ct.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case ct.ABORTED:return q.ABORTED;case ct.OUT_OF_RANGE:return q.OUT_OF_RANGE;case ct.UNIMPLEMENTED:return q.UNIMPLEMENTED;case ct.DATA_LOSS:return q.DATA_LOSS;default:return oe()}}(we=ct||(ct={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new yi([4294967295,4294967295],0);function ev(t){const e=aR().encode(t),n=new uN;return n.update(e),new Uint8Array(n.digest())}function tv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new yi([n,r],0),new yi([s,a],0)]}class Cg{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new al(`Invalid padding: ${n}`);if(r<0)throw new al(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new al(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new al(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yi.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(yi.fromNumber(r)));return s.compare(oR)===1&&(s=new yi([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=ev(e),[r,s]=tv(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Cg(a,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=ev(e),[r,s]=tv(n);for(let a=0;a<this.hashCount;a++){const o=this.Ee(r,s,a);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n,r,s,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,xc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new uh(ce.min(),s,new Xe(Ee),Zr(),ge())}}class xc{constructor(e,n,r,s,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new xc(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class zN{constructor(e,n){this.targetId=e,this.me=n}}class qN{constructor(e,n,r=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class nv{constructor(){this.fe=0,this.ge=sv(),this.pe=jt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ge(),n=ge(),r=ge();return this.ge.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:oe()}}),new xc(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=sv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ie(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zr(),this.qe=rv(),this.Qe=new Xe(Ee)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:oe()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const a=s.target;if(Hm(a))if(r===0){const o=new se(a.path);this.Ue(n,o,Ut.newNoDocument(o,ce.min()))}else Ie(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:a=0}=n;let o,c;try{o=Ri(r).toUint8Array()}catch(u){if(u instanceof vN)return Ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Cg(o,s,a)}catch(u){return Ai(u instanceof al?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(a=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,a,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((a,o)=>{const c=this.Je(o);if(c){if(a.current&&Hm(c.target)){const u=new se(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,Ut.newNoDocument(u,e))}a.be&&(n.set(o,a.ve()),a.Ce())}});let r=ge();this.qe.forEach((a,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(a))}),this.ke.forEach((a,o)=>o.setReadTime(e));const s=new uh(e,n,this.Qe,this.ke,r);return this.ke=Zr(),this.qe=rv(),this.Qe=new Xe(Ee),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new nv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(Ee),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ne("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new nv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function rv(){return new Xe(se.comparator)}function sv(){return new Xe(se.comparator)}const cR={asc:"ASCENDING",desc:"DESCENDING"},uR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dR={and:"AND",or:"OR"};class hR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Km(t,e){return t.useProto3Json||sh(e)?e:{value:e}}function jd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function HN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function fR(t,e){return jd(t,e.toTimestamp())}function vr(t){return Ie(!!t),ce.fromTimestamp(function(n){const r=Us(n);return new it(r.seconds,r.nanos)}(t))}function Ag(t,e){return Gm(t,e).canonicalString()}function Gm(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function WN(t){const e=Ue.fromString(t);return Ie(YN(e)),e}function Qm(t,e){return Ag(t.databaseId,e.path)}function yf(t,e){const n=WN(e);if(n.get(1)!==t.databaseId.projectId)throw new Z(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Z(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(GN(n))}function KN(t,e){return Ag(t.databaseId,e)}function mR(t){const e=WN(t);return e.length===4?Ue.emptyPath():GN(e)}function Xm(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GN(t){return Ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function iv(t,e,n){return{name:Qm(t,e),fields:n.value.mapValue.fields}}function pR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:oe()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Ie(h===void 0||typeof h=="string"),jt.fromBase64String(h||"")):(Ie(h===void 0||h instanceof Buffer||h instanceof Uint8Array),jt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const h=d.code===void 0?q.UNKNOWN:BN(d.code);return new Z(h,d.message||"")}(o);n=new qN(r,s,a,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=yf(t,r.document.name),a=vr(r.document.updateTime),o=r.document.createTime?vr(r.document.createTime):ce.min(),c=new en({mapValue:{fields:r.document.fields}}),u=Ut.newFoundDocument(s,a,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new $u(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=yf(t,r.document),a=r.readTime?vr(r.readTime):ce.min(),o=Ut.newNoDocument(s,a),c=r.removedTargetIds||[];n=new $u([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=yf(t,r.document),a=r.removedTargetIds||[];n=new $u([],a,s,null)}else{if(!("filter"in e))return oe();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:a}=r,o=new sR(s,a),c=r.targetId;n=new zN(c,o)}}return n}function gR(t,e){let n;if(e instanceof gc)n={update:iv(t,e.key,e.value)};else if(e instanceof Ig)n={delete:Qm(t,e.key)};else if(e instanceof Xs)n={update:iv(t,e.key,e.data),updateMask:ER(e.fieldMask)};else{if(!(e instanceof tR))return oe();n={verify:Qm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,o){const c=o.transform;if(c instanceof Jl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Zl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof ec)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof tc)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw oe()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:fR(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:oe()}(t,e.precondition)),n}function xR(t,e){return t&&t.length>0?(Ie(e!==void 0),t.map(n=>function(s,a){let o=s.updateTime?vr(s.updateTime):vr(a);return o.isEqual(ce.min())&&(o=vr(a)),new JA(o,s.transformResults||[])}(n,e))):[]}function yR(t,e){return{documents:[KN(t,e.path)]}}function vR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=KN(t,s);const a=function(d){if(d.length!==0)return XN(ir.create(d,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:ha(p.field),direction:bR(p.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Km(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function wR(t){let e=mR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ie(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];n.where&&(a=function(m){const p=QN(m);return p instanceof ir&&NN(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(p=>function(_){return new Yl(fa(_.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(n.orderBy));let c=null;n.limit&&(c=function(m){let p;return p=typeof m=="object"?m.value:m,sh(p)?null:p}(n.limit));let u=null;n.startAt&&(u=function(m){const p=!!m.before,v=m.values||[];return new bd(v,p)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const p=!m.before,v=m.values||[];return new bd(v,p)}(n.endAt)),UA(e,s,o,a,c,"F",u,d)}function _R(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return oe()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function QN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=fa(n.unaryFilter.field);return ht.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=fa(n.unaryFilter.field);return ht.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=fa(n.unaryFilter.field);return ht.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fa(n.unaryFilter.field);return ht.create(o,"!=",{nullValue:"NULL_VALUE"});default:return oe()}}(t):t.fieldFilter!==void 0?function(n){return ht.create(fa(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return oe()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(r=>QN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return oe()}}(n.compositeFilter.op))}(t):oe()}function bR(t){return cR[t]}function NR(t){return uR[t]}function jR(t){return dR[t]}function ha(t){return{fieldPath:t.canonicalString()}}function fa(t){return bt.fromServerFormat(t.fieldPath)}function XN(t){return t instanceof ht?function(n){if(n.op==="=="){if(Hy(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NAN"}};if(qy(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hy(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NAN"}};if(qy(n.value))return{unaryFilter:{field:ha(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ha(n.field),op:NR(n.op),value:n.value}}}(t):t instanceof ir?function(n){const r=n.getFilters().map(s=>XN(s));return r.length===1?r[0]:{compositeFilter:{op:jR(n.op),filters:r}}}(t):oe()}function ER(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function YN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r,s,a=ce.min(),o=ce.min(),c=jt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.ct=e}}function TR(t){const e=wR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.un=new SR}addToCollectionParentIndex(e,n){return this.un.add(n),H.resolve()}getCollectionParents(e,n){return H.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return H.resolve()}deleteFieldIndex(e,n){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,n){return H.resolve()}getDocumentsMatchingTarget(e,n){return H.resolve(null)}getIndexType(e,n){return H.resolve(0)}getFieldIndexes(e,n){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,n){return H.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,n){return H.resolve(Fs.min())}updateCollectionGroup(e,n,r){return H.resolve()}updateIndexEntries(e,n){return H.resolve()}}class SR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new St(Ue.comparator),a=!s.has(r);return this.index[n]=s.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new St(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Qa(0)}static kn(){return new Qa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.changes=new co(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?H.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&bl(r.mutation,s,xn.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=mi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(a=>{let o=il();return a.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=mi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(a=>{n.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let a=Zr();const o=_l(),c=function(){return _l()}();return n.forEach((u,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Xs)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),bl(h.mutation,d,h.mutation.getFieldMask(),it.now())):o.set(d.key,xn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>{var m;return c.set(d,new AR(h,(m=o.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=_l();let s=new Xe((o,c)=>o-c),a=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let h=r.get(u)||xn.empty();h=c.applyToLocalView(d,h),r.set(u,h);const m=(s.get(c.batchId)||ge()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,h=u.value,m=RN();h.forEach(p=>{if(!a.has(p)){const v=UN(n.get(p),r.get(p));v!==null&&m.set(p,v),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return H.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):TN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-a.size):H.resolve(mi());let c=-1,u=a;return o.next(d=>H.forEach(d,(h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),a.get(h)?H.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,ge())).next(h=>({batchId:c,changes:AN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(r=>{let s=il();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const a=n.collectionGroup;let o=il();return this.indexManager.getCollectionParents(e,a).next(c=>H.forEach(c,u=>{const d=function(m,p){return new lo(p,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((m,p)=>{o=o.insert(m,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,s))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ut.newInvalidDocument(h)))});let c=il();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&bl(h.mutation,d,xn.empty(),it.now()),oh(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return H.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:vr(s.createTime)}}(n)),H.resolve()}getNamedQuery(e,n){return H.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:TR(s.bundledQuery),readTime:vr(s.readTime)}}(n)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(){this.overlays=new Xe(se.comparator),this.Ir=new Map}getOverlay(e,n){return H.resolve(this.overlays.get(n))}getOverlays(e,n){const r=mi();return H.forEach(n,s=>this.getOverlay(e,s).next(a=>{a!==null&&r.set(s,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,a)=>{this.ht(e,n,a)}),H.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ir.delete(r)),H.resolve()}getOverlaysForCollection(e,n,r){const s=mi(),a=n.length+1,o=new se(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>r&&s.set(u.getKey(),u)}return H.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let a=new Xe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=a.get(d.largestBatchId);h===null&&(h=mi(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=mi(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>c.set(d,h)),!(c.size()>=s)););return H.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rR(n,r));let a=this.Ir.get(n);a===void 0&&(a=ge(),this.Ir.set(n,a)),this.Ir.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(){this.Tr=new St(wt.Er),this.dr=new St(wt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new wt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new wt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new se(new Ue([])),r=new wt(n,e),s=new wt(n,e+1),a=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),a.push(o.key)}),a}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Ue([])),r=new wt(n,e),s=new wt(n,e+1);let a=ge();return this.dr.forEachInRange([r,s],o=>{a=a.add(o.key)}),a}containsKey(e){const n=new wt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class wt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Ee(e.wr,n.wr)}static Ar(e,n){return Ee(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new St(wt.Er)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const a=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nR(a,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new wt(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,n){return H.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),a=s<0?0:s;return H.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new wt(n,0),s=new wt(n,Number.POSITIVE_INFINITY),a=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);a.push(c)}),H.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(Ee);return n.forEach(s=>{const a=new wt(s,0),o=new wt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([a,o],c=>{r=r.add(c.wr)})}),H.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let a=r;se.isDocumentKey(a)||(a=a.child(""));const o=new wt(new se(a),0);let c=new St(Ee);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},o),H.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Ie(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return H.forEach(n.mutations,s=>{const a=new wt(s.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new wt(n,0),s=this.br.firstAfterOrEqual(r);return H.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.Mr=e,this.docs=function(){return new Xe(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),a=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return H.resolve(r?r.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let r=Zr();return n.forEach(s=>{const a=this.docs.get(s);r=r.insert(s,a?a.document.mutableCopy():Ut.newInvalidDocument(s))}),H.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let a=Zr();const o=n.path,c=new se(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||_A(wA(h),r)<=0||(s.has(h.key)||oh(n,h))&&(a=a.insert(h.key,h.mutableCopy()))}return H.resolve(a)}getAllFromCollectionGroup(e,n,r,s){oe()}Or(e,n){return H.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VR(this)}getSize(e){return H.resolve(this.size)}}class VR extends CR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),H.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.persistence=e,this.Nr=new co(n=>Eg(n),kg),this.lastRemoteSnapshotVersion=ce.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Rg,this.targetCount=0,this.kr=Qa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),H.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Qa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,H.resolve()}updateTargetData(e,n){return this.Kn(n),H.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,n,r){let s=0;const a=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),H.waitFor(a).next(()=>s)}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return H.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),H.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,a=[];return s&&n.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),H.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),H.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return H.resolve(r)}containsKey(e,n){return H.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new _g(0),this.Kr=!1,this.Kr=!0,this.$r=new LR,this.referenceDelegate=e(this),this.Ur=new FR(this),this.indexManager=new IR,this.remoteDocumentCache=function(s){return new MR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new kR(n),this.Gr=new PR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new DR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new OR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){ne("MemoryPersistence","Starting transaction:",e);const s=new $R(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(a=>this.referenceDelegate.jr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}Hr(e,n){return H.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class $R extends NA{constructor(e){super(),this.currentSequenceNumber=e}}class Pg{constructor(e){this.persistence=e,this.Jr=new Rg,this.Yr=null}static Zr(e){return new Pg(e)}get Xr(){if(this.Yr)return this.Yr;throw oe()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),H.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),H.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),H.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(a=>this.Xr.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.Xr,r=>{const s=se.fromPath(r);return this.ei(e,s).next(a=>{a||n.removeEntry(s,ce.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return H.or([()=>H.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ge(),s=ge();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Dg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return gT()?8:jA(qt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const a={result:null};return this.Yi(e,n).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.Zi(e,n,s,r).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new BR;return this.Xi(e,n,o).next(c=>{if(a.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>a.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Go()<=xe.DEBUG&&ne("QueryEngine","SDK will not create cache indexes for query:",da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),H.resolve()):(Go()<=xe.DEBUG&&ne("QueryEngine","Query:",da(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Go()<=xe.DEBUG&&ne("QueryEngine","The SDK decides to create cache indexes for query:",da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yr(n))):H.resolve())}Yi(e,n){if(Qy(n))return H.resolve(null);let r=yr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Nd(n,null,"F"),r=yr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const o=ge(...a);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,Nd(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Qy(n)||s.isEqual(ce.min())?H.resolve(null):this.Ji.getDocuments(e,r).next(a=>{const o=this.ts(n,a);return this.ns(n,o,r,s)?H.resolve(null):(Go()<=xe.DEBUG&&ne("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),da(n)),this.rs(e,o,n,vA(s,-1)).next(c=>c))})}ts(e,n){let r=new St(SN(e));return n.forEach((s,a)=>{oh(e,a)&&(r=r.add(a))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}Xi(e,n,r){return Go()<=xe.DEBUG&&ne("QueryEngine","Using full collection scan to execute query:",da(n)),this.Ji.getDocumentsMatchingQuery(e,n,Fs.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(a=>(n.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Xe(Ee),this._s=new co(a=>Eg(a),kg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new RR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function HR(t,e,n,r){return new qR(t,e,n,r)}async function JN(t,e){const n=de(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(a=>(s=a,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const o=[],c=[];let u=ge();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){c.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function WR(t,e){const n=de(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),a=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,h){const m=d.batch,p=m.keys();let v=H.resolve();return p.forEach(_=>{v=v.next(()=>h.getEntry(u,_)).next(R=>{const T=d.docVersions.get(_);Ie(T!==null),R.version.compareTo(T)<0&&(m.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),h.addEntry(R)))})}),v.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ge();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function ZN(t){const e=de(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function KR(t,e){const n=de(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((h,m)=>{const p=s.get(m);if(!p)return;c.push(n.Ur.removeMatchingKeys(a,h.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(a,h.addedDocuments,m)));let v=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(jt.EMPTY_BYTE_STRING,ce.min()).withLastLimboFreeSnapshotVersion(ce.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(m,v),function(R,T,b){return R.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,v,h)&&c.push(n.Ur.updateTargetData(a,v))});let u=Zr(),d=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(a,h))}),c.push(GR(a,o,e.documentUpdates).next(h=>{u=h.Ps,d=h.Is})),!r.isEqual(ce.min())){const h=n.Ur.getLastRemoteSnapshotVersion(a).next(m=>n.Ur.setTargetsMetadata(a,a.currentSequenceNumber,r));c.push(h)}return H.waitFor(c).next(()=>o.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(n.os=s,a))}function GR(t,e,n){let r=ge(),s=ge();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let o=Zr();return n.forEach((c,u)=>{const d=a.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ce.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):ne("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function QR(t,e){const n=de(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XR(t,e){const n=de(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(a=>a?(s=a,H.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new js(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Ym(t,e,n){const r=de(t),s=r.os.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!pc(o))throw o;ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function av(t,e,n){const r=de(t);let s=ce.min(),a=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const m=de(u),p=m._s.get(h);return p!==void 0?H.resolve(m.os.get(p)):m.Ur.getTargetData(d,h)}(r,o,yr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{a=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ce.min(),n?a:ge())).next(c=>(YR(r,BA(e),c),{documents:c,Ts:a})))}function YR(t,e,n){let r=t.us.get(e)||ce.min();n.forEach((s,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.us.set(e,r)}class ov{constructor(){this.activeTargetIds=GA()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JR{constructor(){this.so=new ov,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new ov,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gu=null;function vf(){return gu===null?gu=function(){return 268435456+Math.round(2147483648*Math.random())}():gu++,"0x"+gu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class n4 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${a}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${a}`}get Fo(){return!1}Mo(n,r,s,a,o){const c=vf(),u=this.xo(n,r.toUriEncodedString());ne("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,a,o),this.No(n,u,d,s).then(h=>(ne("RestConnection",`Received RPC '${n}' ${c}: `,h),h),h=>{throw Ai("RestConnection",`RPC '${n}' ${c} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,a,o,c){return this.Mo(n,r,s,a,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((a,o)=>n[o]=a),s&&s.headers.forEach((a,o)=>n[o]=a)}xo(n,r){const s=e4[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const a=vf();return new Promise((o,c)=>{const u=new dN;u.setWithCredentials(!0),u.listenOnce(hN.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Vu.NO_ERROR:const h=u.getResponseJson();ne(Mt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Vu.TIMEOUT:ne(Mt,`RPC '${e}' ${a} timed out`),c(new Z(q.DEADLINE_EXCEEDED,"Request time out"));break;case Vu.HTTP_ERROR:const m=u.getStatus();if(ne(Mt,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const v=p==null?void 0:p.error;if(v&&v.status&&v.message){const _=function(T){const b=T.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(b)>=0?b:q.UNKNOWN}(v.status);c(new Z(_,v.message))}else c(new Z(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Z(q.UNAVAILABLE,"Connection failed."));break;default:oe()}}finally{ne(Mt,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);ne(Mt,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=vf(),a=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pN(),c=mN(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=a.join("");ne(Mt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const m=o.createWebChannel(h,u);let p=!1,v=!1;const _=new t4({Io:T=>{v?ne(Mt,`Not sending because RPC '${e}' stream ${s} is closed:`,T):(p||(ne(Mt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),p=!0),ne(Mt,`RPC '${e}' stream ${s} sending:`,T),m.send(T))},To:()=>m.close()}),R=(T,b,w)=>{T.listen(b,y=>{try{w(y)}catch(N){setTimeout(()=>{throw N},0)}})};return R(m,sl.EventType.OPEN,()=>{v||(ne(Mt,`RPC '${e}' stream ${s} transport opened.`),_.yo())}),R(m,sl.EventType.CLOSE,()=>{v||(v=!0,ne(Mt,`RPC '${e}' stream ${s} transport closed`),_.So())}),R(m,sl.EventType.ERROR,T=>{v||(v=!0,Ai(Mt,`RPC '${e}' stream ${s} transport errored:`,T),_.So(new Z(q.UNAVAILABLE,"The operation could not be completed")))}),R(m,sl.EventType.MESSAGE,T=>{var b;if(!v){const w=T.data[0];Ie(!!w);const y=w,N=y.error||((b=y[0])===null||b===void 0?void 0:b.error);if(N){ne(Mt,`RPC '${e}' stream ${s} received error:`,N);const A=N.status;let O=function(E){const k=ct[E];if(k!==void 0)return BN(k)}(A),j=N.message;O===void 0&&(O=q.INTERNAL,j="Unknown error status: "+A+" with message "+N.message),v=!0,_.So(new Z(O,j)),m.close()}else ne(Mt,`RPC '${e}' stream ${s} received:`,w),_.bo(w)}}),R(c,fN.STAT_EVENT,T=>{T.stat===$m.PROXY?ne(Mt,`RPC '${e}' stream ${s} detected buffering proxy`):T.stat===$m.NOPROXY&&ne(Mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.wo()},0),_}}function wf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(t){return new hR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r=1e3,s=1.5,a=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=a,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&ne("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n,r,s,a,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new e1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===q.RESOURCE_EXHAUSTED?(Jr(n.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Z(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class r4 extends t1{constructor(e,n,r,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=pR(this.serializer,e),r=function(a){if(!("targetChange"in a))return ce.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?ce.min():o.readTime?vr(o.readTime):ce.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Xm(this.serializer),n.addTarget=function(a,o){let c;const u=o.target;if(c=Hm(u)?{documents:yR(a,u)}:{query:vR(a,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=HN(a,o.resumeToken);const d=Km(a,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ce.min())>0){c.readTime=jd(a,o.snapshotVersion.toTimestamp());const d=Km(a,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=_R(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Xm(this.serializer),n.removeTarget=e,this.a_(n)}}class s4 extends t1{constructor(e,n,r,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=a}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=xR(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Xm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>gR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4 extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Z(q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Mo(e,Gm(n,r),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(q.UNKNOWN,a.toString())})}Lo(e,n,r,s,a){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Gm(n,r),s,o,c,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Z(q.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class a4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Jr(n),this.D_=!1):ne("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,n,r,s,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=a,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ui(this)&&(ne("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=de(u);d.L_.add(4),await yc(d),d.q_.set("Unknown"),d.L_.delete(4),await hh(d)}(this))})}),this.q_=new a4(r,s)}}async function hh(t){if(Ui(t))for(const e of t.B_)await e(!0)}async function yc(t){for(const e of t.B_)await e(!1)}function n1(t,e){const n=de(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Vg(n)?Mg(n):uo(n).r_()&&Og(n,e))}function Lg(t,e){const n=de(t),r=uo(n);n.N_.delete(e),r.r_()&&r1(n,e),n.N_.size===0&&(r.r_()?r.o_():Ui(n)&&n.q_.set("Unknown"))}function Og(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ce.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}uo(t).A_(e)}function r1(t,e){t.Q_.xe(e),uo(t).R_(e)}function Mg(t){t.Q_=new lR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),uo(t).start(),t.q_.v_()}function Vg(t){return Ui(t)&&!uo(t).n_()&&t.N_.size>0}function Ui(t){return de(t).L_.size===0}function s1(t){t.Q_=void 0}async function l4(t){t.q_.set("Online")}async function c4(t){t.N_.forEach((e,n)=>{Og(t,e)})}async function u4(t,e){s1(t),Vg(t)?(t.q_.M_(e),Mg(t)):t.q_.set("Unknown")}async function d4(t,e,n){if(t.q_.set("Online"),e instanceof qN&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const c of a.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ed(t,r)}else if(e instanceof $u?t.Q_.Ke(e):e instanceof zN?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ce.min()))try{const r=await ZN(t.localStore);n.compareTo(r)>=0&&await function(a,o){const c=a.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.N_.get(d);h&&a.N_.set(d,h.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const h=a.N_.get(u);if(!h)return;a.N_.set(u,h.withResumeToken(jt.EMPTY_BYTE_STRING,h.snapshotVersion)),r1(a,u);const m=new js(h.target,u,d,h.sequenceNumber);Og(a,m)}),a.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){ne("RemoteStore","Failed to raise snapshot:",r),await Ed(t,r)}}async function Ed(t,e,n){if(!pc(e))throw e;t.L_.add(1),await yc(t),t.q_.set("Offline"),n||(n=()=>ZN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ne("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await hh(t)})}function i1(t,e){return e().catch(n=>Ed(t,n,e))}async function fh(t){const e=de(t),n=$s(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;h4(e);)try{const s=await QR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,f4(e,s)}catch(s){await Ed(e,s)}a1(e)&&o1(e)}function h4(t){return Ui(t)&&t.O_.length<10}function f4(t,e){t.O_.push(e);const n=$s(t);n.r_()&&n.V_&&n.m_(e.mutations)}function a1(t){return Ui(t)&&!$s(t).n_()&&t.O_.length>0}function o1(t){$s(t).start()}async function m4(t){$s(t).p_()}async function p4(t){const e=$s(t);for(const n of t.O_)e.m_(n.mutations)}async function g4(t,e,n){const r=t.O_.shift(),s=Sg.from(r,e,n);await i1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await fh(t)}async function x4(t,e){e&&$s(t).V_&&await async function(r,s){if(function(o){return iR(o)&&o!==q.ABORTED}(s.code)){const a=r.O_.shift();$s(r).s_(),await i1(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,s)),await fh(r)}}(t,e),a1(t)&&o1(t)}async function cv(t,e){const n=de(t);n.asyncQueue.verifyOperationInProgress(),ne("RemoteStore","RemoteStore received new credentials");const r=Ui(n);n.L_.add(3),await yc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await hh(n)}async function y4(t,e){const n=de(t);e?(n.L_.delete(2),await hh(n)):e||(n.L_.add(2),await yc(n),n.q_.set("Unknown"))}function uo(t){return t.K_||(t.K_=function(n,r,s){const a=de(n);return a.w_(),new r4(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:l4.bind(null,t),Ro:c4.bind(null,t),mo:u4.bind(null,t),d_:d4.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Vg(t)?Mg(t):t.q_.set("Unknown")):(await t.K_.stop(),s1(t))})),t.K_}function $s(t){return t.U_||(t.U_=function(n,r,s){const a=de(n);return a.w_(),new s4(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:m4.bind(null,t),mo:x4.bind(null,t),f_:p4.bind(null,t),g_:g4.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await fh(t)):(await t.U_.stop(),t.O_.length>0&&(ne("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,r,s,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=a,this.deferred=new Br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,a){const o=Date.now()+r,c=new Fg(e,n,o,s,a);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(t,e){if(Jr("AsyncQueue",`${e}: ${t}`),pc(t))return new Z(q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this.comparator=e?(n,r)=>e(n,r)||se.comparator(n.key,r.key):(n,r)=>se.comparator(n.key,r.key),this.keyedMap=il(),this.sortedSet=new Xe(this.comparator)}static emptySet(e){return new Ma(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,a=r.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.W_=new Xe(se.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):oe():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xa{constructor(e,n,r,s,a,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,a){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Xa(e,n,Ma.emptySet(n),o,r,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class w4{constructor(){this.queries=dv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=de(n),a=s.queries;s.queries=dv(),a.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new Z(q.ABORTED,"Firestore shutting down"))}}function dv(){return new co(t=>IN(t),ah)}async function $g(t,e){const n=de(t);let r=3;const s=e.query;let a=n.queries.get(s);a?!a.H_()&&e.J_()&&(r=2):(a=new v4,r=e.J_()?0:1);try{switch(r){case 0:a.z_=await n.onListen(s,!0);break;case 1:a.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Ug(o,`Initialization of query '${da(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,a),a.j_.push(e),e.Z_(n.onlineState),a.z_&&e.X_(a.z_)&&zg(n)}async function Bg(t,e){const n=de(t),r=e.query;let s=3;const a=n.queries.get(r);if(a){const o=a.j_.indexOf(e);o>=0&&(a.j_.splice(o,1),a.j_.length===0?s=e.J_()?0:1:!a.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function _4(t,e){const n=de(t);let r=!1;for(const s of e){const a=s.query,o=n.queries.get(a);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&zg(n)}function b4(t,e,n){const r=de(t),s=r.queries.get(e);if(s)for(const a of s.j_)a.onError(n);r.queries.delete(e)}function zg(t){t.Y_.forEach(e=>{e.next()})}var Jm,hv;(hv=Jm||(Jm={})).ea="default",hv.Cache="cache";class qg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Jm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.key=e}}class c1{constructor(e){this.key=e}}class N4{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ge(),this.mutatedKeys=ge(),this.Aa=SN(e),this.Ra=new Ma(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new uv,s=n?n.Ra:this.Ra;let a=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,m)=>{const p=s.get(h),v=oh(this.query,m)?m:null,_=!!p&&this.mutatedKeys.has(p.key),R=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let T=!1;p&&v?p.data.isEqual(v.data)?_!==R&&(r.track({type:3,doc:v}),T=!0):this.ga(p,v)||(r.track({type:2,doc:v}),T=!0,(u&&this.Aa(v,u)>0||d&&this.Aa(v,d)<0)&&(c=!0)):!p&&v?(r.track({type:0,doc:v}),T=!0):p&&!v&&(r.track({type:1,doc:p}),T=!0,(u||d)&&(c=!0)),T&&(v?(o=o.add(v),a=R?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:c,mutatedKeys:a}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const a=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,m)=>function(v,_){const R=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return oe()}};return R(v)-R(_)}(h.type,m.type)||this.Aa(h.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Xa(this.query,e.Ra,a,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new uv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ge(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new c1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new l1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ge();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class j4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class E4{constructor(e){this.key=e,this.va=!1}}class k4{constructor(e,n,r,s,a,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new co(c=>IN(c),ah),this.Ma=new Map,this.xa=new Set,this.Oa=new Xe(se.comparator),this.Na=new Map,this.La=new Rg,this.Ba={},this.ka=new Map,this.qa=Qa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function T4(t,e,n=!0){const r=p1(t);let s;const a=r.Fa.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Da()):s=await u1(r,e,n,!0),s}async function I4(t,e){const n=p1(t);await u1(n,e,!0,!1)}async function u1(t,e,n,r){const s=await XR(t.localStore,yr(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,n);let c;return r&&(c=await S4(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&n1(t.remoteStore,s),c}async function S4(t,e,n,r,s){t.Ka=(m,p,v)=>async function(R,T,b,w){let y=T.view.ma(b);y.ns&&(y=await av(R.localStore,T.query,!1).then(({documents:j})=>T.view.ma(j,y)));const N=w&&w.targetChanges.get(T.targetId),A=w&&w.targetMismatches.get(T.targetId)!=null,O=T.view.applyChanges(y,R.isPrimaryClient,N,A);return mv(R,T.targetId,O.wa),O.snapshot}(t,m,p,v);const a=await av(t.localStore,e,!0),o=new N4(e,a.Ts),c=o.ma(a.documents),u=xc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);mv(t,n,d.wa);const h=new j4(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function C4(t,e,n){const r=de(t),s=r.Fa.get(e),a=r.Ma.get(s.targetId);if(a.length>1)return r.Ma.set(s.targetId,a.filter(o=>!ah(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ym(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Lg(r.remoteStore,s.targetId),Zm(r,s.targetId)}).catch(mc)):(Zm(r,s.targetId),await Ym(r.localStore,s.targetId,!0))}async function A4(t,e){const n=de(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Lg(n.remoteStore,r.targetId))}async function R4(t,e,n){const r=F4(t);try{const s=await function(o,c){const u=de(o),d=it.now(),h=c.reduce((v,_)=>v.add(_.key),ge());let m,p;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let _=Zr(),R=ge();return u.cs.getEntries(v,h).next(T=>{_=T,_.forEach((b,w)=>{w.isValidDocument()||(R=R.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,_)).next(T=>{m=T;const b=[];for(const w of c){const y=eR(w,m.get(w.key).overlayedDocument);y!=null&&b.push(new Xs(w.key,y,wN(y.value.mapValue),Dn.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,b,c)}).next(T=>{p=T;const b=T.applyToLocalDocumentSet(m,R);return u.documentOverlayCache.saveOverlays(v,T.batchId,b)})}).then(()=>({batchId:p.batchId,changes:AN(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Xe(Ee)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await vc(r,s.changes),await fh(r.remoteStore)}catch(s){const a=Ug(s,"Failed to persist write");n.reject(a)}}async function d1(t,e){const n=de(t);try{const r=await KR(n.localStore,e);e.targetChanges.forEach((s,a)=>{const o=n.Na.get(a);o&&(Ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?Ie(o.va):s.removedDocuments.size>0&&(Ie(o.va),o.va=!1))}),await vc(n,r,e)}catch(r){await mc(r)}}function fv(t,e,n){const r=de(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((a,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=de(o);u.onlineState=c;let d=!1;u.queries.forEach((h,m)=>{for(const p of m.j_)p.Z_(c)&&(d=!0)}),d&&zg(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function P4(t,e,n){const r=de(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),a=s&&s.key;if(a){let o=new Xe(se.comparator);o=o.insert(a,Ut.newNoDocument(a,ce.min()));const c=ge().add(a),u=new uh(ce.min(),new Map,new Xe(Ee),o,c);await d1(r,u),r.Oa=r.Oa.remove(a),r.Na.delete(e),Hg(r)}else await Ym(r.localStore,e,!1).then(()=>Zm(r,e,n)).catch(mc)}async function D4(t,e){const n=de(t),r=e.batch.batchId;try{const s=await WR(n.localStore,e);f1(n,r,null),h1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await vc(n,s)}catch(s){await mc(s)}}async function L4(t,e,n){const r=de(t);try{const s=await function(o,c){const u=de(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(Ie(m!==null),h=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(r.localStore,e);f1(r,e,n),h1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await vc(r,s)}catch(s){await mc(s)}}function h1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function f1(t,e,n){const r=de(t);let s=r.Ba[r.currentUser.toKey()];if(s){const a=s.get(e);a&&(n?a.reject(n):a.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Zm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||m1(t,r)})}function m1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Lg(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Hg(t))}function mv(t,e,n){for(const r of n)r instanceof l1?(t.La.addReference(r.key,e),O4(t,r)):r instanceof c1?(ne("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||m1(t,r.key)):oe()}function O4(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(ne("SyncEngine","New document in limbo: "+n),t.xa.add(r),Hg(t))}function Hg(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Ue.fromString(e)),r=t.qa.next();t.Na.set(r,new E4(n)),t.Oa=t.Oa.insert(n,r),n1(t.remoteStore,new js(yr(ih(n.path)),r,"TargetPurposeLimboResolution",_g.oe))}}async function vc(t,e,n){const r=de(t),s=[],a=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=Dg.Wi(u.targetId,d);a.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const h=de(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>H.forEach(d,p=>H.forEach(p.$i,v=>h.persistence.referenceDelegate.addReference(m,p.targetId,v)).next(()=>H.forEach(p.Ui,v=>h.persistence.referenceDelegate.removeReference(m,p.targetId,v)))))}catch(m){if(!pc(m))throw m;ne("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const p=m.targetId;if(!m.fromCache){const v=h.os.get(p),_=v.snapshotVersion,R=v.withLastLimboFreeSnapshotVersion(_);h.os=h.os.insert(p,R)}}}(r.localStore,a))}async function M4(t,e){const n=de(t);if(!n.currentUser.isEqual(e)){ne("SyncEngine","User change. New user:",e.toKey());const r=await JN(n.localStore,e);n.currentUser=e,function(a,o){a.ka.forEach(c=>{c.forEach(u=>{u.reject(new Z(q.CANCELLED,o))})}),a.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vc(n,r.hs)}}function V4(t,e){const n=de(t),r=n.Na.get(e);if(r&&r.va)return ge().add(r.key);{let s=ge();const a=n.Ma.get(e);if(!a)return s;for(const o of a){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function p1(t){const e=de(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=d1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=V4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P4.bind(null,e),e.Ca.d_=_4.bind(null,e.eventManager),e.Ca.$a=b4.bind(null,e.eventManager),e}function F4(t){const e=de(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=D4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L4.bind(null,e),e}class kd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=dh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return HR(this.persistence,new zR,e.initialUser,this.serializer)}Ga(e){return new UR(Pg.Zr,this.serializer)}Wa(e){return new JR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}kd.provider={build:()=>new kd};class ep{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>fv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=M4.bind(null,this.syncEngine),await y4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new w4}()}createDatastore(e){const n=dh(e.databaseInfo.databaseId),r=function(a){return new n4(a)}(e.databaseInfo);return function(a,o,c,u){return new i4(a,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,a,o,c){return new o4(r,s,a,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>fv(this.syncEngine,n,0),function(){return lv.D()?new lv:new ZR}())}createSyncEngine(e,n){return function(s,a,o,c,u,d,h){const m=new k4(s,a,o,c,u,d);return h&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const a=de(s);ne("RemoteStore","RemoteStore shutting down."),a.L_.add(5),await yc(a),a.k_.shutdown(),a.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,n,r,s,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Vt.UNAUTHENTICATED,this.clientId=wg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async o=>{ne("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ne("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ug(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _f(t,e){t.asyncQueue.verifyOperationInProgress(),ne("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await JN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function pv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await $4(t);ne("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>cv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>cv(e.remoteStore,s)),t._onlineComponents=e}async function $4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ne("FirestoreClient","Using user provided OfflineComponentProvider");try{await _f(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===q.FAILED_PRECONDITION||s.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ai("Error using user provided cache. Falling back to memory cache: "+n),await _f(t,new kd)}}else ne("FirestoreClient","Using default OfflineComponentProvider"),await _f(t,new kd);return t._offlineComponents}async function g1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ne("FirestoreClient","Using user provided OnlineComponentProvider"),await pv(t,t._uninitializedComponentsProvider._online)):(ne("FirestoreClient","Using default OnlineComponentProvider"),await pv(t,new ep))),t._onlineComponents}function B4(t){return g1(t).then(e=>e.syncEngine)}async function Td(t){const e=await g1(t),n=e.eventManager;return n.onListen=T4.bind(null,e.syncEngine),n.onUnlisten=C4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=I4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=A4.bind(null,e.syncEngine),n}function z4(t,e,n={}){const r=new Br;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const h=new Wg({next:p=>{h.Za(),o.enqueueAndForget(()=>Bg(a,m));const v=p.docs.has(c);!v&&p.fromCache?d.reject(new Z(q.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&p.fromCache&&u&&u.source==="server"?d.reject(new Z(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new qg(ih(c.path),h,{includeMetadataChanges:!0,_a:!0});return $g(a,m)}(await Td(t),t.asyncQueue,e,n,r)),r.promise}function q4(t,e,n={}){const r=new Br;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,c,u,d){const h=new Wg({next:p=>{h.Za(),o.enqueueAndForget(()=>Bg(a,m)),p.fromCache&&u.source==="server"?d.reject(new Z(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),m=new qg(c,h,{includeMetadataChanges:!0,_a:!0});return $g(a,m)}(await Td(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e,n){if(!n)throw new Z(q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function v1(t,e,n,r){if(e===!0&&r===!0)throw new Z(q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function xv(t){if(!se.isDocumentKey(t))throw new Z(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yv(t){if(se.isDocumentKey(t))throw new Z(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function mh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":oe()}function Gt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Z(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=mh(t);throw new Z(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function H4(t,e){if(e<=0)throw new Z(q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Z(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Z(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}v1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=x1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Z(q.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ph{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Z(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new xN;switch(r.type){case"firstParty":return new mA(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=gv.get(n);r&&(ne("ComponentProvider","Removing Datastore"),gv.delete(n),r.terminate())}(this),Promise.resolve()}}function w1(t,e,n,r={}){var s;const a=(t=Gt(t,ph))._getSettings(),o=`${e}:${n}`;if(a.host!=="firestore.googleapis.com"&&a.host!==o&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Vt.MOCK_USER;else{c=yb(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new Z(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Vt(d)}t._authCredentials=new dA(new gN(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Er(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class zr extends Er{constructor(e,n,r){super(e,n,ih(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new se(e))}withConverter(e){return new zr(this.firestore,e,this._path)}}function ue(t,e,...n){if(t=Me(t),y1("collection","path",e),t instanceof ph){const r=Ue.fromString(e,...n);return yv(r),new zr(t,null,r)}{if(!(t instanceof Ct||t instanceof zr))throw new Z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return yv(r),new zr(t.firestore,null,r)}}function J(t,e,...n){if(t=Me(t),arguments.length===1&&(e=wg.newId()),y1("doc","path",e),t instanceof ph){const r=Ue.fromString(e,...n);return xv(r),new Ct(t,null,new se(r))}{if(!(t instanceof Ct||t instanceof zr))throw new Z(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return xv(r),new Ct(t.firestore,t instanceof zr?t.converter:null,new se(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new e1(this,"async_queue_retry"),this.Vu=()=>{const r=wf();r&&ne("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=wf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=wf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!pc(e))throw e;ne("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw Jr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Fg.createAndSchedule(this,e,n,r,a=>this.yu(a));return this.Tu.push(s),s}fu(){this.Eu&&oe()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function _v(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const a of r)if(a in s&&typeof s[a]=="function")return!0;return!1}(t,["next","error","complete"])}class br extends ph{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new wv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wv(e),this._firestoreClient=void 0,await e}}}function _1(t,e){const n=typeof t=="object"?t:eh(),r=typeof t=="string"?t:"(default)",s=Zd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const a=pb("firestore");a&&w1(s,...a)}return s}function wc(t){if(t._terminated)throw new Z(q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||W4(t),t._firestoreClient}function W4(t){var e,n,r;const s=t._freezeSettings(),a=function(c,u,d,h){return new TA(c,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,x1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new U4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Di(jt.fromBase64String(e))}catch(n){throw new Z(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Di(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Z(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Z(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Z(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ee(this._lat,e._lat)||Ee(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=/^__.*__$/;class G4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms):new gc(e,this.data,n,this.fieldTransforms)}}class b1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Xs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function N1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw oe()}}class Kg{constructor(e,n,r,s,a,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,a===void 0&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Kg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Id(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(N1(this.Cu)&&K4.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Q4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||dh(e)}Qu(e,n,r,s=!1){return new Kg({Cu:e,methodName:n,qu:r,path:bt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yh(t){const e=t._freezeSettings(),n=dh(t._databaseId);return new Q4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function j1(t,e,n,r,s,a={}){const o=t.Qu(a.merge||a.mergeFields?2:0,e,n,s);Xg("Data must be an object, but it was:",o,r);const c=E1(r,o);let u,d;if(a.merge)u=new xn(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const m of a.mergeFields){const p=tp(e,m,n);if(!o.contains(p))throw new Z(q.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);T1(h,p)||h.push(p)}u=new xn(h),d=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=o.fieldTransforms;return new G4(new en(c),u,d)}class vh extends ho{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vh}}class Gg extends ho{_toFieldTransform(e){return new FN(e.path,new Jl)}isEqual(e){return e instanceof Gg}}class Qg extends ho{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new tc(e.serializer,DN(e.serializer,this.$u));return new FN(e.path,n)}isEqual(e){return e instanceof Qg&&this.$u===e.$u}}function X4(t,e,n,r){const s=t.Qu(1,e,n);Xg("Data must be an object, but it was:",s,r);const a=[],o=en.empty();Fi(r,(u,d)=>{const h=Yg(e,u,n);d=Me(d);const m=s.Nu(h);if(d instanceof vh)a.push(h);else{const p=bc(d,m);p!=null&&(a.push(h),o.set(h,p))}});const c=new xn(a);return new b1(o,c,s.fieldTransforms)}function Y4(t,e,n,r,s,a){const o=t.Qu(1,e,n),c=[tp(e,r,n)],u=[s];if(a.length%2!=0)throw new Z(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)c.push(tp(e,a[p])),u.push(a[p+1]);const d=[],h=en.empty();for(let p=c.length-1;p>=0;--p)if(!T1(d,c[p])){const v=c[p];let _=u[p];_=Me(_);const R=o.Nu(v);if(_ instanceof vh)d.push(v);else{const T=bc(_,R);T!=null&&(d.push(v),h.set(v,T))}}const m=new xn(d);return new b1(h,m,o.fieldTransforms)}function J4(t,e,n,r=!1){return bc(n,t.Qu(r?4:3,e))}function bc(t,e){if(k1(t=Me(t)))return Xg("Unsupported field value:",e,t),E1(t,e);if(t instanceof ho)return function(r,s){if(!N1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const a=[];let o=0;for(const c of r){let u=bc(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(r,s){if((r=Me(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return DN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=it.fromDate(r);return{timestampValue:jd(s.serializer,a)}}if(r instanceof it){const a=new it(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jd(s.serializer,a)}}if(r instanceof gh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Di)return{bytesValue:HN(s.serializer,r._byteString)};if(r instanceof Ct){const a=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(a))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ag(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof xh)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return Tg(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${mh(r)}`)}(t,e)}function E1(t,e){const n={};return yN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fi(t,(r,s)=>{const a=bc(s,e.Mu(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function k1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof gh||t instanceof Di||t instanceof Ct||t instanceof ho||t instanceof xh)}function Xg(t,e,n){if(!k1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=mh(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function tp(t,e,n){if((e=Me(e))instanceof _c)return e._internalPath;if(typeof e=="string")return Yg(t,e);throw Id("Field path arguments must be of type string or ",t,!1,void 0,n)}const Z4=new RegExp("[~\\*/\\[\\]]");function Yg(t,e,n){if(e.search(Z4)>=0)throw Id(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new _c(...e.split("."))._internalPath}catch{throw Id(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Id(t,e,n,r,s){const a=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Z(q.INVALID_ARGUMENT,c+t+u)}function T1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e,n,r,s,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(wh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class eP extends I1{data(){return super.data()}}function wh(t,e){return typeof e=="string"?Yg(t,e):e instanceof _c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Z(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jg{}class _h extends Jg{}function at(t,e,...n){let r=[];e instanceof Jg&&r.push(e),r=r.concat(n),function(a){const o=a.filter(u=>u instanceof bh).length,c=a.filter(u=>u instanceof Nc).length;if(o>1||o>0&&c>0)throw new Z(q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Nc extends _h{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Nc(e,n,r)}_apply(e){const n=this._parse(e);return C1(e._query,n),new Er(e.firestore,e.converter,Wm(e._query,n))}_parse(e){const n=yh(e.firestore);return function(a,o,c,u,d,h,m){let p;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Z(q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Nv(m,h);const v=[];for(const _ of m)v.push(bv(u,a,_));p={arrayValue:{values:v}}}else p=bv(u,a,m)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Nv(m,h),p=J4(c,o,m,h==="in"||h==="not-in");return ht.create(d,h,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ft(t,e,n){const r=e,s=wh("where",t);return Nc._create(s,r,n)}class bh extends Jg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,a){let o=s;const c=a.getFlattenedFilters();for(const u of c)C1(o,u),o=Wm(o,u)}(e._query,n),new Er(e.firestore,e.converter,Wm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Nh extends _h{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Nh(e,n)}_apply(e){const n=function(s,a,o){if(s.startAt!==null)throw new Z(q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Z(q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Yl(a,o)}(e._query,this._field,this._direction);return new Er(e.firestore,e.converter,function(s,a){const o=s.explicitOrderBy.concat([a]);return new lo(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Nr(t,e="asc"){const n=e,r=wh("orderBy",t);return Nh._create(r,n)}class jh extends _h{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new jh(e,n,r)}_apply(e){return new Er(e.firestore,e.converter,Nd(e._query,this._limit,this._limitType))}}function Zg(t){return H4("limit",t),jh._create("limit",t,"F")}function bv(t,e,n){if(typeof(n=Me(n))=="string"){if(n==="")throw new Z(q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TN(e)&&n.indexOf("/")!==-1)throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!se.isDocumentKey(r))throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return zy(t,new se(r))}if(n instanceof Ct)return zy(t,n._key);throw new Z(q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${mh(n)}.`)}function Nv(t,e){if(!Array.isArray(t)||t.length===0)throw new Z(q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function C1(t,e){const n=function(s,a){for(const o of s)for(const c of o.getFlattenedFilters())if(a.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new Z(q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Z(q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class A1{convertValue(e,n="none"){switch(Pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw oe()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Fi(e,(s,a)=>{r[s]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,s;const a=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>nt(o.doubleValue));return new xh(a)}convertGeoPoint(e){return new gh(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ng(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ql(e));default:return null}}convertTimestamp(e){const n=Us(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);Ie(YN(r));const s=new Wa(r.get(1),r.get(3)),a=new se(r.popFirst(5));return s.isEqual(n)||Jr(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ex extends I1{constructor(e,n,r,s,a,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Nl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(wh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Nl extends ex{data(e={}){return super.data(e)}}class tx{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ta(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Nl(this._firestore,this._userDataWriter,r.key,r,new Ta(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new Nl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ta(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>a||c.type!==3).map(c=>{const u=new Nl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new Ta(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:tP(c.type),doc:u,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function tP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return oe()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t){t=Gt(t,Ct);const e=Gt(t.firestore,br);return z4(wc(e),t._key).then(n=>P1(e,t,n))}class nx extends A1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function $e(t){t=Gt(t,Er);const e=Gt(t.firestore,br),n=wc(e),r=new nx(e);return S1(t._query),q4(n,t._query).then(s=>new tx(e,r,t,s))}function fn(t,e,n){t=Gt(t,Ct);const r=Gt(t.firestore,br),s=R1(t.converter,e,n);return jc(r,[j1(yh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Dn.none())])}function ye(t,e,n,...r){t=Gt(t,Ct);const s=Gt(t.firestore,br),a=yh(s);let o;return o=typeof(e=Me(e))=="string"||e instanceof _c?Y4(a,"updateDoc",t._key,e,n,r):X4(a,"updateDoc",t._key,e),jc(s,[o.toMutation(t._key,Dn.exists(!0))])}function Yn(t){return jc(Gt(t.firestore,br),[new Ig(t._key,Dn.none())])}function er(t,e){const n=Gt(t.firestore,br),r=J(t),s=R1(t.converter,e);return jc(n,[j1(yh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Dn.exists(!1))]).then(()=>r)}function es(t,...e){var n,r,s;t=Me(t);let a={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||_v(e[o])||(a=e[o],o++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(_v(e[o])){const m=e[o];e[o]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[o+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[o+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,h;if(t instanceof Ct)d=Gt(t.firestore,br),h=ih(t._key.path),u={next:m=>{e[o]&&e[o](P1(d,t,m))},error:e[o+1],complete:e[o+2]};else{const m=Gt(t,Er);d=Gt(m.firestore,br),h=m._query;const p=new nx(d);u={next:v=>{e[o]&&e[o](new tx(d,p,m,v))},error:e[o+1],complete:e[o+2]},S1(t._query)}return function(p,v,_,R){const T=new Wg(R),b=new qg(v,T,_);return p.asyncQueue.enqueueAndForget(async()=>$g(await Td(p),b)),()=>{T.Za(),p.asyncQueue.enqueueAndForget(async()=>Bg(await Td(p),b))}}(wc(d),h,c,u)}function jc(t,e){return function(r,s){const a=new Br;return r.asyncQueue.enqueueAndForget(async()=>R4(await B4(r),s,a)),a.promise}(wc(t),e)}function P1(t,e,n){const r=n.docs.get(e._key),s=new nx(t);return new ex(t,s,e._key,r,new Ta(n.hasPendingWrites,n.fromCache),e.converter)}function ae(){return new Gg("serverTimestamp")}function Dr(t){return new Qg("increment",t)}(function(e,n=!0){(function(s){oo=s})(Vi),Ti(new Vs("firestore",(r,{instanceIdentifier:s,options:a})=>{const o=r.getProvider("app").getImmediate(),c=new br(new hA(r.getProvider("auth-internal")),new gA(r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Z(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wa(d.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:n},a),c._setSettings(a),c},"PUBLIC").setMultipleInstances(!0)),gr(Vy,"4.7.3",e),gr(Vy,"4.7.3","esm2017")})();const bf=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:A1,Bytes:Di,CollectionReference:zr,DocumentReference:Ct,DocumentSnapshot:ex,FieldPath:_c,FieldValue:ho,Firestore:br,FirestoreError:Z,GeoPoint:gh,Query:Er,QueryCompositeFilterConstraint:bh,QueryConstraint:_h,QueryDocumentSnapshot:Nl,QueryFieldFilterConstraint:Nc,QueryLimitConstraint:jh,QueryOrderByConstraint:Nh,QuerySnapshot:tx,SnapshotMetadata:Ta,Timestamp:it,VectorValue:xh,_AutoId:wg,_ByteString:jt,_DatabaseId:Wa,_DocumentKey:se,_EmptyAuthCredentialsProvider:xN,_FieldPath:bt,_cast:Gt,_logWarn:Ai,_validateIsNotUsedTogether:v1,addDoc:er,collection:ue,connectFirestoreEmulator:w1,deleteDoc:Yn,doc:J,ensureFirestoreConfigured:wc,executeWrite:jc,getDoc:tt,getDocs:$e,getFirestore:_1,increment:Dr,limit:Zg,onSnapshot:es,orderBy:Nr,query:at,serverTimestamp:ae,setDoc:fn,updateDoc:ye,where:ft},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="firebasestorage.googleapis.com",L1="storageBucket",nP=2*60*1e3,rP=10*60*1e3,sP=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye extends jr{constructor(e,n,r=0){super(Nf(e),`Firebase Storage: ${n} (${Nf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ye.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Nf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ze;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ze||(ze={}));function Nf(t){return"storage/"+t}function rx(){const t="An unknown error occurred, please check the error payload for server response.";return new Ye(ze.UNKNOWN,t)}function iP(t){return new Ye(ze.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function aP(t){return new Ye(ze.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function oP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ye(ze.UNAUTHENTICATED,t)}function lP(){return new Ye(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cP(t){return new Ye(ze.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function O1(){return new Ye(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function M1(){return new Ye(ze.CANCELED,"User canceled the upload/download.")}function uP(t){return new Ye(ze.INVALID_URL,"Invalid URL '"+t+"'.")}function dP(t){return new Ye(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function hP(){return new Ye(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+L1+"' property when initializing the app?")}function V1(){return new Ye(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fP(){return new Ye(ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function mP(){return new Ye(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function pP(t){return new Ye(ze.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function np(t){return new Ye(ze.INVALID_ARGUMENT,t)}function F1(){return new Ye(ze.APP_DELETED,"The Firebase app was deleted.")}function gP(t){return new Ye(ze.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jl(t,e){return new Ye(ze.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Qo(t){throw new Ye(ze.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(r.path==="")return r;throw dP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function a(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(N){N.path_=decodeURIComponent(N.path)}const h="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",v=new RegExp(`^https?://${m}/${h}/b/${s}/o${p}`,"i"),_={bucket:1,path:3},R=n===D1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",b=new RegExp(`^https?://${R}/${s}/${T}`,"i"),y=[{regex:c,indices:u,postModify:a},{regex:v,indices:_,postModify:d},{regex:b,indices:{bucket:1,path:2},postModify:d}];for(let N=0;N<y.length;N++){const A=y[N],O=A.regex.exec(e);if(O){const j=O[A.indices.bucket];let x=O[A.indices.path];x||(x=""),r=new yn(j,x),A.postModify(r);break}}if(r==null)throw uP(e);return r}}class xP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yP(t,e,n){let r=1,s=null,a=null,o=!1,c=0;function u(){return c===2}let d=!1;function h(...T){d||(d=!0,e.apply(null,T))}function m(T){s=setTimeout(()=>{s=null,t(v,u())},T)}function p(){a&&clearTimeout(a)}function v(T,...b){if(d){p();return}if(T){p(),h.call(null,T,...b);return}if(u()||o){p(),h.call(null,T,...b);return}r<64&&(r*=2);let y;c===1?(c=2,y=0):y=(r+Math.random())*1e3,m(y)}let _=!1;function R(T){_||(_=!0,p(),!d&&(s!==null?(T||(c=2),clearTimeout(s),m(0)):T||(c=1)))}return m(0),a=setTimeout(()=>{o=!0,R(!0)},n),R}function vP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(t){return t!==void 0}function _P(t){return typeof t=="function"}function bP(t){return typeof t=="object"&&!Array.isArray(t)}function Eh(t){return typeof t=="string"||t instanceof String}function jv(t){return sx()&&t instanceof Blob}function sx(){return typeof Blob<"u"}function Ev(t,e,n,r){if(r<e)throw np(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw np(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function U1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var vi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vi||(vi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||s||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,n,r,s,a,o,c,u,d,h,m,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=m,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,_)=>{this.resolve_=v,this.reject_=_,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new xu(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&a.addUploadProgressListener(o),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(o),this.pendingConnection_=null;const c=a.getErrorCode()===vi.NO_ERROR,u=a.getStatus();if(!c||$1(u,this.additionalRetryCodes_)&&this.retry){const h=a.getErrorCode()===vi.ABORT;r(!1,new xu(!1,null,h));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new xu(d,a))})},n=(r,s)=>{const a=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());wP(u)?a(u):a()}catch(u){o(u)}else if(c!==null){const u=rx();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?F1():M1();o(u)}else{const u=O1();o(u)}};this.canceled_?n(!1,new xu(!1,null,!0)):this.backoffId_=yP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function jP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function EP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function TP(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function IP(t,e,n,r,s,a,o=!0){const c=U1(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return kP(d,e),jP(d,n),EP(d,a),TP(d,r),new NP(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function CP(...t){const e=SP();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(sx())return new Blob(t);throw new Ye(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function AP(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(t){if(typeof atob>"u")throw pP("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class jf{constructor(e,n){this.data=e,this.contentType=n||null}}function PP(t,e){switch(t){case fr.RAW:return new jf(B1(e));case fr.BASE64:case fr.BASE64URL:return new jf(z1(t,e));case fr.DATA_URL:return new jf(LP(e),OP(e))}throw rx()}function B1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,o=t.charCodeAt(++n);r=65536|(a&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function DP(t){let e;try{e=decodeURIComponent(t)}catch{throw jl(fr.DATA_URL,"Malformed data URL.")}return B1(e)}function z1(t,e){switch(t){case fr.BASE64:{const s=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(s||a)throw jl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case fr.BASE64URL:{const s=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(s||a)throw jl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=RP(e)}catch(s){throw s.message.includes("polyfill")?s:jl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class q1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw jl(fr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=MP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function LP(t){const e=new q1(t);return e.base64?z1(fr.BASE64,e.rest):DP(e.rest)}function OP(t){return new q1(t).contentType}function MP(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,n){let r=0,s="";jv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(jv(this.data_)){const r=this.data_,s=AP(r,e,n);return s===null?null:new Lr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Lr(r,!0)}}static getBlob(...e){if(sx()){const n=e.map(r=>r instanceof Lr?r.data_:r);return new Lr(CP.apply(null,n))}else{const n=e.map(o=>Eh(o)?PP(fr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let a=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[a++]=o[c]}),new Lr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(t){let e;try{e=JSON.parse(t)}catch{return null}return bP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function FP(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function W1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t,e){return e}class Ht{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||UP}}let yu=null;function $P(t){return!Eh(t)||t.length<2?t:W1(t)}function ix(){if(yu)return yu;const t=[];t.push(new Ht("bucket")),t.push(new Ht("generation")),t.push(new Ht("metageneration")),t.push(new Ht("name","fullPath",!0));function e(a,o){return $P(o)}const n=new Ht("name");n.xform=e,t.push(n);function r(a,o){return o!==void 0?Number(o):o}const s=new Ht("size");return s.xform=r,t.push(s),t.push(new Ht("timeCreated")),t.push(new Ht("updated")),t.push(new Ht("md5Hash",null,!0)),t.push(new Ht("cacheControl",null,!0)),t.push(new Ht("contentDisposition",null,!0)),t.push(new Ht("contentEncoding",null,!0)),t.push(new Ht("contentLanguage",null,!0)),t.push(new Ht("contentType",null,!0)),t.push(new Ht("metadata","customMetadata",!0)),yu=t,yu}function BP(t,e){function n(){const r=t.bucket,s=t.fullPath,a=new yn(r,s);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function zP(t,e,n){const r={};r.type="file";const s=n.length;for(let a=0;a<s;a++){const o=n[a];r[o.local]=o.xform(r,e[o.server])}return BP(r,t),r}function K1(t,e,n){const r=H1(e);return r===null?null:zP(t,r,n)}function qP(t,e,n,r){const s=H1(e);if(s===null||!Eh(s.downloadTokens))return null;const a=s.downloadTokens;if(a.length===0)return null;const o=encodeURIComponent;return a.split(",").map(d=>{const h=t.bucket,m=t.fullPath,p="/b/"+o(h)+"/o/"+o(m),v=Ec(p,n,r),_=U1({alt:"media",token:d});return v+_})[0]}function G1(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const a=e[s];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class fo{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(t){if(!t)throw rx()}function ax(t,e){function n(r,s){const a=K1(t,s,e);return qr(a!==null),a}return n}function HP(t,e){function n(r,s){const a=K1(t,s,e);return qr(a!==null),qP(a,s,t.host,t._protocol)}return n}function kc(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=lP():s=oP():n.getStatus()===402?s=aP(t.bucket):n.getStatus()===403?s=cP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Q1(t){const e=kc(t);function n(r,s){let a=e(r,s);return r.getStatus()===404&&(a=iP(t.path)),a.serverResponse=s.serverResponse,a}return n}function WP(t,e,n){const r=e.fullServerUrl(),s=Ec(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new fo(s,a,ax(t,n),o);return c.errorHandler=Q1(e),c}function KP(t,e,n){const r=e.fullServerUrl(),s=Ec(r,t.host,t._protocol),a="GET",o=t.maxOperationRetryTime,c=new fo(s,a,HP(t,n),o);return c.errorHandler=Q1(e),c}function GP(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function X1(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=GP(null,e)),r}function Y1(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let y="";for(let N=0;N<2;N++)y=y+Math.random().toString().slice(2);return y}const u=c();o["Content-Type"]="multipart/related; boundary="+u;const d=X1(e,r,s),h=G1(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,p=`\r
--`+u+"--",v=Lr.getBlob(m,r,p);if(v===null)throw V1();const _={name:d.fullPath},R=Ec(a,t.host,t._protocol),T="POST",b=t.maxUploadRetryTime,w=new fo(R,T,ax(t,n),b);return w.urlParams=_,w.headers=o,w.body=v.uploadData(),w.errorHandler=kc(e),w}class Sd{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function ox(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{qr(!1)}return qr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function QP(t,e,n,r,s){const a=e.bucketOnlyServerUrl(),o=X1(e,r,s),c={name:o.fullPath},u=Ec(a,t.host,t._protocol),d="POST",h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},m=G1(o,n),p=t.maxUploadRetryTime;function v(R){ox(R);let T;try{T=R.getResponseHeader("X-Goog-Upload-URL")}catch{qr(!1)}return qr(Eh(T)),T}const _=new fo(u,d,v,p);return _.urlParams=c,_.headers=h,_.body=m,_.errorHandler=kc(e),_}function XP(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function a(d){const h=ox(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{qr(!1)}m||qr(!1);const p=Number(m);return qr(!isNaN(p)),new Sd(p,r.size(),h==="final")}const o="POST",c=t.maxUploadRetryTime,u=new fo(n,o,a,c);return u.headers=s,u.errorHandler=kc(e),u}const kv=256*1024;function YP(t,e,n,r,s,a,o,c){const u=new Sd(0,0);if(o?(u.current=o.current,u.total=o.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw fP();const d=u.total-u.current;let h=d;s>0&&(h=Math.min(h,s));const m=u.current,p=m+h;let v="";h===0?v="finalize":d===h?v="upload, finalize":v="upload";const _={"X-Goog-Upload-Command":v,"X-Goog-Upload-Offset":`${u.current}`},R=r.slice(m,p);if(R===null)throw V1();function T(N,A){const O=ox(N,["active","final"]),j=u.current+h,x=r.size();let E;return O==="final"?E=ax(e,a)(N,A):E=null,new Sd(j,x,O==="final",E)}const b="POST",w=e.maxUploadRetryTime,y=new fo(n,b,T,w);return y.headers=_,y.body=R.uploadData(),y.progressCallback=c||null,y.errorHandler=kc(t),y}const Jt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ef(t){switch(t){case"running":case"pausing":case"canceling":return Jt.RUNNING;case"paused":return Jt.PAUSED;case"success":return Jt.SUCCESS;case"canceled":return Jt.CANCELED;case"error":return Jt.ERROR;default:return Jt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n,r){if(_P(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class ZP{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Qo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Qo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class e5 extends ZP{initXhr(){this.xhr_.responseType="text"}}function ui(){return new e5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=ix(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if($1(s.status,[]))if(a)s=O1();else{this.sleepTime=Math.max(this.sleepTime*2,sP),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(ze.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,a)=>{this._resolve=s,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=QP(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ui,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=XP(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(s,ui,n,r);this._request=a,a.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=kv*this._chunkMultiplier,n=new Sd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,a)=>{let o;try{o=YP(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(o,ui,s,a,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){kv*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=WP(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,ui,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Y1(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,ui,e,n);this._request=s,s.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=M1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Ef(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const a=new JP(n||void 0,r||void 0,s||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ef(this._state)){case Jt.SUCCESS:ua(this._resolve.bind(null,this.snapshot))();break;case Jt.CANCELED:case Jt.ERROR:const n=this._reject;ua(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ef(this._state)){case Jt.RUNNING:case Jt.PAUSED:e.next&&ua(e.next.bind(e,this.snapshot))();break;case Jt.SUCCESS:e.complete&&ua(e.complete.bind(e))();break;case Jt.CANCELED:case Jt.ERROR:e.error&&ua(e.error.bind(e,this._error))();break;default:e.error&&ua(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Li(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return W1(this._location.path)}get storage(){return this._service}get parent(){const e=VP(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new Li(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw gP(e)}}function n5(t,e,n){t._throwIfRoot("uploadBytes");const r=Y1(t.storage,t._location,ix(),new Lr(e,!0),n);return t.storage.makeRequestWithTokens(r,ui).then(s=>({metadata:s,ref:t}))}function r5(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new t5(t,new Lr(e),n)}function s5(t){t._throwIfRoot("getDownloadURL");const e=KP(t.storage,t._location,ix());return t.storage.makeRequestWithTokens(e,ui).then(n=>{if(n===null)throw mP();return n})}function i5(t,e){const n=FP(t._location.path,e),r=new yn(t._location.bucket,n);return new Li(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5(t){return/^[A-Za-z]+:\/\//.test(t)}function o5(t,e){return new Li(t,e)}function J1(t,e){if(t instanceof lx){const n=t;if(n._bucket==null)throw hP();const r=new Li(n,n._bucket);return e!=null?J1(r,e):r}else return e!==void 0?i5(t,e):t}function l5(t,e){if(e&&a5(e)){if(t instanceof lx)return o5(t,e);throw np("To use ref(service, url), the first argument must be a Storage instance.")}else return J1(t,e)}function Tv(t,e){const n=e==null?void 0:e[L1];return n==null?null:yn.makeFromBucketSpec(n,t)}function c5(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:yb(s,t.app.options.projectId))}class lx{constructor(e,n,r,s,a){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=a,this._bucket=null,this._host=D1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=nP,this._maxUploadRetryTime=rP,this._requests=new Set,s!=null?this._bucket=yn.makeFromBucketSpec(s,this._host):this._bucket=Tv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=Tv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ev("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ev("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Li(this,e)}_makeRequest(e,n,r,s,a=!0){if(this._deleted)return new xP(F1());{const o=IP(e,this._appId,r,s,n,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Iv="@firebase/storage",Sv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="storage";function rp(t,e,n){return t=Me(t),n5(t,e,n)}function cx(t,e,n){return t=Me(t),r5(t,e,n)}function Ya(t){return t=Me(t),s5(t)}function Ja(t,e){return t=Me(t),l5(t,e)}function kh(t=eh(),e){t=Me(t);const r=Zd(t,Z1).getImmediate({identifier:e}),s=pb("storage");return s&&u5(r,...s),r}function u5(t,e,n,r={}){c5(t,e,n,r)}function d5(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new lx(n,r,s,e,Vi)}function h5(){Ti(new Vs(Z1,d5,"PUBLIC").setMultipleInstances(!0)),gr(Iv,Sv,""),gr(Iv,Sv,"esm2017")}h5();const f5={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},mn=bb().length?eh():_b(f5),Ln=bb().length>0?oA(mn):Hb(mn,{persistence:[aN,eN]}),z=_1(mn),sp=kh(mn),vu="broast_session_location",ej=I.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),m5=({children:t})=>{const[e,n]=I.useState(null),[r,s]=I.useState(null),[a,o]=I.useState(!0),[c,u]=I.useState(null),[d,h]=I.useState(!1),m=async()=>{if(!e)return;const v=await tt(J(z,"users",e.uid));if(v.exists()){const _=v.data(),R=_==null?void 0:_.role,T=_==null?void 0:_.location,b=_==null?void 0:_.savedLocation;if(R==="customer"||R==="admin"){const w=b?{lat:b.lat,lng:b.lng}:T||null;u(w),w&&sessionStorage.setItem(vu,JSON.stringify(w))}else u(T||null),T&&sessionStorage.setItem(vu,JSON.stringify(T));h(!1)}};I.useEffect(()=>{const v=DS(Ln,async _=>{if(n(_),_){const R=await tt(J(z,"users",_.uid)),T=R.data(),b=R.exists()?T==null?void 0:T.role:null;s(b);const w=T==null?void 0:T.location,y=T==null?void 0:T.savedLocation,N=sessionStorage.getItem(vu),A=N?JSON.parse(N):null;let O=null;if(b==="customer"||b==="admin"?O=y?{lat:y.lat,lng:y.lng}:A||w||null:O=A||w||null,u(O),b==="customer"||b==="admin"?(h(!(!!y||!!A)),y&&!A&&sessionStorage.setItem(vu,JSON.stringify({lat:y.lat,lng:y.lng}))):h(b==="owner"||b==="courier"?!w:!1),b==="owner")try{const j=J(z,"restaurants",_.uid);(await tt(j)).exists()||await fn(j,{name:(T==null?void 0:T.restaurantName)||(T==null?void 0:T.name)||" ",ownerId:_.uid,email:(T==null?void 0:T.email)||_.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(j){console.warn("    ",j)}}else s(null),u(null),h(!1);o(!1)});return()=>v()},[]);const p=async()=>{await LS(Ln)};return i.jsx(ej.Provider,{value:{user:e,role:r,loading:a,logout:p,userLocation:c,locationRequired:d,refreshUserData:m},children:t})},qe=()=>I.useContext(ej);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),g5=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Cv=t=>{const e=g5(t);return e.charAt(0).toUpperCase()+e.slice(1)},tj=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),x5=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var y5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...c},u)=>I.createElement("svg",{ref:u,...y5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:tj("lucide",s),...!a&&!x5(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>I.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=(t,e)=>{const n=I.forwardRef(({className:r,...s},a)=>I.createElement(v5,{ref:a,iconNode:e,className:tj(`lucide-${p5(Cv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=Cv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],_5=Q("arrow-left",w5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Tc=Q("arrow-right",b5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Bu=Q("award",N5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Cd=Q("bell",j5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E5=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],k5=Q("briefcase",E5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],nj=Q("building-2",T5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I5=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],S5=Q("calendar",I5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],kf=Q("chart-column",C5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],Av=Q("check-check",A5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R5=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],On=Q("check",R5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],ux=Q("chef-hat",P5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D5=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],rj=Q("chevron-down",D5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ip=Q("chevron-left",L5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],M5=Q("chevron-right",O5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],F5=Q("chevron-up",V5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pi=Q("circle-alert",U5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Bt=Q("circle-check-big",$5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],z5=Q("circle-check",B5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Hr=Q("circle-x",q5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Ad=Q("clipboard-list",H5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],wr=Q("clock",W5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],dx=Q("code-xml",K5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Q5=Q("credit-card",G5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],In=Q("crown",X5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Rv=Q("dollar-sign",Y5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Z5=Q("external-link",J5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sj=Q("eye",e6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],Pv=Q("file-check",t6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],hx=Q("file-text",n6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],s6=Q("funnel",r6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Tf=Q("gift",i6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],ij=Q("heart",a6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o6=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Rd=Q("house",o6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],aj=Q("image",l6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Dv=Q("info",c6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],d6=Q("key-round",u6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],f6=Q("key",h6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],wi=Q("loader-circle",m6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],fx=Q("lock",p6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],mx=Q("log-in",g6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],px=Q("mail",x6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],bn=Q("map-pin",y6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v6=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],w6=Q("map",v6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],ap=Q("medal",_6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]],_i=Q("megaphone",b6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],j6=Q("menu",N6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Th=Q("message-circle",E6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["path",{d:"M5 12h14",key:"1ays0h"}]],T6=Q("minus",k6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],Za=Q("navigation",I6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],tr=Q("package",S6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Pd=Q("pen-line",C6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],gx=Q("phone",A6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],oj=Q("play",R6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ic=Q("plus",P6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],pn=Q("refresh-cw",D6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],lj=Q("save",L6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],M6=Q("search",O6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],F6=Q("send",V6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],$6=Q("server",U6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cj=Q("settings",B6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],q6=Q("shield-check",z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Sc=Q("shield",H6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],nc=Q("shopping-bag",W6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Dd=Q("shopping-cart",K6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Q6=Q("smartphone",G6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Y6=Q("smile",X6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Fn=Q("sparkles",J6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],e3=Q("square-check-big",Z6);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],n3=Q("square",t3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],uj=Q("star",r3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],$t=Q("store",s3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],a3=Q("target",i3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],an=Q("trash-2",o3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],c3=Q("trending-up",l3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],op=Q("triangle-alert",u3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],nr=Q("truck",d3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],dj=Q("upload",h3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],If=Q("user-check",f3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],p3=Q("user-minus",m3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],rc=Q("user-plus",g3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Lv=Q("user-x",x3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],An=Q("user",y3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],w3=Q("users",v3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],b3=Q("utensils",_3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],j3=Q("video",N3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],hj=Q("wallet",E3);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bs=Q("x",k3),Ve=({to:t,label:e,icon:n,onClick:r})=>{const{pathname:s}=Gs(),a=s===t;return i.jsxs(ke,{to:t,onClick:r,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(a?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,i.jsx("span",{children:e})]})},T3=()=>{const{user:t,role:e,logout:n}=qe(),[r,s]=I.useState(!1),[a,o]=I.useState(0),c=Gs(),u=Yt(),d=c.pathname==="/";return I.useEffect(()=>{s(!1)},[c.pathname]),I.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),I.useEffect(()=>{if(!t){o(0);return}const h=at(ue(z,"notifications"),ft("recipientId","==",t.uid),ft("read","==",!1)),m=es(h,p=>{o(p.size)},()=>o(0));return()=>m()},[t]),i.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[i.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[!d&&i.jsx("button",{onClick:()=>u(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:i.jsx(Tc,{className:"w-5 h-5"})}),i.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[i.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),i.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),i.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[i.jsx(Ve,{to:"/restaurants",label:"",icon:i.jsx($t,{className:"w-4 h-4"})}),e==="customer"&&i.jsxs(i.Fragment,{children:[i.jsx(Ve,{to:"/cart",label:" "}),i.jsx(Ve,{to:"/orders",label:""}),i.jsx(Ve,{to:"/profile",label:"",icon:i.jsx(An,{className:"w-4 h-4"})})]}),e==="owner"&&i.jsxs(i.Fragment,{children:[i.jsx(Ve,{to:"/owner",label:" "}),i.jsx(Ve,{to:"/owner/orders",label:" "}),i.jsx(Ve,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&i.jsxs(i.Fragment,{children:[i.jsx(Ve,{to:"/courier",label:" "}),i.jsx(Ve,{to:"/courier/hiring",label:""})]}),e==="admin"&&i.jsx(Ve,{to:"/admin",label:" "}),e==="developer"&&i.jsx(Ve,{to:"/developer",label:" "}),t&&i.jsxs(ke,{to:"/notifications",className:"relative p-2.5 rounded-xl bg-white/20 hover:bg-white/30 transition text-white",title:"",children:[i.jsx(Cd,{className:"w-5 h-5"}),a>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center font-bold animate-pulse",children:a>9?"9+":a})]}),t?i.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):i.jsx(Ve,{to:"/login",label:""})]}),i.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>s(!r),children:r?i.jsx(Bs,{className:"w-6 h-6 text-white"}):i.jsx(j6,{className:"w-6 h-6 text-white"})})]}),r&&i.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>s(!1)}),i.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${r?"translate-x-0":"translate-x-full"}
      `,children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[i.jsx("span",{className:"text-white font-bold text-lg",children:""}),i.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:i.jsx(Bs,{className:"w-5 h-5 text-white"})})]}),i.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[i.jsx(Ve,{to:"/restaurants",label:"",icon:i.jsx($t,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="customer"&&i.jsxs(i.Fragment,{children:[i.jsx(Ve,{to:"/cart",label:"",icon:i.jsx(Dd,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Ve,{to:"/orders",label:"",icon:i.jsx(tr,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Ve,{to:"/profile",label:"",icon:i.jsx(An,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="owner"&&i.jsxs(i.Fragment,{children:[i.jsx(Ve,{to:"/owner",label:" ",icon:i.jsx(Rd,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Ve,{to:"/owner/orders",label:" ",icon:i.jsx(tr,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Ve,{to:"/owner/courier-requests",label:"",icon:i.jsx(nr,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="courier"&&i.jsxs(i.Fragment,{children:[i.jsx(Ve,{to:"/courier",label:" ",icon:i.jsx(nr,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx(Ve,{to:"/courier/hiring",label:"",icon:i.jsx(tr,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="admin"&&i.jsx(Ve,{to:"/admin",label:" ",icon:i.jsx(Sc,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="developer"&&i.jsx(Ve,{to:"/developer",label:" ",icon:i.jsx(dx,{className:"w-5 h-5"}),onClick:()=>s(!1)}),t&&i.jsx(Ve,{to:"/notifications",label:` ${a>0?`(${a})`:""}`,icon:i.jsx(Cd,{className:"w-5 h-5"}),onClick:()=>s(!1)}),i.jsx("div",{className:"h-px bg-white/20 my-2"}),t?i.jsx("button",{onClick:()=>{n(),s(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):i.jsx(Ve,{to:"/login",label:" ",icon:i.jsx(Rd,{className:"w-5 h-5"}),onClick:()=>s(!1)})]})]})]})},fj=I.createContext(null),$n=()=>{const t=I.useContext(fj);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},I3=({children:t})=>{const[e,n]=I.useState({isOpen:!1,message:"",type:"confirm"}),r=I.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),s=I.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),a=I.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),s(!0)},[e.onConfirm,s]),o=I.useCallback(()=>{e.onCancel&&e.onCancel(),s(!1)},[e.onCancel,s]),c=I.useMemo(()=>({confirm:(u,d={})=>r({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>r({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>r({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>r({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>r({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>r({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[r]);return i.jsxs(fj.Provider,{value:c,children:[t,i.jsx(S3,{...e,onConfirm:a,onCancel:o})]})},S3=({isOpen:t,title:e,message:n,type:r="confirm",confirmText:s="",cancelText:a="",dangerous:o,onConfirm:c,onCancel:u})=>{if(!t)return null;const h={confirm:{icon:i.jsx(Dv,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:o?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:i.jsx(op,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:i.jsx(Bt,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:i.jsx(Hr,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:i.jsx(op,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:i.jsx(Dv,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[r],m=r==="confirm";return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),i.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:p=>p.stopPropagation(),children:[i.jsxs("div",{className:"relative p-6 pb-0",children:[i.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:i.jsx(Bs,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx("div",{className:`w-16 h-16 rounded-full ${h.iconBg} ${h.iconColor} flex items-center justify-center`,children:h.icon})}),i.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),i.jsx("div",{className:"p-6 pt-3",children:i.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),i.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${m?"flex-row-reverse":"justify-center"}`,children:[i.jsx("button",{onClick:c,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${h.buttonColor}`,children:s}),m&&i.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:a})]})]})}),i.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},C3=()=>{const{user:t}=qe(),e=Yt(),n=$n(),r=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await Yn(J(z,"users",t.uid)),await OS(Ln.currentUser),n.success("   "),e("/account-deleted")}catch(a){console.error("Error deleting account:",a),n.error("    .   .")}};return i.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:i.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[i.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[i.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:i.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),i.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),i.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",i.jsx(ij,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),i.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[i.jsxs(ke,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[i.jsx(Sc,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),i.jsxs(ke,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[i.jsx(dx,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&i.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[i.jsx(an,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),i.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),i.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},A3=()=>i.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:i.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[i.jsx(Fn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),i.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),i.jsx(Fn,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),R3=({onLocationSaved:t})=>{const{user:e,role:n}=qe(),[r,s]=I.useState(null),[a,o]=I.useState(!1),[c,u]=I.useState(!1),[d,h]=I.useState(null),[m,p]=I.useState(!1),[v,_]=I.useState(!1),R={lat:24.7136,lng:46.6753},T=I.useCallback(()=>{if(!navigator.geolocation){h("    ");return}u(!0),h(null),navigator.geolocation.getCurrentPosition(y=>{const N={lat:y.coords.latitude,lng:y.coords.longitude};s(N),u(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([N.lat,N.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([N.lat,N.lng]))},y=>{u(!1),y.code===1?h("   .     "):y.code===2?h("  .    GPS"):h("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);I.useEffect(()=>{if(!document.getElementById("leaflet-css")){const y=document.createElement("link");y.id="leaflet-css",y.rel="stylesheet",y.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(y)}if(window.L)p(!0);else{const y=document.createElement("script");y.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",y.onload=()=>p(!0),document.body.appendChild(y)}},[]),I.useEffect(()=>{if(!m||!window.L)return;const y=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const A=r||R,O=y.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([A.lat,A.lng],12);y.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(O);const j=y.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),x=y.marker([A.lat,A.lng],{icon:j,draggable:!0}).addTo(O);return x.on("dragend",()=>{const E=x.getLatLng();s({lat:E.lat,lng:E.lng})}),O.on("click",E=>{const{lat:k,lng:P}=E.latlng;s({lat:k,lng:P}),x.setLatLng([k,P])}),window.locationRequiredMap=O,window.locationRequiredMarker=x,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[m]);const b=async()=>{if(!(!r||!e)){_(!0);try{if(await ye(J(z,"users",e.uid),{location:r,locationUpdatedAt:new Date}),n==="owner")try{await ye(J(z,"restaurants",e.uid),{geoLocation:r,locationUpdatedAt:new Date})}catch(y){console.warn("   :",y)}t()}catch{h("   .   ")}finally{_(!1)}}},w=()=>{switch(n){case"owner":return"";case"courier":return" ";default:return""}};return i.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:i.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(bn,{className:"w-10 h-10"})}),i.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["  ",w()]}),i.jsx("p",{className:"text-sky-100 text-sm",children:n==="owner"?"    ":"     (15 )"})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[d&&i.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[i.jsx(op,{className:"w-5 h-5 flex-shrink-0"}),i.jsx("p",{className:"text-sm",children:d})]}),i.jsx("button",{onClick:T,disabled:c,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:c?i.jsxs(i.Fragment,{children:[i.jsx(wi,{className:"w-5 h-5 animate-spin"}),"  ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Za,{className:"w-5 h-5"}),"   "]})}),i.jsxs("div",{className:"relative",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"      "}),i.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!m&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:i.jsx(wi,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),r&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[i.jsx(Bt,{className:"w-5 h-5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("p",{className:"font-semibold",children:"   "}),i.jsxs("p",{className:"text-xs text-green-600",children:[r.lat.toFixed(6),", ",r.lng.toFixed(6)]})]})]}),i.jsx("button",{onClick:b,disabled:!r||v,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:v?i.jsxs(i.Fragment,{children:[i.jsx(wi,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Bt,{className:"w-5 h-5"}),"  "]})}),i.jsx("p",{className:"text-xs text-gray-400 text-center",children:"       "})]})]})})},Le=({to:t,icon:e,label:n,color:r,emoji:s})=>i.jsxs(ke,{to:t,className:`flex flex-col items-center justify-center gap-2 p-4 sm:p-5 rounded-2xl bg-gradient-to-br ${r} text-white shadow-lg active:scale-95 transition-all duration-200`,children:[i.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-white/20 rounded-xl flex items-center justify-center",children:s?i.jsx("span",{className:"text-2xl sm:text-3xl",children:s}):e}),i.jsx("span",{className:"font-bold text-sm sm:text-base text-center leading-tight",children:n})]}),P3=()=>{var s;const{user:t,role:e,loading:n,logout:r}=qe();return n?i.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100",children:[i.jsx("div",{className:"w-20 h-20 mb-6 bg-gradient-to-br from-sky-500 to-sky-600 rounded-3xl flex items-center justify-center shadow-2xl animate-pulse",children:i.jsx("span",{className:"text-5xl",children:""})}),i.jsx(wi,{className:"w-8 h-8 text-sky-500 animate-spin mb-3"}),i.jsx("p",{className:"text-sky-600 font-semibold",children:" ..."})]}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 px-3 py-4 sm:px-4 sm:py-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-3 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl sm:rounded-3xl flex items-center justify-center shadow-xl",children:i.jsx("span",{className:"text-4xl sm:text-5xl",children:""})}),i.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 to-sky-500 mb-1",children:" "}),t&&i.jsxs("p",{className:"text-sky-600/80 text-sm",children:[" ",t.displayName||((s=t.email)==null?void 0:s.split("@")[0])," "]})]}),!t&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Le,{to:"/restaurants",emoji:"",icon:i.jsx($t,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(Le,{to:"/customer-login",emoji:"",icon:i.jsx(gx,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),i.jsx(Le,{to:"/login",emoji:"",icon:i.jsx(mx,{className:"w-6 h-6"}),label:" ",color:"from-amber-500 to-orange-500"}),i.jsx(Le,{to:"/register",emoji:"",icon:i.jsx(rc,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"})]}),i.jsx("p",{className:"text-center text-sky-600/70 text-xs",children:"      "})]}),e==="customer"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Le,{to:"/restaurants",emoji:"",icon:i.jsx($t,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(Le,{to:"/cart",emoji:"",icon:i.jsx(Dd,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),i.jsx(Le,{to:"/orders",emoji:"",icon:i.jsx(tr,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),i.jsx(Le,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="owner"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Le,{to:"/owner",emoji:"",icon:i.jsx(ux,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(Le,{to:"/owner/orders",emoji:"",icon:i.jsx(Ad,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),i.jsx(Le,{to:"/owner/menu",emoji:"",icon:i.jsx($t,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),i.jsx(Le,{to:"/owner/edit",emoji:"",icon:i.jsx(cj,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),i.jsx(Le,{to:"/owner/courier-requests",emoji:"",icon:i.jsx(nr,{className:"w-6 h-6"}),label:"",color:"from-cyan-500 to-cyan-600"}),i.jsx(Le,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="courier"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Le,{to:"/courier",emoji:"",icon:i.jsx(nr,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(Le,{to:"/courier/hiring",emoji:"",icon:i.jsx($t,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),i.jsx(Le,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="admin"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Le,{to:"/admin",emoji:"",icon:i.jsx(Sc,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(Le,{to:"/admin/restaurants",emoji:"",icon:i.jsx($t,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),i.jsx(Le,{to:"/admin/orders",emoji:"",icon:i.jsx(tr,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),i.jsx(Le,{to:"/restaurants",emoji:"",icon:i.jsx(Dd,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),i.jsx(Le,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="developer"&&i.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Le,{to:"/developer",emoji:"",icon:i.jsx(dx,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),i.jsx(Le,{to:"/restaurants",emoji:"",icon:i.jsx($t,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),i.jsx(Le,{to:"/admin/orders",emoji:"",icon:i.jsx(tr,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),i.jsx(Le,{to:"/profile",emoji:"",icon:i.jsx(An,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),i.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]})]})},xx=["",""," "," ","","","","","","","","","",""," ","","","","",""," ","","","","","","","","","","","","","",""," ","","","",""];function D3(t,e){const r=wu(e.lat-t.lat),s=wu(e.lng-t.lng),a=Math.sin(r/2)*Math.sin(r/2)+Math.cos(wu(t.lat))*Math.cos(wu(e.lat))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)))}function wu(t){return t*(Math.PI/180)}const Sf=15,L3=()=>{var _,R,T,b,w;const{userLocation:t,role:e}=qe(),[n,r]=I.useState([]),[s,a]=I.useState([]),[o,c]=I.useState(0),[u,d]=I.useState(!0),[h,m]=I.useState("");I.useEffect(()=>{(async()=>{const N=(await $e(ue(z,"restaurants"))).docs.map(O=>({id:O.id,...O.data()}));try{const O=at(ue(z,"promotions"),ft("isActive","==",!0)),j=await $e(O),x=new Date,E=j.docs.map(k=>{var P,L;return{id:k.id,...k.data(),expiresAt:(L=(P=k.data().expiresAt)==null?void 0:P.toDate)==null?void 0:L.call(P)}}).filter(k=>!k.expiresAt||new Date(k.expiresAt)>x).map(k=>{const P=N.find(L=>L.id===k.ownerId);return{...k,restaurantName:P==null?void 0:P.name}});a(E)}catch(O){console.warn("Error loading promotions:",O)}let A=[];t?(A=N.map(O=>{if(O.geoLocation){const j=D3(t,O.geoLocation);return{...O,distance:j}}return{...O,distance:void 0}}),(e==="customer"||e==="courier")&&(A=A.filter(O=>!O.geoLocation||O.distance===void 0?!1:O.distance<=Sf)),A.sort((O,j)=>{const x=O.packageType==="premium"?1:0,E=j.packageType==="premium"?1:0;if(E!==x)return E-x;const k={gold:3,silver:2,bronze:1},P=k[O.sellerTier||"bronze"]||0,L=k[j.sellerTier||"bronze"]||0;if(L!==P)return L-P;const D=O.isVerified?1:0,ie=j.isVerified?1:0;return ie!==D?ie-D:(O.distance||999)-(j.distance||999)})):A=N.sort((O,j)=>{const x={gold:3,silver:2,bronze:1},E=x[O.sellerTier||"bronze"]||0,k=x[j.sellerTier||"bronze"]||0;if(k!==E)return k-E;const P=O.isVerified?1:0;return(j.isVerified?1:0)-P}),r(A),d(!1)})()},[t,e]);const p=I.useMemo(()=>{const y=new Set(n.map(N=>N.city).filter(Boolean));return xx.filter(N=>y.has(N))},[n]),v=I.useMemo(()=>h?n.filter(y=>y.city===h):n,[n,h]);return u?i.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):i.jsxs("div",{className:"py-10",children:[i.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-sky-600",children:"  "}),s.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-3",children:[i.jsx(_i,{className:"w-5 h-5 text-purple-500"}),i.jsx("span",{className:"font-bold text-purple-600",children:" "})]}),i.jsxs("div",{className:"relative",children:[i.jsxs(ke,{to:`/menu?restaurant=${(_=s[o])==null?void 0:_.ownerId}`,onClick:async()=>{try{await ye(J(z,"promotions",s[o].id),{viewsCount:Dr(1)})}catch{}},className:"block bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden",children:[i.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[i.jsx(_i,{className:"w-3 h-3"}),""]}),((R=s[o])==null?void 0:R.mediaUrl)&&i.jsx("div",{className:"relative h-48",children:s[o].type==="video"?i.jsxs(i.Fragment,{children:[i.jsx("video",{src:s[o].mediaUrl,className:"w-full h-full object-cover",muted:!0,loop:!0,autoPlay:!0,playsInline:!0}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:i.jsx(oj,{className:"w-6 h-6 text-white fill-white"})})})]}):i.jsx("img",{src:s[o].mediaUrl,alt:s[o].title,className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"p-4",children:[i.jsx("div",{className:"flex items-center gap-2 mb-2",children:((T=s[o])==null?void 0:T.restaurantName)&&i.jsx("span",{className:"text-xs bg-white/20 text-white px-2 py-1 rounded-full",children:s[o].restaurantName})}),((b=s[o])==null?void 0:b.title)&&i.jsx("h3",{className:"text-lg font-bold text-white",children:s[o].title}),((w=s[o])==null?void 0:w.description)&&i.jsx("p",{className:"text-purple-100 text-sm mt-1 line-clamp-2",children:s[o].description})]})]}),s.length>1&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:y=>{y.preventDefault(),c(N=>N===0?s.length-1:N-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:i.jsx(ip,{className:"w-5 h-5 text-gray-800"})}),i.jsx("button",{onClick:y=>{y.preventDefault(),c(N=>N===s.length-1?0:N+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-white/80 hover:bg-white rounded-full shadow-lg transition z-10",children:i.jsx(M5,{className:"w-5 h-5 text-gray-800"})})]}),s.length>1&&i.jsx("div",{className:"flex justify-center gap-2 mt-3",children:s.map((y,N)=>i.jsx("button",{onClick:()=>c(N),className:`w-2 h-2 rounded-full transition ${N===o?"bg-purple-500 w-4":"bg-gray-300"}`},N))})]})]}),p.length>0&&i.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[i.jsx(s6,{className:"w-5 h-5"}),i.jsx("span",{className:"font-semibold",children:":"})]}),i.jsx("button",{onClick:()=>m(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${h?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:""}),p.map(y=>i.jsxs("button",{onClick:()=>m(y),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${h===y?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[i.jsx(bn,{className:"w-4 h-4"}),y]},y)),h&&i.jsx("button",{onClick:()=>m(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:" ",children:i.jsx(Bs,{className:"w-5 h-5"})})]}),v.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(pi,{className:"w-10 h-10 text-sky-500"})}),t?i.jsxs(i.Fragment,{children:[i.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"     "}),i.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["   ",Sf,"  "]})]}):i.jsx(i.Fragment,{children:i.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:h?`     ${h}`:"    "})})]}),t&&v.length>0&&(e==="customer"||e==="courier")&&i.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[i.jsx(Za,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sky-700 font-semibold",children:"    "}),i.jsxs("p",{className:"text-sky-600 text-sm",children:["  : ",Sf," "]})]})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(y=>i.jsxs(ke,{to:`/menu?restaurant=${y.id}`,className:`bg-white border text-gray-800 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center relative overflow-hidden ${y.sellerTier==="gold"?"border-amber-300 ring-2 ring-amber-200":"border-gray-200"}`,children:[i.jsxs("div",{className:"absolute top-3 right-3 flex flex-col gap-1.5",children:[y.isVerified?i.jsxs("div",{className:"bg-green-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[i.jsx(Bt,{className:"w-3 h-3"})," "]}):i.jsx("div",{className:"bg-gray-400 text-white text-xs font-medium px-2.5 py-1 rounded-full flex items-center gap-1 shadow-sm",children:" "}),y.sellerTier==="gold"&&i.jsxs("div",{className:"bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[i.jsx(In,{className:"w-3 h-3"}),"Gold"]}),y.sellerTier==="silver"&&i.jsxs("div",{className:"bg-gradient-to-r from-gray-400 to-gray-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:[i.jsx(ap,{className:"w-3 h-3"}),"Silver"]}),y.packageType==="premium"&&i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold px-2.5 py-1 rounded-full flex items-center gap-1 shadow",children:" "})]}),y.distance!==void 0&&i.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500 text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[i.jsx(Za,{className:"w-3 h-3"}),y.distance<1?`${Math.round(y.distance*1e3)} `:`${y.distance.toFixed(1)} `]}),y.logoUrl?i.jsx("img",{src:y.logoUrl,alt:y.name,className:`w-28 h-28 object-cover rounded-full mb-4 ${y.sellerTier==="gold"?"border-4 border-amber-400 ring-4 ring-amber-100":y.sellerTier==="silver"?"border-4 border-gray-300":"border-4 border-sky-100"}`}):i.jsx("div",{className:`w-28 h-28 flex items-center justify-center rounded-full text-3xl mb-4 ${y.sellerTier==="gold"?"bg-amber-100 border-4 border-amber-400":y.sellerTier==="silver"?"bg-gray-100 border-4 border-gray-300":"bg-sky-100 border-4 border-sky-200"}`,children:""}),i.jsx("h3",{className:"font-bold text-xl text-gray-800",children:y.name}),y.city&&i.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center justify-center gap-1",children:[i.jsx(bn,{className:"w-4 h-4"}),y.city]})]},y.id))})]})},Ov="broast_cart";function yx(){const[t,e]=I.useState(()=>{try{const c=localStorage.getItem(Ov);return c?JSON.parse(c):[]}catch{return[]}});I.useEffect(()=>{localStorage.setItem(Ov,JSON.stringify(t))},[t]);const n=(c,u=1)=>{e(d=>{const h=d.findIndex(m=>m.id===c.id);if(h>=0){const m=[...d];return m[h]={...m[h],qty:m[h].qty+u,ownerId:c.ownerId??m[h].ownerId},m}return[...d,{...c,qty:u}]})},r=c=>e(u=>u.filter(d=>d.id!==c)),s=(c,u)=>e(d=>d.map(h=>h.id===c?{...h,qty:u}:h)),a=()=>e([]),o=t.reduce((c,u)=>c+u.price*u.qty,0);return{items:t,add:n,remove:r,changeQty:s,clear:a,subtotal:o}}const mj=I.createContext(null),En=()=>{const t=I.useContext(mj);if(!t)throw new Error("useToast must be used within ToastProvider");return t},O3=({children:t})=>{const[e,n]=I.useState([]),r=I.useCallback(o=>{n(c=>c.filter(u=>u.id!==o))},[]),s=I.useCallback((o,c,u)=>{const d=Math.random().toString(36).slice(2),h={id:d,message:o,type:c,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(m=>[...m,h]),h.duration&&h.duration>0&&setTimeout(()=>r(d),h.duration)},[r]),a=I.useMemo(()=>({show:(o,c)=>s(o,(c==null?void 0:c.type)??"info",c),success:(o,c)=>s(o,"success",c),error:(o,c)=>s(o,"error",c),info:(o,c)=>s(o,"info",c),warning:(o,c)=>s(o,"warning",c)}),[s]);return i.jsxs(mj.Provider,{value:a,children:[t,i.jsx(F3,{items:e,onClose:r})]})},M3={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},V3={success:"",error:"",info:"",warning:""},F3=({items:t,onClose:e})=>(I.useEffect(()=>{},[]),i.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[i.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>i.jsx("div",{className:`pointer-events-auto ${M3[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"text-xl leading-none",children:V3[n.type]}),i.jsxs("div",{className:"flex-1",children:[n.title&&i.jsx("div",{className:"font-bold",children:n.title}),i.jsx("div",{className:"text-sm",children:n.message})]}),i.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),i.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),U3=()=>{const[t,e]=I.useState([]),[n,r]=I.useState(!0),[s,a]=I.useState(null),[o,c]=I.useState(null),[u,d]=I.useState(!0),{add:h,subtotal:m,items:p}=yx(),{user:v,role:_}=qe(),R=En(),[T]=ub(),b=T.get("restaurant");I.useEffect(()=>{(async()=>{let A;if(b){A=at(ue(z,"menuItems"),ft("available","==",!0),ft("ownerId","==",b));const E=await tt(J(z,"restaurants",b));E.exists()&&a(E.data().name);try{const k=at(ue(z,"promotions"),ft("ownerId","==",b),ft("isActive","==",!0)),P=await $e(k);if(!P.empty){const L=P.docs.map(V=>{var $,B;return{id:V.id,...V.data(),expiresAt:(B=($=V.data().expiresAt)==null?void 0:$.toDate)==null?void 0:B.call($)}}),D=new Date,ie=L.filter(V=>!V.expiresAt||new Date(V.expiresAt)>D);if(ie.length>0){const V=ie[0];c(V),await ye(J(z,"promotions",V.id),{viewsCount:Dr(1)})}}}catch(k){console.warn("Error loading promotion:",k)}}else A=at(ue(z,"menuItems"),ft("available","==",!0));const j=(await $e(A)).docs.map(E=>({id:E.id,...E.data()})),x=await Promise.all(j.map(async E=>{if(!E.ownerId)return E;const k=await tt(J(z,"restaurants",E.ownerId));return k.exists()?{...E,restaurant:k.data()}:E}));e(x),r(!1)})()},[b]);const w=1.75,y=A=>{var j;if(!A.ownerId){R.warning("    ",{title:""});return}const O=(j=p[0])==null?void 0:j.ownerId;if(O&&O!==A.ownerId){R.warning("           ",{title:""});return}h({id:A.id,name:A.name,price:A.price+w,ownerId:A.ownerId}),R.success("    ")};if(n)return i.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const N=v&&(_==="customer"||_==="admin"||_==="developer"||!_);return i.jsxs("div",{className:"py-10",children:[i.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:s?`  ${s}`:"  "}),b&&i.jsx("div",{className:"text-center mb-6",children:i.jsx(ke,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),o&&u&&i.jsxs("div",{className:"mb-8 bg-gradient-to-r from-purple-900 via-purple-800 to-pink-900 rounded-2xl shadow-xl overflow-hidden relative",children:[i.jsx("button",{onClick:()=>d(!1),className:"absolute top-3 left-3 z-10 p-2 bg-black/40 hover:bg-black/60 rounded-full text-white transition",children:i.jsx(Bs,{className:"w-4 h-4"})}),i.jsxs("div",{className:"absolute top-3 right-3 z-10 inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow",children:[i.jsx(_i,{className:"w-3 h-3"}),""]}),i.jsxs("div",{className:"relative",children:[o.mediaUrl&&i.jsx("div",{className:"relative",children:o.type==="video"?i.jsxs("div",{className:"relative",children:[i.jsx("video",{src:o.mediaUrl,controls:!0,className:"w-full h-56 object-cover",poster:""}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:i.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:i.jsx(oj,{className:"w-8 h-8 text-white fill-white"})})})]}):i.jsx("img",{src:o.mediaUrl,alt:o.title,className:"w-full h-56 object-cover"})}),i.jsxs("div",{className:"p-5",children:[o.title&&i.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:o.title}),o.description&&i.jsx("p",{className:"text-purple-100 text-sm leading-relaxed",children:o.description})]})]})]}),t.length===0&&i.jsx("div",{className:"text-center text-gray-400",children:"    "}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(A=>i.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[A.restaurant&&i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[A.restaurant.logoUrl?i.jsx("img",{src:A.restaurant.logoUrl,alt:A.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):i.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),i.jsx("span",{className:"font-semibold",children:A.restaurant.name})]}),i.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:A.imageUrl?i.jsx("img",{src:A.imageUrl,alt:A.name,className:"w-full h-full object-cover rounded-xl"}):i.jsx("span",{className:"text-gray-400",children:" "})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-lg",children:A.name}),A.desc&&i.jsx("p",{className:"text-sm text-gray-300 mt-1",children:A.desc})]}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[(A.price+w).toFixed(2)," ."]}),N&&i.jsx("button",{onClick:()=>y(A),disabled:!A.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${A.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},A.id))}),m>0&&N&&i.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:i.jsxs(ke,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",m.toFixed(2)," ."]})})]})},$3=()=>{const{items:t,subtotal:e,remove:n,clear:r,changeQty:s}=yx();return t.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[i.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:i.jsx(nc,{className:"w-12 h-12 text-gray-400"})}),i.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),i.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),i.jsxs(ke,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[i.jsx(_5,{className:"w-5 h-5"})," "]})]}):i.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[i.jsx(nc,{className:"w-6 h-6 text-primary"})," ",i.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),i.jsx("div",{className:"space-y-3",children:t.map(a=>i.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[i.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:a.name}),i.jsxs("p",{className:"text-primary font-bold text-sm",children:[a.price.toFixed(2)," ."]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsx("button",{onClick:()=>a.qty>1?s(a.id,a.qty-1):n(a.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:i.jsx(T6,{className:"w-4 h-4"})}),i.jsx("span",{className:"font-bold text-lg w-8 text-center",children:a.qty}),i.jsx("button",{onClick:()=>s(a.id,a.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:i.jsx(Ic,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2",children:[i.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(a.price*a.qty).toFixed(2)," ."]}),i.jsx("button",{onClick:()=>n(a.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:i.jsx(an,{className:"w-4 h-4"})})]})]},a.id))}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-gray-600",children:[i.jsx("span",{children:" "}),i.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),i.jsxs("div",{className:"flex justify-between text-gray-600",children:[i.jsx("span",{children:" "}),i.jsx("span",{className:"font-bold",children:"7.00 ."})]}),i.jsx("div",{className:"h-px bg-gray-200"}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"font-bold text-lg",children:""}),i.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[i.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[i.jsx(an,{className:"w-5 h-5"})," "]}),i.jsx(ke,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},B3=()=>{const[t,e]=I.useState(""),[n,r]=I.useState(""),[s,a]=I.useState(!1),o=Yt(),c=$n(),u=async d=>{d.preventDefault(),a(!0);try{const m=(await AS(Ln,t,n)).user.uid,p=await tt(J(z,"users",m));if(p.exists()){const v=p.data();console.log("  :",v),v.role==="owner"?o("/owner"):v.role==="admin"?o("/admin"):v.role==="developer"?o("/developer"):v.role==="courier"?o("/courier"):o("/")}else c.warning("   Auth       Firestore")}catch(h){c.error(h.message,{title:"   "})}finally{a(!1)}};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[i.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),i.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:i.jsx("span",{className:"text-4xl",children:"  "})}),i.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),i.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),i.jsxs("form",{onSubmit:u,className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(px,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(fx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>r(d.target.value)})]}),i.jsx("button",{disabled:s,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:s?i.jsx(i.Fragment,{children:" ..."}):i.jsxs(i.Fragment,{children:[i.jsx(mx,{className:"w-5 h-5"}),""]})})]}),i.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",i.jsx(ke,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),i.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[i.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),i.jsx(ke,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},z3=()=>{const[t,e]=I.useState(""),[n,r]=I.useState(""),[s,a]=I.useState(""),[o,c]=I.useState(""),[u,d]=I.useState(""),[h,m]=I.useState(""),[p,v]=I.useState(!1),[_,R]=I.useState(!1),T=Yt(),b=async y=>{if(y.preventDefault(),!h)return alert("  ");if(h==="owner"&&!o)return alert("  ");if(h==="owner"&&!p)return alert("    ");R(!0);try{const N=await yl(Ln,t,n);await fn(J(z,"users",N.user.uid),{name:s,email:t,role:h,restaurantName:h==="owner"?o:null}),h==="owner"&&await fn(J(z,"restaurants",N.user.uid),{name:o||s||" ",ownerId:N.user.uid,email:t,phone:"",city:u||"",location:"",logoUrl:""},{merge:!0}),T("/")}catch(N){alert(N.message)}finally{R(!1)}},w=[{value:"customer",label:"",icon:w3,color:"sky"},{value:"courier",label:"",icon:nr,color:"emerald"},{value:"owner",label:" ",icon:ux,color:"orange"}];return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[i.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),i.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:i.jsx(rc,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),i.jsxs("form",{onSubmit:b,className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(An,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:s,onChange:y=>a(y.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(px,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:y=>e(y.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(fx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:y=>r(y.target.value)})]}),i.jsx("div",{className:"grid grid-cols-3 gap-3",children:w.map(y=>{const N=y.icon,A=h===y.value;return i.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${A?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[i.jsx("input",{type:"radio",name:"role",value:y.value,className:"hidden",onChange:()=>m(y.value)}),i.jsx(N,{className:"w-6 h-6"}),i.jsx("span",{className:"text-sm font-bold",children:y.label})]},y.value)})}),h==="owner"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative",children:[i.jsx($t,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),i.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:o,onChange:y=>c(y.target.value)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(bn,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),i.jsxs("select",{value:u,onChange:y=>d(y.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[i.jsx("option",{value:"",children:" "}),xx.map(y=>i.jsx("option",{value:y,children:y},y))]})]}),i.jsxs("div",{onClick:()=>v(!p),className:`flex items-start gap-3 p-4 rounded-2xl cursor-pointer transition-all border-2 ${p?"bg-green-50 border-green-400":"bg-orange-50 border-orange-200 hover:border-orange-300"}`,children:[p?i.jsx(e3,{className:"w-6 h-6 text-green-500 flex-shrink-0 mt-0.5"}):i.jsx(n3,{className:"w-6 h-6 text-orange-400 flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"text-sm leading-relaxed",children:[i.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" "," "]}),i.jsx(ke,{to:"/terms",target:"_blank",onClick:y=>y.stopPropagation(),className:"text-sky-600 hover:text-sky-800 font-bold underline",children:" "}),i.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" ",""," "]}),i.jsx(ke,{to:"/privacy-policy",target:"_blank",onClick:y=>y.stopPropagation(),className:"text-sky-600 hover:text-sky-800 font-bold underline",children:" "}),i.jsxs("span",{className:p?"text-green-700":"text-orange-700",children:[" ","   "]})]})]})]}),i.jsx("button",{disabled:_||h==="owner"&&!p,className:`w-full flex items-center justify-center gap-3 text-white font-bold p-4 rounded-2xl shadow-xl transition-all ${h==="owner"&&!p?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 shadow-sky-300/50 hover:scale-[1.02]"}`,children:_?" ...":i.jsxs(i.Fragment,{children:[i.jsx(rc,{className:"w-5 h-5"}),""]})}),h==="owner"&&!p&&i.jsx("p",{className:"text-center text-sm text-orange-600 bg-orange-50 p-3 rounded-xl",children:"       "})]}),i.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",i.jsx(ke,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},Mv=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},q3=()=>{const[t,e]=I.useState(""),[n,r]=I.useState(""),[s,a]=I.useState("phone"),[o,c]=I.useState(!1),[u,d]=I.useState(null),[h,m]=I.useState(0),p=I.useRef(null),v=I.useRef(null),_=Yt(),R=$n();I.useEffect(()=>(p.current&&!v.current&&(v.current=new Sy(Ln,p.current,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),v.current=null}})),()=>{v.current&&(v.current.clear(),v.current=null)}),[]),I.useEffect(()=>{if(h>0){const y=setTimeout(()=>m(h-1),1e3);return()=>clearTimeout(y)}},[h]);const T=async()=>{if(!t||t.length<9){R.warning("   ");return}const y=Mv(t);console.log("Sending OTP to:",y),c(!0);try{!v.current&&p.current&&(v.current=new Sy(Ln,p.current,{size:"invisible"}));const N=await uC(Ln,y,v.current);d(N),a("otp"),m(60),R.success("     ")}catch(N){console.error("OTP Error:",N),v.current&&(v.current.clear(),v.current=null),N.code==="auth/invalid-phone-number"?R.error("   "):N.code==="auth/too-many-requests"?R.error("   "):N.code==="auth/quota-exceeded"?R.error("     "):R.error(N.message||"  ")}finally{c(!1)}},b=async()=>{if(!n||n.length!==6){R.warning("     6 ");return}if(!u){R.error("    "),a("phone");return}c(!0);try{const y=await u.confirm(n),N=y.user.uid,A=y.user.phoneNumber,O=await tt(J(z,"users",N));O.exists()?R.success(" ! "):(await fn(J(z,"users",N),{phone:A,role:"customer",name:"",createdAt:ae()}),R.success("   ! "));const j=O.exists()?O.data():{role:"customer"};j.role==="owner"?_("/owner"):j.role==="admin"?_("/admin"):j.role==="developer"?_("/developer"):j.role==="courier"?_("/courier"):_("/")}catch(y){console.error("Verify Error:",y),y.code==="auth/invalid-verification-code"?R.error("   "):y.code==="auth/code-expired"?(R.error("    "),a("phone")):R.error(y.message||" ")}finally{c(!1)}},w=()=>{h>0||(a("phone"),r(""),d(null))};return i.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[i.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),i.jsx("div",{ref:p,id:"recaptcha-container"}),i.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[i.jsxs("div",{className:"flex flex-col items-center mb-8",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),i.jsx("p",{className:"text-sky-500 mt-1",children:s==="phone"?" ":"  "})]}),s==="phone"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(gx,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:y=>e(y.target.value.replace(/\D/g,"")),maxLength:10})]}),i.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),i.jsx("button",{onClick:T,disabled:o||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Tc,{className:"w-5 h-5"}),"  "]})})]}),s==="otp"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsx("p",{className:"text-gray-600",children:"   "}),i.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:Mv(t)})]}),i.jsxs("div",{className:"relative",children:[i.jsx(d6,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),i.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:y=>r(y.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),i.jsx("button",{onClick:b,disabled:o||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:o?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(mx,{className:"w-5 h-5"})," "]})}),i.jsx("div",{className:"text-center",children:h>0?i.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",i.jsx("span",{className:"font-bold text-sky-600",children:h})," "]}):i.jsx("button",{onClick:w,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),i.jsx("button",{onClick:()=>{a("phone"),r("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),i.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[i.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),i.jsx(ke,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function H3(){return i.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:i.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),i.jsxs("p",{className:"mb-4",children:["   ",i.jsx("strong",{children:" "}),"          ."]}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),i.jsx("p",{className:"mb-4",children:"                   .            ."}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),i.jsx("p",{className:"mb-4",children:"               ."}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),i.jsx("p",{className:"mb-4",children:"              .                 ."}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),i.jsx("p",{className:"mb-4",children:"       (    )         ."}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),i.jsxs("p",{className:"mb-4",children:["              .         :",i.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),i.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),i.jsx("p",{className:"mb-4",children:"                  ."}),i.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx(ke,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function W3(){return i.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-4 py-10 leading-relaxed",children:i.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-6 sm:p-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:"  -   "}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"1. "}),i.jsx("p",{children:"                ."})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"2. "}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[i.jsx("li",{children:"      ."}),i.jsx("li",{children:"        ."})]})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"3.     "}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[i.jsx("li",{children:"     ."}),i.jsxs("li",{children:["        "," ",i.jsx("strong",{className:"text-sky-600",children:"1.75 "}),"   ."]}),i.jsxs("li",{children:["     1   2   "," ",i.jsx("strong",{className:"text-sky-600",children:"0.25 "})," ."]}),i.jsx("li",{children:"          ."}),i.jsx("li",{children:"              ."})]})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"4.  "}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[i.jsx("li",{children:"           ."}),i.jsxs("li",{children:["     :",i.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[i.jsx("li",{children:" "}),i.jsx("li",{children:"      "})]})]}),i.jsx("li",{children:"               ."})]})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"5.   "}),i.jsx("p",{className:"mb-3",children:"     :"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[i.jsx("li",{children:" "}),i.jsx("li",{children:" "}),i.jsx("li",{children:"  "}),i.jsx("li",{children:" "}),i.jsx("li",{children:"    "})]}),i.jsx("p",{className:"mt-3",children:"         ."})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"6.  "}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[i.jsx("li",{children:"       ."}),i.jsxs("li",{children:["     :",i.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[i.jsx("li",{children:" "}),i.jsx("li",{children:" "}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"     "})]})]}),i.jsx("li",{children:"           ."})]})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"7.   ()"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[i.jsx("li",{children:"         ."}),i.jsx("li",{children:"              ."}),i.jsx("li",{children:"            ."})]})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"8.   "}),i.jsx("p",{className:"mb-3",children:"     :"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4",children:[i.jsx("li",{children:"   "}),i.jsx("li",{children:"   "}),i.jsx("li",{children:"     "})]}),i.jsx("p",{className:"mt-3",children:"   :"}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700 mr-4 mt-2",children:[i.jsx("li",{children:" "}),i.jsx("li",{children:" "}),i.jsx("li",{children:"    "})]})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"9. "}),i.jsxs("ul",{className:"list-disc list-inside space-y-2 text-gray-700",children:[i.jsx("li",{children:"          ."}),i.jsx("li",{children:"    ."})]})]}),i.jsxs("section",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3 border-r-4 border-sky-500 pr-3",children:"10. "}),i.jsx("p",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4 text-gray-800",children:"           ."})]}),i.jsxs("div",{className:"border-t-2 border-gray-200 pt-6 mt-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-sky-600 mb-6 text-center",children:" "}),i.jsxs("ul",{className:"list-disc list-inside space-y-3 text-gray-700",children:[i.jsx("li",{children:"      ."}),i.jsxs("li",{children:["    :",i.jsxs("ul",{className:"list-disc list-inside mr-6 mt-2 space-y-1",children:[i.jsx("li",{children:" "}),i.jsx("li",{children:" "}),i.jsx("li",{children:"  "}),i.jsx("li",{children:"  "})]})]}),i.jsx("li",{children:"                  ."}),i.jsx("li",{children:"            ."})]})]}),i.jsx("div",{className:"bg-green-50 border border-green-300 rounded-lg p-4 mt-8 text-center",children:i.jsx("p",{className:"text-green-800 font-medium",children:"         "})}),i.jsxs("p",{className:"mt-6 text-sm text-gray-500 text-center",children:["      ",new Date().toLocaleDateString("ar-SA")]}),i.jsx("div",{className:"mt-8 text-center",children:i.jsx(ke,{to:"/",className:"text-white bg-sky-500 hover:bg-sky-600 px-6 py-2 rounded-lg inline-block transition-colors",children:"   "})})]})})}function K3(){return i.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),i.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),i.jsx(ke,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const G3="modulepreload",Q3=function(t){return"/"+t},Vv={},Cf=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=Q3(u),u in Vv)return;Vv[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":G3,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},Pe=({allow:t,children:e})=>{const{role:n,loading:r}=qe();return r?i.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?i.jsx(ag,{to:"/",replace:!0}):i.jsx(i.Fragment,{children:e})},pj=({isOpen:t,onClose:e,onConfirm:n,initialLocation:r})=>{const[s,a]=I.useState(r||null),[o,c]=I.useState(""),[u,d]=I.useState(!1),[h,m]=I.useState(!1),[p,v]=I.useState(null),[_,R]=I.useState(!1),[T,b]=I.useState(""),[w,y]=I.useState([]),[N,A]=I.useState(!1),[O,j]=I.useState(!1),[x,E]=I.useState("map"),k={lat:24.7136,lng:46.6753},P=I.useCallback(async $=>{if(!$.trim()||$.length<2){y([]),j(!1);return}A(!0);try{const B=$.includes("")?$:`${$}, `,X=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(B)}&limit=5&accept-language=ar`,{headers:{Accept:"application/json"}})).json();y(X),j(X.length>0)}catch(B){console.error("  :",B),y([])}finally{A(!1)}},[]),L=I.useCallback($=>{const B={lat:parseFloat($.lat),lng:parseFloat($.lon)};a(B),b(""),y([]),j(!1),window.leafletMap&&(window.leafletMap.setView([B.lat,B.lng],16,{animate:!0,duration:.5}),window.leafletMarker&&window.leafletMarker.setLatLng([B.lat,B.lng]));const F=$.display_name.split(",").slice(0,3).join("");c(F)},[]),D=I.useCallback(()=>{if(!navigator.geolocation){v("    ");return}m(!0),v(null),navigator.geolocation.getCurrentPosition($=>{const B={lat:$.coords.latitude,lng:$.coords.longitude};a(B),m(!1),window.leafletMap&&(window.leafletMap.setView([B.lat,B.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([B.lat,B.lng]))},$=>{m(!1),$.code===1?v("   .     "):$.code===2?v("  .    GPS"):v("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);I.useEffect(()=>{if(t){if(!document.getElementById("leaflet-css")){const $=document.createElement("link");$.id="leaflet-css",$.rel="stylesheet",$.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild($)}if(window.L)R(!0);else{const $=document.createElement("script");$.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",$.onload=()=>R(!0),document.body.appendChild($)}}},[t]),I.useEffect(()=>{if(!t||!_||!window.L)return;const $=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const F=s||k,X=$.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([F.lat,F.lng],s?17:12);$.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(X);const re=$.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),ve=$.marker([F.lat,F.lng],{icon:re,draggable:!0}).addTo(X);return ve.on("dragend",()=>{const pe=ve.getLatLng();a({lat:pe.lat,lng:pe.lng})}),X.on("click",pe=>{const{lat:De,lng:Rt}=pe.latlng;ve.setLatLng([De,Rt]),a({lat:De,lng:Rt})}),window.leafletMap=X,window.leafletMarker=ve,s&&a(s),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[t,_]);const ie=()=>{s&&window.leafletMap&&window.leafletMap.setView([s.lat,s.lng],17,{animate:!0,duration:.5})},V=()=>{if(x==="manual"){if(!o.trim()){v("  ");return}n({lat:24.7136,lng:46.6753},o);return}if(!s){v("  ");return}if(!o.trim()){v("  ");return}n(s,o)};return t?i.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),i.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[i.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(bn,{className:"w-5 h-5"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-lg",children:"  "}),i.jsx("p",{className:"text-sm text-white/80",children:x==="map"?"   ":"  "})]})]}),i.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:i.jsx(Bs,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex gap-2 mb-3",children:[i.jsxs("button",{onClick:()=>E("map"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${x==="map"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[i.jsx(w6,{className:"w-4 h-4"}),""]}),i.jsxs("button",{onClick:()=>E("manual"),className:`flex-1 py-2.5 rounded-xl font-semibold text-sm flex items-center justify-center gap-2 transition ${x==="manual"?"bg-white text-sky-600":"bg-white/20 text-white hover:bg-white/30"}`,children:[i.jsx(Pd,{className:"w-4 h-4"})," "]})]}),x==="map"&&i.jsxs("div",{className:"relative",children:[i.jsx(M6,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",value:T,onChange:$=>{b($.target.value),P($.target.value)},onFocus:()=>w.length>0&&j(!0),placeholder:"     ...",className:"w-full bg-white/95 text-gray-800 rounded-xl p-3 pr-10 pl-10 focus:outline-none focus:ring-2 focus:ring-white/50 transition placeholder:text-gray-400"}),N&&i.jsx(wi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-500 animate-spin"}),O&&w.length>0&&i.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-2xl overflow-hidden z-[1001] max-h-60 overflow-y-auto",children:w.map(($,B)=>i.jsxs("button",{onClick:()=>L($),className:"w-full p-3 text-right hover:bg-sky-50 border-b border-gray-100 last:border-0 transition flex items-start gap-3",children:[i.jsx(bn,{className:"w-5 h-5 text-sky-500 flex-shrink-0 mt-0.5"}),i.jsx("span",{className:"text-gray-700 text-sm leading-relaxed",children:$.display_name})]},B))})]})]}),x==="map"&&i.jsxs("div",{className:"flex-1 relative",children:[!_&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:i.jsxs("div",{className:"text-center",children:[i.jsx(wi,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),i.jsx("p",{className:"text-sky-600 font-medium",children:"  ..."})]})}),i.jsx("div",{id:"location-map",className:"w-full h-full"}),i.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[i.jsx("button",{onClick:D,disabled:h,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:" ",children:h?i.jsx(wi,{className:"w-5 h-5 text-sky-500 animate-spin"}):i.jsx(Za,{className:"w-5 h-5 text-sky-500"})}),s&&i.jsx("button",{onClick:ie,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"",children:i.jsx(a3,{className:"w-5 h-5 text-gray-600"})})]}),s&&i.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[i.jsx(On,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-medium",children:"  "})]}),i.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[s.lat.toFixed(6),", ",s.lng.toFixed(6)]})]})]}),x==="manual"&&i.jsx("div",{className:"flex-1 p-6 overflow-y-auto bg-gray-50",children:i.jsxs("div",{className:"max-w-md mx-auto space-y-4",children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Pd,{className:"w-10 h-10 text-sky-500"})}),i.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"  "}),i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"     "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsxs("select",{className:"w-full border-2 border-gray-200 rounded-xl p-3 bg-white focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>{const F=B.split("").slice(1);return $.target.value+(F.length?""+F.join(""):"")}),children:[i.jsx("option",{value:"",children:" "}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:" ",children:" "}),i.jsx("option",{value:" ",children:" "}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:" ",children:" "}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""}),i.jsx("option",{value:"",children:""})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",placeholder:":  ",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>(B.split("")[0]||"")+($.target.value?" "+$.target.value:""))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:""}),i.jsx("input",{type:"text",placeholder:":   ",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none",onChange:$=>c(B=>B.split("").slice(0,2).join("")+($.target.value?" "+$.target.value:""))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsx("textarea",{placeholder:"    ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none resize-none",onChange:$=>c(B=>B.split("").slice(0,3).join("")+($.target.value?" "+$.target.value:""))})]}),o&&i.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-2",children:[i.jsx(On,{className:"w-5 h-5"}),i.jsx("span",{className:"font-semibold",children:":"})]}),i.jsx("p",{className:"text-gray-700",children:o})]})]})}),i.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[p&&i.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[i.jsx(Bs,{className:"w-4 h-4 flex-shrink-0"}),p]}),x==="map"&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"relative",children:[i.jsx(Q6,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),i.jsx("input",{type:"text",value:o,onChange:$=>c($.target.value),placeholder:"  (:       ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),i.jsx("p",{className:"text-xs text-gray-500 text-center",children:"      "})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:""}),i.jsxs("button",{onClick:V,disabled:x==="map"&&!s,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[i.jsx(On,{className:"w-5 h-5"})," "]})]})]})]}),i.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},Af=1,Xo=.75,Rf=!1,X3=()=>{const{items:t,subtotal:e,clear:n}=yx(),{user:r}=qe(),s=Yt(),a=$n(),o=En(),[c,u]=I.useState(""),[d,h]=I.useState(!1),[m,p]=I.useState(null),[v,_]=I.useState(null),[R,T]=I.useState(!1),[b,w]=I.useState("pickup"),y=b==="delivery"?7:0;t.reduce((j,x)=>j+x.qty,0);const N=e+y;I.useEffect(()=>{(async()=>{var P,L;if(t.length===0)return;let x=(P=t[0])==null?void 0:P.ownerId;if(!x&&((L=t[0])!=null&&L.id))try{const D=await tt(J(z,"menuItems",t[0].id)),ie=D.exists()?D.data():null;x=(ie==null?void 0:ie.ownerId)||null}catch(D){console.error("    :",D)}if(!x){p(null);return}const E=await tt(J(z,"restaurants",x)),k=E.exists()?E.data():null;p({id:x,name:(k==null?void 0:k.name)||"",referredBy:k==null?void 0:k.referredBy,referrerType:k==null?void 0:k.referrerType})})()},[t]);const A=(j,x)=>{_(j),u(x),T(!1),o.success("   ! ")},O=async()=>{var $;if(!r)return;if(t.length===0){a.warning(" ");return}let j=m==null?void 0:m.id;if(!j&&(($=t[0])!=null&&$.id)){const B=await tt(J(z,"menuItems",t[0].id)),F=B.exists()?B.data():null;j=(F==null?void 0:F.ownerId)||null}if(!j){a.error("   .    .");return}h(!0);const x=(m==null?void 0:m.referrerType)==="admin"&&(m==null?void 0:m.referredBy),E=t.reduce((B,F)=>B+F.qty,0),k=Af+Xo,L=e-k*E,D=Af*E,ie=x?Xo*E:0,V=D+(x?0:Xo*E);await er(ue(z,"orders"),{customerId:r.uid,restaurantId:j,restaurantName:(m==null?void 0:m.name)||"",items:t.map(B=>({id:B.id,name:B.name,price:B.price,qty:B.qty,ownerId:B.ownerId??j})),subtotal:e,deliveryFee:y,total:N,status:"pending",deliveryType:b,address:b==="pickup"?"  ":c,location:b==="pickup"?null:v,createdAt:ae(),updatedAt:ae(),paymentMethod:"cod",restaurantEarnings:L,platformFee:D,platformFeePerItem:Af,adminCommission:ie,adminCommissionPerItem:Xo,appEarnings:V,totalItemsCount:E,referredBy:(m==null?void 0:m.referredBy)||null});try{const B=J(z,"wallets",j);if((await tt(B)).exists())await ye(B,{balance:Dr(L),totalEarnings:Dr(L),updatedAt:ae()});else{const{setDoc:X}=await Cf(async()=>{const{setDoc:re}=await Promise.resolve().then(()=>bf);return{setDoc:re}},void 0);await X(B,{balance:L,totalEarnings:L,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${L}    ${j}`)}catch(B){console.error("    :",B)}if(x&&(m!=null&&m.referredBy)&&ie>0)try{const B=J(z,"wallets",m.referredBy);if((await tt(B)).exists())await ye(B,{balance:Dr(ie),totalEarnings:Dr(ie),updatedAt:ae()});else{const{setDoc:X}=await Cf(async()=>{const{setDoc:re}=await Promise.resolve().then(()=>bf);return{setDoc:re}},void 0);await X(B,{balance:ie,totalEarnings:ie,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${ie}    ${m.referredBy} (${E}   ${Xo} .)`)}catch(B){console.error("    :",B)}try{const B=J(z,"wallets","app_earnings");if((await tt(B)).exists())await ye(B,{balance:Dr(V),totalEarnings:Dr(V),updatedAt:ae()});else{const{setDoc:X}=await Cf(async()=>{const{setDoc:re}=await Promise.resolve().then(()=>bf);return{setDoc:re}},void 0);await X(B,{balance:V,totalEarnings:V,totalWithdrawn:0,transactions:[],updatedAt:ae()})}console.log(`   ${V}   `)}catch(B){console.error("    :",B)}n(),h(!1),s("/orders")};return i.jsx(Pe,{allow:["customer","admin"],children:i.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[i.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:i.jsx(nc,{className:"w-6 h-6"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold",children:" "}),i.jsx("p",{className:"text-sm text-white/80",children:(m==null?void 0:m.name)||" ..."})]})]})}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[i.jsx(nc,{className:"w-5 h-5 text-sky-500"}),i.jsx("span",{className:"font-bold text-gray-800",children:" "}),i.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[t.length," "]})]}),i.jsx("div",{className:"p-4 space-y-2",children:t.map(j=>i.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[j.qty,""]}),i.jsx("span",{className:"text-gray-800 font-medium",children:j.name})]}),i.jsxs("span",{className:"font-bold text-sky-600",children:[(j.price*j.qty).toFixed(2)," ."]})]},j.id))})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[i.jsx(nr,{className:"w-5 h-5 text-sky-500"}),i.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsxs("button",{onClick:()=>w("pickup"),className:`w-full p-4 rounded-xl border-2 transition flex items-center gap-4 ${b==="pickup"?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${b==="pickup"?"bg-green-500":"bg-gray-100"}`,children:i.jsx($t,{className:`w-6 h-6 ${b==="pickup"?"text-white":"text-gray-500"}`})}),i.jsxs("div",{className:"flex-1 text-right",children:[i.jsx("p",{className:`font-bold ${b==="pickup"?"text-green-700":"text-gray-800"}`,children:"  "}),i.jsx("p",{className:"text-sm text-gray-500",children:" -   "})]}),b==="pickup"&&i.jsx(On,{className:"w-6 h-6 text-green-500"})]}),i.jsxs("div",{className:"w-full p-4 rounded-xl border-2 border-gray-200 bg-gray-50 flex items-center gap-4 opacity-60 cursor-not-allowed",children:[i.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center bg-gray-200",children:i.jsx(nr,{className:"w-6 h-6 text-gray-400"})}),i.jsxs("div",{className:"flex-1 text-right",children:[i.jsx("p",{className:"font-bold text-gray-500",children:" "}),i.jsx("p",{className:"text-sm text-gray-400",children:" : 7 ."})]}),i.jsxs("div",{className:"flex items-center gap-2 bg-red-100 text-red-600 px-3 py-1.5 rounded-lg",children:[i.jsx(Hr,{className:"w-4 h-4"}),i.jsx("span",{className:"text-sm font-semibold",children:" "})]})]})]})]}),Rf,i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[i.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[i.jsx(Q5,{className:"w-5 h-5 text-amber-500"}),i.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),i.jsxs("div",{className:"p-4 space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[i.jsx("span",{children:" "}),i.jsxs("span",{className:"font-semibold",children:[e.toFixed(2)," ."]})]}),b==="delivery"&&i.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(nr,{className:"w-4 h-4"}),i.jsx("span",{children:" "})]}),i.jsxs("span",{className:"font-semibold",children:[y.toFixed(2)," ."]})]}),b==="pickup"&&i.jsxs("div",{className:"flex items-center justify-between text-green-600",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($t,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}),i.jsx("span",{className:"font-semibold",children:""})]}),i.jsx("div",{className:"h-px bg-gray-200 my-2"}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-bold text-lg text-gray-800",children:""}),i.jsxs("span",{className:"font-black text-xl text-sky-600",children:[N.toFixed(2)," ."]})]})]})]}),i.jsx("button",{disabled:d||b==="delivery"&&Rf,onClick:O,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"  ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(On,{className:"w-6 h-6"}),b==="pickup"?"  (  )":"  (  )"]})}),b==="delivery"&&Rf,i.jsx(pj,{isOpen:R,onClose:()=>T(!1),onConfirm:A,initialLocation:v})]})})},Y3=()=>{const{user:t}=qe(),e=Yt(),[n,r]=I.useState(null),[s,a]=I.useState([]),[o,c]=I.useState(null);I.useEffect(()=>{if(!t)return;r(null),c(null);const m=at(ue(z,"orders"),ft("customerId","==",t.uid),Nr("createdAt","desc")),p=es(m,v=>{a(v.docs.map(_=>({id:_.id,..._.data()}))),r(null)},async v=>{console.error("TrackOrders onSnapshot error:",v),r("   Composite Index  customerId + createdAt.     .");const _=at(ue(z,"orders"),ft("customerId","==",t.uid)),T=(await $e(_)).docs.map(y=>({id:y.id,...y.data()})),b=at(ue(z,"orders"),Nr("createdAt","desc"),Zg(5));let w=[];try{w=(await $e(b)).docs.map(N=>{var O,j,x,E;const A=N.data();return{id:N.id,customerId:A.customerId,restaurantId:A.restaurantId,createdAt:((E=(x=(j=(O=A.createdAt)==null?void 0:O.toDate)==null?void 0:j.call(O))==null?void 0:x.toISOString)==null?void 0:E.call(x))??null}})}catch{}c({uid:t.uid,fallbackCount:T.length,sample:w}),a(T)});return()=>p()},[t]);const u=m=>({pending:{text:" ",emoji:"",color:"bg-yellow-500",icon:wr},accepted:{text:" ",emoji:"",color:"bg-blue-500",icon:Bt},preparing:{text:" ",emoji:"",color:"bg-orange-500",icon:ux},ready:{text:" ",emoji:"",color:"bg-purple-500",icon:tr},out_for_delivery:{text:" ",emoji:"",color:"bg-sky-500",icon:nr},delivered:{text:" ",emoji:"",color:"bg-green-500",icon:Bt},cancelled:{text:"",emoji:"",color:"bg-red-500",icon:Hr}})[m]||{text:m,emoji:"",color:"bg-gray-500",icon:tr},d=m=>m.courierId&&m.status==="out_for_delivery",h=m=>{const p=["pending","accepted","preparing","ready"];return!m.courierId&&m.restaurantId&&p.includes(m.status)};return i.jsxs("div",{className:"space-y-3",children:[i.jsx("h1",{className:"text-xl font-bold",children:""}),n&&i.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[n,o&&i.jsxs("div",{className:"mt-1",children:[i.jsxs("div",{children:["UID: ",i.jsx("b",{children:o.uid})]}),i.jsxs("div",{children:["  : ",i.jsx("b",{children:o.fallbackCount})]}),Array.isArray(o.sample)&&o.sample.length>0&&i.jsxs("div",{className:"mt-1",children:[i.jsx("div",{className:"font-semibold",children:" ( 5):"}),o.sample.map(m=>i.jsxs("div",{className:"truncate",children:["#",m.id,"  customerId: ",String(m.customerId),"  restaurantId: ",String(m.restaurantId),"  createdAt: ",m.createdAt||""]},m.id))]})]})]}),s.map(m=>{var p,v,_,R,T,b,w;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-shadow",children:[i.jsxs("div",{className:`${u(m.status).color} px-4 py-3 flex items-center justify-between`,children:[i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx("span",{className:"text-xl",children:u(m.status).emoji}),i.jsx("span",{className:"font-bold",children:u(m.status).text})]}),i.jsxs("div",{className:"text-white/80 text-sm font-medium",children:["#",m.id.slice(-6)]})]}),i.jsxs("div",{className:"p-4",children:[m.restaurantName&&i.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold mb-2",children:[i.jsx("span",{children:""}),i.jsx("span",{children:String(m.restaurantName)})]}),i.jsx("div",{className:"text-sm text-gray-700 bg-gray-50 rounded-xl p-3 mb-3",children:(p=m.items)==null?void 0:p.map(y=>`${y.name}${y.qty}`).join("  ")}),i.jsx("div",{className:"text-sm text-gray-600 space-y-2",children:m.deliveryType==="pickup"?i.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-medium bg-green-50 rounded-xl p-3",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsx("span",{children:"  "})]}):i.jsxs("div",{className:"space-y-1 bg-gray-50 rounded-xl p-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" :"}),i.jsxs("span",{children:[((_=(v=m.subtotal)==null?void 0:v.toFixed)==null?void 0:_.call(v,2))||""," ."]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:" :"}),m.deliveryFee!==void 0&&m.deliveryFee>0?i.jsxs("span",{className:"font-medium",children:[(T=(R=m.deliveryFee)==null?void 0:R.toFixed)==null?void 0:T.call(R,2)," ."]}):i.jsx("span",{className:"text-amber-600",children:"  "})]})]})}),i.jsxs("div",{className:"mt-3 pt-3 border-t flex items-center justify-between",children:[i.jsxs("div",{className:"font-bold text-lg text-primary",children:[": ",(w=(b=m.total)==null?void 0:b.toFixed)==null?void 0:w.call(b,2)," ."]}),d(m)&&i.jsxs("button",{onClick:()=>e(`/chat?orderId=${m.id}`),className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-primary to-accent 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200 animate-pulse`,children:[i.jsx(Th,{className:"w-5 h-5"}),i.jsx("span",{children:"   "})]}),h(m)&&i.jsxs("button",{onClick:()=>e(`/chat?orderId=${m.id}`),className:`flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-orange-500 to-amber-500 
                             text-white rounded-full font-medium shadow-lg hover:shadow-xl 
                             hover:scale-105 transition-all duration-200`,children:[i.jsx($t,{className:"w-5 h-5"}),i.jsx("span",{children:"   "})]})]})]})]},m.id)}),s.length===0&&!n&&i.jsx("div",{className:"text-gray-600",children:"    ."})]})},J3=()=>{const{user:t,role:e}=qe(),n=$n(),r=En(),[s,a]=I.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[o,c]=I.useState([]),[u,d]=I.useState(0),[h,m]=I.useState(!1),[p,v]=I.useState(null),[_,R]=I.useState(""),[T,b]=I.useState(!0),[w,y]=I.useState(!1);I.useEffect(()=>{if(!t)return;(async()=>{const P=await tt(J(z,"users",t.uid));if(P.exists()){const L=P.data();a({name:L.name||"",phone:L.phone||t.phoneNumber||"",city:L.city||"",address:L.address||"",restaurantName:L.restaurantName||""}),L.savedLocations&&Array.isArray(L.savedLocations)?(c(L.savedLocations),d(L.defaultLocationIndex||0)):L.savedLocation&&(c([{...L.savedLocation,label:""}]),d(0))}b(!1)})()},[t]);const N=async k=>{if(k.preventDefault(),!!t){y(!0);try{const P=o[u]||null;await ye(J(z,"users",t.uid),{name:s.name,phone:s.phone,city:s.city,address:s.address,savedLocation:P,savedLocations:o,defaultLocationIndex:u,...e==="owner"&&{restaurantName:s.restaurantName}}),n.success("   ! ")}catch{n.error("   ")}finally{y(!1)}}},A=(k,P)=>{const L={lat:k.lat,lng:k.lng,address:P,label:_||` ${o.length+1}`};c([...o,L]),R(""),m(!1),r.success("  !    ")},O=(k,P)=>{if(p===null)return;const L=[...o];L[p]={...L[p],lat:k.lat,lng:k.lng,address:P},c(L),v(null),m(!1),r.success("  !    ")},j=async k=>{if(!await n.confirm("    "))return;const L=o.filter((D,ie)=>ie!==k);c(L),u>=L.length?d(Math.max(0,L.length-1)):u>k&&d(u-1),r.info("  ")},x=k=>{d(k),r.success("   ")};if(T)return i.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[i.jsx(pn,{className:"w-6 h-6 animate-spin ml-2"}),"  ..."]});const E=()=>e==="owner"?"  ":e==="courier"?"  ":e==="admin"?"  ":" ";return i.jsxs("div",{className:"max-w-md mx-auto py-8 px-4",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:i.jsx(An,{className:"w-6 h-6 text-sky-600"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-xl font-bold text-gray-800",children:E()}),i.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||(t==null?void 0:t.phoneNumber)})]})]}),i.jsxs("form",{onSubmit:N,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(An,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:s.name,onChange:k=>a({...s,name:k.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(gx,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:s.phone,onChange:k=>a({...s,phone:k.target.value}),dir:"ltr"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(nj,{className:"w-4 h-4 inline ml-1"}),""]}),i.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:": ",value:s.city,onChange:k=>a({...s,city:k.target.value})})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(bn,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"     ...",value:s.address,onChange:k=>a({...s,address:k.target.value})})]}),(e==="customer"||e==="admin")&&i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("label",{className:"text-sm font-semibold text-gray-700 flex items-center gap-1",children:[i.jsx(Za,{className:"w-4 h-4"}),"  "]}),i.jsxs("span",{className:"text-xs text-gray-400",children:[o.length,"/5"]})]}),o.length>0&&i.jsx("div",{className:"space-y-3 mb-4",children:o.map((k,P)=>i.jsxs("div",{className:`rounded-xl p-3 border-2 transition ${P===u?"bg-green-50 border-green-300":"bg-gray-50 border-gray-200"}`,children:[i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${P===u?"bg-green-500":"bg-gray-400"}`,children:i.jsx(bn,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("p",{className:"font-bold text-gray-800",children:k.label||` ${P+1}`}),P===u&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-500 text-white text-xs font-bold rounded-full",children:[i.jsx(uj,{className:"w-3 h-3"})," "]})]}),i.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:k.address})]})]}),i.jsxs("div",{className:"flex gap-2 mt-3",children:[P!==u&&i.jsxs("button",{type:"button",onClick:()=>x(P),className:"flex-1 py-2 px-3 rounded-lg border border-green-200 text-green-600 text-xs font-medium hover:bg-green-50 transition flex items-center justify-center gap-1",children:[i.jsx(On,{className:"w-3 h-3"}),"  "]}),i.jsx("button",{type:"button",onClick:()=>{v(P),m(!0)},className:"flex-1 py-2 px-3 rounded-lg border border-sky-200 text-sky-600 text-xs font-medium hover:bg-sky-50 transition",children:""}),i.jsx("button",{type:"button",onClick:()=>j(P),className:"py-2 px-3 rounded-lg border border-red-200 text-red-500 hover:bg-red-50 transition",children:i.jsx(an,{className:"w-4 h-4"})})]})]},P))}),o.length<5&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("input",{type:"text",value:_,onChange:k=>R(k.target.value),placeholder:"  (:  ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:border-sky-400 focus:outline-none"}),i.jsxs("button",{type:"button",onClick:()=>{v(null),m(!0)},className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-100 to-sky-50 border-2 border-dashed border-sky-300 text-sky-600 font-semibold hover:border-sky-400 transition flex items-center justify-center gap-3",children:[i.jsx(Ic,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]}),o.length===0&&i.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"     "})]}),e==="owner"&&i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[i.jsx(Rd,{className:"w-4 h-4 inline ml-1"})," "]}),i.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:s.restaurantName,onChange:k=>a({...s,restaurantName:k.target.value})})]}),i.jsx("button",{type:"submit",disabled:w,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:w?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(lj,{className:"w-5 h-5"})," "]})})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[i.jsx("p",{children:"      "}),(e==="customer"||e==="admin")&&i.jsx("p",{className:"mt-1",children:"    5  "})]})]}),i.jsx(pj,{isOpen:h,onClose:()=>{m(!1),v(null)},onConfirm:(k,P)=>{p!==null?O(k,P):A(k,P)},initialLocation:p!==null&&o[p]?{lat:o[p].lat,lng:o[p].lng}:null})]})},Z3=()=>{const t=[{to:"/owner/packages",title:"  ",desc:"      .",icon:i.jsx(In,{className:"w-8 h-8 text-amber-500"}),color:"from-amber-50 via-yellow-50 to-orange-50",featured:!0},{to:"/owner/promotion",title:" ",desc:"   ()      -  !",icon:i.jsx(_i,{className:"w-8 h-8 text-purple-500"}),color:"from-purple-50 to-pink-50"},{to:"/owner/menu",title:" ",desc:"     .",icon:i.jsx(b3,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:i.jsx(Ad,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:i.jsx(cj,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>i.jsxs(ke,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col relative overflow-hidden ${e.featured?"ring-2 ring-amber-300 sm:col-span-2":""}`,children:[e.featured&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 py-1.5 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-white text-sm font-bold",children:[i.jsx(Fn,{className:"w-4 h-4"}),i.jsx("span",{children:" "}),i.jsx(Fn,{className:"w-4 h-4"})]})}),i.jsx("div",{className:"h-8"})]}),i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,i.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),i.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},eD=({kind:t,message:e,onClose:n})=>{const r=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return I.useEffect(()=>{const s=setTimeout(n,2500);return()=>clearTimeout(s)},[n]),i.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${r}`,children:e})},Fv=()=>({name:"",desc:"",price:0,available:!0,file:null});async function tD(t,e=900,n=.8){try{const r=await createImageBitmap(t),s=Math.min(1,e/r.width),a=Math.round(r.width*s),o=Math.round(r.height*s),c=document.createElement("canvas");c.width=a,c.height=o,c.getContext("2d").drawImage(r,0,0,a,o);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(m=>c.toBlob(p=>m(p),d,n))}catch{return t}}const nD=()=>{const{user:t}=qe(),e=$n(),[n,r]=I.useState([]),[s,a]=I.useState(!0),[o,c]=I.useState(Fv()),[u,d]=I.useState(!1),[h,m]=I.useState(null),p=(y,N)=>m({kind:y,message:N}),v=kh(mn),_=I.useRef(null),R=async()=>{if(!t)return;a(!0);const y=at(ue(z,"menuItems"),ft("ownerId","==",t.uid)),N=await $e(y);r(N.docs.map(A=>({id:A.id,...A.data()}))),a(!1)};I.useEffect(()=>{R()},[t]);const T=async y=>{if(y.preventDefault(),!t){p("warning","    ");return}const N=Number(o.price||0);if(!o.name.trim()){p("warning","   ");return}if(!Number.isFinite(N)||N<=0){p("warning","   ");return}d(!0);const A="temp_"+Date.now(),O=o.file?URL.createObjectURL(o.file):void 0,j={_tempId:A,_optimistic:!0,_progress:o.file?1:100,name:o.name,desc:o.desc||"",price:N,imageUrl:O,available:o.available??!0,ownerId:t.uid};r(x=>[j,...x]);try{let x;if(o.file){const P=await tD(o.file),L=o.file.name.replace(/\s+/g,"_").slice(-60),D=`menuImages/${t.uid}_${Date.now()}_${L}`,ie=Ja(v,D),V=cx(ie,P,{contentType:o.file.type||"image/jpeg"});await new Promise(($,B)=>{V.on("state_changed",F=>{const X=Math.round(F.bytesTransferred/F.totalBytes*100);r(re=>re.map(ve=>ve._tempId===A?{...ve,_progress:X}:ve))},B,async()=>{const F=await Ya(V.snapshot.ref);x=`${F}${F.includes("?")?"&":"?"}v=${Date.now()}`,$()})})}const E={name:j.name,desc:j.desc,price:N,imageUrl:x||"",available:j.available,ownerId:t.uid,...j.categoryId?{categoryId:j.categoryId}:{}},k=await er(ue(z,"menuItems"),E);r(P=>P.map(L=>L._tempId===A?{...L,id:k.id,imageUrl:x||L.imageUrl,_optimistic:!1,_progress:100}:L)),p("success","    ")}catch(x){r(E=>E.filter(k=>k._tempId!==A)),p("error",`   : ${(x==null?void 0:x.message)||x}`)}finally{d(!1),c(Fv()),_.current&&(_.current.value=""),O&&URL.revokeObjectURL(O)}},b=async(y,N)=>{if(y){r(A=>A.map(O=>O.id===y?{...O,available:!N}:O));try{await ye(J(z,"menuItems",y),{available:!N}),p("success","  ")}catch{r(A=>A.map(O=>O.id===y?{...O,available:!!N}:O)),p("error","  .  .")}}},w=async y=>{if(!y||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const A=n;r(O=>O.filter(j=>j.id!==y));try{await Yn(J(z,"menuItems",y)),p("success"," ")}catch{r(A),p("error","  .  .")}};return s?i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[i.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),i.jsx("div",{className:"space-y-3",children:[1,2,3].map(y=>i.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[i.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),i.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},y))})]}):i.jsxs(i.Fragment,{children:[h&&i.jsx(eD,{kind:h.kind,message:h.message,onClose:()=>m(null)}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("form",{onSubmit:T,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[i.jsx("h2",{className:"text-lg font-bold",children:" "}),i.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:o.name,onChange:y=>c({...o,name:y.target.value})}),i.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:o.desc,onChange:y=>c({...o,desc:y.target.value})}),i.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(o.price)?o.price:0,onChange:y=>c({...o,price:Number(y.target.value)})}),i.jsx("input",{ref:_,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:y=>{var N;return c({...o,file:((N=y.target.files)==null?void 0:N[0])||null})}}),i.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[i.jsx("input",{type:"checkbox",checked:o.available,onChange:y=>c({...o,available:y.target.checked})}),""]}),i.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),i.jsxs("div",{className:"space-y-3",children:[n.map(y=>{var N,A;return i.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:y.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:O=>{O.currentTarget.style.display="none"}}),y._optimistic&&i.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:i.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:i.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${y._progress||1}%`}})})})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold",children:y.name}),y.desc&&i.jsx("div",{className:"text-sm text-gray-600",children:y.desc}),i.jsxs("div",{className:"font-semibold mt-1",children:[(A=(N=y.price)==null?void 0:N.toFixed)==null?void 0:A.call(N,2)," ."]}),y._optimistic&&i.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),i.jsx("button",{onClick:()=>b(y.id,y.available),disabled:!!y._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:y.available?"":""}),i.jsx("button",{onClick:()=>w(y.id),disabled:!!y._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},y.id||y._tempId)}),n.length===0&&i.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},Uv=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,rD=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},sD=()=>{const{user:t}=qe(),e=Yt(),[n,r]=I.useState([]),[s,a]=I.useState(null),[o,c]=I.useState({}),u=I.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);I.useEffect(()=>{if(!u)return;a(null);const h=es(ue(z,"orders"),m=>{const v=m.docs.map(_=>({id:_.id,..._.data()})).filter(_=>{var b,w;const R=_.restaurantId===u,T=((w=(b=_==null?void 0:_.items)==null?void 0:b[0])==null?void 0:w.ownerId)===u;return R||T});v.sort((_,R)=>{var w,y,N,A;const T=((y=(w=_.createdAt)==null?void 0:w.toMillis)==null?void 0:y.call(w))??0;return(((A=(N=R.createdAt)==null?void 0:N.toMillis)==null?void 0:A.call(N))??0)-T}),r(v),a(null)},m=>{console.error("Firestore error:",m),a("    .")});return()=>h()},[u]);const d=async(h,m,p)=>{const v={status:m,updatedAt:ae()};if(m==="accepted"&&(p==null?void 0:p.deliveryType)==="delivery"){const _=o[h]||0;v.deliveryFee=_,v.total=(p.subtotal||0)+_}await ye(J(z,"orders",h),v)};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),s&&i.jsx("div",{className:"text-red-500 text-sm mb-2",children:s}),n.map(h=>{var m,p,v,_,R;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[i.jsxs("div",{className:"font-bold text-lg",children:[" #",h.id.slice(-6),i.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(m=h.items)==null?void 0:m.map(T=>`${T.name}${T.qty}`).join("  ")})]}),i.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(v=(p=h.total)==null?void 0:p.toFixed)==null?void 0:v.call(p,2)," ."]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm font-semibold",children:":"}),i.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${rD(h.status)}`,children:Uv(h.status||"pending")})]}),i.jsxs("div",{className:"text-sm text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:":"})," ",h.address]}),h.location&&i.jsxs("div",{className:"mt-3",children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),i.jsx("iframe",{title:`map-${h.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${h.location.lat},${h.location.lng}&hl=ar&z=15&output=embed`})]}),h.status==="pending"&&h.deliveryType==="delivery"&&i.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:[i.jsx("label",{className:"block text-sm font-bold text-amber-800 mb-2",children:"     :"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("input",{type:"number",min:"0",step:"0.5",placeholder:": 10",value:o[h.id]||"",onChange:T=>c(b=>({...b,[h.id]:parseFloat(T.target.value)||0})),className:"flex-1 px-4 py-3 border-2 border-amber-300 rounded-xl focus:border-amber-500 focus:ring-2 focus:ring-amber-200 text-lg font-bold text-center"}),i.jsx("span",{className:"text-amber-700 font-bold",children:"."})]}),i.jsx("p",{className:"text-xs text-amber-600 mt-2",children:"     "})]}),h.deliveryFee!==void 0&&h.deliveryFee>0&&i.jsxs("div",{className:"text-sm text-gray-700",children:[i.jsx("span",{className:"font-semibold",children:" :"})," ",(R=(_=h.deliveryFee)==null?void 0:_.toFixed)==null?void 0:R.call(_,2)," ."]}),i.jsxs("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:[!h.courierId&&["pending","accepted","preparing","ready"].includes(h.status)&&i.jsxs("button",{onClick:()=>e(`/chat?orderId=${h.id}`),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gradient-to-r from-orange-500 to-amber-500 text-white hover:shadow-lg transition flex items-center gap-2",children:[i.jsx(Th,{className:"w-4 h-4"}),"  "]}),["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(T=>{const b=T==="accepted"&&h.status==="pending"&&h.deliveryType==="delivery",w=o[h.id]!==void 0&&o[h.id]>=0,y=b&&!w;return i.jsx("button",{onClick:()=>d(h.id,T,h),disabled:y,className:`px-4 py-2 rounded-xl text-sm font-semibold transition ${y?"bg-gray-200 text-gray-400 cursor-not-allowed":"bg-gray-100 hover:bg-gray-200"}`,title:y?"   ":"",children:Uv(T)},T)})]})]},h.id)}),n.length===0&&!s&&i.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},iD=()=>{const{user:t}=qe(),e=En(),[n,r]=I.useState({name:"",phone:"",city:"",location:"",logoUrl:"",allowPickup:!1,commercialLicenseUrl:"",licenseStatus:void 0,licenseNotes:""}),[s,a]=I.useState(null),[o,c]=I.useState(""),[u,d]=I.useState(null),[h,m]=I.useState(!0),[p,v]=I.useState(!1),_=I.useMemo(()=>!p&&!!t,[p,t]);I.useEffect(()=>{t&&(async()=>{try{const N=await tt(J(z,"restaurants",t.uid));if(N.exists()){const A=N.data();r({name:A.name??"",phone:A.phone??"",city:A.city??"",location:A.location??"",logoUrl:A.logoUrl??"",allowPickup:A.allowPickup??!1,commercialLicenseUrl:A.commercialLicenseUrl??"",licenseStatus:A.licenseStatus,licenseNotes:A.licenseNotes??""})}}catch{e.error("   ")}finally{m(!1)}})()},[t,e]),I.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const R=N=>{const{name:A,value:O}=N.target;r(j=>({...j,[A]:O}))},T=N=>{var O;const A=((O=N.target.files)==null?void 0:O[0])||null;if(a(A),A){const j=URL.createObjectURL(A);c(j)}else c("")},b=async()=>{if(!t||!s)return;if(!/^image\//.test(s.type)){e.warning("   ");return}const A=3*1024*1024;if(s.size>A){e.warning("        3MB");return}const O=s.name.replace(/\s+/g,"_"),j=`restaurants/${t.uid}/logo_${Date.now()}_${O}`,x=Ja(sp,j),E={contentType:s.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await rp(x,s,E);const k=await Ya(x);return`${k}${k.includes("?")?"&":"?"}v=${Date.now()}`},w=async(N,A)=>{if(!t||!N)return;if(!/^(image\/|application\/pdf)/.test(N.type)){e.warning("      PDF");return}const j=5*1024*1024;if(N.size>j){e.warning("        5MB");return}const x=N.name.replace(/\s+/g,"_"),E=`restaurants/${t.uid}/licenses/${A}_${Date.now()}_${x}`,k=Ja(sp,E),P={contentType:N.type,cacheControl:"public,max-age=31536000,immutable"};return await rp(k,N,P),await Ya(k)},y=async N=>{if(N.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}v(!0);try{let A=n.logoUrl,O=n.commercialLicenseUrl,j=n.licenseStatus;if(s){e.info("    ");const x=await b();x&&(A=x)}if(u){e.info("     ");const x=await w(u,"commercial");x&&(O=x,j="pending")}await fn(J(z,"restaurants",t.uid),{...n,logoUrl:A,commercialLicenseUrl:O,licenseStatus:j},{merge:!0}),o&&URL.revokeObjectURL(o),c(""),a(null),d(null),e.success("    ",{title:" "})}catch(A){e.error(` : ${(A==null?void 0:A.message)||"  "}`)}finally{v(!1)}};return h?i.jsx("div",{className:"p-6 text-center",children:" "}):i.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[i.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block font-semibold",children:" "}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:o||n.logoUrl?i.jsx("img",{src:o||n.logoUrl,className:"w-full h-full object-cover",onError:N=>N.currentTarget.style.display="none",alt:"logo"}):null}),i.jsx("input",{type:"file",accept:"image/*",onChange:T})]}),s&&i.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",i.jsx("span",{className:"font-semibold",children:s.name})]})]}),i.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:R,className:"w-full border p-3 rounded-xl"}),i.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:R,className:"w-full border p-3 rounded-xl"}),i.jsxs("div",{className:"relative",children:[i.jsx(bn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),i.jsxs("select",{name:"city",value:n.city,onChange:N=>r(A=>({...A,city:N.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[i.jsx("option",{value:"",children:" "}),xx.map(N=>i.jsx("option",{value:N,children:N},N))]})]}),i.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:R,className:"w-full border p-3 rounded-xl"}),i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[i.jsx($t,{className:"w-5 h-5 text-green-500"})," "]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:i.jsx($t,{className:"w-5 h-5 text-white"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-gray-800",children:"  "}),i.jsx("p",{className:"text-sm text-gray-500",children:"      "})]})]}),i.jsx("button",{type:"button",onClick:()=>r(N=>({...N,allowPickup:!N.allowPickup})),className:`relative w-14 h-8 rounded-full transition-colors ${n.allowPickup?"bg-green-500":"bg-gray-300"}`,children:i.jsx("span",{className:`absolute top-1 w-6 h-6 bg-white rounded-full shadow transition-transform ${n.allowPickup?"right-1":"left-1"}`})})]}),n.allowPickup&&i.jsx("p",{className:"mt-2 text-sm text-green-600 bg-green-50 p-2 rounded-lg",children:"         (  )"})]}),i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[i.jsx(hx,{className:"w-5 h-5 text-sky-500"})," "]}),n.licenseStatus&&i.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&i.jsx(Bt,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&i.jsx(pi,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&i.jsx(wr,{className:"w-5 h-5"}),i.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"   ",n.licenseStatus==="rejected"&&" ",n.licenseStatus==="pending"&&"  ..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&i.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[i.jsx("strong",{children:":"})," ",n.licenseNotes]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[i.jsx(q6,{className:"w-4 h-4 text-orange-500"})," "]}),i.jsxs("div",{className:"flex items-center gap-3",children:[n.commercialLicenseUrl&&i.jsx("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),i.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:N=>{var A;return d(((A=N.target.files)==null?void 0:A[0])||null)},className:"text-sm"})]}),u&&i.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",i.jsx("span",{className:"font-semibold",children:u.name})]})]})]}),i.jsx("button",{type:"submit",disabled:!_,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:p?" ":""})]})]})},aD=()=>{const{user:t}=qe(),e=$n(),n=En(),[r,s]=I.useState([]),[a,o]=I.useState(!0);I.useEffect(()=>{t&&(async()=>{const T=at(ue(z,"hiringRequests"),ft("restaurantId","==",t.uid)),b=await $e(T);s(b.docs.map(w=>({id:w.id,...w.data()}))),o(!1)})()},[t]);const c=async(T,b)=>{await ye(J(z,"hiringRequests",T),{status:b}),s(w=>w.map(y=>y.id===T?{...y,status:b}:y)),n.success(b==="accepted"?"   ":"  ")},u=async T=>{await e.confirm(`    "${T.courierName}"`,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await ye(J(z,"hiringRequests",T.id),{status:"terminated"}),s(w=>w.map(y=>y.id===T.id?{...y,status:"terminated"}:y)),n.success("  "))},d=async T=>{await e.confirm(`    "${T.courierName}" `,{title:" ",confirmText:" ",cancelText:"",dangerous:!0})&&(await Yn(J(z,"hiringRequests",T.id)),s(w=>w.filter(y=>y.id!==T.id)),n.success("  "))},h=async T=>{await ye(J(z,"hiringRequests",T.id),{status:"accepted"}),s(b=>b.map(w=>w.id===T.id?{...w,status:"accepted"}:w)),n.success("    ")},m=T=>{switch(T){case"pending":return{text:" ",color:"bg-yellow-100 text-yellow-700",icon:wr};case"accepted":return{text:" ",color:"bg-green-100 text-green-700",icon:Bt};case"rejected":return{text:"",color:"bg-red-100 text-red-700",icon:Hr};case"terminated":return{text:"",color:"bg-gray-100 text-gray-700",icon:Lv};default:return{text:T,color:"bg-gray-100 text-gray-700",icon:wr}}};if(a)return i.jsx("div",{className:"text-center py-10",children:"  ..."});const p=r.filter(T=>T.status==="accepted"),v=r.filter(T=>T.status==="pending"),_=r.filter(T=>T.status==="terminated"),R=r.filter(T=>T.status==="rejected");return i.jsxs("div",{className:"py-6 space-y-8",children:[i.jsx("h1",{className:"text-2xl font-bold text-primary text-center mb-6",children:"  "}),r.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-500 text-lg",children:"   "}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"     "})]}):i.jsxs(i.Fragment,{children:[p.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-green-600 mb-3 flex items-center gap-2",children:[i.jsx(If,{className:"w-5 h-5"}),"  (",p.length,")"]}),i.jsx("div",{className:"space-y-3",children:p.map(T=>{const b=m(T.status);return i.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-green-500",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-gray-800",children:T.courierName}),i.jsxs("div",{className:`text-xs px-2 py-1 rounded-full inline-flex items-center gap-1 ${b.color}`,children:[i.jsx(b.icon,{className:"w-3 h-3"}),b.text]})]})]}),i.jsxs("button",{onClick:()=>u(T),className:`flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-xl 
                                     hover:bg-red-100 transition-all font-medium`,children:[i.jsx(p3,{className:"w-4 h-4"}),""]})]})},T.id)})})]}),v.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-yellow-600 mb-3 flex items-center gap-2",children:[i.jsx(wr,{className:"w-5 h-5"}),"  (",v.length,")"]}),i.jsx("div",{className:"space-y-3",children:v.map(T=>i.jsx("div",{className:"bg-white rounded-2xl shadow-card p-4 border-r-4 border-yellow-500",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-gray-800",children:T.courierName}),i.jsx("div",{className:"text-xs text-yellow-600",children:"  "})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>c(T.id,"accepted"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-green-500 text-white hover:bg-green-600 transition-all font-medium",children:[i.jsx(If,{className:"w-4 h-4"}),""]}),i.jsxs("button",{onClick:()=>c(T.id,"rejected"),className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-all font-medium",children:[i.jsx(Hr,{className:"w-4 h-4"}),""]})]})]})},T.id))})]}),_.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-gray-500 mb-3 flex items-center gap-2",children:[i.jsx(Lv,{className:"w-5 h-5"})," (",_.length,")"]}),i.jsx("div",{className:"space-y-3",children:_.map(T=>i.jsx("div",{className:"bg-gray-50 rounded-2xl shadow p-4 border-r-4 border-gray-400 opacity-75",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-200 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-gray-600",children:T.courierName}),i.jsx("div",{className:"text-xs text-gray-500",children:""})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>h(T),className:`flex items-center gap-1 px-3 py-2 bg-green-100 text-green-600 rounded-xl 
                                     hover:bg-green-200 transition-all text-sm font-medium`,children:[i.jsx(If,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>d(T),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                     hover:bg-red-200 transition-all text-sm font-medium`,children:[i.jsx(an,{className:"w-4 h-4"}),""]})]})]})},T.id))})]}),R.length>0&&i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-bold text-red-500 mb-3 flex items-center gap-2",children:[i.jsx(Hr,{className:"w-5 h-5"})," (",R.length,")"]}),i.jsx("div",{className:"space-y-3",children:R.map(T=>i.jsx("div",{className:"bg-red-50 rounded-2xl shadow p-4 border-r-4 border-red-400 opacity-75",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-gray-600",children:T.courierName}),i.jsx("div",{className:"text-xs text-red-500",children:""})]})]}),i.jsxs("button",{onClick:()=>d(T),className:`flex items-center gap-1 px-3 py-2 bg-red-100 text-red-600 rounded-xl 
                                   hover:bg-red-200 transition-all text-sm font-medium`,children:[i.jsx(an,{className:"w-4 h-4"}),""]})]})},T.id))})]})]})]})},oD=()=>{const{user:t}=qe(),e=En(),n=$n(),[r,s]=I.useState("free"),[a,o]=I.useState(!0),[c,u]=I.useState(!1),[d,h]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t)try{const _=await tt(J(z,"restaurants",t.uid));if(_.exists()){const R=_.data();s((R==null?void 0:R.packageType)||"free")}}catch(_){console.error("   :",_)}finally{o(!1)}})()},[t]);const m=async()=>{if(!t)return;if(r==="free"){e.info("     ");return}if(await n.confirm("         .",{title:"   ",confirmText:"  ",cancelText:""})){h(!0);try{await ye(J(z,"restaurants",t.uid),{packageType:"free",packageRequest:null,updatedAt:ae()}),s("free"),e.success("   ")}catch(_){console.error(":",_),e.error("    ")}finally{h(!1)}}},p=async()=>{if(!(!t||!await n.confirm("        .   ",{title:"    ",confirmText:"  ",cancelText:""}))){u(!0);try{await ye(J(z,"restaurants",t.uid),{packageRequest:"premium",packageRequestedAt:ae(),updatedAt:ae()}),e.success("   !    ")}catch(_){console.error("   :",_),e.error("    ")}finally{u(!1)}}};return a?i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-amber-200 border-t-amber-500 rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:" ..."})]})}):i.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-amber-100 to-yellow-100 px-5 py-2.5 rounded-full mb-4 shadow-sm",children:[i.jsx("span",{className:"text-xl",children:""}),i.jsx("span",{className:"text-amber-700 font-bold text-lg",children:"  "})]}),i.jsx("h1",{className:"text-3xl md:text-4xl font-black text-gray-900 mb-3",children:"   "}),i.jsx("p",{className:"text-gray-600 max-w-lg mx-auto",children:"              "})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${r==="free"?"ring-4 ring-green-400 shadow-2xl":"shadow-lg hover:shadow-xl"}`,children:[r==="free"&&i.jsxs("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[i.jsx(On,{className:"w-4 h-4"})," "]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-6 md:p-8 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-emerald-500 rounded-2xl flex items-center justify-center shadow-lg",children:i.jsx(Tf,{className:"w-8 h-8 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),i.jsx("p",{className:"text-green-600 font-semibold",children:"   "})]})]}),i.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:"text-5xl font-black text-gray-900",children:"0"}),i.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),i.jsx("p",{className:"text-green-600 font-medium mt-1",children:" "})]}),i.jsxs("div",{className:"space-y-4 flex-1",children:[i.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(uj,{className:"w-5 h-5 text-amber-500"})," :"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ii,{icon:i.jsx(sj,{className:"w-5 h-5"}),title:"  ",desc:"     ",included:!0}),i.jsx(ii,{icon:i.jsx(nc,{className:"w-5 h-5"}),title:" ",desc:"    ",included:!0}),i.jsx(ii,{icon:i.jsx(hx,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0})]})]}),i.jsx("div",{className:"mt-6",children:r==="free"?i.jsxs("div",{className:"bg-green-100 text-green-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[i.jsx(On,{className:"w-5 h-5"}),"    "]}):i.jsx("button",{onClick:m,disabled:d,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold text-lg shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3",children:d?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Tf,{className:"w-6 h-6"}),"  ",i.jsx(ip,{className:"w-5 h-5"})]})})})]})]}),i.jsxs("div",{className:`relative rounded-3xl overflow-hidden transition-all duration-300 ${r==="premium"?"ring-4 ring-amber-400 shadow-2xl":"shadow-lg hover:shadow-xl hover:scale-[1.01]"}`,children:[i.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-r from-amber-500 via-yellow-400 to-amber-500 py-2 text-center z-10",children:i.jsxs("div",{className:"flex items-center justify-center gap-2 text-white font-bold",children:[i.jsx(In,{className:"w-5 h-5"}),i.jsx("span",{children:" "}),i.jsx(In,{className:"w-5 h-5"})]})}),r==="premium"&&i.jsxs("div",{className:"absolute top-12 right-4 bg-amber-500 text-white px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1 z-10",children:[i.jsx(In,{className:"w-4 h-4"})," "]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 p-6 md:p-8 pt-14 h-full flex flex-col",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsxs("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 via-yellow-400 to-orange-400 rounded-2xl flex items-center justify-center shadow-lg relative",children:[i.jsx(In,{className:"w-8 h-8 text-white"}),i.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-white rounded-full flex items-center justify-center shadow",children:i.jsx(Fn,{className:"w-4 h-4 text-amber-500"})})]}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-black text-gray-900",children:" "}),i.jsx("p",{className:"text-amber-600 font-semibold",children:"  "})]})]}),i.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-2xl p-4 mb-6 text-center relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-amber-400/10 via-yellow-400/10 to-orange-400/10"}),i.jsxs("div",{className:"relative",children:[i.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[i.jsx("span",{className:"text-5xl font-black bg-gradient-to-r from-amber-600 to-orange-500 bg-clip-text text-transparent",children:"45"}),i.jsx("span",{className:"text-xl text-gray-600",children:"."})]}),i.jsx("p",{className:"text-amber-600 font-medium mt-1",children:" "})]})]}),i.jsxs("div",{className:"space-y-4 flex-1",children:[i.jsxs("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:[i.jsx(In,{className:"w-5 h-5 text-amber-500"}),"     :"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(ii,{icon:i.jsx(c3,{className:"w-5 h-5"}),title:"   ",desc:"      ",included:!0,premium:!0}),i.jsx(ii,{icon:i.jsx(Bu,{className:"w-5 h-5"}),title:"  ",desc:"    ",included:!0,premium:!0}),i.jsx(ii,{icon:i.jsx(Rd,{className:"w-5 h-5"}),title:"   ",desc:"     ",included:!0,premium:!0}),i.jsx(ii,{icon:i.jsx(S5,{className:"w-5 h-5"}),title:" ",desc:"     ",included:!0,premium:!0})]})]}),i.jsx("div",{className:"mt-6",children:r==="premium"?i.jsxs("div",{className:"bg-amber-100 text-amber-700 py-4 px-6 rounded-2xl text-center font-bold flex items-center justify-center gap-2",children:[i.jsx(In,{className:"w-5 h-5"}),"    "]}):i.jsxs("button",{onClick:p,disabled:c,className:"w-full py-4 px-6 rounded-2xl bg-gradient-to-r from-amber-500 via-yellow-400 to-orange-500 text-white font-bold text-lg shadow-xl hover:shadow-2xl transition-all duration-300 hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 relative overflow-hidden group",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/30 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-700"}),c?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(In,{className:"w-6 h-6"}),"   ",i.jsx(ip,{className:"w-5 h-5"})]})]})})]})]})]}),i.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[i.jsx("div",{className:"bg-gradient-to-r from-gray-800 to-gray-900 px-6 py-4",children:i.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[i.jsx(Fn,{className:"w-5 h-5 text-amber-400"}),"   "]})}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{className:"bg-gray-50",children:i.jsxs("tr",{children:[i.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),i.jsx("th",{className:"px-6 py-4 text-center font-bold text-green-600",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(Tf,{className:"w-5 h-5"}),""]})}),i.jsx("th",{className:"px-6 py-4 text-center font-bold text-amber-600",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx(In,{className:"w-5 h-5"}),""]})})]})}),i.jsxs("tbody",{className:"divide-y divide-gray-100",children:[i.jsx(ai,{label:"  ",free:!0,premium:!0}),i.jsx(ai,{label:" ",free:!0,premium:!0}),i.jsx(ai,{label:"  ",free:!0,premium:!0}),i.jsx(ai,{label:"   ",premium:!0}),i.jsx(ai,{label:"  ",premium:!0}),i.jsx(ai,{label:"   ",premium:!0}),i.jsx(ai,{label:" ",premium:!0})]})]})})]}),i.jsx("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6 text-center",children:i.jsxs("p",{className:"text-gray-600",children:[i.jsx("span",{className:"font-bold text-sky-600",children:" :"})," ","       .     ."]})})]})},ii=({icon:t,title:e,desc:n,included:r,premium:s})=>i.jsxs("div",{className:`flex items-start gap-3 p-3 rounded-xl transition ${r?s?"bg-gradient-to-r from-amber-100/50 to-yellow-100/50":"bg-white/50":"opacity-50"}`,children:[i.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ${r?s?"bg-gradient-to-br from-amber-400 to-orange-400 text-white":"bg-green-100 text-green-600":"bg-gray-100 text-gray-400"}`,children:t}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("h4",{className:`font-bold ${r?"text-gray-800":"text-gray-400"}`,children:e}),s&&i.jsx("span",{className:"bg-gradient-to-r from-amber-400 to-orange-400 text-white text-xs px-2 py-0.5 rounded-full font-bold",children:""})]}),i.jsx("p",{className:`text-sm ${r?"text-gray-500":"text-gray-400"}`,children:n})]}),r&&i.jsx(On,{className:`w-5 h-5 flex-shrink-0 ${s?"text-amber-500":"text-green-500"}`})]}),ai=({label:t,free:e,premium:n})=>i.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[i.jsx("td",{className:"px-6 py-4 text-gray-700 font-medium",children:t}),i.jsx("td",{className:"px-6 py-4 text-center",children:e?i.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-green-100 rounded-full",children:i.jsx(On,{className:"w-5 h-5 text-green-600"})}):i.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:i.jsx("span",{className:"text-gray-400",children:""})})}),i.jsx("td",{className:"px-6 py-4 text-center",children:n?i.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-amber-100 rounded-full",children:i.jsx(On,{className:"w-5 h-5 text-amber-600"})}):i.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 bg-gray-100 rounded-full",children:i.jsx("span",{className:"text-gray-400",children:""})})})]}),Pf=5,_u=24,lD=()=>{const{user:t}=qe(),e=En(),n=$n(),[r,s]=I.useState([]),[a,o]=I.useState(!0),[c,u]=I.useState(!1),[d,h]=I.useState(!1),[m,p]=I.useState(0),v=I.useRef(null),[_,R]=I.useState({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""});I.useEffect(()=>{t&&T()},[t]);const T=async()=>{if(t)try{const A=at(ue(z,"promotions"),ft("ownerId","==",t.uid)),j=(await $e(A)).docs.map(x=>{var E,k,P,L;return{id:x.id,...x.data(),expiresAt:(k=(E=x.data().expiresAt)==null?void 0:E.toDate)==null?void 0:k.call(E),createdAt:(L=(P=x.data().createdAt)==null?void 0:P.toDate)==null?void 0:L.call(P)}});j.sort((x,E)=>{var k,P;return(((k=E.createdAt)==null?void 0:k.getTime())||0)-(((P=x.createdAt)==null?void 0:P.getTime())||0)}),s(j)}catch(A){e.error("   "),console.error(A)}finally{o(!1)}},b=A=>A.expiresAt?new Date>new Date(A.expiresAt):!1,w=A=>{var k;const O=(k=A.target.files)==null?void 0:k[0];if(!O)return;const j=O.type.startsWith("image/"),x=O.type.startsWith("video/");if(!j&&!x){e.warning("    ");return}const E=x?50*1024*1024:10*1024*1024;if(O.size>E){e.warning(x?"       50 ":"       10 ");return}R({..._,type:x?"video":"image",mediaFile:O,mediaPreview:URL.createObjectURL(O)})},y=async A=>{if(A.preventDefault(),!!t){if(_.type!=="text"&&!_.mediaFile){e.warning("    ");return}if(!_.title.trim()&&!_.description.trim()&&!_.mediaFile){e.warning("   ");return}try{h(!0);let O="";if(_.mediaFile){const x=_.mediaFile.name.replace(/\s+/g,"_").slice(-60),E=`promotions/${t.uid}_${Date.now()}_${x}`,k=Ja(sp,E),P=cx(k,_.mediaFile);await new Promise((L,D)=>{P.on("state_changed",ie=>{const V=Math.round(ie.bytesTransferred/ie.totalBytes*100);p(V)},D,async()=>{O=await Ya(P.snapshot.ref),L()})})}const j=new Date;j.setHours(j.getHours()+_u),await er(ue(z,"promotions"),{ownerId:t.uid,restaurantId:t.uid,type:_.type,title:_.title.trim(),description:_.description.trim(),mediaUrl:O,isActive:!0,isPaid:!0,price:Pf,duration:_u,viewsCount:0,expiresAt:it.fromDate(j),createdAt:ae(),updatedAt:ae()}),e.success(`  !    ${_u} `),R({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""}),u(!1),p(0),T()}catch(O){e.error("    "),console.error(O)}finally{h(!1)}}},N=async A=>{if(await n.confirm("    ",{dangerous:!0}))try{await Yn(J(z,"promotions",A)),e.success("  "),T()}catch{e.error(" ")}};return a?i.jsxs("div",{className:"flex items-center justify-center h-96",children:[i.jsx(pn,{className:"w-6 h-6 animate-spin ml-2"})," ..."]}):i.jsxs("div",{className:"max-w-2xl mx-auto py-8 px-4 space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:i.jsx(_i,{className:"w-8 h-8 text-white"})}),i.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" "}),i.jsx("p",{className:"text-gray-500 mt-2",children:"      "})]}),i.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-2xl p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3",children:[i.jsx(Fn,{className:"w-5 h-5 text-purple-500"}),i.jsxs("span",{className:"text-lg font-bold text-purple-700",children:[Pf," .   ",_u," "]}),i.jsx(Fn,{className:"w-5 h-5 text-purple-500"})]}),i.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"       "})]}),!c&&i.jsxs("button",{onClick:()=>u(!0),className:"w-full py-4 rounded-2xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[i.jsx(Ic,{className:"w-6 h-6"}),"  "]}),c&&i.jsxs("form",{onSubmit:y,className:"bg-white rounded-2xl shadow-xl p-6 space-y-4",children:[i.jsx("h2",{className:"font-bold text-lg text-gray-800 mb-4",children:"  "}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" "}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("button",{type:"button",onClick:()=>R({..._,type:"text",mediaFile:null,mediaPreview:""}),className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="text"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[i.jsx(hx,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:""})]}),i.jsxs("button",{type:"button",onClick:()=>{var A;R({..._,type:"image"}),(A=v.current)==null||A.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="image"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[i.jsx(aj,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:""})]}),i.jsxs("button",{type:"button",onClick:()=>{var A;R({..._,type:"video"}),(A=v.current)==null||A.click()},className:`p-3 rounded-xl border-2 transition flex flex-col items-center gap-1 ${_.type==="video"?"border-purple-500 bg-purple-50":"border-gray-200"}`,children:[i.jsx(j3,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm",children:""})]})]})]}),i.jsx("input",{type:"file",ref:v,accept:"image/*,video/*",onChange:w,className:"hidden"}),_.mediaPreview&&i.jsxs("div",{className:"relative",children:[_.type==="video"?i.jsx("video",{src:_.mediaPreview,controls:!0,className:"w-full h-48 object-cover rounded-xl"}):i.jsx("img",{src:_.mediaPreview,alt:"",className:"w-full h-48 object-cover rounded-xl"}),i.jsx("button",{type:"button",onClick:()=>R({..._,mediaFile:null,mediaPreview:"",type:"text"}),className:"absolute top-2 left-2 p-2 bg-red-500 text-white rounded-full",children:i.jsx(Hr,{className:"w-4 h-4"})})]}),_.type!=="text"&&!_.mediaPreview&&i.jsxs("button",{type:"button",onClick:()=>{var A;return(A=v.current)==null?void 0:A.click()},className:"w-full py-4 border-2 border-dashed border-gray-300 rounded-xl text-gray-500 hover:border-purple-400 transition flex items-center justify-center gap-2",children:[i.jsx(dj,{className:"w-5 h-5"})," ",_.type==="video"?"":""]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:" ()"}),i.jsx("input",{type:"text",value:_.title,onChange:A=>R({..._,title:A.target.value}),placeholder:":   !",className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"  "}),i.jsx("textarea",{value:_.description,onChange:A=>R({..._,description:A.target.value}),placeholder:"   ...",rows:3,className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-purple-400 focus:outline-none"})]}),d&&m>0&&i.jsx("div",{className:"bg-gray-200 rounded-full h-2 overflow-hidden",children:i.jsx("div",{className:"bg-purple-500 h-full transition-all",style:{width:`${m}%`}})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",disabled:d,className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:d?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(_i,{className:"w-5 h-5"}),"  (",Pf," .)"]})}),i.jsx("button",{type:"button",onClick:()=>{u(!1),R({type:"text",title:"",description:"",mediaFile:null,mediaPreview:""})},className:"px-4 py-3 rounded-xl border-2 border-gray-200 text-gray-600 font-medium",children:""})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"font-bold text-lg text-gray-800",children:""}),r.length===0?i.jsxs("div",{className:"text-center py-10 text-gray-400",children:[i.jsx(_i,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"    "})]}):r.map(A=>i.jsxs("div",{className:`bg-white rounded-2xl shadow-lg overflow-hidden ${b(A)?"opacity-60":""}`,children:[A.mediaUrl&&(A.type==="video"?i.jsx("video",{src:A.mediaUrl,controls:!0,className:"w-full h-48 object-cover"}):i.jsx("img",{src:A.mediaUrl,alt:A.title,className:"w-full h-48 object-cover"})),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[b(A)?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-500 text-xs font-medium rounded-full",children:[i.jsx(Hr,{className:"w-3 h-3"})," "]}):A.isActive?i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-100 text-green-600 text-xs font-medium rounded-full",children:[i.jsx(Bt,{className:"w-3 h-3"})," "]}):i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-yellow-100 text-yellow-600 text-xs font-medium rounded-full",children:[i.jsx(wr,{className:"w-3 h-3"}),"  "]}),i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-600 text-xs font-medium rounded-full",children:[i.jsx(sj,{className:"w-3 h-3"})," ",A.viewsCount," "]})]}),A.title&&i.jsx("h3",{className:"font-bold text-gray-800",children:A.title}),A.description&&i.jsx("p",{className:"text-gray-600 text-sm mt-1",children:A.description}),i.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t",children:[i.jsxs("span",{className:"text-xs text-gray-400",children:[A.expiresAt&&!b(A)&&i.jsxs(i.Fragment,{children:[": ",new Date(A.expiresAt).toLocaleString("ar-SA")]}),b(A)&&"  "]}),i.jsx("button",{onClick:()=>N(A.id),className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition",children:i.jsx(an,{className:"w-4 h-4"})})]})]})]},A.id))]}),i.jsxs(ke,{to:"/owner",className:"flex items-center justify-center gap-2 text-sky-600 hover:text-sky-700 py-4",children:[i.jsx(Tc,{className:"w-5 h-5"}),"  "]})]})},cD=()=>{const{user:t}=qe(),e=Yt(),[n,r]=I.useState([]),[s,a]=I.useState([]);I.useEffect(()=>{const u=at(ue(z,"orders"),ft("status","in",["ready"]),Nr("createdAt","desc")),d=es(u,p=>r(p.docs.map(v=>({id:v.id,...v.data()})))),h=at(ue(z,"orders"),ft("courierId","==",(t==null?void 0:t.uid)||""),Nr("createdAt","desc")),m=es(h,p=>a(p.docs.map(v=>({id:v.id,...v.data()}))));return()=>{d(),m()}},[t==null?void 0:t.uid]);const o=async u=>{t&&await ye(J(z,"orders",u),{courierId:t.uid,status:"out_for_delivery",updatedAt:ae()})},c=async u=>{await ye(J(z,"orders",u),{status:"delivered",updatedAt:ae()})};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-sky-500 to-blue-600 rounded-2xl p-4 text-white shadow-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(tr,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm opacity-90",children:" "})]}),i.jsx("div",{className:"text-3xl font-bold",children:n.length})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 text-white shadow-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx(nr,{className:"w-5 h-5"}),i.jsx("span",{className:"text-sm opacity-90",children:" "})]}),i.jsx("div",{className:"text-3xl font-bold",children:s.filter(u=>u.status!=="delivered").length})]})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center",children:i.jsx(tr,{className:"w-5 h-5 text-purple-600"})}),i.jsx("h2",{className:"font-bold text-lg",children:"   "})]}),i.jsxs("div",{className:"space-y-3",children:[n.map(u=>{var d,h;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[i.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 px-4 py-2 flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),i.jsx("span",{className:"text-white/90 text-sm",children:u.restaurantName||""})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate",children:u.address})]}),i.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[i.jsx(Rv,{className:"w-5 h-5"}),i.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),i.jsxs("button",{onClick:()=>o(u.id),className:`w-full py-3 rounded-xl bg-gradient-to-r from-gray-800 to-gray-900 
                               text-white font-bold flex items-center justify-center gap-2
                               hover:from-gray-900 hover:to-black transition-all shadow-lg hover:shadow-xl`,children:[i.jsx(nr,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]})]},u.id)}),n.length===0&&i.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-gray-500",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-green-100 flex items-center justify-center",children:i.jsx(Za,{className:"w-5 h-5 text-green-600"})}),i.jsx("h2",{className:"font-bold text-lg",children:" "})]}),i.jsxs("div",{className:"space-y-3",children:[s.filter(u=>u.status!=="delivered").map(u=>{var d,h;return i.jsxs("div",{className:"bg-white rounded-2xl shadow-card overflow-hidden hover:shadow-lg transition-all",children:[i.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-blue-500 px-4 py-2 flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-bold",children:["#",u.id.slice(-6)]}),i.jsxs("div",{className:"flex items-center gap-1 text-white/90 text-sm",children:[i.jsx(wr,{className:"w-3 h-3"}),i.jsx("span",{children:" "})]})]}),i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-2",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate",children:u.address})]}),i.jsxs("div",{className:"flex items-center gap-2 text-green-600 font-bold text-lg mb-3",children:[i.jsx(Rv,{className:"w-5 h-5"}),i.jsxs("span",{children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>e(`/chat?orderId=${u.id}`),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-primary to-accent 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:shadow-lg transition-all`,children:[i.jsx(Th,{className:"w-5 h-5"}),i.jsx("span",{children:" "})]}),i.jsxs("button",{onClick:()=>c(u.id),className:`flex-1 py-3 rounded-xl bg-gradient-to-r from-green-500 to-emerald-500 
                                 text-white font-bold flex items-center justify-center gap-2
                                 hover:from-green-600 hover:to-emerald-600 transition-all shadow-lg hover:shadow-xl`,children:[i.jsx(Bt,{className:"w-5 h-5"}),i.jsx("span",{children:"  "})]})]})]})]},u.id)}),s.filter(u=>u.status!=="delivered").length===0&&i.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-2xl",children:[i.jsx("div",{className:"text-5xl mb-3",children:""}),i.jsx("p",{className:"text-gray-500",children:"    "}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"    "})]})]})]})]}),s.filter(u=>u.status==="delivered").length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[i.jsx(Fn,{className:"w-5 h-5 text-yellow-500"}),i.jsx("h3",{className:"font-bold text-gray-700",children:"  "})]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-3",children:s.filter(u=>u.status==="delivered").slice(0,6).map(u=>{var d,h;return i.jsx("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"font-bold text-green-700",children:["#",u.id.slice(-6)]}),i.jsxs("span",{className:"text-green-600 font-bold",children:[(h=(d=u.total)==null?void 0:d.toFixed)==null?void 0:h.call(d,2)," ."]})]})},u.id)})})]})]})},uD=()=>{const{user:t}=qe(),e=$n(),[n,r]=I.useState([]),[s,a]=I.useState({}),[o,c]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{if(!t)return;(async()=>{const v=(await $e(ue(z,"restaurants"))).docs.map(b=>({id:b.id,...b.data()}));r(v);const _=at(ue(z,"hiringRequests"),ft("courierId","==",t.uid)),R=await $e(_),T={};R.docs.forEach(b=>{const w=b.data();T[w.restaurantId]={restaurantId:w.restaurantId,status:w.status}}),a(T),c(!1)})()},[t]);const h=async m=>{if(!t){e.warning("  ");return}d(m.id),await er(ue(z,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:m.id,restaurantName:m.name,status:"pending",createdAt:ae()}),a(p=>({...p,[m.id]:{restaurantId:m.id,status:"pending"}})),d(null)};return o?i.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):i.jsxs("div",{className:"py-8",children:[i.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[i.jsx(k5,{className:"w-7 h-7 text-yellow-400"})," "]}),i.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>{const p=s[m.id];return i.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[m.logoUrl?i.jsx("img",{src:m.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):i.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),i.jsx("h3",{className:"font-bold text-lg mb-2",children:m.name}),p?i.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${p.status==="pending"?"bg-gray-500 text-white":p.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[p.status==="pending"&&i.jsx(wr,{className:"w-4 h-4"}),p.status==="accepted"&&i.jsx(z5,{className:"w-4 h-4"}),p.status==="rejected"&&i.jsx(Hr,{className:"w-4 h-4"}),p.status==="pending"?" ":p.status==="accepted"?"  ":" "]}):i.jsx("button",{disabled:u===m.id,onClick:()=>h(m),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===m.id?"  ...":"  "})]},m.id)})})]})},dD=[{text:"  ",emoji:""},{text:" ! ",emoji:""},{text:"  ",emoji:""},{text:"  ",emoji:""},{text:" ",emoji:""},{text:"! ",emoji:""}],hD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"    ",emoji:""},{text:"! ",emoji:""},{text:" ",emoji:""}],fD=[{text:"  ! ",emoji:""},{text:"! ",emoji:""},{text:"  ",emoji:""},{text:"   ",emoji:""},{text:"  ",emoji:""},{text:" ! ",emoji:""}],mD=[{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:" ! ",emoji:""},{text:"   ",emoji:""},{text:"   ",emoji:""}],pD=["","","","","","","","","","","",""],gD=()=>{const[t]=ub(),e=t.get("orderId"),n=Yt(),{user:r,role:s}=qe(),a=En(),[o,c]=I.useState(null),[u,d]=I.useState([]),[h,m]=I.useState(""),[p,v]=I.useState(!1),[_,R]=I.useState(!1),[T,b]=I.useState(""),w=I.useRef(null),y=s==="courier",N=s==="owner",A=s==="customer"||s==="admin",O=o&&!o.courierId&&o.restaurantId,x=y?fD:N?mD:A&&O?hD:dD;I.useEffect(()=>{if(!e)return;const $=es(J(z,"orders",e),B=>{if(B.exists()){const F=B.data();c({id:B.id,status:F.status,address:F.address,total:F.total,customerId:F.customerId,courierId:F.courierId,restaurantId:F.restaurantId,restaurantName:F.restaurantName})}});return()=>$()},[e]),I.useEffect(()=>{if(!o)return;let $,B="customer";if(y||N?($=o.customerId,B="customer"):A&&(o.courierId?($=o.courierId,B="courier"):o.restaurantId&&($=o.restaurantId,B="restaurant")),!$){b(O?o.restaurantName||"":" ");return}B==="restaurant"?tt(J(z,"restaurants",$)).then(F=>{var X;F.exists()?b(((X=F.data())==null?void 0:X.name)||""):b(o.restaurantName||"")}):tt(J(z,"users",$)).then(F=>{var X;if(F.exists()){const re=B==="courier"?"":"";b(((X=F.data())==null?void 0:X.name)||re)}})},[o,y,N,A,O]),I.useEffect(()=>{if(!e)return;const $=at(ue(z,"orders",e,"messages"),Nr("createdAt","asc")),B=es($,F=>{d(F.docs.map(X=>({id:X.id,...X.data()})))});return()=>B()},[e]),I.useEffect(()=>{var $;($=w.current)==null||$.scrollIntoView({behavior:"smooth"})},[u]);const E=async $=>{if(!(!$.trim()||!r||!e)){v(!0);try{let B="customer";y?B="courier":N&&(B="owner"),await er(ue(z,"orders",e,"messages"),{text:$.trim(),senderId:r.uid,senderRole:B,createdAt:ae()}),m(""),R(!1)}catch{a.error("  ")}v(!1)}},k=$=>{m(B=>B+$)},P=$=>$?$.toDate().toLocaleTimeString("ar-SA",{hour:"2-digit",minute:"2-digit"}):"",L=$=>({pending:{text:" ",color:"bg-yellow-500",emoji:""},accepted:{text:" ",color:"bg-blue-500",emoji:""},preparing:{text:" ",color:"bg-orange-500",emoji:""},ready:{text:"",color:"bg-purple-500",emoji:""},out_for_delivery:{text:" ",color:"bg-sky-500",emoji:""},delivered:{text:" ",color:"bg-green-500",emoji:""}})[$]||{text:$,color:"bg-gray-500",emoji:""},D=()=>y||N?"":O?"":"";if(!e)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Th,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),i.jsx("p",{className:"text-gray-500",children:"   "})]})});if(!o)return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-500",children:" ..."})]})});if(!((r==null?void 0:r.uid)===o.customerId||(r==null?void 0:r.uid)===o.courierId||(r==null?void 0:r.uid)===o.restaurantId))return i.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-500",children:"     "})]})});const V=L(o.status);return i.jsxs("div",{className:"flex flex-col h-[calc(100vh-200px)] max-w-2xl mx-auto",children:[i.jsxs("div",{className:`bg-gradient-to-r ${O?"from-orange-500 via-amber-500 to-yellow-500":"from-primary via-sky-500 to-accent"} rounded-t-3xl p-4 shadow-luxury`,children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>n(-1),className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur flex items-center justify-center hover:bg-white/30 transition-all",children:i.jsx(Tc,{className:"w-5 h-5 text-white"})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-white/20 backdrop-blur flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:D()})}),i.jsxs("div",{children:[i.jsx("h2",{className:"font-bold text-white text-lg",children:T||(O?"":y||N?"":"")}),i.jsxs("div",{className:"flex items-center gap-1 text-white/80 text-sm",children:[i.jsx("span",{className:`w-2 h-2 rounded-full ${o.status==="delivered"?"bg-green-400":"bg-yellow-400 animate-pulse"}`}),i.jsxs("span",{children:[V.emoji," ",V.text]})]})]})]})}),O?i.jsx($t,{className:"w-6 h-6 text-white animate-pulse"}):i.jsx(Fn,{className:"w-6 h-6 text-yellow-300 animate-pulse"})]}),i.jsxs("div",{className:"mt-3 flex items-center gap-4 text-white/90 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(tr,{className:"w-4 h-4"}),i.jsxs("span",{children:["#",o.id.slice(-6)]})]}),o.restaurantName&&i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx($t,{className:"w-4 h-4"}),i.jsx("span",{children:o.restaurantName})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(bn,{className:"w-4 h-4"}),i.jsx("span",{className:"truncate max-w-[150px]",children:o.address})]})]})]}),i.jsxs("div",{className:"flex-1 overflow-y-auto bg-gradient-to-b from-sky-50 to-white p-4 space-y-3",children:[u.length===0&&i.jsxs("div",{className:"text-center py-10",children:[i.jsx("div",{className:"text-6xl mb-4",children:""}),i.jsx("p",{className:"text-gray-500",children:"  !"}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"  "})]}),u.map(($,B)=>{const F=$.senderId===(r==null?void 0:r.uid);return i.jsx("div",{className:`flex ${F?"justify-start":"justify-end"}`,children:i.jsxs("div",{className:`
                  max-w-[80%] rounded-2xl px-4 py-3 shadow-md
                  ${F?"bg-gradient-to-br from-primary to-sky-600 text-white rounded-br-sm":"bg-white text-gray-800 rounded-bl-sm border border-gray-100"}
                  transform transition-all duration-300 hover:scale-[1.02]
                `,children:[i.jsx("p",{className:"text-base leading-relaxed",children:$.text}),i.jsxs("div",{className:`flex items-center gap-1 mt-1 text-xs ${F?"text-white/70":"text-gray-400"}`,children:[i.jsx(wr,{className:"w-3 h-3"}),i.jsx("span",{children:P($.createdAt)}),F&&i.jsx(Av,{className:"w-3 h-3 mr-1"})]})]})},$.id)}),i.jsx("div",{ref:w})]}),i.jsx("div",{className:"bg-white border-t border-gray-100 px-3 py-2",children:i.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:x.map(($,B)=>i.jsx("button",{onClick:()=>E($.text),className:`flex-shrink-0 px-4 py-2 bg-gradient-to-r from-sky-50 to-blue-50 
                         rounded-full text-sm text-primary font-medium border border-sky-100
                         hover:from-sky-100 hover:to-blue-100 hover:shadow-md 
                         transition-all duration-200 active:scale-95`,children:$.text},B))})}),_&&i.jsx("div",{className:"bg-white border-t border-gray-100 px-4 py-3",children:i.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:pD.map(($,B)=>i.jsx("button",{onClick:()=>k($),className:`w-10 h-10 text-2xl hover:bg-gray-100 rounded-full 
                           transition-all duration-200 hover:scale-125 active:scale-95`,children:$},B))})}),i.jsx("div",{className:"bg-white border-t border-gray-200 p-3",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("button",{onClick:()=>R(!_),className:`w-10 h-10 rounded-full flex items-center justify-center transition-all
                       ${_?"bg-primary text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:i.jsx(Y6,{className:"w-5 h-5"})}),i.jsx("div",{className:"flex-1 relative",children:i.jsx("input",{type:"text",value:h,onChange:$=>m($.target.value),onKeyPress:$=>$.key==="Enter"&&E(h),placeholder:" ...",className:`w-full px-5 py-3 bg-gray-100 rounded-full text-gray-800 
                         placeholder-gray-400 focus:outline-none focus:ring-2 
                         focus:ring-primary/50 focus:bg-white transition-all`})}),i.jsx("button",{onClick:()=>E(h),disabled:!h.trim()||p,className:`w-12 h-12 rounded-full flex items-center justify-center transition-all
                       ${h.trim()?"bg-gradient-to-r from-primary to-accent text-white shadow-lg hover:shadow-xl hover:scale-105":"bg-gray-200 text-gray-400"}
                       disabled:opacity-50 active:scale-95`,children:i.jsx(F6,{className:"w-5 h-5"})})]})}),o.status==="delivered"&&i.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 text-white",children:[i.jsx(Av,{className:"w-6 h-6"}),i.jsx("span",{className:"font-bold",children:"   ! "}),i.jsx(ij,{className:"w-5 h-5 text-red-300 animate-pulse"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-1",children:"   "})]})]})},xD=()=>{const{user:t}=qe(),e=En(),n=Yt(),[r,s]=I.useState([]),[a,o]=I.useState(!0);I.useEffect(()=>{if(!t)return;const p=at(ue(z,"notifications"),ft("recipientId","==",t.uid),Nr("createdAt","desc")),v=es(p,_=>{const R=_.docs.map(T=>({id:T.id,...T.data()}));s(R),o(!1)},_=>{console.error("Error fetching notifications:",_),o(!1)});return()=>v()},[t]);const c=async p=>{try{await ye(J(z,"notifications",p),{read:!0})}catch(v){console.error("Error marking as read:",v)}},u=async()=>{const p=r.filter(v=>!v.read);try{await Promise.all(p.map(v=>ye(J(z,"notifications",v.id),{read:!0}))),e.success("   ")}catch{e.error("  ")}},d=async p=>{try{await Yn(J(z,"notifications",p)),e.success("  ")}catch{e.error("  ")}},h=p=>{if(!p)return"";const v=p.toDate(),R=new Date().getTime()-v.getTime(),T=Math.floor(R/6e4),b=Math.floor(R/36e5),w=Math.floor(R/864e5);return T<1?"":T<60?` ${T} `:b<24?` ${b} `:w<7?` ${w} `:v.toLocaleDateString("ar-SA")},m=r.filter(p=>!p.read).length;return a?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsx(pn,{className:"w-8 h-8 animate-spin text-sky-500"})}):i.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:[i.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:i.jsx("div",{className:"max-w-2xl mx-auto px-4 py-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>n(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800",children:[i.jsx(Tc,{className:"w-5 h-5"}),""]}),i.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx(Cd,{className:"w-6 h-6 text-sky-500"}),"",m>0&&i.jsx("span",{className:"bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:m})]}),m>0&&i.jsx("button",{onClick:u,className:"text-sm text-sky-600 hover:text-sky-800",children:" "})]})})}),i.jsx("div",{className:"max-w-2xl mx-auto px-4 py-6",children:r.length===0?i.jsxs("div",{className:"text-center py-16",children:[i.jsx(Cd,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),i.jsx("p",{className:"text-gray-500",children:"  "})]}):i.jsx("div",{className:"space-y-3",children:r.map(p=>i.jsx("div",{className:`bg-white rounded-2xl p-4 shadow-sm border transition hover:shadow-md ${p.read?"border-gray-100":"border-sky-200 bg-sky-50/50"}`,onClick:()=>!p.read&&c(p.id),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:`p-2 rounded-xl ${p.type==="license_reminder"?"bg-orange-100 text-orange-600":"bg-sky-100 text-sky-600"}`,children:i.jsx(pi,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-start justify-between gap-2",children:[i.jsx("h3",{className:"font-semibold text-gray-800",children:p.title}),i.jsx("span",{className:"text-xs text-gray-400 whitespace-nowrap",children:h(p.createdAt)})]}),i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.message}),!p.read&&i.jsx("span",{className:"inline-block mt-2 text-xs bg-sky-100 text-sky-700 px-2 py-0.5 rounded-full",children:""})]}),i.jsxs("div",{className:"flex flex-col gap-1",children:[!p.read&&i.jsx("button",{onClick:v=>{v.stopPropagation(),c(p.id)},className:"p-1.5 text-gray-400 hover:text-green-500 transition",title:" ",children:i.jsx(On,{className:"w-4 h-4"})}),i.jsx("button",{onClick:v=>{v.stopPropagation(),d(p.id)},className:"p-1.5 text-gray-400 hover:text-red-500 transition",title:"",children:i.jsx(an,{className:"w-4 h-4"})})]})]})},p.id))})})]})},yD=()=>{var w,y;const{user:t,role:e}=qe(),n=En(),[r,s]=I.useState("dashboard"),[a,o]=I.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[c,u]=I.useState(0),[d,h]=I.useState(!0),[m,p]=I.useState(null),[v,_]=I.useState([]),[R,T]=I.useState("all");I.useEffect(()=>{t&&(async()=>{try{const A=(await $e(ue(z,"restaurants"))).size,j=(await $e(ue(z,"orders"))).docs.map(P=>({id:P.id,...P.data()})),x=j.length,E=j.filter(P=>P.status==="pending").length,k=j.reduce((P,L)=>P+(L.deliveryFee||0),0);try{const L=(await tt(J(z,"wallets",t.uid))).data();u((L==null?void 0:L.balance)||0)}catch{u(0)}try{const P=at(ue(z,"tasks"),ft("assignedTo","==",t.uid)),D=(await $e(P)).docs.map(ie=>({id:ie.id,...ie.data()}));_(D.sort((ie,V)=>{var $,B;return((($=V.createdAt)==null?void 0:$.seconds)||0)-(((B=ie.createdAt)==null?void 0:B.seconds)||0)}))}catch(P){console.error("   :",P)}o({totalRestaurants:A,totalOrders:x,totalEarnings:k,pendingOrders:E})}catch(N){console.error("   :",N)}finally{h(!1)}})()},[t]);const b=async(N,A)=>{try{const O={status:A,updatedAt:ae()};A==="completed"&&(O.completedAt=ae()),await ye(J(z,"tasks",N),O),_(j=>j.map(x=>x.id===N?{...x,status:A}:x)),n.success(A==="in_progress"?"  ":A==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return I.useEffect(()=>{t&&(async()=>{try{const N=await tt(J(z,"users",t.uid));N.exists()&&p({uid:N.id,...N.data()})}catch(N){console.error("    :",N)}})()},[t]),d?i.jsx(Pe,{allow:["admin"],children:i.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):i.jsx(Pe,{allow:["admin"],children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),i.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),i.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[i.jsxs("button",{onClick:()=>s("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx(kf,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>s("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx(An,{className:"w-5 h-5"}),""]}),i.jsxs("button",{onClick:()=>s("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${r==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[i.jsx(Ad,{className:"w-5 h-5"}),"",v.filter(N=>N.status==="pending"||N.status==="in_progress").length>0&&i.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:v.filter(N=>N.status==="pending"||N.status==="in_progress").length})]})]}),r==="profile"&&i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[i.jsx(An,{className:"w-6 h-6"}),""]}),m?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((w=m.name)==null?void 0:w.charAt(0))||((y=m.email)==null?void 0:y.charAt(0))||""}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.name||" "}),i.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),i.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:m.email})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),i.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),i.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:m.uid})]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),i.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[c.toFixed(2)," ."]})]})]})]}),i.jsx(ke,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):i.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),r==="tasks"&&i.jsx("div",{className:"space-y-6",children:i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[i.jsx(Ad,{className:"w-6 h-6"})," "]}),i.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(N=>i.jsxs("button",{onClick:()=>T(N),className:`px-4 py-2 rounded-xl font-semibold transition ${R===N?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[N==="all"&&" ",N==="pending"&&"  ",N==="in_progress"&&"  ",N==="completed"&&" "]},N))}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[i.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:v.filter(N=>N.status==="pending").length}),i.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:v.filter(N=>N.status==="in_progress").length}),i.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),i.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:v.filter(N=>N.status==="completed").length}),i.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),v.filter(N=>R==="all"||N.status===R).length===0?i.jsxs("div",{className:"text-center py-12 text-gray-500",children:[i.jsx("p",{className:"text-5xl mb-4",children:""}),i.jsxs("p",{className:"text-lg",children:["   ",R!=="all"&&"  "]}),i.jsx("p",{className:"text-sm mt-2",children:"      "})]}):i.jsx("div",{className:"space-y-4",children:v.filter(N=>R==="all"||N.status===R).map(N=>{var A,O,j;return i.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${N.status==="completed"?"bg-green-50 border-green-200":N.status==="in_progress"?"bg-blue-50 border-blue-200":N.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${N.priority==="high"?"bg-red-100 text-red-700":N.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:N.priority==="high"?" ":N.priority==="medium"?" ":" "}),i.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${N.status==="pending"?"bg-yellow-100 text-yellow-700":N.status==="in_progress"?"bg-blue-100 text-blue-700":N.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[N.status==="pending"&&"  ",N.status==="in_progress"&&"  ",N.status==="completed"&&" ",N.status==="cancelled"&&" "]})]}),i.jsx("h3",{className:"font-bold text-lg text-gray-800",children:N.title}),N.description&&i.jsx("p",{className:"text-gray-600 mt-1",children:N.description}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[N.dueDate&&i.jsxs("span",{className:new Date(N.dueDate)<new Date&&N.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(N.dueDate).toLocaleDateString("ar-SA"),new Date(N.dueDate)<new Date&&N.status!=="completed"&&" (!)"]}),i.jsxs("span",{children:[" ",((j=(O=(A=N.createdAt)==null?void 0:A.toDate)==null?void 0:O.call(A))==null?void 0:j.toLocaleDateString("ar-SA"))||" "]})]}),N.notes&&i.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",N.notes]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[N.status==="pending"&&i.jsx("button",{onClick:()=>b(N.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),N.status==="in_progress"&&i.jsxs("button",{onClick:()=>b(N.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[i.jsx(Bt,{className:"w-4 h-4"}),""]}),N.status==="completed"&&i.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},N.id)})})]})}),r==="dashboard"&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm opacity-90",children:" "}),i.jsxs("h2",{className:"text-3xl font-bold",children:[c.toFixed(2)," ."]}),i.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),i.jsx(hj,{className:"w-16 h-16 opacity-80"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" "}),i.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:a.totalRestaurants})]}),i.jsx(nj,{className:"w-12 h-12 text-primary opacity-30"})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" "}),i.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:a.totalOrders})]}),i.jsx(Dd,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" "}),i.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:a.pendingOrders})]}),i.jsx(kf,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" "}),i.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:a.totalEarnings.toFixed(2)})]}),i.jsx(kf,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ke,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),i.jsx(ke,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ke,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),i.jsx(ke,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ke,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),i.jsx(ke,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),i.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",c.toFixed(2)," ."]}),i.jsx(ke,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),i.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[i.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),i.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[i.jsxs("li",{children:[" ",i.jsx("strong",{children:"50 "}),"         "]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"1 "}),"     (     )"]}),i.jsxs("li",{children:[" ",i.jsx("strong",{children:"1.5 "}),"       "]}),i.jsx("li",{children:"        "})]})]})]})]})})},vD=()=>{const{user:t,role:e}=qe(),n=En(),r=$n(),[s,a]=I.useState([]),[o,c]=I.useState(!0),[u,d]=I.useState(!1),[h,m]=I.useState(!1),[p,v]=I.useState(0),_=I.useRef(null),R=kh(mn),[T,b]=I.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});I.useEffect(()=>{w()},[]);const w=async()=>{try{const E=(await $e(ue(z,"restaurants"))).docs.map(k=>({id:k.id,...k.data()}));a(E)}catch(x){n.error("   "),console.error(x)}finally{c(!1)}},y=async x=>{if(x.preventDefault(),!T.name.trim()){n.warning("  ");return}try{m(!0);let E="";if(T.logoFile){const L=T.logoFile.name.replace(/\s+/g,"_").slice(-60),D=`uploads/restaurant_${Date.now()}_${L}`,ie=Ja(R,D),V=cx(ie,T.logoFile,{contentType:T.logoFile.type||"image/jpeg"});await new Promise(($,B)=>{V.on("state_changed",F=>{const X=Math.round(F.bytesTransferred/F.totalBytes*100);v(X)},B,async()=>{E=await Ya(V.snapshot.ref),$()})})}const k=e==="admin",P=e==="developer";await er(ue(z,"restaurants"),{name:T.name,phone:T.phone,city:T.city,location:T.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:E,createdAt:new Date,referredBy:k?t==null?void 0:t.uid:null,referrerType:k?"admin":P?"developer":null}),n.success("    "),k&&n.info("   75        "),b({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),v(0),w()}catch(E){n.error("   "),console.error(E)}finally{m(!1)}},N=async x=>{if(await r.confirm("      ",{dangerous:!0,title:" "}))try{await Yn(J(z,"restaurants",x)),n.success("   "),w()}catch(k){n.error("   "),console.error(k)}},A=async x=>{const E=!x.isVerified;if(await r.confirm(E?`    "${x.name}"`:`     "${x.name}"`,{title:E?"  ":"  ",confirmText:E?" ":"  "}))try{await ye(J(z,"restaurants",x.id),{isVerified:E,verifiedAt:E?ae():null,updatedAt:ae()}),n.success(E?"   ":"  "),w()}catch(P){n.error(" "),console.error(P)}},O=async(x,E)=>{try{await ye(J(z,"restaurants",x.id),{sellerTier:E,tierUpdatedAt:ae(),updatedAt:ae()});const k={bronze:"",silver:"",gold:""};n.success(`    ${k[E]} `),w()}catch(k){n.error(" "),console.error(k)}},j=({tier:x})=>{switch(x){case"gold":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-400 to-yellow-400 text-white text-xs font-bold rounded-full shadow",children:[i.jsx(In,{className:"w-3 h-3"})," Gold"]});case"silver":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-gray-300 to-gray-400 text-gray-800 text-xs font-bold rounded-full shadow",children:[i.jsx(ap,{className:"w-3 h-3"})," Silver"]});default:return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gradient-to-r from-amber-600 to-orange-600 text-white text-xs font-bold rounded-full shadow",children:[i.jsx(Bu,{className:"w-3 h-3"})," Bronze"]})}};return o?i.jsx(Pe,{allow:["admin","developer"],children:i.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):i.jsx(Pe,{allow:["admin","developer"],children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),i.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[i.jsx(Ic,{className:"w-5 h-5"}),"  "]})]}),u&&i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),i.jsxs("form",{onSubmit:y,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),i.jsxs("div",{className:"flex items-center gap-4",children:[T.logoPreview?i.jsx("img",{src:T.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):i.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:i.jsx(aj,{className:"w-8 h-8 text-gray-400"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("input",{ref:_,type:"file",accept:"image/*",className:"hidden",onChange:x=>{var k;const E=(k=x.target.files)==null?void 0:k[0];E&&b({...T,logoFile:E,logoPreview:URL.createObjectURL(E)})}}),i.jsxs("button",{type:"button",onClick:()=>{var x;return(x=_.current)==null?void 0:x.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[i.jsx(dj,{className:"w-4 h-4"}),T.logoFile?" ":" "]}),T.logoFile&&i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:T.logoFile.name})]})]}),h&&p>0&&i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:i.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${p}%`}})})]}),i.jsx("input",{type:"text",placeholder:" ",value:T.name,onChange:x=>b({...T,name:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),i.jsx("input",{type:"text",placeholder:" ",value:T.phone,onChange:x=>b({...T,phone:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),i.jsx("input",{type:"text",placeholder:"",value:T.city,onChange:x=>b({...T,city:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),i.jsx("textarea",{placeholder:" / ",value:T.location,onChange:x=>b({...T,location:x.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx("button",{type:"submit",disabled:h,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:h?` ... ${p}%`:" "}),i.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),i.jsx("div",{className:"grid gap-4",children:s.length===0?i.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):s.map(x=>i.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex gap-4",children:[x.logoUrl?i.jsx("img",{src:x.logoUrl,alt:x.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):i.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:i.jsx("span",{className:"text-2xl",children:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h3",{className:"text-xl font-bold text-primary",children:x.name}),x.isVerified&&i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-green-100 text-green-700 text-xs font-bold rounded-full",children:[i.jsx(Bt,{className:"w-3 h-3"})," "]}),i.jsx(j,{tier:x.sellerTier})]}),x.city&&i.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.city]}),x.phone&&i.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.phone]}),x.location&&i.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",x.location]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("button",{onClick:()=>A(x),className:`p-2.5 rounded-xl transition flex items-center gap-1 text-sm font-semibold ${x.isVerified?"bg-green-100 hover:bg-green-200 text-green-700":"bg-gray-100 hover:bg-gray-200 text-gray-600"}`,title:x.isVerified?" ":" ",children:[i.jsx(Sc,{className:"w-4 h-4"}),x.isVerified?"":""]}),i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{className:"p-2.5 rounded-xl bg-amber-100 hover:bg-amber-200 text-amber-700 transition flex items-center gap-1 text-sm font-semibold",children:[i.jsx(Bu,{className:"w-4 h-4"}),"",i.jsx(rj,{className:"w-3 h-3"})]}),i.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white rounded-xl shadow-xl border opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-20 min-w-[140px]",children:[i.jsxs("button",{onClick:()=>O(x,"bronze"),className:`w-full px-4 py-2.5 text-right hover:bg-amber-50 transition flex items-center gap-2 first:rounded-t-xl ${x.sellerTier==="bronze"||!x.sellerTier?"bg-amber-50":""}`,children:[i.jsx(Bu,{className:"w-4 h-4 text-amber-600"}),i.jsx("span",{className:"font-semibold",children:"Bronze"})]}),i.jsxs("button",{onClick:()=>O(x,"silver"),className:`w-full px-4 py-2.5 text-right hover:bg-gray-50 transition flex items-center gap-2 ${x.sellerTier==="silver"?"bg-gray-100":""}`,children:[i.jsx(ap,{className:"w-4 h-4 text-gray-500"}),i.jsx("span",{className:"font-semibold",children:"Silver"})]}),i.jsxs("button",{onClick:()=>O(x,"gold"),className:`w-full px-4 py-2.5 text-right hover:bg-yellow-50 transition flex items-center gap-2 last:rounded-b-xl ${x.sellerTier==="gold"?"bg-yellow-50":""}`,children:[i.jsx(In,{className:"w-4 h-4 text-amber-500"}),i.jsx("span",{className:"font-semibold",children:"Gold"})]})]})]}),i.jsx("button",{onClick:()=>N(x.id),className:"p-2.5 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:i.jsx(an,{className:"w-4 h-4"})})]})]})},x.id))})]})})},Df={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},wD=()=>{const t=En(),[e,n]=I.useState([]),[r,s]=I.useState(!0),[a,o]=I.useState("all");I.useEffect(()=>{c()},[a]);const c=async()=>{try{let u;a==="all"?u=at(ue(z,"orders"),Nr("createdAt","desc")):u=at(ue(z,"orders"),ft("status","==",a),Nr("createdAt","desc"));const h=(await $e(u)).docs.map(m=>({id:m.id,...m.data()}));n(h)}catch(u){t.error("   "),console.error(u)}finally{s(!1)}};return r?i.jsx(Pe,{allow:["admin","developer"],children:i.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):i.jsx(Pe,{allow:["admin","developer"],children:i.jsxs("div",{className:"space-y-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),i.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[i.jsxs("button",{onClick:()=>o("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(h=>h.status===u).length;return i.jsxs("button",{onClick:()=>o(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${a===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[Df[u]," (",d,")"]},u)})]}),i.jsx("div",{className:"space-y-4",children:e.length===0?i.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",a!=="all"&&` "${Df[a]}"`]}):e.map(u=>{var d,h;return i.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),i.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),i.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:Df[u.status]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),i.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:""}),i.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:""}),i.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-600 text-sm",children:""}),i.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[i.jsx("p",{className:"font-semibold mb-2",children:":"}),i.jsx("div",{className:"space-y-1",children:(h=u.items)==null?void 0:h.map((m,p)=>i.jsxs("div",{className:"flex justify-between text-gray-700",children:[i.jsxs("span",{children:[m.name,"  ",m.qty]}),i.jsxs("span",{children:[(m.price*m.qty).toFixed(2)," ."]})]},p))})]})]},u.id)})})]})})},Tn={projectId:mn.options.projectId,authDomain:mn.options.authDomain,storageBucket:mn.options.storageBucket,messagingSenderId:mn.options.messagingSenderId,appId:mn.options.appId},_D=()=>{var Ro,Po,ta,na;const{user:t}=qe(),e=En(),n=$n(),r=kh(mn),[s,a]=I.useState("overview"),[o,c]=I.useState(!0),[u,d]=I.useState(!1),[h,m]=I.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[p,v]=I.useState({}),[_,R]=I.useState([]),[T,b]=I.useState([]),[w,y]=I.useState([]),[N,A]=I.useState([]),[O,j]=I.useState(!1),[x,E]=I.useState({}),[k,P]=I.useState(null),[L,D]=I.useState({}),[ie,V]=I.useState(!1),[$,B]=I.useState(null),[F,X]=I.useState({}),[re,ve]=I.useState("all"),[pe,De]=I.useState("all"),[Rt,Bn]=I.useState(null),[ln,cn]=I.useState(!1),[rs,Cc]=I.useState(""),[ss,Ys]=I.useState(""),[kr,$i]=I.useState(""),[Bi,zi]=I.useState(""),[mo,Ac]=I.useState(!1),[po,go]=I.useState(!1),[ar,xo]=I.useState(""),[yo,qi]=I.useState(""),[Tr,vo]=I.useState(""),[ot,xt]=I.useState(""),[Js,wo]=I.useState(!1),[Hi,Rc]=I.useState(!1),[kn,_o]=I.useState(""),[Wi,Ki]=I.useState(""),[Pc,Dc]=I.useState(""),[Gi,bo]=I.useState(""),[or,is]=I.useState(""),[as,Qi]=I.useState(""),[lr,No]=I.useState(!1),[zn,Lc]=I.useState([]),[Zs,Xi]=I.useState(!1),[mt,Yi]=I.useState(""),[os,Ir]=I.useState(""),[Ji,jo]=I.useState(""),[Sr,Eo]=I.useState("medium"),[Oc,ls]=I.useState(""),[ko,Zi]=I.useState(!1),[qn,cr]=I.useState("all");t!=null&&t.email;const Mc=async()=>{if(!rs.trim()||!kr.trim()){e.warning("    ");return}if(kr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${rs}
 ${ss||" "}

:         .`,{title:"  "})){Ac(!0);try{const K=(await yl(Ln,rs.trim(),kr)).user.uid;await fn(J(z,"users",K),{email:rs.trim(),name:ss.trim()||" ",phone:Bi.trim()||"",role:"admin",createdAt:ae()}),await fn(J(z,"wallets",K),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:ae()}),e.success("     "),e.info("        "),Cc(""),Ys(""),$i(""),zi(""),cn(!1)}catch(W){console.error("   :",W),W.code==="auth/email-already-in-use"?e.error("   "):W.code==="auth/invalid-email"?e.error("   "):W.code==="auth/weak-password"?e.error("   "):e.error("  : "+(W.message||"  "))}finally{Ac(!1)}}},Vc=async()=>{if(!ar.trim()||!Tr.trim()){e.warning("    ");return}if(Tr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${ar}
 ${yo||" "}
 ${ot||" "}`,{title:"  "})){wo(!0);try{const K=(await yl(Ln,ar.trim(),Tr)).user.uid;await fn(J(z,"users",K),{email:ar.trim(),name:yo.trim()||" ",phone:ot.trim()||"",role:"courier",createdAt:ae()}),e.success("     "),e.info("        "),xo(""),qi(""),vo(""),xt(""),go(!1)}catch(W){console.error("   :",W),W.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(W.message||"  "))}finally{wo(!1)}}},To=async()=>{if(!kn.trim()){e.warning("  ");return}if(!or.trim()||!as.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${kn}
 ${Wi||" "}
  : ${or}`,{title:"  "})){No(!0);try{const K=(await yl(Ln,or.trim(),as)).user.uid;await fn(J(z,"users",K),{email:or.trim(),name:kn.trim()+" - ",role:"owner",createdAt:ae()}),await fn(J(z,"restaurants",K),{name:kn.trim(),ownerId:K,email:Gi.trim()||or.trim(),phone:Pc.trim()||"",city:Wi.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:ae()}),e.success("      "),e.info("        "),_o(""),Ki(""),Dc(""),bo(""),is(""),Qi(""),Rc(!1)}catch(W){console.error("   :",W),W.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+(W.message||"  "))}finally{No(!1)}}},Io=()=>{const C=new Date,W=new Date(C.getFullYear(),C.getMonth(),C.getDate()),K=new Date(W.getTime()-7*24*60*60*1e3),le=new Date(W.getTime()-30*24*60*60*1e3),be=w.filter(he=>{var We,un;return(((un=(We=he.createdAt)==null?void 0:We.toDate)==null?void 0:un.call(We))||new Date(0))>=W&&he.status!=="cancelled"}),Ce=w.filter(he=>{var We,un;return(((un=(We=he.createdAt)==null?void 0:We.toDate)==null?void 0:un.call(We))||new Date(0))>=K&&he.status!=="cancelled"}),Je=w.filter(he=>{var We,un;return(((un=(We=he.createdAt)==null?void 0:We.toDate)==null?void 0:un.call(We))||new Date(0))>=le&&he.status!=="cancelled"}),yt=w.filter(he=>he.status==="delivered");return{todayRevenue:be.reduce((he,Ae)=>he+(Ae.total||0),0),todayOrders:be.length,todayPlatformFee:be.reduce((he,Ae)=>he+(Ae.platformFee||0),0),weekRevenue:Ce.reduce((he,Ae)=>he+(Ae.total||0),0),weekOrders:Ce.length,weekPlatformFee:Ce.reduce((he,Ae)=>he+(Ae.platformFee||0),0),monthRevenue:Je.reduce((he,Ae)=>he+(Ae.total||0),0),monthOrders:Je.length,monthPlatformFee:Je.reduce((he,Ae)=>he+(Ae.platformFee||0),0),totalRevenue:yt.reduce((he,Ae)=>he+(Ae.total||0),0),totalPlatformFee:yt.reduce((he,Ae)=>he+(Ae.platformFee||0),0),totalAdminCommission:yt.reduce((he,Ae)=>he+(Ae.adminCommission||0),0)}},lt=async()=>{try{const[C,W,K,le,be]=await Promise.all([$e(ue(z,"users")),$e(ue(z,"restaurants")),$e(ue(z,"menuItems")),$e(ue(z,"orders")),$e(ue(z,"wallets"))]);let Ce={docs:[]};try{Ce=await $e(ue(z,"tasks"))}catch{console.log("   ")}const Je=C.docs.map(fe=>({uid:fe.id,...fe.data()}));R(Je);const yt=W.docs.map(fe=>({id:fe.id,...fe.data()}));b(yt);const he=le.docs.map(fe=>({id:fe.id,...fe.data()}));y(he);const Ae=Ce.docs.map(fe=>({id:fe.id,...fe.data()}));Lc(Ae.sort((fe,sa)=>{var ri,ia;return(((ri=sa.createdAt)==null?void 0:ri.seconds)||0)-(((ia=fe.createdAt)==null?void 0:ia.seconds)||0)}));const We={};be.docs.forEach(fe=>{We[fe.id]=fe.data()});const un=We.app_earnings||{balance:0,totalEarnings:0},Se=Je.filter(fe=>fe.role==="admin"),ra=Je.filter(fe=>fe.role==="courier"),ti=Je.filter(fe=>fe.role==="customer"),ni=Je.filter(fe=>fe.role==="owner"),Ch=Se.map(fe=>{const sa=yt.filter(ia=>ia.referredBy===fe.uid),ri=We[fe.uid]||{balance:0,totalEarnings:0};return{uid:fe.uid,email:fe.email,name:fe.name,walletBalance:ri.balance||0,totalEarnings:ri.totalEarnings||0,restaurantsCount:sa.length,restaurants:sa}});A(Ch),m({users:Je.length,restaurants:yt.length,menuItems:K.size,orders:he.length,pendingOrders:he.filter(fe=>fe.status==="pending").length,deliveredOrders:he.filter(fe=>fe.status==="delivered").length,admins:Se.length,couriers:ra.length,customers:ti.length,owners:ni.length,totalAppEarnings:un.totalEarnings||0});const Do=await tt(J(z,"settings","general"));if(Do.exists()){const fe=Do.data();v(fe),E(fe)}else{const fe={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};v(fe),E(fe)}}catch(C){console.error("   :",C),e.error("  ")}finally{c(!1),d(!1)}};I.useEffect(()=>{lt()},[]);const So=()=>{d(!0),lt(),e.info("  ...")},Ih=async()=>{try{await fn(J(z,"settings","general"),x,{merge:!0}),v(x),j(!1),e.success("    ")}catch(C){console.error("   :",C),e.error("  ")}},ea=async C=>{try{await ye(J(z,"restaurants",C),{...L,updatedAt:ae()}),P(null),e.success("    "),lt()}catch(W){console.error("   :",W),e.error("  ")}},Fc=async(C,W)=>{try{if(!W.type.startsWith("image/")){e.warning("   ");return}if(W.size>5*1024*1024){e.warning("        5MB");return}V(!0);const K=W.name.replace(/\s+/g,"_"),le=`restaurants/${C}/logo_${Date.now()}_${K}`,be=Ja(r,le),Ce={contentType:W.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await rp(be,W,Ce);const Je=await Ya(be);await ye(J(z,"restaurants",C),{logoUrl:Je,updatedAt:ae()}),e.success("    "),lt()}catch(K){console.error("   :",K),e.error("  ")}finally{V(!1)}},Co=async C=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Yn(J(z,"restaurants",C)),e.success("   "),lt()}catch(K){console.error("   :",K),e.error("  ")}},ei=async C=>{try{await ye(J(z,"users",C),{...F,updatedAt:ae()}),B(null),e.success("    "),lt()}catch(W){console.error("   :",W),e.error("  ")}},Cr=async C=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await Yn(J(z,"users",C)),e.success("     "),e.warning(":      Firebase Auth"),lt()}catch(K){console.error("   :",K),e.error("  ")}},Ao=async(C,W)=>{try{await ye(J(z,"orders",C),{status:W,updatedAt:ae()}),e.success("    "),lt()}catch(K){console.error("   :",K),e.error("  ")}},Sh=C=>{switch(C){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return C}},Uc=C=>{switch(C){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return C}};return o?i.jsx(Pe,{allow:["developer"],children:i.jsx("div",{className:"flex items-center justify-center h-96",children:i.jsxs("div",{className:"text-center",children:[i.jsx(pn,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):i.jsx(Pe,{allow:["developer"],children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),i.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),i.jsxs("button",{onClick:So,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(pn,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),i.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"licenses",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(C=>i.jsx("button",{onClick:()=>a(C.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${s===C.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:C.label},C.id))}),s==="overview"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[i.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.users}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.restaurants}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.orders}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.admins}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.couriers}),i.jsx("p",{className:"text-sm opacity-90",children:" "})]}),i.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:h.totalAppEarnings.toFixed(2)}),i.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx($6,{className:"w-6 h-6 text-orange-500"}),i.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),i.jsx("p",{className:"font-mono text-sm",children:Tn.projectId})]}),i.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),i.jsx("p",{className:"font-mono text-sm",children:Tn.storageBucket})]})]}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[i.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),i.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),i.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),i.jsx("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[i.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:h.customers}),i.jsx("p",{className:"text-sm text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.owners}),i.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),i.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:h.couriers}),i.jsx("p",{className:"text-sm text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-purple-600",children:h.admins}),i.jsx("p",{className:"text-sm text-gray-600",children:""})]}),i.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),i.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]})]}),s==="finance"&&i.jsx("div",{className:"space-y-6",children:(()=>{const C=Io();return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:C.totalRevenue.toFixed(0)}),i.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),i.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:C.totalPlatformFee.toFixed(2)}),i.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),i.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:C.totalAdminCommission.toFixed(2)}),i.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),i.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:(C.totalPlatformFee+C.totalAdminCommission).toFixed(2)}),i.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsx("span",{className:"font-bold",children:C.todayOrders})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsxs("span",{className:"font-bold",children:[C.todayRevenue.toFixed(2)," ."]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("span",{className:"font-bold text-green-600",children:[C.todayPlatformFee.toFixed(2)," ."]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsx("span",{className:"font-bold",children:C.weekOrders})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsxs("span",{className:"font-bold",children:[C.weekRevenue.toFixed(2)," ."]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("span",{className:"font-bold text-green-600",children:[C.weekPlatformFee.toFixed(2)," ."]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsx("span",{className:"font-bold",children:C.monthOrders})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:":"}),i.jsxs("span",{className:"font-bold",children:[C.monthRevenue.toFixed(2)," ."]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-600",children:" :"}),i.jsxs("span",{className:"font-bold text-green-600",children:[C.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),i.jsx("div",{className:"space-y-3",children:T.map(W=>({...W,ordersCount:w.filter(K=>K.restaurantId===W.id&&K.status==="delivered").length,revenue:w.filter(K=>K.restaurantId===W.id&&K.status==="delivered").reduce((K,le)=>K+(le.total||0),0)})).sort((W,K)=>K.revenue-W.revenue).slice(0,5).map((W,K)=>i.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:K===0?"":K===1?"":K===2?"":`#${K+1}`}),i.jsxs("div",{children:[i.jsx("p",{className:"font-bold",children:W.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[W.ordersCount," "]})]})]}),i.jsxs("p",{className:"font-bold text-green-600",children:[W.revenue.toFixed(2)," ."]})]},W.id))})]})]})})()}),s==="restaurants"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["   (",T.length,")"]}),i.jsx("button",{onClick:()=>Rc(!Hi),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:Hi?" ":"  "})]}),Hi&&i.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[i.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"text",placeholder:":  ",value:kn,onChange:C=>_o(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),i.jsx("input",{type:"text",placeholder:": ",value:Wi,onChange:C=>Ki(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),i.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Pc,onChange:C=>Dc(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),i.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:Gi,onChange:C=>bo(C.target.value),className:"w-full border rounded-xl p-3"})]})]}),i.jsxs("div",{className:"border-t mt-4 pt-4",children:[i.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),i.jsx("input",{type:"email",placeholder:"owner@example.com",value:or,onChange:C=>is(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"password",placeholder:"6   ",value:as,onChange:C=>Qi(C.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),i.jsx("button",{onClick:To,disabled:lr||!kn.trim()||!or.trim()||!as.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:lr?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),i.jsx("div",{className:"space-y-4",children:T.map(C=>{var W;return i.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:k===C.id?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:" "}),i.jsx("input",{type:"text",value:L.name||"",onChange:K=>D({...L,name:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:" "}),i.jsx("input",{type:"text",value:L.phone||"",onChange:K=>D({...L,phone:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:" "}),i.jsx("input",{type:"email",value:L.email||"",onChange:K=>D({...L,email:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:""}),i.jsx("input",{type:"text",value:L.city||"",onChange:K=>D({...L,city:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm text-gray-600",children:""}),i.jsx("input",{type:"text",value:L.location||"",onChange:K=>D({...L,location:K.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),i.jsxs("select",{value:L.referredBy||"",onChange:K=>D({...L,referredBy:K.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[i.jsx("option",{value:"",children:"--   ( ) --"}),_.filter(K=>K.role==="admin").map(K=>i.jsxs("option",{value:K.uid,children:[" ",K.name||K.email]},K.uid))]}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600",children:" "}),i.jsx("input",{type:"file",accept:"image/*",onChange:K=>{var be;const le=(be=K.target.files)==null?void 0:be[0];le&&Fc(C.id,le)},className:"w-full border rounded-xl p-2 mt-1",disabled:ie}),ie&&i.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:()=>ea(C.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[i.jsx(lj,{className:"w-4 h-4"})," "]}),i.jsxs("button",{onClick:()=>P(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[i.jsx(Bs,{className:"w-4 h-4"})," "]})]})]}):i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:C.logoUrl?i.jsx("img",{src:C.logoUrl,alt:C.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-bold text-lg",children:C.name}),i.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[C.phone&&i.jsxs("p",{children:[" ",C.phone]}),C.email&&i.jsxs("p",{children:[" ",C.email]}),C.city&&i.jsxs("p",{children:[" ",C.city]}),C.referredBy&&i.jsxs("p",{className:"text-purple-600",children:["  : ",((W=N.find(K=>K.uid===C.referredBy))==null?void 0:W.name)||C.referredBy.slice(0,8)]})]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{P(C.id),D(C)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:i.jsx(Pd,{className:"w-5 h-5"})}),i.jsx("button",{onClick:()=>Co(C.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:i.jsx(an,{className:"w-5 h-5"})})]}),i.jsxs("select",{value:C.referredBy||"",onChange:async K=>{const le=K.target.value;try{await ye(J(z,"restaurants",C.id),{referredBy:le||null,updatedAt:ae()}),e.success(le?"   ":"   "),lt()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[i.jsx("option",{value:"",children:"  "}),_.filter(K=>K.role==="admin").map(K=>i.jsxs("option",{value:K.uid,children:[" ",K.name||K.email]},K.uid))]})]})]})},C.id)})})]}),s==="orders"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["   (",w.length,")"]}),i.jsxs("select",{value:re,onChange:C=>ve(C.target.value),className:"border rounded-xl p-2",children:[i.jsx("option",{value:"all",children:" "}),i.jsx("option",{value:"pending",children:" "}),i.jsx("option",{value:"accepted",children:""}),i.jsx("option",{value:"preparing",children:" "}),i.jsx("option",{value:"ready",children:""}),i.jsx("option",{value:"out_for_delivery",children:" "}),i.jsx("option",{value:"delivered",children:" "}),i.jsx("option",{value:"cancelled",children:""})]})]}),i.jsx("div",{className:"space-y-3",children:w.filter(C=>re==="all"||C.status===re).sort((C,W)=>{var K,le;return(((K=W.createdAt)==null?void 0:K.seconds)||0)-(((le=C.createdAt)==null?void 0:le.seconds)||0)}).map(C=>{var W,K;return i.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[i.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[i.jsxs("div",{children:[i.jsxs("h3",{className:"font-bold",children:[" #",C.id.slice(-8)]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.restaurantName||""]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.address]}),i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",(W=C.total)==null?void 0:W.toFixed(2)," ."]}),C.platformFee&&i.jsxs("p",{className:"text-xs text-green-600",children:[" : ",C.platformFee," .",C.adminCommission?` |  : ${C.adminCommission} .`:""]})]}),i.jsxs("div",{className:"text-left",children:[i.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${C.status==="delivered"?"bg-green-100 text-green-700":C.status==="cancelled"?"bg-red-100 text-red-700":C.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:Uc(C.status)}),i.jsxs("select",{value:C.status,onChange:le=>Ao(C.id,le.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[i.jsx("option",{value:"pending",children:" "}),i.jsx("option",{value:"accepted",children:""}),i.jsx("option",{value:"preparing",children:" "}),i.jsx("option",{value:"ready",children:""}),i.jsx("option",{value:"out_for_delivery",children:" "}),i.jsx("option",{value:"delivered",children:" "}),i.jsx("option",{value:"cancelled",children:""})]})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t",children:[i.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:(K=C.items)==null?void 0:K.map((le,be)=>i.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[le.name,"  ",le.qty]},be))})]})]},C.id)})})]}),s==="users"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["   (",_.length,")"]}),i.jsxs("select",{value:pe,onChange:C=>De(C.target.value),className:"border rounded-xl p-2",children:[i.jsx("option",{value:"all",children:" "}),i.jsx("option",{value:"customer",children:""}),i.jsx("option",{value:"owner",children:" "}),i.jsx("option",{value:"courier",children:""}),i.jsx("option",{value:"admin",children:""}),i.jsx("option",{value:"developer",children:""})]})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.filter(C=>pe==="all"||C.role===pe).map(C=>i.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:$===C.uid?i.jsxs("div",{className:"space-y-3",children:[i.jsx("input",{type:"text",placeholder:"",value:F.name||"",onChange:W=>X({...F,name:W.target.value}),className:"w-full border rounded-xl p-2"}),i.jsx("input",{type:"text",placeholder:"",value:F.phone||"",onChange:W=>X({...F,phone:W.target.value}),className:"w-full border rounded-xl p-2"}),i.jsxs("select",{value:F.role||"customer",onChange:W=>X({...F,role:W.target.value}),className:"w-full border rounded-xl p-2",children:[i.jsx("option",{value:"customer",children:""}),i.jsx("option",{value:"owner",children:" "}),i.jsx("option",{value:"courier",children:""}),i.jsx("option",{value:"admin",children:""}),i.jsx("option",{value:"developer",children:""})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>ei(C.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),i.jsx("button",{onClick:()=>B(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):i.jsx(i.Fragment,{children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:C.name||" "}),i.jsx("p",{className:"text-sm text-gray-600",children:C.email}),i.jsx("p",{className:"text-xs mt-1",children:Sh(C.role)})]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>{B(C.uid),X(C)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:i.jsx(Pd,{className:"w-4 h-4"})}),i.jsx("button",{onClick:()=>Cr(C.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:i.jsx(an,{className:"w-4 h-4"})})]})]})})},C.uid))})]}),s==="couriers"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["  (",h.couriers,")"]}),i.jsx("button",{onClick:()=>go(!po),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:po?" ":"  "})]}),po&&i.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[i.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"email",placeholder:"courier@example.com",value:ar,onChange:C=>xo(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"password",placeholder:"6   ",value:Tr,onChange:C=>vo(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),i.jsx("input",{type:"text",placeholder:" ",value:yo,onChange:C=>qi(C.target.value),className:"w-full border rounded-xl p-3"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),i.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:ot,onChange:C=>xt(C.target.value),className:"w-full border rounded-xl p-3"})]})]}),i.jsx("button",{onClick:Vc,disabled:Js||!ar.trim()||!Tr.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Js?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[_.filter(C=>C.role==="courier").map(C=>i.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:C.name||" "}),i.jsx("p",{className:"text-sm text-gray-600",children:C.email}),C.phone&&i.jsxs("p",{className:"text-sm text-gray-600",children:[" ",C.phone]})]})]}),i.jsx("div",{className:"mt-4 pt-3 border-t",children:i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[i.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[i.jsx("p",{className:"text-lg font-bold text-green-600",children:w.filter(W=>W.courierId===C.uid&&W.status==="delivered").length}),i.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),i.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[i.jsx("p",{className:"text-lg font-bold text-blue-600",children:w.filter(W=>W.courierId===C.uid&&W.status==="out_for_delivery").length}),i.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},C.uid)),h.couriers===0&&i.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),s==="admins"&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold",children:["   (",N.length,")"]}),i.jsxs("button",{onClick:()=>cn(!ln),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[i.jsx(rc,{className:"w-5 h-5"}),ln?"":" "]})]}),ln&&i.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[i.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),i.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),i.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[_.filter(C=>C.role==="customer").slice(0,10).map(C=>i.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold",children:C.name||" "}),i.jsx("p",{className:"text-sm text-gray-500",children:C.email})]}),i.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${C.name||C.email}  `,{title:"  "}))try{await ye(J(z,"users",C.uid),{role:"admin"}),e.success("     "),cn(!1),lt()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},C.uid)),_.filter(C=>C.role==="customer").length===0&&i.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),i.jsxs("div",{className:"border-t pt-4 mt-4",children:[i.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"email",placeholder:"admin@example.com",value:rs,onChange:C=>Cc(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),i.jsx("input",{type:"password",placeholder:"  (6   )",value:kr,onChange:C=>$i(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),i.jsx("input",{type:"text",placeholder:" ",value:ss,onChange:C=>Ys(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),i.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Bi,onChange:C=>zi(C.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),i.jsx("button",{onClick:Mc,disabled:mo||!rs.trim()||!kr.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:mo?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(rc,{className:"w-5 h-5"}),"  "]})}),i.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),i.jsx("div",{className:"border-t pt-4 mt-4",children:i.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),i.jsxs("div",{className:"space-y-4",children:[N.map(C=>i.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[i.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>Bn(Rt===C.uid?null:C.uid),children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:C.name||" "}),i.jsx("p",{className:"text-sm text-gray-600",children:C.email})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-left",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hj,{className:"w-4 h-4 text-green-600"}),i.jsxs("span",{className:"font-bold text-green-600",children:[C.walletBalance.toFixed(2)," ."]})]}),i.jsxs("p",{className:"text-xs text-gray-500",children:[": ",C.totalEarnings.toFixed(2)," . | ",C.restaurantsCount," "]})]}),Rt===C.uid?i.jsx(F5,{className:"w-5 h-5 text-gray-400"}):i.jsx(rj,{className:"w-5 h-5 text-gray-400"})]})]})}),Rt===C.uid&&i.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[i.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",C.restaurants.length,"):"]}),C.restaurants.length>0?i.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:C.restaurants.map(W=>i.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:W.logoUrl?i.jsx("img",{src:W.logoUrl,alt:W.name,className:"w-full h-full object-cover"}):i.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-semibold text-sm",children:W.name}),i.jsx("p",{className:"text-xs text-gray-500",children:W.city||" "})]})]},W.id))}):i.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),i.jsx("div",{className:"mt-4 pt-3 border-t",children:i.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[i.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[i.jsx("p",{className:"font-bold text-green-700",children:C.walletBalance.toFixed(2)}),i.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),i.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[i.jsx("p",{className:"font-bold text-blue-700",children:C.totalEarnings.toFixed(2)}),i.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),i.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[i.jsx("p",{className:"font-bold text-purple-700",children:w.filter(W=>W.referredBy===C.uid).length}),i.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},C.uid)),N.length===0&&i.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),s==="settings"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold",children:"  "}),O?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{j(!1),E(p)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),i.jsx("button",{onClick:Ih,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):i.jsx("button",{onClick:()=>j(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),O?i.jsx("input",{type:"number",value:x.deliveryFee||0,onChange:C=>E({...x,deliveryFee:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):i.jsxs("p",{className:"text-2xl font-bold",children:[p.deliveryFee||7," ."]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),O?i.jsx("input",{type:"number",step:"0.1",value:x.platformFee||1,onChange:C=>E({...x,platformFee:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):i.jsxs("p",{className:"text-2xl font-bold",children:[p.platformFee||1," ./"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),O?i.jsx("input",{type:"number",step:"0.05",value:x.adminCommissionRate||.75,onChange:C=>E({...x,adminCommissionRate:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):i.jsxs("p",{className:"text-2xl font-bold",children:[p.adminCommissionRate||.75," ./"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),O?i.jsx("input",{type:"number",value:x.minOrderAmount||0,onChange:C=>E({...x,minOrderAmount:Number(C.target.value)}),className:"w-full border rounded-xl p-3"}):i.jsxs("p",{className:"text-2xl font-bold",children:[p.minOrderAmount||20," ."]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),O?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"time",value:((Ro=x.workingHours)==null?void 0:Ro.open)||"09:00",onChange:C=>E({...x,workingHours:{...x.workingHours,open:C.target.value}}),className:"flex-1 border rounded-xl p-3"}),i.jsx("input",{type:"time",value:((Po=x.workingHours)==null?void 0:Po.close)||"23:00",onChange:C=>E({...x,workingHours:{...x.workingHours,close:C.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):i.jsxs("p",{className:"text-2xl font-bold",children:[((ta=p.workingHours)==null?void 0:ta.open)||"09:00"," - ",((na=p.workingHours)==null?void 0:na.close)||"23:00"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),O?i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:x.maintenanceMode||!1,onChange:C=>E({...x,maintenanceMode:C.target.checked}),className:"w-6 h-6"}),i.jsx("span",{className:"text-lg",children:x.maintenanceMode?"":""})]}):i.jsx("p",{className:`text-2xl font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})}),i.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[i.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),i.jsxs("div",{className:"text-sky-800 space-y-2",children:[i.jsxs("p",{children:[" ",i.jsx("strong",{children:" :"})," ",p.platformFee||1," .   "]}),i.jsxs("p",{children:[" ",i.jsx("strong",{children:" :"})," ",p.adminCommissionRate||.75," .   "]}),i.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[i.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),i.jsxs("p",{children:[" ",i.jsx("strong",{children:"    :"})]}),i.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[i.jsxs("li",{children:["  : 5  ",p.adminCommissionRate||.75," = ",i.jsxs("strong",{children:[(5*(p.adminCommissionRate||.75)).toFixed(2)," ."]})]}),i.jsxs("li",{children:["  : 5  ",p.platformFee||1," = ",i.jsxs("strong",{children:[(5*(p.platformFee||1)).toFixed(2)," ."]})]}),i.jsxs("li",{className:"text-green-700",children:[": ",i.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),i.jsxs("p",{className:"mt-2",children:[" ",i.jsx("strong",{children:"    :"})]}),i.jsx("ul",{className:"mr-6 list-disc text-sm",children:i.jsxs("li",{children:["    : 5  1.75 = ",i.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),s==="tasks"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-bold",children:"   "}),i.jsxs("button",{onClick:()=>Xi(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[i.jsx(Ic,{className:"w-5 h-5"})," "]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(C=>i.jsxs("button",{onClick:()=>cr(C),className:`px-4 py-2 rounded-xl font-semibold transition ${qn===C?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[C==="all"&&" ",C==="pending"&&"  ",C==="in_progress"&&"  ",C==="completed"&&" ",C==="cancelled"&&" "]},C))}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:zn.filter(C=>C.status==="pending").length}),i.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),i.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:zn.filter(C=>C.status==="in_progress").length}),i.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),i.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-green-600",children:zn.filter(C=>C.status==="completed").length}),i.jsx("p",{className:"text-sm text-green-700",children:""})]}),i.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-red-600",children:zn.filter(C=>C.status==="cancelled").length}),i.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:zn.filter(C=>qn==="all"||C.status===qn).length===0?i.jsxs("div",{className:"p-8 text-center text-gray-500",children:[i.jsx("p",{className:"text-4xl mb-2",children:""}),i.jsxs("p",{children:["   ",qn!=="all"&&"  "]})]}):i.jsx("div",{className:"divide-y",children:zn.filter(C=>qn==="all"||C.status===qn).map(C=>{var K,le,be;const W=_.find(Ce=>Ce.uid===C.assignedTo);return i.jsx("div",{className:"p-4 hover:bg-gray-50",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${C.priority==="high"?"bg-red-100 text-red-700":C.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:C.priority==="high"?" ":C.priority==="medium"?" ":" "}),i.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${C.status==="pending"?"bg-yellow-100 text-yellow-700":C.status==="in_progress"?"bg-blue-100 text-blue-700":C.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[C.status==="pending"&&"  ",C.status==="in_progress"&&"  ",C.status==="completed"&&" ",C.status==="cancelled"&&" "]})]}),i.jsx("h3",{className:"font-bold text-gray-800",children:C.title}),C.description&&i.jsx("p",{className:"text-sm text-gray-600 mt-1",children:C.description}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[i.jsxs("span",{children:[" ",(W==null?void 0:W.name)||C.assignedToName||" "]}),C.dueDate&&i.jsxs("span",{children:[" ",new Date(C.dueDate).toLocaleDateString("ar-SA")]}),i.jsxs("span",{children:[" ",((be=(le=(K=C.createdAt)==null?void 0:K.toDate)==null?void 0:le.call(K))==null?void 0:be.toLocaleDateString("ar-SA"))||" "]})]}),C.notes&&i.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",C.notes]})]}),i.jsxs("div",{className:"flex flex-col gap-2",children:[C.status==="pending"&&i.jsx("button",{onClick:async()=>{try{await ye(J(z,"tasks",C.id),{status:"in_progress",updatedAt:ae()}),e.success("  "),lt()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(C.status==="pending"||C.status==="in_progress")&&i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:async()=>{try{await ye(J(z,"tasks",C.id),{status:"completed",completedAt:ae(),updatedAt:ae()}),e.success("  "),lt()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),i.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await ye(J(z,"tasks",C.id),{status:"cancelled",updatedAt:ae()}),e.success("  "),lt()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),i.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await Yn(J(z,"tasks",C.id)),e.success("  "),lt()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},C.id)})})}),Zs&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),i.jsx("input",{type:"text",value:mt,onChange:C=>Yi(C.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),i.jsx("textarea",{value:os,onChange:C=>Ir(C.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),i.jsxs("select",{value:Ji,onChange:C=>jo(C.target.value),className:"w-full border rounded-xl px-4 py-2",children:[i.jsx("option",{value:"",children:"--   --"}),_.filter(C=>C.role==="admin").map(C=>i.jsx("option",{value:C.uid,children:C.name||C.email},C.uid))]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),i.jsxs("select",{value:Sr,onChange:C=>Eo(C.target.value),className:"w-full border rounded-xl px-4 py-2",children:[i.jsx("option",{value:"low",children:" "}),i.jsx("option",{value:"medium",children:" "}),i.jsx("option",{value:"high",children:" "})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),i.jsx("input",{type:"date",value:Oc,onChange:C=>ls(C.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),i.jsxs("div",{className:"flex gap-3 mt-6",children:[i.jsx("button",{onClick:()=>{Xi(!1),Yi(""),Ir(""),jo(""),Eo("medium"),ls("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),i.jsx("button",{onClick:async()=>{if(!mt.trim()||!Ji){e.error("   ");return}Zi(!0);try{const C=_.find(W=>W.uid===Ji);await er(ue(z,"tasks"),{title:mt.trim(),description:os.trim(),assignedTo:Ji,assignedToName:(C==null?void 0:C.name)||(C==null?void 0:C.email)||"",status:"pending",priority:Sr,dueDate:Oc||null,createdBy:t==null?void 0:t.uid,createdAt:ae(),updatedAt:ae(),completedAt:null,notes:""}),e.success("   "),Xi(!1),Yi(""),Ir(""),jo(""),Eo("medium"),ls(""),lt()}catch(C){console.error(C),e.error("   ")}finally{Zi(!1)}},disabled:ko,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:ko?" ...":" "})]})]})})]}),s==="tools"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx("h2",{className:"text-xl font-bold",children:"  "}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsxs("button",{onClick:()=>{const C={exportDate:new Date().toISOString(),users:_.length,restaurants:T.length,orders:w.length,admins:N.length,stats:h,settings:p},W=new Blob([JSON.stringify(C,null,2)],{type:"application/json"}),K=URL.createObjectURL(W),le=document.createElement("a");le.href=K,le.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:" "}),i.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),i.jsxs("button",{onClick:()=>{const C=[[" ","","","",""].join(","),...w.map(be=>{var Ce,Je,yt;return[be.id.slice(-8),be.restaurantName||" ",be.total,be.status,((yt=(Je=(Ce=be.createdAt)==null?void 0:Ce.toDate)==null?void 0:Je.call(Ce))==null?void 0:yt.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),W=new Blob(["\uFEFF"+C],{type:"text/csv;charset=utf-8"}),K=URL.createObjectURL(W),le=document.createElement("a");le.href=K,le.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:" "}),i.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),i.jsxs("button",{onClick:()=>{const C=[["","","",""].join(","),..._.map(be=>[be.name||" ",be.email,be.role,be.phone||""].join(","))].join(`
`),W=new Blob(["\uFEFF"+C],{type:"text/csv;charset=utf-8"}),K=URL.createObjectURL(W),le=document.createElement("a");le.href=K,le.download=`users-${new Date().toISOString().split("T")[0]}.csv`,le.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:" "}),i.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("button",{onClick:async()=>{const C=w.filter(K=>K.status==="pending");if(C.length===0){e.info("   ");return}if(await n.confirm(`  ${C.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(C.map(K=>ye(J(z,"orders",K.id),{status:"cancelled",updatedAt:ae()}))),e.success(`  ${C.length} `),lt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:"  "}),i.jsxs("p",{className:"text-xs opacity-75",children:[w.filter(C=>C.status==="pending").length,"  "]})]})]}),i.jsxs("button",{onClick:async()=>{const C=new Date;C.setMonth(C.getMonth()-3);const W=w.filter(le=>{var Ce,Je;return(((Je=(Ce=le.createdAt)==null?void 0:Ce.toDate)==null?void 0:Je.call(Ce))||new Date)<C&&(le.status==="delivered"||le.status==="cancelled")});if(W.length===0){e.info("   ");return}if(await n.confirm(`  ${W.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all(W.map(le=>Yn(J(z,"orders",le.id)))),e.success(`  ${W.length}  `),lt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"font-bold",children:"  "}),i.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"font-semibold",children:"Firestore"})]}),i.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"font-semibold",children:"Authentication"})]}),i.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"font-semibold",children:"Storage"})]}),i.jsxs("a",{href:`https://console.firebase.google.com/project/${Tn.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),i.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[i.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"Project ID"}),i.jsx("p",{className:"font-mono",children:Tn.projectId})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),i.jsx("p",{className:"font-mono",children:Tn.storageBucket})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:" "}),i.jsx("p",{className:"font-bold",children:p.appVersion||"1.0.0"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-gray-500",children:" "}),i.jsx("p",{className:`font-bold ${p.maintenanceMode?"text-red-600":"text-green-600"}`,children:p.maintenanceMode?" ":" "})]})]})]})]}),s==="licenses"&&i.jsx(bD,{restaurants:T,onUpdate:So,toast:e,dialog:n}),i.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:i.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[i.jsxs("span",{children:[" ",t==null?void 0:t.email]}),i.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),i.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},bD=({restaurants:t,onUpdate:e,toast:n,dialog:r})=>{const[s,a]=I.useState("pending"),[o,c]=I.useState({}),[u,d]=I.useState(null),[h,m]=I.useState(""),[p,v]=I.useState(null),[_,R]=I.useState(new Set),[T,b]=I.useState(""),[w,y]=I.useState(!1),N=t.filter(V=>V.commercialLicenseUrl),A=t.filter(V=>!V.commercialLicenseUrl),O=N.filter(V=>s==="all"?!0:s==="missing"?!1:V.licenseStatus===s||!V.licenseStatus&&s==="pending"),j={all:N.length,pending:N.filter(V=>!V.licenseStatus||V.licenseStatus==="pending").length,approved:N.filter(V=>V.licenseStatus==="approved").length,rejected:N.filter(V=>V.licenseStatus==="rejected").length,missing:A.length},x=async(V,$)=>{if(!$.trim()){n.warning("  ");return}v(V.id);try{await er(ue(z,"notifications"),{type:"license_reminder",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:" :   ",message:$,read:!1,createdAt:ae()}),n.success(`    ${V.name}`),m("")}catch(B){n.error("  : "+(B.message||"  "))}finally{v(null)}},E=async()=>{if(!T.trim()){n.warning("  ");return}const V=_.size>0?A.filter(B=>_.has(B.id)):A;if(V.length===0){n.warning("    ");return}if(await r.confirm(`       ${V.length} `,{title:"  "})){y(!0);try{const B=V.map(F=>er(ue(z,"notifications"),{type:"license_reminder",recipientId:F.ownerId,recipientType:"owner",restaurantId:F.id,restaurantName:F.name,title:" :   ",message:T,read:!1,createdAt:ae()}));await Promise.all(B),n.success(`    ${V.length}   `),b(""),R(new Set)}catch(B){n.error("   : "+(B.message||"  "))}finally{y(!1)}}},k=()=>{_.size===A.length?R(new Set):R(new Set(A.map(V=>V.id)))},P=V=>{const $=new Set(_);$.has(V)?$.delete(V):$.add(V),R($)},L=async(V,$)=>{const B=o[V]||"";if($==="rejected"&&!B.trim()){n.warning("   ");return}const F=$==="approved"?" ":"";if(await r.confirm(`    ${F}   `,{title:`${F} `})){d(V);try{await ye(J(z,"restaurants",V),{licenseStatus:$,licenseNotes:$==="rejected"?B:"",updatedAt:ae()}),n.success($==="approved"?"    ":"  "),c(re=>({...re,[V]:""})),e()}catch(re){n.error(" : "+(re.message||"  "))}finally{d(null)}}},D=async(V,$)=>{const B=" ";if(await r.confirm(`     ${B}  "${V.name}"
      .`,{title:`  ${B}`})){d(V.id);try{const X={licenseStatus:null,licenseNotes:"",updatedAt:ae(),commercialLicenseUrl:null};await ye(J(z,"restaurants",V.id),X),await er(ue(z,"notifications"),{type:"license_deleted",recipientId:V.ownerId,recipientType:"owner",restaurantId:V.id,restaurantName:V.name,title:`   ${B}`,message:`  ${B}  .         .`,read:!1,createdAt:ae()}),n.success(`  ${B}    `),e()}catch(X){n.error("  : "+(X.message||"  "))}finally{d(null)}}},ie=V=>{switch(V){case"approved":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[i.jsx(Bt,{className:"w-3 h-3"})," "]});case"rejected":return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[i.jsx(pi,{className:"w-3 h-3"})," "]});default:return i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[i.jsx(wr,{className:"w-3 h-3"}),"  "]})}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[i.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[i.jsx(Pv,{className:"w-6 h-6 text-sky-500"})," "]}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:["pending","approved","rejected","all","missing"].map(V=>i.jsxs("button",{onClick:()=>a(V),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${s===V?V==="missing"?"bg-orange-500 text-white":"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[V==="all"&&` (${j.all})`,V==="pending"&&`  (${j.pending})`,V==="approved"&&` (${j.approved})`,V==="rejected"&&` (${j.rejected})`,V==="missing"&&`   (${j.missing})`]},V))})]}),s==="missing"&&i.jsx("div",{className:"space-y-4",children:A.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-400",children:[i.jsx(Bt,{className:"w-16 h-16 mx-auto mb-4 text-green-400"}),i.jsx("p",{className:"text-green-600 font-semibold",children:"    "})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 border border-orange-200 rounded-2xl p-5",children:[i.jsx("h3",{className:"font-bold text-orange-800 mb-3 flex items-center gap-2",children:"   "}),i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",checked:_.size===A.length,onChange:k,className:"w-5 h-5 rounded border-orange-300 text-orange-500 focus:ring-orange-500"}),i.jsxs("span",{className:"text-sm text-orange-700",children:["  (",A.length,")"]})]}),_.size>0&&i.jsxs("span",{className:"text-sm bg-orange-200 text-orange-800 px-2 py-1 rounded-full",children:[": ",_.size]})]}),i.jsx("textarea",{placeholder:"      (    )...",value:T,onChange:V=>b(V.target.value),className:"w-full border border-orange-200 rounded-xl p-3 text-sm resize-none h-24 focus:ring-2 focus:ring-orange-400 focus:border-transparent"}),i.jsx("button",{onClick:E,disabled:w||!T.trim(),className:"mt-3 w-full flex items-center justify-center gap-2 bg-orange-500 hover:bg-orange-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50 disabled:cursor-not-allowed",children:w?i.jsxs(i.Fragment,{children:[i.jsx(pn,{className:"w-5 h-5 animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:["   ",_.size>0?_.size:A.length," "]})})]}),i.jsx("div",{className:"grid gap-3",children:A.map(V=>i.jsx("div",{className:"bg-white border rounded-2xl p-4 shadow-sm hover:shadow-md transition",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("input",{type:"checkbox",checked:_.has(V.id),onChange:()=>P(V.id),className:"w-5 h-5 mt-1 rounded border-gray-300 text-orange-500 focus:ring-orange-500"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-gray-800",children:V.name}),i.jsx("p",{className:"text-sm text-gray-500",children:V.city||" "})]}),i.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-orange-100 text-orange-700 text-xs font-semibold",children:[i.jsx(pi,{className:"w-3 h-3"}),"  "]})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 text-sm text-gray-600 mb-3",children:[V.email&&i.jsxs("span",{children:[" ",V.email]}),V.phone&&i.jsxs("span",{children:[" ",V.phone]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",placeholder:" ...",value:p===V.id?h:"",onChange:$=>{v(V.id),m($.target.value)},onFocus:()=>v(V.id),className:"flex-1 border rounded-lg px-3 py-2 text-sm"}),i.jsx("button",{onClick:()=>x(V,h),disabled:p===V.id&&!h.trim(),className:"px-4 py-2 bg-sky-500 hover:bg-sky-600 text-white rounded-lg text-sm font-medium transition disabled:opacity-50",children:""})]})]})]})},V.id))})]})}),s!=="missing"&&O.length===0?i.jsxs("div",{className:"text-center py-12 text-gray-400",children:[i.jsx(Pv,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),i.jsxs("p",{children:["   ",s==="pending"?" ":s==="approved"?" ":s==="rejected"?"":""]})]}):s!=="missing"&&i.jsx("div",{className:"grid gap-4",children:O.map(V=>i.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg",children:V.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[V.city||" ","  ",V.email||" "]})]}),ie(V.licenseStatus)]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:V.commercialLicenseUrl&&i.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"  "}),i.jsx("button",{onClick:()=>D(V),disabled:u===V.id,className:"p-1.5 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition",title:"  ",children:i.jsx(an,{className:"w-4 h-4"})})]}),i.jsxs("a",{href:V.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[i.jsx(Z5,{className:"w-4 h-4"})," "]})]})}),V.commercialLicenseUrl&&i.jsxs("button",{onClick:()=>D(V),disabled:u===V.id,className:"w-full flex items-center justify-center gap-2 mb-4 py-2 px-4 border-2 border-dashed border-red-200 text-red-500 hover:bg-red-50 hover:border-red-300 rounded-xl text-sm font-medium transition",children:[i.jsx(an,{className:"w-4 h-4"}),"    "]}),V.licenseStatus==="rejected"&&V.licenseNotes&&i.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[i.jsx("strong",{children:" :"})," ",V.licenseNotes]}),V.licenseStatus!=="approved"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{placeholder:" ( )...",value:o[V.id]||"",onChange:$=>c(B=>({...B,[V.id]:$.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>L(V.id,"approved"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(Bt,{className:"w-5 h-5"}),""]}),i.jsxs("button",{onClick:()=>L(V.id,"rejected"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(pi,{className:"w-5 h-5"}),""]})]})]}),V.licenseStatus==="approved"&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("textarea",{placeholder:"  ...",value:o[V.id]||"",onChange:$=>c(B=>({...B,[V.id]:$.target.value})),className:"w-full border border-yellow-200 rounded-xl p-3 text-sm resize-none h-20 focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs("button",{onClick:()=>L(V.id,"rejected"),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-yellow-500 hover:bg-yellow-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(pi,{className:"w-5 h-5"})," "]}),i.jsxs("button",{onClick:()=>D(V),disabled:u===V.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[i.jsx(an,{className:"w-5 h-5"}),"  "]})]})]})]},V.id))})]})},ND="afrtalbyt2026@gmail.com",jD=()=>{const t=Yt(),[e,n]=I.useState(""),[r,s]=I.useState(""),[a,o]=I.useState(!1),[c,u]=I.useState(""),[d,h]=I.useState(!1),m=async p=>{if(p.preventDefault(),u(""),e.trim().toLowerCase()!==ND){u("        ");return}if(r.length<6){u("     6   ");return}o(!0);try{const _=(await yl(Ln,e.trim(),r)).user.uid;await fn(J(z,"users",_),{email:e.trim(),name:" ",role:"developer",createdAt:ae()}),h(!0),setTimeout(()=>{t("/developer")},2e3)}catch(v){console.error("Setup error:",v),v.code==="auth/email-already-in-use"?u("      "):v.code==="auth/invalid-email"?u("   "):v.code==="auth/weak-password"?u("   "):u(" : "+(v.message||" "))}finally{o(!1)}};return d?i.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:i.jsxs("div",{className:"text-center bg-gradient-to-br from-green-500 to-emerald-600 text-white p-10 rounded-3xl shadow-2xl",children:[i.jsx(Bt,{className:"w-20 h-20 mx-auto mb-4"}),i.jsx("h1",{className:"text-2xl font-bold mb-2",children:"    !"}),i.jsx("p",{children:"   ..."})]})}):i.jsx("div",{className:"min-h-[70vh] flex items-center justify-center",children:i.jsx("div",{className:"w-full max-w-md",children:i.jsxs("div",{className:"bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 rounded-3xl shadow-2xl overflow-hidden",children:[i.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 p-6 text-center",children:[i.jsx("div",{className:"w-20 h-20 bg-white/20 backdrop-blur rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Sc,{className:"w-10 h-10 text-white"})}),i.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center justify-center gap-2",children:[i.jsx(Fn,{className:"w-6 h-6"}),"  ",i.jsx(Fn,{className:"w-6 h-6"})]}),i.jsx("p",{className:"text-white/80 text-sm mt-2",children:"   "})]}),i.jsxs("form",{onSubmit:m,className:"p-6 space-y-5",children:[c&&i.jsx("div",{className:"bg-red-500/20 border border-red-500/50 text-red-400 rounded-xl p-3 text-sm text-center",children:c}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[i.jsx(px,{className:"w-4 h-4"})," "]}),i.jsx("input",{type:"email",value:e,onChange:p=>n(p.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-gray-400 text-sm mb-2 flex items-center gap-2",children:[i.jsx(f6,{className:"w-4 h-4"})," "]}),i.jsx("input",{type:"password",value:r,onChange:p=>s(p.target.value),placeholder:"  ",className:"w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),i.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 text-white font-bold rounded-xl hover:opacity-90 transition-all disabled:opacity-50 flex items-center justify-center gap-2",children:a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})," ..."]}):i.jsxs(i.Fragment,{children:[i.jsx(fx,{className:"w-5 h-5"}),"  "]})}),i.jsx("p",{className:"text-gray-500 text-xs text-center",children:"      "})]})]})})})},vt=({children:t})=>{const{user:e,loading:n}=qe();return n?i.jsx("div",{className:"p-8 text-center",children:" ..."}):e?i.jsx(i.Fragment,{children:t}):i.jsx(ag,{to:"/login",replace:!0})},ED=()=>{var c;const[t,e]=I.useState([]),[n,r]=I.useState(!0),[s,a]=I.useState(null);I.useEffect(()=>{(async()=>{try{a(null);const u=at(ue(z,"orders"),Nr("createdAt","desc"),Zg(10)),h=(await $e(u)).docs.map(m=>{var v,_,R,T,b,w;const p=m.data();return{id:m.id,restaurantId:p.restaurantId??null,firstItemOwnerId:((_=(v=p==null?void 0:p.items)==null?void 0:v[0])==null?void 0:_.ownerId)??null,customerId:p.customerId??null,createdAtISO:((w=(b=(T=(R=p.createdAt)==null?void 0:R.toDate)==null?void 0:T.call(R))==null?void 0:b.toISOString)==null?void 0:w.call(b))??null}});e(h)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const h=(await $e(ue(z,"orders"))).docs.map(m=>{var v,_,R,T,b,w;const p=m.data();return{id:m.id,restaurantId:p.restaurantId??null,firstItemOwnerId:((_=(v=p==null?void 0:p.items)==null?void 0:v[0])==null?void 0:_.ownerId)??null,customerId:p.customerId??null,createdAtISO:((w=(b=(T=(R=p.createdAt)==null?void 0:R.toDate)==null?void 0:T.call(R))==null?void 0:b.toISOString)==null?void 0:w.call(b))??null}});e(h),a("     createdAt     .")}catch(d){a("     : "+((d==null?void 0:d.message)||d))}else a("  : "+((u==null?void 0:u.message)||u))}finally{r(!1)}})()},[]);const o=(c=mn.options)==null?void 0:c.projectId;return i.jsxs("div",{className:"p-4 space-y-3",children:[i.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),i.jsxs("div",{className:"text-sm",children:["ProjectId: ",i.jsx("b",{children:String(o)})]}),s&&i.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&i.jsx("div",{children:" Loading"}),!n&&t.length===0&&i.jsxs("div",{className:"text-gray-600",children:["     collection: ",i.jsx("code",{children:"orders"}),"   ."]}),t.map(u=>i.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[i.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),i.jsxs("div",{children:["restaurantId: ",i.jsx("b",{children:String(u.restaurantId)})]}),i.jsxs("div",{children:["items[0].ownerId: ",i.jsx("b",{children:String(u.firstItemOwnerId)})]}),i.jsxs("div",{children:["customerId: ",i.jsx("b",{children:String(u.customerId)})]}),i.jsxs("div",{children:["createdAt: ",i.jsx("b",{children:u.createdAtISO||""})]})]},u.id))]})};function kD(){const{locationRequired:t,refreshUserData:e,loading:n}=qe();return!n&&t?i.jsx(R3,{onLocationSaved:e}):i.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[i.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[i.jsx(A3,{}),i.jsx(T3,{})]}),i.jsx("div",{className:"h-[100px] sm:h-[120px]"}),i.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:i.jsxs(qk,{children:[i.jsx(je,{path:"/",element:i.jsx(P3,{})}),i.jsx(je,{path:"/restaurants",element:i.jsx(L3,{})}),i.jsx(je,{path:"/menu",element:i.jsx(U3,{})}),i.jsx(je,{path:"/cart",element:i.jsx($3,{})}),i.jsx(je,{path:"/login",element:i.jsx(B3,{})}),i.jsx(je,{path:"/customer-login",element:i.jsx(q3,{})}),i.jsx(je,{path:"/register",element:i.jsx(z3,{})}),i.jsx(je,{path:"/privacy-policy",element:i.jsx(H3,{})}),i.jsx(je,{path:"/terms",element:i.jsx(W3,{})}),i.jsx(je,{path:"/account-deleted",element:i.jsx(K3,{})}),i.jsx(je,{path:"/setup-dev",element:i.jsx(jD,{})}),i.jsx(je,{path:"/chat",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["customer","courier","owner","admin"],children:i.jsx(gD,{})})})}),i.jsx(je,{path:"/notifications",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["customer","courier","owner","admin","developer"],children:i.jsx(xD,{})})})}),i.jsx(je,{path:"/checkout",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["customer","admin"],children:i.jsx(X3,{})})})}),i.jsx(je,{path:"/orders",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["customer","admin"],children:i.jsx(Y3,{})})})}),i.jsx(je,{path:"/profile",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["customer","courier","owner","admin","developer"],children:i.jsx(J3,{})})})}),i.jsx(je,{path:"/owner",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["owner"],children:i.jsx(Z3,{})})})}),i.jsx(je,{path:"/owner/menu",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["owner"],children:i.jsx(nD,{})})})}),i.jsx(je,{path:"/owner/orders",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["owner"],children:i.jsx(sD,{})})})}),i.jsx(je,{path:"/owner/edit",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["owner"],children:i.jsx(iD,{})})})}),i.jsx(je,{path:"/owner/courier-requests",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["owner","developer"],children:i.jsx(aD,{})})})}),i.jsx(je,{path:"/owner/packages",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["owner"],children:i.jsx(oD,{})})})}),i.jsx(je,{path:"/owner/promotion",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["owner"],children:i.jsx(lD,{})})})}),i.jsx(je,{path:"/courier",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["courier","developer"],children:i.jsx(cD,{})})})}),i.jsx(je,{path:"/courier/hiring",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["courier","developer"],children:i.jsx(uD,{})})})}),i.jsx(je,{path:"/admin",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["admin","developer"],children:i.jsx(yD,{})})})}),i.jsx(je,{path:"/admin/restaurants",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["admin","developer"],children:i.jsx(vD,{})})})}),i.jsx(je,{path:"/admin/orders",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["admin","developer"],children:i.jsx(wD,{})})})}),i.jsx(je,{path:"/developer",element:i.jsx(vt,{children:i.jsx(Pe,{allow:["developer","admin"],children:i.jsx(_D,{})})})}),i.jsx(je,{path:"/__debug_orders",element:i.jsx(ED,{})}),i.jsx(je,{path:"*",element:i.jsx(ag,{to:"/",replace:!0})})]})}),i.jsx(C3,{})]})}I.createContext(void 0);const TD=({children:t})=>i.jsx(i.Fragment,{children:t});Lf.createRoot(document.getElementById("root")).render(i.jsx(Yv.StrictMode,{children:i.jsx(Jk,{children:i.jsx(O3,{children:i.jsx(I3,{children:i.jsx(m5,{children:i.jsxs(TD,{children:["   ",i.jsx(kD,{})]})})})})})}));
