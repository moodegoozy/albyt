function Z1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function eE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xv={exports:{}},vd={},vv={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wl=Symbol.for("react.element"),tE=Symbol.for("react.portal"),nE=Symbol.for("react.fragment"),rE=Symbol.for("react.strict_mode"),sE=Symbol.for("react.profiler"),iE=Symbol.for("react.provider"),oE=Symbol.for("react.context"),aE=Symbol.for("react.forward_ref"),lE=Symbol.for("react.suspense"),cE=Symbol.for("react.memo"),uE=Symbol.for("react.lazy"),gy=Symbol.iterator;function dE(t){return t===null||typeof t!="object"?null:(t=gy&&t[gy]||t["@@iterator"],typeof t=="function"?t:null)}var _v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wv=Object.assign,bv={};function $o(t,e,n){this.props=t,this.context=e,this.refs=bv,this.updater=n||_v}$o.prototype.isReactComponent={};$o.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nv(){}Nv.prototype=$o.prototype;function Mm(t,e,n){this.props=t,this.context=e,this.refs=bv,this.updater=n||_v}var Vm=Mm.prototype=new Nv;Vm.constructor=Mm;wv(Vm,$o.prototype);Vm.isPureReactComponent=!0;var yy=Array.isArray,Ev=Object.prototype.hasOwnProperty,Um={current:null},jv={key:!0,ref:!0,__self:!0,__source:!0};function kv(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Ev.call(e,r)&&!jv.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Wl,type:t,key:i,ref:a,props:s,_owner:Um.current}}function hE(t,e){return{$$typeof:Wl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wl}function fE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xy=/\/+/g;function vh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fE(""+t.key):e.toString(36)}function ou(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Wl:case tE:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+vh(a,0):r,yy(s)?(n="",t!=null&&(n=t.replace(xy,"$&/")+"/"),ou(s,e,n,"",function(d){return d})):s!=null&&(Fm(s)&&(s=hE(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(xy,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",yy(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+vh(i,c);a+=ou(i,e,n,u,s)}else if(u=dE(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+vh(i,c++),a+=ou(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Dc(t,e,n){if(t==null)return t;var r=[],s=0;return ou(t,r,"","",function(i){return e.call(n,i,s++)}),r}function mE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qt={current:null},au={transition:null},pE={ReactCurrentDispatcher:qt,ReactCurrentBatchConfig:au,ReactCurrentOwner:Um};function Tv(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:Dc,forEach:function(t,e,n){Dc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Dc(t,function(){e++}),e},toArray:function(t){return Dc(t,function(e){return e})||[]},only:function(t){if(!Fm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=$o;ce.Fragment=nE;ce.Profiler=sE;ce.PureComponent=Mm;ce.StrictMode=rE;ce.Suspense=lE;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pE;ce.act=Tv;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=wv({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Um.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Ev.call(e,u)&&!jv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Wl,type:t.type,key:s,ref:i,props:r,_owner:a}};ce.createContext=function(t){return t={$$typeof:oE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iE,_context:t},t.Consumer=t};ce.createElement=kv;ce.createFactory=function(t){var e=kv.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:aE,render:t}};ce.isValidElement=Fm;ce.lazy=function(t){return{$$typeof:uE,_payload:{_status:-1,_result:t},_init:mE}};ce.memo=function(t,e){return{$$typeof:cE,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};ce.unstable_act=Tv;ce.useCallback=function(t,e){return qt.current.useCallback(t,e)};ce.useContext=function(t){return qt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return qt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return qt.current.useEffect(t,e)};ce.useId=function(){return qt.current.useId()};ce.useImperativeHandle=function(t,e,n){return qt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return qt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return qt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return qt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return qt.current.useReducer(t,e,n)};ce.useRef=function(t){return qt.current.useRef(t)};ce.useState=function(t){return qt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return qt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return qt.current.useTransition()};ce.version="18.3.1";vv.exports=ce;var I=vv.exports;const Iv=eE(I),gE=Z1({__proto__:null,default:Iv},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yE=I,xE=Symbol.for("react.element"),vE=Symbol.for("react.fragment"),_E=Object.prototype.hasOwnProperty,wE=yE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bE={key:!0,ref:!0,__self:!0,__source:!0};function Sv(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)_E.call(e,r)&&!bE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:xE,type:t,key:i,ref:a,props:s,_owner:wE.current}}vd.Fragment=vE;vd.jsx=Sv;vd.jsxs=Sv;xv.exports=vd;var o=xv.exports,df={},Cv={exports:{}},yn={},Rv={exports:{}},Av={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(H,ee){var ne=H.length;H.push(ee);e:for(;0<ne;){var _e=ne-1>>>1,xe=H[_e];if(0<s(xe,ee))H[_e]=ee,H[ne]=xe,ne=_e;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ee=H[0],ne=H.pop();if(ne!==ee){H[0]=ne;e:for(var _e=0,xe=H.length,Fe=xe>>>1;_e<Fe;){var tn=2*(_e+1)-1,Rn=H[tn],nn=tn+1,rn=H[nn];if(0>s(Rn,ne))nn<xe&&0>s(rn,Rn)?(H[_e]=rn,H[nn]=ne,_e=nn):(H[_e]=Rn,H[tn]=ne,_e=tn);else if(nn<xe&&0>s(rn,ne))H[_e]=rn,H[nn]=ne,_e=nn;else break e}}return ee}function s(H,ee){var ne=H.sortIndex-ee.sortIndex;return ne!==0?ne:H.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var u=[],d=[],f=1,m=null,g=3,w=!1,C=!1,T=!1,R=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(H){for(var ee=n(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=H)r(d),ee.sortIndex=ee.expirationTime,e(u,ee);else break;ee=n(d)}}function b(H){if(T=!1,v(H),!C)if(n(u)!==null)C=!0,ft(O);else{var ee=n(d);ee!==null&&Ge(b,ee.startTime-H)}}function O(H,ee){C=!1,T&&(T=!1,x(y),y=-1),w=!0;var ne=g;try{for(v(ee),m=n(u);m!==null&&(!(m.expirationTime>ee)||H&&!P());){var _e=m.callback;if(typeof _e=="function"){m.callback=null,g=m.priorityLevel;var xe=_e(m.expirationTime<=ee);ee=t.unstable_now(),typeof xe=="function"?m.callback=xe:m===n(u)&&r(u),v(ee)}else r(u);m=n(u)}if(m!==null)var Fe=!0;else{var tn=n(d);tn!==null&&Ge(b,tn.startTime-ee),Fe=!1}return Fe}finally{m=null,g=ne,w=!1}}var L=!1,_=null,y=-1,j=5,S=-1;function P(){return!(t.unstable_now()-S<j)}function D(){if(_!==null){var H=t.unstable_now();S=H;var ee=!0;try{ee=_(!0,H)}finally{ee?A():(L=!1,_=null)}}else L=!1}var A;if(typeof N=="function")A=function(){N(D)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ke=te.port2;te.port1.onmessage=D,A=function(){ke.postMessage(null)}}else A=function(){R(D,0)};function ft(H){_=H,L||(L=!0,A())}function Ge(H,ee){y=R(function(){H(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){C||w||(C=!0,ft(O))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(H){switch(g){case 1:case 2:case 3:var ee=3;break;default:ee=g}var ne=g;g=ee;try{return H()}finally{g=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ne=g;g=H;try{return ee()}finally{g=ne}},t.unstable_scheduleCallback=function(H,ee,ne){var _e=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?_e+ne:_e):ne=_e,H){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ne+xe,H={id:f++,callback:ee,priorityLevel:H,startTime:ne,expirationTime:xe,sortIndex:-1},ne>_e?(H.sortIndex=ne,e(d,H),n(u)===null&&H===n(d)&&(T?(x(y),y=-1):T=!0,Ge(b,ne-_e))):(H.sortIndex=xe,e(u,H),C||w||(C=!0,ft(O))),H},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(H){var ee=g;return function(){var ne=g;g=ee;try{return H.apply(this,arguments)}finally{g=ne}}}})(Av);Rv.exports=Av;var NE=Rv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EE=I,gn=NE;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pv=new Set,dl={};function bi(t,e){To(t,e),To(t+"Capture",e)}function To(t,e){for(dl[t]=e,t=0;t<e.length;t++)Pv.add(e[t])}var Cr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hf=Object.prototype.hasOwnProperty,jE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vy={},_y={};function kE(t){return hf.call(_y,t)?!0:hf.call(vy,t)?!1:jE.test(t)?_y[t]=!0:(vy[t]=!0,!1)}function TE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function IE(t,e,n,r){if(e===null||typeof e>"u"||TE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ht(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var $m=/[\-:]([a-z])/g;function Bm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($m,Bm);It[e]=new Ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($m,Bm);It[e]=new Ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($m,Bm);It[e]=new Ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Ht(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function zm(t,e,n,r){var s=It.hasOwnProperty(e)?It[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(IE(e,n,s,r)&&(n=null),r||s===null?kE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vr=EE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oc=Symbol.for("react.element"),to=Symbol.for("react.portal"),no=Symbol.for("react.fragment"),qm=Symbol.for("react.strict_mode"),ff=Symbol.for("react.profiler"),Dv=Symbol.for("react.provider"),Ov=Symbol.for("react.context"),Hm=Symbol.for("react.forward_ref"),mf=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),Lv=Symbol.for("react.offscreen"),wy=Symbol.iterator;function Ta(t){return t===null||typeof t!="object"?null:(t=wy&&t[wy]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,_h;function Ma(t){if(_h===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_h=e&&e[1]||""}return`
`+_h+t}var wh=!1;function bh(t,e){if(!t||wh)return"";wh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,c=i.length-1;1<=a&&0<=c&&s[a]!==i[c];)c--;for(;1<=a&&0<=c;a--,c--)if(s[a]!==i[c]){if(a!==1||c!==1)do if(a--,c--,0>c||s[a]!==i[c]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=c);break}}}finally{wh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ma(t):""}function SE(t){switch(t.tag){case 5:return Ma(t.type);case 16:return Ma("Lazy");case 13:return Ma("Suspense");case 19:return Ma("SuspenseList");case 0:case 2:case 15:return t=bh(t.type,!1),t;case 11:return t=bh(t.type.render,!1),t;case 1:return t=bh(t.type,!0),t;default:return""}}function gf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case no:return"Fragment";case to:return"Portal";case ff:return"Profiler";case qm:return"StrictMode";case mf:return"Suspense";case pf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ov:return(t.displayName||"Context")+".Consumer";case Dv:return(t._context.displayName||"Context")+".Provider";case Hm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wm:return e=t.displayName||null,e!==null?e:gf(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return gf(t(e))}catch{}}return null}function CE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gf(e);case 8:return e===qm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ns(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Mv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RE(t){var e=Mv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Lc(t){t._valueTracker||(t._valueTracker=RE(t))}function Vv(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Mv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function yf(t,e){var n=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function by(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ns(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Uv(t,e){e=e.checked,e!=null&&zm(t,"checked",e,!1)}function xf(t,e){Uv(t,e);var n=Ns(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vf(t,e.type,n):e.hasOwnProperty("defaultValue")&&vf(t,e.type,Ns(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ny(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vf(t,e,n){(e!=="number"||Tu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Va=Array.isArray;function go(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ns(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function _f(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ey(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(Va(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ns(n)}}function Fv(t,e){var n=Ns(e.value),r=Ns(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $v(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$v(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Mc,Bv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Mc=Mc||document.createElement("div"),Mc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Mc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function hl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ga={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AE=["Webkit","ms","Moz","O"];Object.keys(Ga).forEach(function(t){AE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ga[e]=Ga[t]})});function zv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ga.hasOwnProperty(t)&&Ga[t]?(""+e).trim():e+"px"}function qv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=zv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PE=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bf(t,e){if(e){if(PE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Nf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ef=null;function Km(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var jf=null,yo=null,xo=null;function ky(t){if(t=Ql(t)){if(typeof jf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Ed(e),jf(t.stateNode,t.type,e))}}function Hv(t){yo?xo?xo.push(t):xo=[t]:yo=t}function Wv(){if(yo){var t=yo,e=xo;if(xo=yo=null,ky(t),e)for(t=0;t<e.length;t++)ky(e[t])}}function Kv(t,e){return t(e)}function Gv(){}var Nh=!1;function Qv(t,e,n){if(Nh)return t(e,n);Nh=!0;try{return Kv(t,e,n)}finally{Nh=!1,(yo!==null||xo!==null)&&(Gv(),Wv())}}function fl(t,e){var n=t.stateNode;if(n===null)return null;var r=Ed(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var kf=!1;if(Cr)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){kf=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{kf=!1}function DE(t,e,n,r,s,i,a,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Qa=!1,Iu=null,Su=!1,Tf=null,OE={onError:function(t){Qa=!0,Iu=t}};function LE(t,e,n,r,s,i,a,c,u){Qa=!1,Iu=null,DE.apply(OE,arguments)}function ME(t,e,n,r,s,i,a,c,u){if(LE.apply(this,arguments),Qa){if(Qa){var d=Iu;Qa=!1,Iu=null}else throw Error(z(198));Su||(Su=!0,Tf=d)}}function Ni(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ty(t){if(Ni(t)!==t)throw Error(z(188))}function VE(t){var e=t.alternate;if(!e){if(e=Ni(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ty(s),t;if(i===r)return Ty(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=i;break}if(c===r){a=!0,r=s,n=i;break}c=c.sibling}if(!a){for(c=i.child;c;){if(c===n){a=!0,n=i,r=s;break}if(c===r){a=!0,r=i,n=s;break}c=c.sibling}if(!a)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function Yv(t){return t=VE(t),t!==null?Jv(t):null}function Jv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Jv(t);if(e!==null)return e;t=t.sibling}return null}var Zv=gn.unstable_scheduleCallback,Iy=gn.unstable_cancelCallback,UE=gn.unstable_shouldYield,FE=gn.unstable_requestPaint,Ze=gn.unstable_now,$E=gn.unstable_getCurrentPriorityLevel,Gm=gn.unstable_ImmediatePriority,e_=gn.unstable_UserBlockingPriority,Cu=gn.unstable_NormalPriority,BE=gn.unstable_LowPriority,t_=gn.unstable_IdlePriority,_d=null,er=null;function zE(t){if(er&&typeof er.onCommitFiberRoot=="function")try{er.onCommitFiberRoot(_d,t,void 0,(t.current.flags&128)===128)}catch{}}var Fn=Math.clz32?Math.clz32:WE,qE=Math.log,HE=Math.LN2;function WE(t){return t>>>=0,t===0?32:31-(qE(t)/HE|0)|0}var Vc=64,Uc=4194304;function Ua(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var c=a&~s;c!==0?r=Ua(c):(i&=a,i!==0&&(r=Ua(i)))}else a=n&~s,a!==0?r=Ua(a):i!==0&&(r=Ua(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fn(e),s=1<<n,r|=t[n],e&=~s;return r}function KE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Fn(i),c=1<<a,u=s[a];u===-1?(!(c&n)||c&r)&&(s[a]=KE(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function If(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function n_(){var t=Vc;return Vc<<=1,!(Vc&4194240)&&(Vc=64),t}function Eh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Kl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fn(e),t[e]=n}function QE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Fn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Qm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var we=0;function r_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var s_,Xm,i_,o_,a_,Sf=!1,Fc=[],ds=null,hs=null,fs=null,ml=new Map,pl=new Map,es=[],XE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sy(t,e){switch(t){case"focusin":case"focusout":ds=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":pl.delete(e.pointerId)}}function Sa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ql(e),e!==null&&Xm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YE(t,e,n,r,s){switch(e){case"focusin":return ds=Sa(ds,t,e,n,r,s),!0;case"dragenter":return hs=Sa(hs,t,e,n,r,s),!0;case"mouseover":return fs=Sa(fs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ml.set(i,Sa(ml.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,pl.set(i,Sa(pl.get(i)||null,t,e,n,r,s)),!0}return!1}function l_(t){var e=Ys(t.target);if(e!==null){var n=Ni(e);if(n!==null){if(e=n.tag,e===13){if(e=Xv(n),e!==null){t.blockedOn=e,a_(t.priority,function(){i_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Cf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ef=r,n.target.dispatchEvent(r),Ef=null}else return e=Ql(n),e!==null&&Xm(e),t.blockedOn=n,!1;e.shift()}return!0}function Cy(t,e,n){lu(t)&&n.delete(e)}function JE(){Sf=!1,ds!==null&&lu(ds)&&(ds=null),hs!==null&&lu(hs)&&(hs=null),fs!==null&&lu(fs)&&(fs=null),ml.forEach(Cy),pl.forEach(Cy)}function Ca(t,e){t.blockedOn===e&&(t.blockedOn=null,Sf||(Sf=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,JE)))}function gl(t){function e(s){return Ca(s,t)}if(0<Fc.length){Ca(Fc[0],t);for(var n=1;n<Fc.length;n++){var r=Fc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ds!==null&&Ca(ds,t),hs!==null&&Ca(hs,t),fs!==null&&Ca(fs,t),ml.forEach(e),pl.forEach(e),n=0;n<es.length;n++)r=es[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<es.length&&(n=es[0],n.blockedOn===null);)l_(n),n.blockedOn===null&&es.shift()}var vo=Vr.ReactCurrentBatchConfig,Au=!0;function ZE(t,e,n,r){var s=we,i=vo.transition;vo.transition=null;try{we=1,Ym(t,e,n,r)}finally{we=s,vo.transition=i}}function ej(t,e,n,r){var s=we,i=vo.transition;vo.transition=null;try{we=4,Ym(t,e,n,r)}finally{we=s,vo.transition=i}}function Ym(t,e,n,r){if(Au){var s=Cf(t,e,n,r);if(s===null)Dh(t,e,r,Pu,n),Sy(t,r);else if(YE(s,t,e,n,r))r.stopPropagation();else if(Sy(t,r),e&4&&-1<XE.indexOf(t)){for(;s!==null;){var i=Ql(s);if(i!==null&&s_(i),i=Cf(t,e,n,r),i===null&&Dh(t,e,r,Pu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Dh(t,e,r,null,n)}}var Pu=null;function Cf(t,e,n,r){if(Pu=null,t=Km(r),t=Ys(t),t!==null)if(e=Ni(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Pu=t,null}function c_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($E()){case Gm:return 1;case e_:return 4;case Cu:case BE:return 16;case t_:return 536870912;default:return 16}default:return 16}}var os=null,Jm=null,cu=null;function u_(){if(cu)return cu;var t,e=Jm,n=e.length,r,s="value"in os?os.value:os.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return cu=s.slice(t,1<r?1-r:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $c(){return!0}function Ry(){return!1}function xn(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$c:Ry,this.isPropagationStopped=Ry,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$c)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$c)},persist:function(){},isPersistent:$c}),e}var Bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zm=xn(Bo),Gl=He({},Bo,{view:0,detail:0}),tj=xn(Gl),jh,kh,Ra,wd=He({},Gl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ep,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ra&&(Ra&&t.type==="mousemove"?(jh=t.screenX-Ra.screenX,kh=t.screenY-Ra.screenY):kh=jh=0,Ra=t),jh)},movementY:function(t){return"movementY"in t?t.movementY:kh}}),Ay=xn(wd),nj=He({},wd,{dataTransfer:0}),rj=xn(nj),sj=He({},Gl,{relatedTarget:0}),Th=xn(sj),ij=He({},Bo,{animationName:0,elapsedTime:0,pseudoElement:0}),oj=xn(ij),aj=He({},Bo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lj=xn(aj),cj=He({},Bo,{data:0}),Py=xn(cj),uj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hj[t])?!!e[t]:!1}function ep(){return fj}var mj=He({},Gl,{key:function(t){if(t.key){var e=uj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?dj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ep,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pj=xn(mj),gj=He({},wd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dy=xn(gj),yj=He({},Gl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ep}),xj=xn(yj),vj=He({},Bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_j=xn(vj),wj=He({},wd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bj=xn(wj),Nj=[9,13,27,32],tp=Cr&&"CompositionEvent"in window,Xa=null;Cr&&"documentMode"in document&&(Xa=document.documentMode);var Ej=Cr&&"TextEvent"in window&&!Xa,d_=Cr&&(!tp||Xa&&8<Xa&&11>=Xa),Oy=" ",Ly=!1;function h_(t,e){switch(t){case"keyup":return Nj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function f_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ro=!1;function jj(t,e){switch(t){case"compositionend":return f_(e);case"keypress":return e.which!==32?null:(Ly=!0,Oy);case"textInput":return t=e.data,t===Oy&&Ly?null:t;default:return null}}function kj(t,e){if(ro)return t==="compositionend"||!tp&&h_(t,e)?(t=u_(),cu=Jm=os=null,ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return d_&&e.locale!=="ko"?null:e.data;default:return null}}var Tj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function My(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Tj[t.type]:e==="textarea"}function m_(t,e,n,r){Hv(r),e=Du(e,"onChange"),0<e.length&&(n=new Zm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ya=null,yl=null;function Ij(t){j_(t,0)}function bd(t){var e=oo(t);if(Vv(e))return t}function Sj(t,e){if(t==="change")return e}var p_=!1;if(Cr){var Ih;if(Cr){var Sh="oninput"in document;if(!Sh){var Vy=document.createElement("div");Vy.setAttribute("oninput","return;"),Sh=typeof Vy.oninput=="function"}Ih=Sh}else Ih=!1;p_=Ih&&(!document.documentMode||9<document.documentMode)}function Uy(){Ya&&(Ya.detachEvent("onpropertychange",g_),yl=Ya=null)}function g_(t){if(t.propertyName==="value"&&bd(yl)){var e=[];m_(e,yl,t,Km(t)),Qv(Ij,e)}}function Cj(t,e,n){t==="focusin"?(Uy(),Ya=e,yl=n,Ya.attachEvent("onpropertychange",g_)):t==="focusout"&&Uy()}function Rj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bd(yl)}function Aj(t,e){if(t==="click")return bd(e)}function Pj(t,e){if(t==="input"||t==="change")return bd(e)}function Dj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:Dj;function xl(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!hf.call(e,s)||!zn(t[s],e[s]))return!1}return!0}function Fy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function $y(t,e){var n=Fy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Fy(n)}}function y_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?y_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function x_(){for(var t=window,e=Tu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tu(t.document)}return e}function np(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Oj(t){var e=x_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&y_(n.ownerDocument.documentElement,n)){if(r!==null&&np(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=$y(n,i);var a=$y(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Lj=Cr&&"documentMode"in document&&11>=document.documentMode,so=null,Rf=null,Ja=null,Af=!1;function By(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Af||so==null||so!==Tu(r)||(r=so,"selectionStart"in r&&np(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ja&&xl(Ja,r)||(Ja=r,r=Du(Rf,"onSelect"),0<r.length&&(e=new Zm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=so)))}function Bc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var io={animationend:Bc("Animation","AnimationEnd"),animationiteration:Bc("Animation","AnimationIteration"),animationstart:Bc("Animation","AnimationStart"),transitionend:Bc("Transition","TransitionEnd")},Ch={},v_={};Cr&&(v_=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function Nd(t){if(Ch[t])return Ch[t];if(!io[t])return t;var e=io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in v_)return Ch[t]=e[n];return t}var __=Nd("animationend"),w_=Nd("animationiteration"),b_=Nd("animationstart"),N_=Nd("transitionend"),E_=new Map,zy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rs(t,e){E_.set(t,e),bi(e,[t])}for(var Rh=0;Rh<zy.length;Rh++){var Ah=zy[Rh],Mj=Ah.toLowerCase(),Vj=Ah[0].toUpperCase()+Ah.slice(1);Rs(Mj,"on"+Vj)}Rs(__,"onAnimationEnd");Rs(w_,"onAnimationIteration");Rs(b_,"onAnimationStart");Rs("dblclick","onDoubleClick");Rs("focusin","onFocus");Rs("focusout","onBlur");Rs(N_,"onTransitionEnd");To("onMouseEnter",["mouseout","mouseover"]);To("onMouseLeave",["mouseout","mouseover"]);To("onPointerEnter",["pointerout","pointerover"]);To("onPointerLeave",["pointerout","pointerover"]);bi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));bi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));bi("onBeforeInput",["compositionend","keypress","textInput","paste"]);bi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));bi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uj=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fa));function qy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ME(r,e,void 0,t),t.currentTarget=null}function j_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var c=r[a],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;qy(s,c,d),i=u}else for(a=0;a<r.length;a++){if(c=r[a],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;qy(s,c,d),i=u}}}if(Su)throw t=Tf,Su=!1,Tf=null,t}function Ae(t,e){var n=e[Mf];n===void 0&&(n=e[Mf]=new Set);var r=t+"__bubble";n.has(r)||(k_(e,t,2,!1),n.add(r))}function Ph(t,e,n){var r=0;e&&(r|=4),k_(n,t,r,e)}var zc="_reactListening"+Math.random().toString(36).slice(2);function vl(t){if(!t[zc]){t[zc]=!0,Pv.forEach(function(n){n!=="selectionchange"&&(Uj.has(n)||Ph(n,!1,t),Ph(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zc]||(e[zc]=!0,Ph("selectionchange",!1,e))}}function k_(t,e,n,r){switch(c_(e)){case 1:var s=ZE;break;case 4:s=ej;break;default:s=Ym}n=s.bind(null,e,n,t),s=void 0,!kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Dh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;c!==null;){if(a=Ys(c),a===null)return;if(u=a.tag,u===5||u===6){r=i=a;continue e}c=c.parentNode}}r=r.return}Qv(function(){var d=i,f=Km(n),m=[];e:{var g=E_.get(t);if(g!==void 0){var w=Zm,C=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":w=pj;break;case"focusin":C="focus",w=Th;break;case"focusout":C="blur",w=Th;break;case"beforeblur":case"afterblur":w=Th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Ay;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=rj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=xj;break;case __:case w_:case b_:w=oj;break;case N_:w=_j;break;case"scroll":w=tj;break;case"wheel":w=bj;break;case"copy":case"cut":case"paste":w=lj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Dy}var T=(e&4)!==0,R=!T&&t==="scroll",x=T?g!==null?g+"Capture":null:g;T=[];for(var N=d,v;N!==null;){v=N;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,x!==null&&(b=fl(N,x),b!=null&&T.push(_l(N,b,v)))),R)break;N=N.return}0<T.length&&(g=new w(g,C,null,n,f),m.push({event:g,listeners:T}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Ef&&(C=n.relatedTarget||n.fromElement)&&(Ys(C)||C[Rr]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(C=n.relatedTarget||n.toElement,w=d,C=C?Ys(C):null,C!==null&&(R=Ni(C),C!==R||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=d),w!==C)){if(T=Ay,b="onMouseLeave",x="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(T=Dy,b="onPointerLeave",x="onPointerEnter",N="pointer"),R=w==null?g:oo(w),v=C==null?g:oo(C),g=new T(b,N+"leave",w,n,f),g.target=R,g.relatedTarget=v,b=null,Ys(f)===d&&(T=new T(x,N+"enter",C,n,f),T.target=v,T.relatedTarget=R,b=T),R=b,w&&C)t:{for(T=w,x=C,N=0,v=T;v;v=Xi(v))N++;for(v=0,b=x;b;b=Xi(b))v++;for(;0<N-v;)T=Xi(T),N--;for(;0<v-N;)x=Xi(x),v--;for(;N--;){if(T===x||x!==null&&T===x.alternate)break t;T=Xi(T),x=Xi(x)}T=null}else T=null;w!==null&&Hy(m,g,w,T,!1),C!==null&&R!==null&&Hy(m,R,C,T,!0)}}e:{if(g=d?oo(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var O=Sj;else if(My(g))if(p_)O=Pj;else{O=Rj;var L=Cj}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=Aj);if(O&&(O=O(t,d))){m_(m,O,n,f);break e}L&&L(t,g,d),t==="focusout"&&(L=g._wrapperState)&&L.controlled&&g.type==="number"&&vf(g,"number",g.value)}switch(L=d?oo(d):window,t){case"focusin":(My(L)||L.contentEditable==="true")&&(so=L,Rf=d,Ja=null);break;case"focusout":Ja=Rf=so=null;break;case"mousedown":Af=!0;break;case"contextmenu":case"mouseup":case"dragend":Af=!1,By(m,n,f);break;case"selectionchange":if(Lj)break;case"keydown":case"keyup":By(m,n,f)}var _;if(tp)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else ro?h_(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(d_&&n.locale!=="ko"&&(ro||y!=="onCompositionStart"?y==="onCompositionEnd"&&ro&&(_=u_()):(os=f,Jm="value"in os?os.value:os.textContent,ro=!0)),L=Du(d,y),0<L.length&&(y=new Py(y,t,null,n,f),m.push({event:y,listeners:L}),_?y.data=_:(_=f_(n),_!==null&&(y.data=_)))),(_=Ej?jj(t,n):kj(t,n))&&(d=Du(d,"onBeforeInput"),0<d.length&&(f=new Py("onBeforeInput","beforeinput",null,n,f),m.push({event:f,listeners:d}),f.data=_))}j_(m,e)})}function _l(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Du(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=fl(t,n),i!=null&&r.unshift(_l(t,i,s)),i=fl(t,e),i!=null&&r.push(_l(t,i,s))),t=t.return}return r}function Xi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hy(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=fl(n,i),u!=null&&a.unshift(_l(n,u,c))):s||(u=fl(n,i),u!=null&&a.push(_l(n,u,c)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Fj=/\r\n?/g,$j=/\u0000|\uFFFD/g;function Wy(t){return(typeof t=="string"?t:""+t).replace(Fj,`
`).replace($j,"")}function qc(t,e,n){if(e=Wy(e),Wy(t)!==e&&n)throw Error(z(425))}function Ou(){}var Pf=null,Df=null;function Of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Lf=typeof setTimeout=="function"?setTimeout:void 0,Bj=typeof clearTimeout=="function"?clearTimeout:void 0,Ky=typeof Promise=="function"?Promise:void 0,zj=typeof queueMicrotask=="function"?queueMicrotask:typeof Ky<"u"?function(t){return Ky.resolve(null).then(t).catch(qj)}:Lf;function qj(t){setTimeout(function(){throw t})}function Oh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),gl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);gl(e)}function ms(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Gy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var zo=Math.random().toString(36).slice(2),Jn="__reactFiber$"+zo,wl="__reactProps$"+zo,Rr="__reactContainer$"+zo,Mf="__reactEvents$"+zo,Hj="__reactListeners$"+zo,Wj="__reactHandles$"+zo;function Ys(t){var e=t[Jn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Rr]||n[Jn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Gy(t);t!==null;){if(n=t[Jn])return n;t=Gy(t)}return e}t=n,n=t.parentNode}return null}function Ql(t){return t=t[Jn]||t[Rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Ed(t){return t[wl]||null}var Vf=[],ao=-1;function As(t){return{current:t}}function De(t){0>ao||(t.current=Vf[ao],Vf[ao]=null,ao--)}function Se(t,e){ao++,Vf[ao]=t.current,t.current=e}var Es={},Mt=As(Es),Yt=As(!1),oi=Es;function Io(t,e){var n=t.type.contextTypes;if(!n)return Es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Jt(t){return t=t.childContextTypes,t!=null}function Lu(){De(Yt),De(Mt)}function Qy(t,e,n){if(Mt.current!==Es)throw Error(z(168));Se(Mt,e),Se(Yt,n)}function T_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,CE(t)||"Unknown",s));return He({},n,r)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Es,oi=Mt.current,Se(Mt,t),Se(Yt,Yt.current),!0}function Xy(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=T_(t,e,oi),r.__reactInternalMemoizedMergedChildContext=t,De(Yt),De(Mt),Se(Mt,t)):De(Yt),Se(Yt,n)}var xr=null,jd=!1,Lh=!1;function I_(t){xr===null?xr=[t]:xr.push(t)}function Kj(t){jd=!0,I_(t)}function Ps(){if(!Lh&&xr!==null){Lh=!0;var t=0,e=we;try{var n=xr;for(we=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xr=null,jd=!1}catch(s){throw xr!==null&&(xr=xr.slice(t+1)),Zv(Gm,Ps),s}finally{we=e,Lh=!1}}return null}var lo=[],co=0,Vu=null,Uu=0,wn=[],bn=0,ai=null,wr=1,br="";function Ks(t,e){lo[co++]=Uu,lo[co++]=Vu,Vu=t,Uu=e}function S_(t,e,n){wn[bn++]=wr,wn[bn++]=br,wn[bn++]=ai,ai=t;var r=wr;t=br;var s=32-Fn(r)-1;r&=~(1<<s),n+=1;var i=32-Fn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,wr=1<<32-Fn(e)+s|n<<s|r,br=i+t}else wr=1<<i|n<<s|r,br=t}function rp(t){t.return!==null&&(Ks(t,1),S_(t,1,0))}function sp(t){for(;t===Vu;)Vu=lo[--co],lo[co]=null,Uu=lo[--co],lo[co]=null;for(;t===ai;)ai=wn[--bn],wn[bn]=null,br=wn[--bn],wn[bn]=null,wr=wn[--bn],wn[bn]=null}var fn=null,un=null,Ue=!1,Vn=null;function C_(t,e){var n=jn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,fn=t,un=ms(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,fn=t,un=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ai!==null?{id:wr,overflow:br}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=jn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,fn=t,un=null,!0):!1;default:return!1}}function Uf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ff(t){if(Ue){var e=un;if(e){var n=e;if(!Yy(t,e)){if(Uf(t))throw Error(z(418));e=ms(n.nextSibling);var r=fn;e&&Yy(t,e)?C_(r,n):(t.flags=t.flags&-4097|2,Ue=!1,fn=t)}}else{if(Uf(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ue=!1,fn=t}}}function Jy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;fn=t}function Hc(t){if(t!==fn)return!1;if(!Ue)return Jy(t),Ue=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Of(t.type,t.memoizedProps)),e&&(e=un)){if(Uf(t))throw R_(),Error(z(418));for(;e;)C_(t,e),e=ms(e.nextSibling)}if(Jy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){un=ms(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}un=null}}else un=fn?ms(t.stateNode.nextSibling):null;return!0}function R_(){for(var t=un;t;)t=ms(t.nextSibling)}function So(){un=fn=null,Ue=!1}function ip(t){Vn===null?Vn=[t]:Vn.push(t)}var Gj=Vr.ReactCurrentBatchConfig;function Aa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var c=s.refs;a===null?delete c[i]:c[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Wc(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zy(t){var e=t._init;return e(t._payload)}function A_(t){function e(x,N){if(t){var v=x.deletions;v===null?(x.deletions=[N],x.flags|=16):v.push(N)}}function n(x,N){if(!t)return null;for(;N!==null;)e(x,N),N=N.sibling;return null}function r(x,N){for(x=new Map;N!==null;)N.key!==null?x.set(N.key,N):x.set(N.index,N),N=N.sibling;return x}function s(x,N){return x=xs(x,N),x.index=0,x.sibling=null,x}function i(x,N,v){return x.index=v,t?(v=x.alternate,v!==null?(v=v.index,v<N?(x.flags|=2,N):v):(x.flags|=2,N)):(x.flags|=1048576,N)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function c(x,N,v,b){return N===null||N.tag!==6?(N=zh(v,x.mode,b),N.return=x,N):(N=s(N,v),N.return=x,N)}function u(x,N,v,b){var O=v.type;return O===no?f(x,N,v.props.children,b,v.key):N!==null&&(N.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Jr&&Zy(O)===N.type)?(b=s(N,v.props),b.ref=Aa(x,N,v),b.return=x,b):(b=yu(v.type,v.key,v.props,null,x.mode,b),b.ref=Aa(x,N,v),b.return=x,b)}function d(x,N,v,b){return N===null||N.tag!==4||N.stateNode.containerInfo!==v.containerInfo||N.stateNode.implementation!==v.implementation?(N=qh(v,x.mode,b),N.return=x,N):(N=s(N,v.children||[]),N.return=x,N)}function f(x,N,v,b,O){return N===null||N.tag!==7?(N=ni(v,x.mode,b,O),N.return=x,N):(N=s(N,v),N.return=x,N)}function m(x,N,v){if(typeof N=="string"&&N!==""||typeof N=="number")return N=zh(""+N,x.mode,v),N.return=x,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Oc:return v=yu(N.type,N.key,N.props,null,x.mode,v),v.ref=Aa(x,null,N),v.return=x,v;case to:return N=qh(N,x.mode,v),N.return=x,N;case Jr:var b=N._init;return m(x,b(N._payload),v)}if(Va(N)||Ta(N))return N=ni(N,x.mode,v,null),N.return=x,N;Wc(x,N)}return null}function g(x,N,v,b){var O=N!==null?N.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return O!==null?null:c(x,N,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Oc:return v.key===O?u(x,N,v,b):null;case to:return v.key===O?d(x,N,v,b):null;case Jr:return O=v._init,g(x,N,O(v._payload),b)}if(Va(v)||Ta(v))return O!==null?null:f(x,N,v,b,null);Wc(x,v)}return null}function w(x,N,v,b,O){if(typeof b=="string"&&b!==""||typeof b=="number")return x=x.get(v)||null,c(N,x,""+b,O);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Oc:return x=x.get(b.key===null?v:b.key)||null,u(N,x,b,O);case to:return x=x.get(b.key===null?v:b.key)||null,d(N,x,b,O);case Jr:var L=b._init;return w(x,N,v,L(b._payload),O)}if(Va(b)||Ta(b))return x=x.get(v)||null,f(N,x,b,O,null);Wc(N,b)}return null}function C(x,N,v,b){for(var O=null,L=null,_=N,y=N=0,j=null;_!==null&&y<v.length;y++){_.index>y?(j=_,_=null):j=_.sibling;var S=g(x,_,v[y],b);if(S===null){_===null&&(_=j);break}t&&_&&S.alternate===null&&e(x,_),N=i(S,N,y),L===null?O=S:L.sibling=S,L=S,_=j}if(y===v.length)return n(x,_),Ue&&Ks(x,y),O;if(_===null){for(;y<v.length;y++)_=m(x,v[y],b),_!==null&&(N=i(_,N,y),L===null?O=_:L.sibling=_,L=_);return Ue&&Ks(x,y),O}for(_=r(x,_);y<v.length;y++)j=w(_,x,y,v[y],b),j!==null&&(t&&j.alternate!==null&&_.delete(j.key===null?y:j.key),N=i(j,N,y),L===null?O=j:L.sibling=j,L=j);return t&&_.forEach(function(P){return e(x,P)}),Ue&&Ks(x,y),O}function T(x,N,v,b){var O=Ta(v);if(typeof O!="function")throw Error(z(150));if(v=O.call(v),v==null)throw Error(z(151));for(var L=O=null,_=N,y=N=0,j=null,S=v.next();_!==null&&!S.done;y++,S=v.next()){_.index>y?(j=_,_=null):j=_.sibling;var P=g(x,_,S.value,b);if(P===null){_===null&&(_=j);break}t&&_&&P.alternate===null&&e(x,_),N=i(P,N,y),L===null?O=P:L.sibling=P,L=P,_=j}if(S.done)return n(x,_),Ue&&Ks(x,y),O;if(_===null){for(;!S.done;y++,S=v.next())S=m(x,S.value,b),S!==null&&(N=i(S,N,y),L===null?O=S:L.sibling=S,L=S);return Ue&&Ks(x,y),O}for(_=r(x,_);!S.done;y++,S=v.next())S=w(_,x,y,S.value,b),S!==null&&(t&&S.alternate!==null&&_.delete(S.key===null?y:S.key),N=i(S,N,y),L===null?O=S:L.sibling=S,L=S);return t&&_.forEach(function(D){return e(x,D)}),Ue&&Ks(x,y),O}function R(x,N,v,b){if(typeof v=="object"&&v!==null&&v.type===no&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Oc:e:{for(var O=v.key,L=N;L!==null;){if(L.key===O){if(O=v.type,O===no){if(L.tag===7){n(x,L.sibling),N=s(L,v.props.children),N.return=x,x=N;break e}}else if(L.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Jr&&Zy(O)===L.type){n(x,L.sibling),N=s(L,v.props),N.ref=Aa(x,L,v),N.return=x,x=N;break e}n(x,L);break}else e(x,L);L=L.sibling}v.type===no?(N=ni(v.props.children,x.mode,b,v.key),N.return=x,x=N):(b=yu(v.type,v.key,v.props,null,x.mode,b),b.ref=Aa(x,N,v),b.return=x,x=b)}return a(x);case to:e:{for(L=v.key;N!==null;){if(N.key===L)if(N.tag===4&&N.stateNode.containerInfo===v.containerInfo&&N.stateNode.implementation===v.implementation){n(x,N.sibling),N=s(N,v.children||[]),N.return=x,x=N;break e}else{n(x,N);break}else e(x,N);N=N.sibling}N=qh(v,x.mode,b),N.return=x,x=N}return a(x);case Jr:return L=v._init,R(x,N,L(v._payload),b)}if(Va(v))return C(x,N,v,b);if(Ta(v))return T(x,N,v,b);Wc(x,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,N!==null&&N.tag===6?(n(x,N.sibling),N=s(N,v),N.return=x,x=N):(n(x,N),N=zh(v,x.mode,b),N.return=x,x=N),a(x)):n(x,N)}return R}var Co=A_(!0),P_=A_(!1),Fu=As(null),$u=null,uo=null,op=null;function ap(){op=uo=$u=null}function lp(t){var e=Fu.current;De(Fu),t._currentValue=e}function $f(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _o(t,e){$u=t,op=uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Xt=!0),t.firstContext=null)}function In(t){var e=t._currentValue;if(op!==t)if(t={context:t,memoizedValue:e,next:null},uo===null){if($u===null)throw Error(z(308));uo=t,$u.dependencies={lanes:0,firstContext:t}}else uo=uo.next=t;return e}var Js=null;function cp(t){Js===null?Js=[t]:Js.push(t)}function D_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,cp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ar(t,r)}function Ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Zr=!1;function up(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function O_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Ar(t,n)}return s=r.interleaved,s===null?(e.next=e,cp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Ar(t,n)}function du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qm(t,n)}}function e0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Bu(t,e,n,r){var s=t.updateQueue;Zr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==a&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;a=0,f=d=u=null,c=i;do{var g=c.lane,w=c.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var C=t,T=c;switch(g=e,w=n,T.tag){case 1:if(C=T.payload,typeof C=="function"){m=C.call(w,m,g);break e}m=C;break e;case 3:C.flags=C.flags&-65537|128;case 0:if(C=T.payload,g=typeof C=="function"?C.call(w,m,g):C,g==null)break e;m=He({},m,g);break e;case 2:Zr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[c]:g.push(c))}else w={eventTime:w,lane:g,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=w,u=m):f=f.next=w,a|=g;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;g=c,c=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=m),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);ci|=a,t.lanes=a,t.memoizedState=m}}function t0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Xl={},tr=As(Xl),bl=As(Xl),Nl=As(Xl);function Zs(t){if(t===Xl)throw Error(z(174));return t}function dp(t,e){switch(Se(Nl,e),Se(bl,t),Se(tr,Xl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wf(e,t)}De(tr),Se(tr,e)}function Ro(){De(tr),De(bl),De(Nl)}function L_(t){Zs(Nl.current);var e=Zs(tr.current),n=wf(e,t.type);e!==n&&(Se(bl,t),Se(tr,n))}function hp(t){bl.current===t&&(De(tr),De(bl))}var ze=As(0);function zu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mh=[];function fp(){for(var t=0;t<Mh.length;t++)Mh[t]._workInProgressVersionPrimary=null;Mh.length=0}var hu=Vr.ReactCurrentDispatcher,Vh=Vr.ReactCurrentBatchConfig,li=0,qe=null,dt=null,yt=null,qu=!1,Za=!1,El=0,Qj=0;function Rt(){throw Error(z(321))}function mp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function pp(t,e,n,r,s,i){if(li=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hu.current=t===null||t.memoizedState===null?Zj:e2,t=n(r,s),Za){i=0;do{if(Za=!1,El=0,25<=i)throw Error(z(301));i+=1,yt=dt=null,e.updateQueue=null,hu.current=t2,t=n(r,s)}while(Za)}if(hu.current=Hu,e=dt!==null&&dt.next!==null,li=0,yt=dt=qe=null,qu=!1,e)throw Error(z(300));return t}function gp(){var t=El!==0;return El=0,t}function Yn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?qe.memoizedState=yt=t:yt=yt.next=t,yt}function Sn(){if(dt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=yt===null?qe.memoizedState:yt.next;if(e!==null)yt=e,dt=t;else{if(t===null)throw Error(z(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},yt===null?qe.memoizedState=yt=t:yt=yt.next=t}return yt}function jl(t,e){return typeof e=="function"?e(t):e}function Uh(t){var e=Sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=dt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=a=null,u=null,d=i;do{var f=d.lane;if((li&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var m={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=m,a=r):u=u.next=m,qe.lanes|=f,ci|=f}d=d.next}while(d!==null&&d!==i);u===null?a=r:u.next=c,zn(r,e.memoizedState)||(Xt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,qe.lanes|=i,ci|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fh(t){var e=Sn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);zn(i,e.memoizedState)||(Xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function M_(){}function V_(t,e){var n=qe,r=Sn(),s=e(),i=!zn(r.memoizedState,s);if(i&&(r.memoizedState=s,Xt=!0),r=r.queue,yp($_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,kl(9,F_.bind(null,n,r,s,e),void 0,null),_t===null)throw Error(z(349));li&30||U_(n,e,s)}return s}function U_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function F_(t,e,n,r){e.value=n,e.getSnapshot=r,B_(e)&&z_(t)}function $_(t,e,n){return n(function(){B_(e)&&z_(t)})}function B_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function z_(t){var e=Ar(t,1);e!==null&&$n(e,t,1,-1)}function n0(t){var e=Yn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:t},e.queue=t,t=t.dispatch=Jj.bind(null,qe,t),[e.memoizedState,t]}function kl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function q_(){return Sn().memoizedState}function fu(t,e,n,r){var s=Yn();qe.flags|=t,s.memoizedState=kl(1|e,n,void 0,r===void 0?null:r)}function kd(t,e,n,r){var s=Sn();r=r===void 0?null:r;var i=void 0;if(dt!==null){var a=dt.memoizedState;if(i=a.destroy,r!==null&&mp(r,a.deps)){s.memoizedState=kl(e,n,i,r);return}}qe.flags|=t,s.memoizedState=kl(1|e,n,i,r)}function r0(t,e){return fu(8390656,8,t,e)}function yp(t,e){return kd(2048,8,t,e)}function H_(t,e){return kd(4,2,t,e)}function W_(t,e){return kd(4,4,t,e)}function K_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function G_(t,e,n){return n=n!=null?n.concat([t]):null,kd(4,4,K_.bind(null,e,t),n)}function xp(){}function Q_(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function X_(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&mp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Y_(t,e,n){return li&21?(zn(n,e)||(n=n_(),qe.lanes|=n,ci|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Xt=!0),t.memoizedState=n)}function Xj(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var r=Vh.transition;Vh.transition={};try{t(!1),e()}finally{we=n,Vh.transition=r}}function J_(){return Sn().memoizedState}function Yj(t,e,n){var r=ys(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Z_(t))ew(e,n);else if(n=D_(t,e,n,r),n!==null){var s=$t();$n(n,t,r,s),tw(n,e,r)}}function Jj(t,e,n){var r=ys(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Z_(t))ew(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,c=i(a,n);if(s.hasEagerState=!0,s.eagerState=c,zn(c,a)){var u=e.interleaved;u===null?(s.next=s,cp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=D_(t,e,s,r),n!==null&&(s=$t(),$n(n,t,r,s),tw(n,e,r))}}function Z_(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function ew(t,e){Za=qu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function tw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qm(t,n)}}var Hu={readContext:In,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},Zj={readContext:In,useCallback:function(t,e){return Yn().memoizedState=[t,e===void 0?null:e],t},useContext:In,useEffect:r0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fu(4194308,4,K_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return fu(4,2,t,e)},useMemo:function(t,e){var n=Yn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Yj.bind(null,qe,t),[r.memoizedState,t]},useRef:function(t){var e=Yn();return t={current:t},e.memoizedState=t},useState:n0,useDebugValue:xp,useDeferredValue:function(t){return Yn().memoizedState=t},useTransition:function(){var t=n0(!1),e=t[0];return t=Xj.bind(null,t[1]),Yn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=qe,s=Yn();if(Ue){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),_t===null)throw Error(z(349));li&30||U_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,r0($_.bind(null,r,i,t),[t]),r.flags|=2048,kl(9,F_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Yn(),e=_t.identifierPrefix;if(Ue){var n=br,r=wr;n=(r&~(1<<32-Fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=El++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Qj++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},e2={readContext:In,useCallback:Q_,useContext:In,useEffect:yp,useImperativeHandle:G_,useInsertionEffect:H_,useLayoutEffect:W_,useMemo:X_,useReducer:Uh,useRef:q_,useState:function(){return Uh(jl)},useDebugValue:xp,useDeferredValue:function(t){var e=Sn();return Y_(e,dt.memoizedState,t)},useTransition:function(){var t=Uh(jl)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:M_,useSyncExternalStore:V_,useId:J_,unstable_isNewReconciler:!1},t2={readContext:In,useCallback:Q_,useContext:In,useEffect:yp,useImperativeHandle:G_,useInsertionEffect:H_,useLayoutEffect:W_,useMemo:X_,useReducer:Fh,useRef:q_,useState:function(){return Fh(jl)},useDebugValue:xp,useDeferredValue:function(t){var e=Sn();return dt===null?e.memoizedState=t:Y_(e,dt.memoizedState,t)},useTransition:function(){var t=Fh(jl)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:M_,useSyncExternalStore:V_,useId:J_,unstable_isNewReconciler:!1};function Ln(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:He({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Td={isMounted:function(t){return(t=t._reactInternals)?Ni(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=$t(),s=ys(t),i=kr(r,s);i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&($n(e,t,s,r),du(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=$t(),s=ys(t),i=kr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ps(t,i,s),e!==null&&($n(e,t,s,r),du(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=$t(),r=ys(t),s=kr(n,r);s.tag=2,e!=null&&(s.callback=e),e=ps(t,s,r),e!==null&&($n(e,t,r,n),du(e,t,r))}};function s0(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!xl(n,r)||!xl(s,i):!0}function nw(t,e,n){var r=!1,s=Es,i=e.contextType;return typeof i=="object"&&i!==null?i=In(i):(s=Jt(e)?oi:Mt.current,r=e.contextTypes,i=(r=r!=null)?Io(t,s):Es),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Td,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function i0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Td.enqueueReplaceState(e,e.state,null)}function zf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},up(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=In(i):(i=Jt(e)?oi:Mt.current,s.context=Io(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Bf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Td.enqueueReplaceState(s,s.state,null),Bu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ao(t,e){try{var n="",r=e;do n+=SE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $h(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var n2=typeof WeakMap=="function"?WeakMap:Map;function rw(t,e,n){n=kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ku||(Ku=!0,em=r),qf(t,e)},n}function sw(t,e,n){n=kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){qf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){qf(t,e),typeof r!="function"&&(gs===null?gs=new Set([this]):gs.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function o0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new n2;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=g2.bind(null,t,e,n),e.then(t,t))}function a0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function l0(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=kr(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var r2=Vr.ReactCurrentOwner,Xt=!1;function Ft(t,e,n,r){e.child=t===null?P_(e,null,n,r):Co(e,t.child,n,r)}function c0(t,e,n,r,s){n=n.render;var i=e.ref;return _o(e,s),r=pp(t,e,n,r,i,s),n=gp(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Ue&&n&&rp(e),e.flags|=1,Ft(t,e,r,s),e.child)}function u0(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!kp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,iw(t,e,i,r,s)):(t=yu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:xl,n(a,r)&&t.ref===e.ref)return Pr(t,e,s)}return e.flags|=1,t=xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function iw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(xl(i,r)&&t.ref===e.ref)if(Xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Xt=!0);else return e.lanes=t.lanes,Pr(t,e,s)}return Hf(t,e,n,r,s)}function ow(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(fo,an),an|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(fo,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(fo,an),an|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Se(fo,an),an|=r;return Ft(t,e,s,n),e.child}function aw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Hf(t,e,n,r,s){var i=Jt(n)?oi:Mt.current;return i=Io(e,i),_o(e,s),n=pp(t,e,n,r,i,s),r=gp(),t!==null&&!Xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Pr(t,e,s)):(Ue&&r&&rp(e),e.flags|=1,Ft(t,e,n,s),e.child)}function d0(t,e,n,r,s){if(Jt(n)){var i=!0;Mu(e)}else i=!1;if(_o(e,s),e.stateNode===null)mu(t,e),nw(e,n,r),zf(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,c=e.memoizedProps;a.props=c;var u=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=In(d):(d=Jt(n)?oi:Mt.current,d=Io(e,d));var f=n.getDerivedStateFromProps,m=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";m||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==r||u!==d)&&i0(e,a,r,d),Zr=!1;var g=e.memoizedState;a.state=g,Bu(e,r,a,s),u=e.memoizedState,c!==r||g!==u||Yt.current||Zr?(typeof f=="function"&&(Bf(e,n,f,r),u=e.memoizedState),(c=Zr||s0(e,n,c,r,g,u,d))?(m||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=d,r=c):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,O_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:Ln(e.type,c),a.props=d,m=e.pendingProps,g=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=In(u):(u=Jt(n)?oi:Mt.current,u=Io(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==m||g!==u)&&i0(e,a,r,u),Zr=!1,g=e.memoizedState,a.state=g,Bu(e,r,a,s);var C=e.memoizedState;c!==m||g!==C||Yt.current||Zr?(typeof w=="function"&&(Bf(e,n,w,r),C=e.memoizedState),(d=Zr||s0(e,n,d,r,g,C,u)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,C,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,C,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=C),a.props=r,a.state=C,a.context=u,r=d):(typeof a.componentDidUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Wf(t,e,n,r,i,s)}function Wf(t,e,n,r,s,i){aw(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Xy(e,n,!1),Pr(t,e,i);r=e.stateNode,r2.current=e;var c=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Co(e,t.child,null,i),e.child=Co(e,null,c,i)):Ft(t,e,c,i),e.memoizedState=r.state,s&&Xy(e,n,!0),e.child}function lw(t){var e=t.stateNode;e.pendingContext?Qy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qy(t,e.context,!1),dp(t,e.containerInfo)}function h0(t,e,n,r,s){return So(),ip(s),e.flags|=256,Ft(t,e,n,r),e.child}var Kf={dehydrated:null,treeContext:null,retryLane:0};function Gf(t){return{baseLanes:t,cachePool:null,transitions:null}}function cw(t,e,n){var r=e.pendingProps,s=ze.current,i=!1,a=(e.flags&128)!==0,c;if((c=a)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Se(ze,s&1),t===null)return Ff(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Cd(a,r,0,null),t=ni(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Gf(n),e.memoizedState=Kf,t):vp(e,a));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return s2(t,e,a,r,c,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=xs(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=xs(c,i):(i=ni(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Gf(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Kf,r}return i=t.child,t=i.sibling,r=xs(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function vp(t,e){return e=Cd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kc(t,e,n,r){return r!==null&&ip(r),Co(e,t.child,null,n),t=vp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function s2(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=$h(Error(z(422))),Kc(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Cd({mode:"visible",children:r.children},s,0,null),i=ni(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Co(e,t.child,null,a),e.child.memoizedState=Gf(a),e.memoizedState=Kf,i);if(!(e.mode&1))return Kc(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(z(419)),r=$h(i,r,void 0),Kc(t,e,a,r)}if(c=(a&t.childLanes)!==0,Xt||c){if(r=_t,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ar(t,s),$n(r,t,s,-1))}return jp(),r=$h(Error(z(421))),Kc(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=y2.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,un=ms(s.nextSibling),fn=e,Ue=!0,Vn=null,t!==null&&(wn[bn++]=wr,wn[bn++]=br,wn[bn++]=ai,wr=t.id,br=t.overflow,ai=e),e=vp(e,r.children),e.flags|=4096,e)}function f0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),$f(t.return,e,n)}function Bh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function uw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Ft(t,e,r.children,n),r=ze.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&f0(t,n,e);else if(t.tag===19)f0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(ze,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&zu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Bh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&zu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Bh(e,!0,n,null,i);break;case"together":Bh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ci|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function i2(t,e,n){switch(e.tag){case 3:lw(e),So();break;case 5:L_(e);break;case 1:Jt(e.type)&&Mu(e);break;case 4:dp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Se(Fu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(ze,ze.current&1),e.flags|=128,null):n&e.child.childLanes?cw(t,e,n):(Se(ze,ze.current&1),t=Pr(t,e,n),t!==null?t.sibling:null);Se(ze,ze.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return uw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(ze,ze.current),r)break;return null;case 22:case 23:return e.lanes=0,ow(t,e,n)}return Pr(t,e,n)}var dw,Qf,hw,fw;dw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qf=function(){};hw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Zs(tr.current);var i=null;switch(n){case"input":s=yf(t,s),r=yf(t,r),i=[];break;case"select":s=He({},s,{value:void 0}),r=He({},r,{value:void 0}),i=[];break;case"textarea":s=_f(t,s),r=_f(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ou)}bf(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(a in c)c.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(dl.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(a in c)!c.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&c[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(dl.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ae("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};fw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Pa(t,e){if(!Ue)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function o2(t,e,n){var r=e.pendingProps;switch(sp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return Jt(e.type)&&Lu(),At(e),null;case 3:return r=e.stateNode,Ro(),De(Yt),De(Mt),fp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Hc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vn!==null&&(rm(Vn),Vn=null))),Qf(t,e),At(e),null;case 5:hp(e);var s=Zs(Nl.current);if(n=e.type,t!==null&&e.stateNode!=null)hw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return At(e),null}if(t=Zs(tr.current),Hc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Jn]=e,r[wl]=i,t=(e.mode&1)!==0,n){case"dialog":Ae("cancel",r),Ae("close",r);break;case"iframe":case"object":case"embed":Ae("load",r);break;case"video":case"audio":for(s=0;s<Fa.length;s++)Ae(Fa[s],r);break;case"source":Ae("error",r);break;case"img":case"image":case"link":Ae("error",r),Ae("load",r);break;case"details":Ae("toggle",r);break;case"input":by(r,i),Ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ae("invalid",r);break;case"textarea":Ey(r,i),Ae("invalid",r)}bf(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&qc(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&qc(r.textContent,c,t),s=["children",""+c]):dl.hasOwnProperty(a)&&c!=null&&a==="onScroll"&&Ae("scroll",r)}switch(n){case"input":Lc(r),Ny(r,i,!0);break;case"textarea":Lc(r),jy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Ou)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$v(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Jn]=e,t[wl]=r,dw(t,e,!1,!1),e.stateNode=t;e:{switch(a=Nf(n,r),n){case"dialog":Ae("cancel",t),Ae("close",t),s=r;break;case"iframe":case"object":case"embed":Ae("load",t),s=r;break;case"video":case"audio":for(s=0;s<Fa.length;s++)Ae(Fa[s],t);s=r;break;case"source":Ae("error",t),s=r;break;case"img":case"image":case"link":Ae("error",t),Ae("load",t),s=r;break;case"details":Ae("toggle",t),s=r;break;case"input":by(t,r),s=yf(t,r),Ae("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=He({},r,{value:void 0}),Ae("invalid",t);break;case"textarea":Ey(t,r),s=_f(t,r),Ae("invalid",t);break;default:s=r}bf(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?qv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Bv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&hl(t,u):typeof u=="number"&&hl(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(dl.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ae("scroll",t):u!=null&&zm(t,i,u,a))}switch(n){case"input":Lc(t),Ny(t,r,!1);break;case"textarea":Lc(t),jy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ns(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?go(t,!!r.multiple,i,!1):r.defaultValue!=null&&go(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Ou)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)fw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Zs(Nl.current),Zs(tr.current),Hc(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jn]=e,(i=r.nodeValue!==n)&&(t=fn,t!==null))switch(t.tag){case 3:qc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jn]=e,e.stateNode=r}return At(e),null;case 13:if(De(ze),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ue&&un!==null&&e.mode&1&&!(e.flags&128))R_(),So(),e.flags|=98560,i=!1;else if(i=Hc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Jn]=e}else So(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else Vn!==null&&(rm(Vn),Vn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ze.current&1?ht===0&&(ht=3):jp())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return Ro(),Qf(t,e),t===null&&vl(e.stateNode.containerInfo),At(e),null;case 10:return lp(e.type._context),At(e),null;case 17:return Jt(e.type)&&Lu(),At(e),null;case 19:if(De(ze),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Pa(i,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=zu(t),a!==null){for(e.flags|=128,Pa(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(ze,ze.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ze()>Po&&(e.flags|=128,r=!0,Pa(i,!1),e.lanes=4194304)}else{if(!r)if(t=zu(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Pa(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ue)return At(e),null}else 2*Ze()-i.renderingStartTime>Po&&n!==1073741824&&(e.flags|=128,r=!0,Pa(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ze(),e.sibling=null,n=ze.current,Se(ze,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return Ep(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function a2(t,e){switch(sp(e),e.tag){case 1:return Jt(e.type)&&Lu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ro(),De(Yt),De(Mt),fp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return hp(e),null;case 13:if(De(ze),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));So()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(ze),null;case 4:return Ro(),null;case 10:return lp(e.type._context),null;case 22:case 23:return Ep(),null;case 24:return null;default:return null}}var Gc=!1,Ot=!1,l2=typeof WeakSet=="function"?WeakSet:Set,G=null;function ho(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Xe(t,e,r)}else n.current=null}function Xf(t,e,n){try{n()}catch(r){Xe(t,e,r)}}var m0=!1;function c2(t,e){if(Pf=Au,t=x_(),np(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,c=-1,u=-1,d=0,f=0,m=t,g=null;t:for(;;){for(var w;m!==n||s!==0&&m.nodeType!==3||(c=a+s),m!==i||r!==0&&m.nodeType!==3||(u=a+r),m.nodeType===3&&(a+=m.nodeValue.length),(w=m.firstChild)!==null;)g=m,m=w;for(;;){if(m===t)break t;if(g===n&&++d===s&&(c=a),g===i&&++f===r&&(u=a),(w=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=w}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Df={focusedElem:t,selectionRange:n},Au=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var T=C.memoizedProps,R=C.memoizedState,x=e.stateNode,N=x.getSnapshotBeforeUpdate(e.elementType===e.type?T:Ln(e.type,T),R);x.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(b){Xe(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return C=m0,m0=!1,C}function el(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xf(e,n,i)}s=s.next}while(s!==r)}}function Id(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Yf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mw(t){var e=t.alternate;e!==null&&(t.alternate=null,mw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jn],delete e[wl],delete e[Mf],delete e[Hj],delete e[Wj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function pw(t){return t.tag===5||t.tag===3||t.tag===4}function p0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ou));else if(r!==4&&(t=t.child,t!==null))for(Jf(t,e,n),t=t.sibling;t!==null;)Jf(t,e,n),t=t.sibling}function Zf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}var Nt=null,Mn=!1;function Xr(t,e,n){for(n=n.child;n!==null;)gw(t,e,n),n=n.sibling}function gw(t,e,n){if(er&&typeof er.onCommitFiberUnmount=="function")try{er.onCommitFiberUnmount(_d,n)}catch{}switch(n.tag){case 5:Ot||ho(n,e);case 6:var r=Nt,s=Mn;Nt=null,Xr(t,e,n),Nt=r,Mn=s,Nt!==null&&(Mn?(t=Nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Nt.removeChild(n.stateNode));break;case 18:Nt!==null&&(Mn?(t=Nt,n=n.stateNode,t.nodeType===8?Oh(t.parentNode,n):t.nodeType===1&&Oh(t,n),gl(t)):Oh(Nt,n.stateNode));break;case 4:r=Nt,s=Mn,Nt=n.stateNode.containerInfo,Mn=!0,Xr(t,e,n),Nt=r,Mn=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Xf(n,e,a),s=s.next}while(s!==r)}Xr(t,e,n);break;case 1:if(!Ot&&(ho(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){Xe(n,e,c)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(Ot=(r=Ot)||n.memoizedState!==null,Xr(t,e,n),Ot=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function g0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new l2),e.forEach(function(r){var s=x2.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function On(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,c=a;e:for(;c!==null;){switch(c.tag){case 5:Nt=c.stateNode,Mn=!1;break e;case 3:Nt=c.stateNode.containerInfo,Mn=!0;break e;case 4:Nt=c.stateNode.containerInfo,Mn=!0;break e}c=c.return}if(Nt===null)throw Error(z(160));gw(i,a,s),Nt=null,Mn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Xe(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)yw(e,t),e=e.sibling}function yw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(On(e,t),Xn(t),r&4){try{el(3,t,t.return),Id(3,t)}catch(T){Xe(t,t.return,T)}try{el(5,t,t.return)}catch(T){Xe(t,t.return,T)}}break;case 1:On(e,t),Xn(t),r&512&&n!==null&&ho(n,n.return);break;case 5:if(On(e,t),Xn(t),r&512&&n!==null&&ho(n,n.return),t.flags&32){var s=t.stateNode;try{hl(s,"")}catch(T){Xe(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Uv(s,i),Nf(c,a);var d=Nf(c,i);for(a=0;a<u.length;a+=2){var f=u[a],m=u[a+1];f==="style"?qv(s,m):f==="dangerouslySetInnerHTML"?Bv(s,m):f==="children"?hl(s,m):zm(s,f,m,d)}switch(c){case"input":xf(s,i);break;case"textarea":Fv(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?go(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?go(s,!!i.multiple,i.defaultValue,!0):go(s,!!i.multiple,i.multiple?[]:"",!1))}s[wl]=i}catch(T){Xe(t,t.return,T)}}break;case 6:if(On(e,t),Xn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Xe(t,t.return,T)}}break;case 3:if(On(e,t),Xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{gl(e.containerInfo)}catch(T){Xe(t,t.return,T)}break;case 4:On(e,t),Xn(t);break;case 13:On(e,t),Xn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(bp=Ze())),r&4&&g0(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(d=Ot)||f,On(e,t),Ot=d):On(e,t),Xn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(G=t,f=t.child;f!==null;){for(m=G=f;G!==null;){switch(g=G,w=g.child,g.tag){case 0:case 11:case 14:case 15:el(4,g,g.return);break;case 1:ho(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(T){Xe(r,n,T)}}break;case 5:ho(g,g.return);break;case 22:if(g.memoizedState!==null){x0(m);continue}}w!==null?(w.return=g,G=w):x0(m)}f=f.sibling}e:for(f=null,m=t;;){if(m.tag===5){if(f===null){f=m;try{s=m.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=m.stateNode,u=m.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=zv("display",a))}catch(T){Xe(t,t.return,T)}}}else if(m.tag===6){if(f===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(T){Xe(t,t.return,T)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;f===m&&(f=null),m=m.return}f===m&&(f=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:On(e,t),Xn(t),r&4&&g0(t);break;case 21:break;default:On(e,t),Xn(t)}}function Xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(pw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(hl(s,""),r.flags&=-33);var i=p0(t);Zf(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,c=p0(t);Jf(t,c,a);break;default:throw Error(z(161))}}catch(u){Xe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function u2(t,e,n){G=t,xw(t)}function xw(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Gc;if(!a){var c=s.alternate,u=c!==null&&c.memoizedState!==null||Ot;c=Gc;var d=Ot;if(Gc=a,(Ot=u)&&!d)for(G=s;G!==null;)a=G,u=a.child,a.tag===22&&a.memoizedState!==null?v0(s):u!==null?(u.return=a,G=u):v0(s);for(;i!==null;)G=i,xw(i),i=i.sibling;G=s,Gc=c,Ot=d}y0(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):y0(t)}}function y0(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Id(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Ln(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&t0(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}t0(e,a,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var m=f.dehydrated;m!==null&&gl(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Ot||e.flags&512&&Yf(e)}catch(g){Xe(e,e.return,g)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function x0(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function v0(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Id(4,e)}catch(u){Xe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Xe(e,s,u)}}var i=e.return;try{Yf(e)}catch(u){Xe(e,i,u)}break;case 5:var a=e.return;try{Yf(e)}catch(u){Xe(e,a,u)}}}catch(u){Xe(e,e.return,u)}if(e===t){G=null;break}var c=e.sibling;if(c!==null){c.return=e.return,G=c;break}G=e.return}}var d2=Math.ceil,Wu=Vr.ReactCurrentDispatcher,_p=Vr.ReactCurrentOwner,kn=Vr.ReactCurrentBatchConfig,me=0,_t=null,at=null,jt=0,an=0,fo=As(0),ht=0,Tl=null,ci=0,Sd=0,wp=0,tl=null,Gt=null,bp=0,Po=1/0,yr=null,Ku=!1,em=null,gs=null,Qc=!1,as=null,Gu=0,nl=0,tm=null,pu=-1,gu=0;function $t(){return me&6?Ze():pu!==-1?pu:pu=Ze()}function ys(t){return t.mode&1?me&2&&jt!==0?jt&-jt:Gj.transition!==null?(gu===0&&(gu=n_()),gu):(t=we,t!==0||(t=window.event,t=t===void 0?16:c_(t.type)),t):1}function $n(t,e,n,r){if(50<nl)throw nl=0,tm=null,Error(z(185));Kl(t,n,r),(!(me&2)||t!==_t)&&(t===_t&&(!(me&2)&&(Sd|=n),ht===4&&ts(t,jt)),Zt(t,r),n===1&&me===0&&!(e.mode&1)&&(Po=Ze()+500,jd&&Ps()))}function Zt(t,e){var n=t.callbackNode;GE(t,e);var r=Ru(t,t===_t?jt:0);if(r===0)n!==null&&Iy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Iy(n),e===1)t.tag===0?Kj(_0.bind(null,t)):I_(_0.bind(null,t)),zj(function(){!(me&6)&&Ps()}),n=null;else{switch(r_(r)){case 1:n=Gm;break;case 4:n=e_;break;case 16:n=Cu;break;case 536870912:n=t_;break;default:n=Cu}n=kw(n,vw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vw(t,e){if(pu=-1,gu=0,me&6)throw Error(z(327));var n=t.callbackNode;if(wo()&&t.callbackNode!==n)return null;var r=Ru(t,t===_t?jt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qu(t,r);else{e=r;var s=me;me|=2;var i=ww();(_t!==t||jt!==e)&&(yr=null,Po=Ze()+500,ti(t,e));do try{m2();break}catch(c){_w(t,c)}while(!0);ap(),Wu.current=i,me=s,at!==null?e=0:(_t=null,jt=0,e=ht)}if(e!==0){if(e===2&&(s=If(t),s!==0&&(r=s,e=nm(t,s))),e===1)throw n=Tl,ti(t,0),ts(t,r),Zt(t,Ze()),n;if(e===6)ts(t,r);else{if(s=t.current.alternate,!(r&30)&&!h2(s)&&(e=Qu(t,r),e===2&&(i=If(t),i!==0&&(r=i,e=nm(t,i))),e===1))throw n=Tl,ti(t,0),ts(t,r),Zt(t,Ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Gs(t,Gt,yr);break;case 3:if(ts(t,r),(r&130023424)===r&&(e=bp+500-Ze(),10<e)){if(Ru(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){$t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Lf(Gs.bind(null,t,Gt,yr),e);break}Gs(t,Gt,yr);break;case 4:if(ts(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Fn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*d2(r/1960))-r,10<r){t.timeoutHandle=Lf(Gs.bind(null,t,Gt,yr),r);break}Gs(t,Gt,yr);break;case 5:Gs(t,Gt,yr);break;default:throw Error(z(329))}}}return Zt(t,Ze()),t.callbackNode===n?vw.bind(null,t):null}function nm(t,e){var n=tl;return t.current.memoizedState.isDehydrated&&(ti(t,e).flags|=256),t=Qu(t,e),t!==2&&(e=Gt,Gt=n,e!==null&&rm(e)),t}function rm(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function h2(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!zn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e){for(e&=~wp,e&=~Sd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fn(e),r=1<<n;t[n]=-1,e&=~r}}function _0(t){if(me&6)throw Error(z(327));wo();var e=Ru(t,0);if(!(e&1))return Zt(t,Ze()),null;var n=Qu(t,e);if(t.tag!==0&&n===2){var r=If(t);r!==0&&(e=r,n=nm(t,r))}if(n===1)throw n=Tl,ti(t,0),ts(t,e),Zt(t,Ze()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Gs(t,Gt,yr),Zt(t,Ze()),null}function Np(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(Po=Ze()+500,jd&&Ps())}}function ui(t){as!==null&&as.tag===0&&!(me&6)&&wo();var e=me;me|=1;var n=kn.transition,r=we;try{if(kn.transition=null,we=1,t)return t()}finally{we=r,kn.transition=n,me=e,!(me&6)&&Ps()}}function Ep(){an=fo.current,De(fo)}function ti(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Bj(n)),at!==null)for(n=at.return;n!==null;){var r=n;switch(sp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lu();break;case 3:Ro(),De(Yt),De(Mt),fp();break;case 5:hp(r);break;case 4:Ro();break;case 13:De(ze);break;case 19:De(ze);break;case 10:lp(r.type._context);break;case 22:case 23:Ep()}n=n.return}if(_t=t,at=t=xs(t.current,null),jt=an=e,ht=0,Tl=null,wp=Sd=ci=0,Gt=tl=null,Js!==null){for(e=0;e<Js.length;e++)if(n=Js[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}Js=null}return t}function _w(t,e){do{var n=at;try{if(ap(),hu.current=Hu,qu){for(var r=qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}qu=!1}if(li=0,yt=dt=qe=null,Za=!1,El=0,_p.current=null,n===null||n.return===null){ht=1,Tl=e,at=null;break}e:{var i=t,a=n.return,c=n,u=e;if(e=jt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,m=f.tag;if(!(f.mode&1)&&(m===0||m===11||m===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=a0(a);if(w!==null){w.flags&=-257,l0(w,a,c,i,e),w.mode&1&&o0(i,d,e),e=w,u=d;var C=e.updateQueue;if(C===null){var T=new Set;T.add(u),e.updateQueue=T}else C.add(u);break e}else{if(!(e&1)){o0(i,d,e),jp();break e}u=Error(z(426))}}else if(Ue&&c.mode&1){var R=a0(a);if(R!==null){!(R.flags&65536)&&(R.flags|=256),l0(R,a,c,i,e),ip(Ao(u,c));break e}}i=u=Ao(u,c),ht!==4&&(ht=2),tl===null?tl=[i]:tl.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=rw(i,u,e);e0(i,x);break e;case 1:c=u;var N=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof N.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(gs===null||!gs.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=sw(i,c,e);e0(i,b);break e}}i=i.return}while(i!==null)}Nw(n)}catch(O){e=O,at===n&&n!==null&&(at=n=n.return);continue}break}while(!0)}function ww(){var t=Wu.current;return Wu.current=Hu,t===null?Hu:t}function jp(){(ht===0||ht===3||ht===2)&&(ht=4),_t===null||!(ci&268435455)&&!(Sd&268435455)||ts(_t,jt)}function Qu(t,e){var n=me;me|=2;var r=ww();(_t!==t||jt!==e)&&(yr=null,ti(t,e));do try{f2();break}catch(s){_w(t,s)}while(!0);if(ap(),me=n,Wu.current=r,at!==null)throw Error(z(261));return _t=null,jt=0,ht}function f2(){for(;at!==null;)bw(at)}function m2(){for(;at!==null&&!UE();)bw(at)}function bw(t){var e=jw(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?Nw(t):at=e,_p.current=null}function Nw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=a2(n,e),n!==null){n.flags&=32767,at=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,at=null;return}}else if(n=o2(n,e,an),n!==null){at=n;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ht===0&&(ht=5)}function Gs(t,e,n){var r=we,s=kn.transition;try{kn.transition=null,we=1,p2(t,e,n,r)}finally{kn.transition=s,we=r}return null}function p2(t,e,n,r){do wo();while(as!==null);if(me&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(QE(t,i),t===_t&&(at=_t=null,jt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qc||(Qc=!0,kw(Cu,function(){return wo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=kn.transition,kn.transition=null;var a=we;we=1;var c=me;me|=4,_p.current=null,c2(t,n),yw(n,t),Oj(Df),Au=!!Pf,Df=Pf=null,t.current=n,u2(n),FE(),me=c,we=a,kn.transition=i}else t.current=n;if(Qc&&(Qc=!1,as=t,Gu=s),i=t.pendingLanes,i===0&&(gs=null),zE(n.stateNode),Zt(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ku)throw Ku=!1,t=em,em=null,t;return Gu&1&&t.tag!==0&&wo(),i=t.pendingLanes,i&1?t===tm?nl++:(nl=0,tm=t):nl=0,Ps(),null}function wo(){if(as!==null){var t=r_(Gu),e=kn.transition,n=we;try{if(kn.transition=null,we=16>t?16:t,as===null)var r=!1;else{if(t=as,as=null,Gu=0,me&6)throw Error(z(331));var s=me;for(me|=4,G=t.current;G!==null;){var i=G,a=i.child;if(G.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(G=d;G!==null;){var f=G;switch(f.tag){case 0:case 11:case 15:el(8,f,i)}var m=f.child;if(m!==null)m.return=f,G=m;else for(;G!==null;){f=G;var g=f.sibling,w=f.return;if(mw(f),f===d){G=null;break}if(g!==null){g.return=w,G=g;break}G=w}}}var C=i.alternate;if(C!==null){var T=C.child;if(T!==null){C.child=null;do{var R=T.sibling;T.sibling=null,T=R}while(T!==null)}}G=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,G=a;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:el(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,G=x;break e}G=i.return}}var N=t.current;for(G=N;G!==null;){a=G;var v=a.child;if(a.subtreeFlags&2064&&v!==null)v.return=a,G=v;else e:for(a=N;G!==null;){if(c=G,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Id(9,c)}}catch(O){Xe(c,c.return,O)}if(c===a){G=null;break e}var b=c.sibling;if(b!==null){b.return=c.return,G=b;break e}G=c.return}}if(me=s,Ps(),er&&typeof er.onPostCommitFiberRoot=="function")try{er.onPostCommitFiberRoot(_d,t)}catch{}r=!0}return r}finally{we=n,kn.transition=e}}return!1}function w0(t,e,n){e=Ao(n,e),e=rw(t,e,1),t=ps(t,e,1),e=$t(),t!==null&&(Kl(t,1,e),Zt(t,e))}function Xe(t,e,n){if(t.tag===3)w0(t,t,n);else for(;e!==null;){if(e.tag===3){w0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(gs===null||!gs.has(r))){t=Ao(n,t),t=sw(e,t,1),e=ps(e,t,1),t=$t(),e!==null&&(Kl(e,1,t),Zt(e,t));break}}e=e.return}}function g2(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=$t(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(jt&n)===n&&(ht===4||ht===3&&(jt&130023424)===jt&&500>Ze()-bp?ti(t,0):wp|=n),Zt(t,e)}function Ew(t,e){e===0&&(t.mode&1?(e=Uc,Uc<<=1,!(Uc&130023424)&&(Uc=4194304)):e=1);var n=$t();t=Ar(t,e),t!==null&&(Kl(t,e,n),Zt(t,n))}function y2(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ew(t,n)}function x2(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Ew(t,n)}var jw;jw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Xt=!1,i2(t,e,n);Xt=!!(t.flags&131072)}else Xt=!1,Ue&&e.flags&1048576&&S_(e,Uu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;mu(t,e),t=e.pendingProps;var s=Io(e,Mt.current);_o(e,n),s=pp(null,e,r,t,s,n);var i=gp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jt(r)?(i=!0,Mu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,up(e),s.updater=Td,e.stateNode=s,s._reactInternals=e,zf(e,r,t,n),e=Wf(null,e,r,!0,i,n)):(e.tag=0,Ue&&i&&rp(e),Ft(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(mu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_2(r),t=Ln(r,t),s){case 0:e=Hf(null,e,r,t,n);break e;case 1:e=d0(null,e,r,t,n);break e;case 11:e=c0(null,e,r,t,n);break e;case 14:e=u0(null,e,r,Ln(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),Hf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),d0(t,e,r,s,n);case 3:e:{if(lw(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,O_(t,e),Bu(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ao(Error(z(423)),e),e=h0(t,e,r,n,s);break e}else if(r!==s){s=Ao(Error(z(424)),e),e=h0(t,e,r,n,s);break e}else for(un=ms(e.stateNode.containerInfo.firstChild),fn=e,Ue=!0,Vn=null,n=P_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(So(),r===s){e=Pr(t,e,n);break e}Ft(t,e,r,n)}e=e.child}return e;case 5:return L_(e),t===null&&Ff(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Of(r,s)?a=null:i!==null&&Of(r,i)&&(e.flags|=32),aw(t,e),Ft(t,e,a,n),e.child;case 6:return t===null&&Ff(e),null;case 13:return cw(t,e,n);case 4:return dp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Co(e,null,r,n):Ft(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),c0(t,e,r,s,n);case 7:return Ft(t,e,e.pendingProps,n),e.child;case 8:return Ft(t,e,e.pendingProps.children,n),e.child;case 12:return Ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Se(Fu,r._currentValue),r._currentValue=a,i!==null)if(zn(i.value,a)){if(i.children===s.children&&!Yt.current){e=Pr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){a=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=kr(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),$f(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(z(341));a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),$f(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ft(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,_o(e,n),s=In(s),r=r(s),e.flags|=1,Ft(t,e,r,n),e.child;case 14:return r=e.type,s=Ln(r,e.pendingProps),s=Ln(r.type,s),u0(t,e,r,s,n);case 15:return iw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Ln(r,s),mu(t,e),e.tag=1,Jt(r)?(t=!0,Mu(e)):t=!1,_o(e,n),nw(e,r,s),zf(e,r,s,n),Wf(null,e,r,!0,t,n);case 19:return uw(t,e,n);case 22:return ow(t,e,n)}throw Error(z(156,e.tag))};function kw(t,e){return Zv(t,e)}function v2(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jn(t,e,n,r){return new v2(t,e,n,r)}function kp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _2(t){if(typeof t=="function")return kp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hm)return 11;if(t===Wm)return 14}return 2}function xs(t,e){var n=t.alternate;return n===null?(n=jn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yu(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")kp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case no:return ni(n.children,s,i,e);case qm:a=8,s|=8;break;case ff:return t=jn(12,n,e,s|2),t.elementType=ff,t.lanes=i,t;case mf:return t=jn(13,n,e,s),t.elementType=mf,t.lanes=i,t;case pf:return t=jn(19,n,e,s),t.elementType=pf,t.lanes=i,t;case Lv:return Cd(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dv:a=10;break e;case Ov:a=9;break e;case Hm:a=11;break e;case Wm:a=14;break e;case Jr:a=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=jn(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ni(t,e,n,r){return t=jn(7,t,r,e),t.lanes=n,t}function Cd(t,e,n,r){return t=jn(22,t,r,e),t.elementType=Lv,t.lanes=n,t.stateNode={isHidden:!1},t}function zh(t,e,n){return t=jn(6,t,null,e),t.lanes=n,t}function qh(t,e,n){return e=jn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function w2(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eh(0),this.expirationTimes=Eh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Tp(t,e,n,r,s,i,a,c,u){return t=new w2(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=jn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},up(i),t}function b2(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:to,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tw(t){if(!t)return Es;t=t._reactInternals;e:{if(Ni(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Jt(n))return T_(t,n,e)}return e}function Iw(t,e,n,r,s,i,a,c,u){return t=Tp(n,r,!0,t,s,i,a,c,u),t.context=Tw(null),n=t.current,r=$t(),s=ys(n),i=kr(r,s),i.callback=e??null,ps(n,i,s),t.current.lanes=s,Kl(t,s,r),Zt(t,r),t}function Rd(t,e,n,r){var s=e.current,i=$t(),a=ys(s);return n=Tw(n),e.context===null?e.context=n:e.pendingContext=n,e=kr(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ps(s,e,a),t!==null&&($n(t,s,a,i),du(t,s,a)),a}function Xu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function b0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ip(t,e){b0(t,e),(t=t.alternate)&&b0(t,e)}function N2(){return null}var Sw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sp(t){this._internalRoot=t}Ad.prototype.render=Sp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Rd(t,e,null,null)};Ad.prototype.unmount=Sp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ui(function(){Rd(null,t,null,null)}),e[Rr]=null}};function Ad(t){this._internalRoot=t}Ad.prototype.unstable_scheduleHydration=function(t){if(t){var e=o_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<es.length&&e!==0&&e<es[n].priority;n++);es.splice(n,0,t),n===0&&l_(t)}};function Cp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function N0(){}function E2(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Xu(a);i.call(d)}}var a=Iw(e,r,t,0,null,!1,!1,"",N0);return t._reactRootContainer=a,t[Rr]=a.current,vl(t.nodeType===8?t.parentNode:t),ui(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Xu(u);c.call(d)}}var u=Tp(t,0,!1,null,null,!1,!1,"",N0);return t._reactRootContainer=u,t[Rr]=u.current,vl(t.nodeType===8?t.parentNode:t),ui(function(){Rd(e,u,n,r)}),u}function Dd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var c=s;s=function(){var u=Xu(a);c.call(u)}}Rd(e,a,t,s)}else a=E2(n,e,t,s,r);return Xu(a)}s_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ua(e.pendingLanes);n!==0&&(Qm(e,n|1),Zt(e,Ze()),!(me&6)&&(Po=Ze()+500,Ps()))}break;case 13:ui(function(){var r=Ar(t,1);if(r!==null){var s=$t();$n(r,t,1,s)}}),Ip(t,1)}};Xm=function(t){if(t.tag===13){var e=Ar(t,134217728);if(e!==null){var n=$t();$n(e,t,134217728,n)}Ip(t,134217728)}};i_=function(t){if(t.tag===13){var e=ys(t),n=Ar(t,e);if(n!==null){var r=$t();$n(n,t,e,r)}Ip(t,e)}};o_=function(){return we};a_=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};jf=function(t,e,n){switch(e){case"input":if(xf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ed(r);if(!s)throw Error(z(90));Vv(r),xf(r,s)}}}break;case"textarea":Fv(t,n);break;case"select":e=n.value,e!=null&&go(t,!!n.multiple,e,!1)}};Kv=Np;Gv=ui;var j2={usingClientEntryPoint:!1,Events:[Ql,oo,Ed,Hv,Wv,Np]},Da={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},k2={bundleType:Da.bundleType,version:Da.version,rendererPackageName:Da.rendererPackageName,rendererConfig:Da.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Yv(t),t===null?null:t.stateNode},findFiberByHostInstance:Da.findFiberByHostInstance||N2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xc.isDisabled&&Xc.supportsFiber)try{_d=Xc.inject(k2),er=Xc}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j2;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cp(e))throw Error(z(200));return b2(t,e,null,n)};yn.createRoot=function(t,e){if(!Cp(t))throw Error(z(299));var n=!1,r="",s=Sw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Tp(t,1,!1,null,null,n,!1,r,s),t[Rr]=e.current,vl(t.nodeType===8?t.parentNode:t),new Sp(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Yv(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return ui(t)};yn.hydrate=function(t,e,n){if(!Pd(e))throw Error(z(200));return Dd(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!Cp(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Sw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=Iw(e,null,t,1,n??null,s,!1,i,a),t[Rr]=e.current,vl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ad(e)};yn.render=function(t,e,n){if(!Pd(e))throw Error(z(200));return Dd(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!Pd(t))throw Error(z(40));return t._reactRootContainer?(ui(function(){Dd(null,null,t,!1,function(){t._reactRootContainer=null,t[Rr]=null})}),!0):!1};yn.unstable_batchedUpdates=Np;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pd(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Dd(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function Cw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cw)}catch(t){console.error(t)}}Cw(),Cv.exports=yn;var T2=Cv.exports,E0=T2;df.createRoot=E0.createRoot,df.hydrateRoot=E0.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Il(){return Il=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Il.apply(this,arguments)}var ls;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ls||(ls={}));const j0="popstate";function I2(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:a,hash:c}=r.location;return sm("",{pathname:i,search:a,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Yu(s)}return C2(e,n,null,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function S2(){return Math.random().toString(36).substr(2,8)}function k0(t,e){return{usr:t.state,key:t.key,idx:e}}function sm(t,e,n,r){return n===void 0&&(n=null),Il({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?qo(e):e,{state:n,key:e&&e.key||r||S2()})}function Yu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function qo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function C2(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,c=ls.Pop,u=null,d=f();d==null&&(d=0,a.replaceState(Il({},a.state,{idx:d}),""));function f(){return(a.state||{idx:null}).idx}function m(){c=ls.Pop;let R=f(),x=R==null?null:R-d;d=R,u&&u({action:c,location:T.location,delta:x})}function g(R,x){c=ls.Push;let N=sm(T.location,R,x);d=f()+1;let v=k0(N,d),b=T.createHref(N);try{a.pushState(v,"",b)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(b)}i&&u&&u({action:c,location:T.location,delta:1})}function w(R,x){c=ls.Replace;let N=sm(T.location,R,x);d=f();let v=k0(N,d),b=T.createHref(N);a.replaceState(v,"",b),i&&u&&u({action:c,location:T.location,delta:0})}function C(R){let x=s.location.origin!=="null"?s.location.origin:s.location.href,N=typeof R=="string"?R:Yu(R);return N=N.replace(/ $/,"%20"),et(x,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,x)}let T={get action(){return c},get location(){return t(s,a)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(j0,m),u=R,()=>{s.removeEventListener(j0,m),u=null}},createHref(R){return e(s,R)},createURL:C,encodeLocation(R){let x=C(R);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:g,replace:w,go(R){return a.go(R)}};return T}var T0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(T0||(T0={}));function R2(t,e,n){return n===void 0&&(n="/"),A2(t,e,n)}function A2(t,e,n,r){let s=typeof e=="string"?qo(e):e,i=Rp(s.pathname||"/",n);if(i==null)return null;let a=Aw(t);P2(a);let c=null;for(let u=0;c==null&&u<a.length;++u){let d=H2(i);c=B2(a[u],d)}return c}function Aw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(et(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=vs([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Aw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:F2(d,i.index),routesMeta:f})};return t.forEach((i,a)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,a);else for(let u of Pw(i.path))s(i,a,u)}),e}function Pw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Pw(r.join("/")),c=[];return c.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...a),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function P2(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:$2(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const D2=/^:[\w-]+$/,O2=3,L2=2,M2=1,V2=10,U2=-2,I0=t=>t==="*";function F2(t,e){let n=t.split("/"),r=n.length;return n.some(I0)&&(r+=U2),e&&(r+=L2),n.filter(s=>!I0(s)).reduce((s,i)=>s+(D2.test(i)?O2:i===""?M2:V2),r)}function $2(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function B2(t,e,n){let{routesMeta:r}=t,s={},i="/",a=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",m=z2({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!m)return null;Object.assign(s,m.params),a.push({params:s,pathname:vs([i,m.pathname]),pathnameBase:Q2(vs([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=vs([i,m.pathnameBase]))}return a}function z2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=q2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,m)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let T=c[m]||"";a=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const C=c[m];return w&&!C?d[g]=void 0:d[g]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function q2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function H2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Rp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function W2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?qo(t):t;return{pathname:n?n.startsWith("/")?n:K2(n,e):e,search:X2(r),hash:Y2(s)}}function K2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function G2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ap(t,e){let n=G2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Pp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=qo(t):(s=Il({},t),et(!s.pathname||!s.pathname.includes("?"),Hh("?","pathname","search",s)),et(!s.pathname||!s.pathname.includes("#"),Hh("#","pathname","hash",s)),et(!s.search||!s.search.includes("#"),Hh("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,c;if(a==null)c=n;else{let m=e.length-1;if(!r&&a.startsWith("..")){let g=a.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}c=m>=0?e[m]:"/"}let u=W2(s,c),d=a&&a!=="/"&&a.endsWith("/"),f=(i||a===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),Q2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),X2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Y2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function J2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Dw=["post","put","patch","delete"];new Set(Dw);const Z2=["get",...Dw];new Set(Z2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sl(){return Sl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sl.apply(this,arguments)}const Dp=I.createContext(null),ek=I.createContext(null),Ds=I.createContext(null),Od=I.createContext(null),Os=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Ow=I.createContext(null);function tk(t,e){let{relative:n}=e===void 0?{}:e;Ho()||et(!1);let{basename:r,navigator:s}=I.useContext(Ds),{hash:i,pathname:a,search:c}=Mw(t,{relative:n}),u=a;return r!=="/"&&(u=a==="/"?r:vs([r,a])),s.createHref({pathname:u,search:c,hash:i})}function Ho(){return I.useContext(Od)!=null}function Ls(){return Ho()||et(!1),I.useContext(Od).location}function Lw(t){I.useContext(Ds).static||I.useLayoutEffect(t)}function Ur(){let{isDataRoute:t}=I.useContext(Os);return t?mk():nk()}function nk(){Ho()||et(!1);let t=I.useContext(Dp),{basename:e,future:n,navigator:r}=I.useContext(Ds),{matches:s}=I.useContext(Os),{pathname:i}=Ls(),a=JSON.stringify(Ap(s,n.v7_relativeSplatPath)),c=I.useRef(!1);return Lw(()=>{c.current=!0}),I.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let m=Pp(d,JSON.parse(a),i,f.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:vs([e,m.pathname])),(f.replace?r.replace:r.push)(m,f.state,f)},[e,r,a,i,t])}function Mw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(Ds),{matches:s}=I.useContext(Os),{pathname:i}=Ls(),a=JSON.stringify(Ap(s,r.v7_relativeSplatPath));return I.useMemo(()=>Pp(t,JSON.parse(a),i,n==="path"),[t,a,i,n])}function rk(t,e){return sk(t,e)}function sk(t,e,n,r){Ho()||et(!1);let{navigator:s}=I.useContext(Ds),{matches:i}=I.useContext(Os),a=i[i.length-1],c=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Ls(),f;if(e){var m;let R=typeof e=="string"?qo(e):e;u==="/"||(m=R.pathname)!=null&&m.startsWith(u)||et(!1),f=R}else f=d;let g=f.pathname||"/",w=g;if(u!=="/"){let R=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let C=R2(t,{pathname:w}),T=ck(C&&C.map(R=>Object.assign({},R,{params:Object.assign({},c,R.params),pathname:vs([u,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:vs([u,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n,r);return e&&T?I.createElement(Od.Provider,{value:{location:Sl({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:ls.Pop}},T):T}function ik(){let t=fk(),e=J2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:s},n):null,null)}const ok=I.createElement(ik,null);class ak extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(Os.Provider,{value:this.props.routeContext},I.createElement(Ow.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function lk(t){let{routeContext:e,match:n,children:r}=t,s=I.useContext(Dp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Os.Provider,{value:e},r)}function ck(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=a.findIndex(m=>m.route.id&&(c==null?void 0:c[m.route.id])!==void 0);f>=0||et(!1),a=a.slice(0,Math.min(a.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<a.length;f++){let m=a[f];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=f),m.route.id){let{loaderData:g,errors:w}=n,C=m.route.loader&&g[m.route.id]===void 0&&(!w||w[m.route.id]===void 0);if(m.route.lazy||C){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((f,m,g)=>{let w,C=!1,T=null,R=null;n&&(w=c&&m.route.id?c[m.route.id]:void 0,T=m.route.errorElement||ok,u&&(d<0&&g===0?(pk("route-fallback"),C=!0,R=null):d===g&&(C=!0,R=m.route.hydrateFallbackElement||null)));let x=e.concat(a.slice(0,g+1)),N=()=>{let v;return w?v=T:C?v=R:m.route.Component?v=I.createElement(m.route.Component,null):m.route.element?v=m.route.element:v=f,I.createElement(lk,{match:m,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:v})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?I.createElement(ak,{location:n.location,revalidation:n.revalidation,component:T,error:w,children:N(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):N()},null)}var Vw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Vw||{}),Uw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Uw||{});function uk(t){let e=I.useContext(Dp);return e||et(!1),e}function dk(t){let e=I.useContext(ek);return e||et(!1),e}function hk(t){let e=I.useContext(Os);return e||et(!1),e}function Fw(t){let e=hk(),n=e.matches[e.matches.length-1];return n.route.id||et(!1),n.route.id}function fk(){var t;let e=I.useContext(Ow),n=dk(),r=Fw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function mk(){let{router:t}=uk(Vw.UseNavigateStable),e=Fw(Uw.UseNavigateStable),n=I.useRef(!1);return Lw(()=>{n.current=!0}),I.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Sl({fromRouteId:e},i)))},[t,e])}const S0={};function pk(t,e,n){S0[t]||(S0[t]=!0)}function gk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Op(t){let{to:e,replace:n,state:r,relative:s}=t;Ho()||et(!1);let{future:i,static:a}=I.useContext(Ds),{matches:c}=I.useContext(Os),{pathname:u}=Ls(),d=Ur(),f=Pp(e,Ap(c,i.v7_relativeSplatPath),u,s==="path"),m=JSON.stringify(f);return I.useEffect(()=>d(JSON.parse(m),{replace:n,state:r,relative:s}),[d,m,s,n,r]),null}function Ie(t){et(!1)}function yk(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ls.Pop,navigator:i,static:a=!1,future:c}=t;Ho()&&et(!1);let u=e.replace(/^\/*/,"/"),d=I.useMemo(()=>({basename:u,navigator:i,static:a,future:Sl({v7_relativeSplatPath:!1},c)}),[u,c,i,a]);typeof r=="string"&&(r=qo(r));let{pathname:f="/",search:m="",hash:g="",state:w=null,key:C="default"}=r,T=I.useMemo(()=>{let R=Rp(f,u);return R==null?null:{location:{pathname:R,search:m,hash:g,state:w,key:C},navigationType:s}},[u,f,m,g,w,C,s]);return T==null?null:I.createElement(Ds.Provider,{value:d},I.createElement(Od.Provider,{children:n,value:T}))}function xk(t){let{children:e,location:n}=t;return rk(im(e),n)}new Promise(()=>{});function im(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,s)=>{if(!I.isValidElement(r))return;let i=[...e,s];if(r.type===I.Fragment){n.push.apply(n,im(r.props.children,i));return}r.type!==Ie&&et(!1),!r.props.index||!r.props.children||et(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=im(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function om(){return om=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},om.apply(this,arguments)}function vk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function _k(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function wk(t,e){return t.button===0&&(!e||e==="_self")&&!_k(t)}function am(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function bk(t,e){let n=am(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const Nk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ek="6";try{window.__reactRouterVersion=Ek}catch{}const jk="startTransition",C0=gE[jk];function kk(t){let{basename:e,children:n,future:r,window:s}=t,i=I.useRef();i.current==null&&(i.current=I2({window:s,v5Compat:!0}));let a=i.current,[c,u]=I.useState({action:a.action,location:a.location}),{v7_startTransition:d}=r||{},f=I.useCallback(m=>{d&&C0?C0(()=>u(m)):u(m)},[u,d]);return I.useLayoutEffect(()=>a.listen(f),[a,f]),I.useEffect(()=>gk(r),[r]),I.createElement(yk,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:a,future:r})}const Tk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ik=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ve=I.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:c,target:u,to:d,preventScrollReset:f,viewTransition:m}=e,g=vk(e,Nk),{basename:w}=I.useContext(Ds),C,T=!1;if(typeof d=="string"&&Ik.test(d)&&(C=d,Tk))try{let v=new URL(window.location.href),b=d.startsWith("//")?new URL(v.protocol+d):new URL(d),O=Rp(b.pathname,w);b.origin===v.origin&&O!=null?d=O+b.search+b.hash:T=!0}catch{}let R=tk(d,{relative:s}),x=Sk(d,{replace:a,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:m});function N(v){r&&r(v),v.defaultPrevented||x(v)}return I.createElement("a",om({},g,{href:C||R,onClick:T||i?r:N,ref:n,target:u}))});var R0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(R0||(R0={}));var A0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A0||(A0={}));function Sk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:c}=e===void 0?{}:e,u=Ur(),d=Ls(),f=Mw(t,{relative:a});return I.useCallback(m=>{if(wk(m,n)){m.preventDefault();let g=r!==void 0?r:Yu(d)===Yu(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:a,viewTransition:c})}},[d,u,f,r,s,n,t,i,a,c])}function Ck(t){let e=I.useRef(am(t)),n=I.useRef(!1),r=Ls(),s=I.useMemo(()=>bk(r.search,n.current?null:e.current),[r.search]),i=Ur(),a=I.useCallback((c,u)=>{const d=am(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,a]}var P0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $w=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Rk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},Bw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,c=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,m=(i&3)<<4|c>>4;let g=(c&15)<<2|d>>6,w=d&63;u||(w=64,a||(g=64)),r.push(n[f],n[m],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($w(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Rk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||m==null)throw new Ak;const g=i<<2|c>>4;if(r.push(g),d!==64){const w=c<<4&240|d>>2;if(r.push(w),m!==64){const C=d<<6&192|m;r.push(C)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Ak extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Pk=function(t){const e=$w(t);return Bw.encodeByteArray(e,!0)},Ju=function(t){return Pk(t).replace(/\./g,"")},zw=function(t){try{return Bw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=()=>Dk().__FIREBASE_DEFAULTS__,Lk=()=>{if(typeof process>"u"||typeof P0>"u")return;const t=P0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Mk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zw(t[1]);return e&&JSON.parse(e)},Ld=()=>{try{return Ok()||Lk()||Mk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qw=t=>{var e,n;return(n=(e=Ld())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Hw=t=>{const e=qw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Ww=()=>{var t;return(t=Ld())===null||t===void 0?void 0:t.config},Kw=t=>{var e;return(e=Ld())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ju(JSON.stringify(n)),Ju(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Uk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function Fk(){var t;const e=(t=Ld())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $k(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Bk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qk(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Hk(){return!Fk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Wk(){try{return typeof indexedDB=="object"}catch{return!1}}function Kk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="FirebaseError";class cr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Gk,Object.setPrototypeOf(this,cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yl.prototype.create)}}class Yl{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Qk(i,r):"Error",c=`${this.serviceName}: ${a} (${s}).`;return new cr(s,c,r)}}function Qk(t,e){return t.replace(Xk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Xk=/\{\$([^}]+)}/g;function Yk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(D0(i)&&D0(a)){if(!Zu(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function D0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ba(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Jk(t,e){const n=new Zk(t,e);return n.subscribe.bind(n)}class Zk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wh),s.error===void 0&&(s.error=Wh),s.complete===void 0&&(s.complete=Wh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t){return t&&t._delegate?t._delegate:t}class js{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Vk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rT(e))try{this.getOrInitializeService({instanceIdentifier:Qs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qs){return this.instances.has(e)}getOptions(e=Qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&a.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&e(a,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qs){return this.component?this.component.multipleInstances?e:Qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nT(t){return t===Qs?void 0:t}function rT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var de;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(de||(de={}));const iT={debug:de.DEBUG,verbose:de.VERBOSE,info:de.INFO,warn:de.WARN,error:de.ERROR,silent:de.SILENT},oT=de.INFO,aT={[de.DEBUG]:"log",[de.VERBOSE]:"log",[de.INFO]:"info",[de.WARN]:"warn",[de.ERROR]:"error"},lT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=aT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Lp{constructor(e){this.name=e,this._logLevel=oT,this._logHandler=lT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in de))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,de.DEBUG,...e),this._logHandler(this,de.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,de.VERBOSE,...e),this._logHandler(this,de.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,de.INFO,...e),this._logHandler(this,de.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,de.WARN,...e),this._logHandler(this,de.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,de.ERROR,...e),this._logHandler(this,de.ERROR,...e)}}const cT=(t,e)=>e.some(n=>t instanceof n);let O0,L0;function uT(){return O0||(O0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return L0||(L0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qw=new WeakMap,lm=new WeakMap,Xw=new WeakMap,Kh=new WeakMap,Mp=new WeakMap;function hT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(_s(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Qw.set(n,t)}).catch(()=>{}),Mp.set(e,t),e}function fT(t){if(lm.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});lm.set(t,e)}let cm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return lm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Xw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mT(t){cm=t(cm)}function pT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gh(this),e,...n);return Xw.set(r,e.sort?e.sort():[e]),_s(r)}:dT().includes(t)?function(...e){return t.apply(Gh(this),e),_s(Qw.get(this))}:function(...e){return _s(t.apply(Gh(this),e))}}function gT(t){return typeof t=="function"?pT(t):(t instanceof IDBTransaction&&fT(t),cT(t,uT())?new Proxy(t,cm):t)}function _s(t){if(t instanceof IDBRequest)return hT(t);if(Kh.has(t))return Kh.get(t);const e=gT(t);return e!==t&&(Kh.set(t,e),Mp.set(e,t)),e}const Gh=t=>Mp.get(t);function yT(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),c=_s(a);return r&&a.addEventListener("upgradeneeded",u=>{r(_s(a.result),u.oldVersion,u.newVersion,_s(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const xT=["get","getKey","getAll","getAllKeys","count"],vT=["put","add","delete","clear"],Qh=new Map;function M0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qh.get(e))return Qh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=vT.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||xT.includes(n)))return;const i=async function(a,...c){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return Qh.set(e,i),i}mT(t=>({...t,get:(e,n,r)=>M0(e,n)||t.get(e,n,r),has:(e,n)=>!!M0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(wT(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function wT(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const um="@firebase/app",V0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Lp("@firebase/app"),bT="@firebase/app-compat",NT="@firebase/analytics-compat",ET="@firebase/analytics",jT="@firebase/app-check-compat",kT="@firebase/app-check",TT="@firebase/auth",IT="@firebase/auth-compat",ST="@firebase/database",CT="@firebase/data-connect",RT="@firebase/database-compat",AT="@firebase/functions",PT="@firebase/functions-compat",DT="@firebase/installations",OT="@firebase/installations-compat",LT="@firebase/messaging",MT="@firebase/messaging-compat",VT="@firebase/performance",UT="@firebase/performance-compat",FT="@firebase/remote-config",$T="@firebase/remote-config-compat",BT="@firebase/storage",zT="@firebase/storage-compat",qT="@firebase/firestore",HT="@firebase/vertexai-preview",WT="@firebase/firestore-compat",KT="firebase",GT="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="[DEFAULT]",QT={[um]:"fire-core",[bT]:"fire-core-compat",[ET]:"fire-analytics",[NT]:"fire-analytics-compat",[kT]:"fire-app-check",[jT]:"fire-app-check-compat",[TT]:"fire-auth",[IT]:"fire-auth-compat",[ST]:"fire-rtdb",[CT]:"fire-data-connect",[RT]:"fire-rtdb-compat",[AT]:"fire-fn",[PT]:"fire-fn-compat",[DT]:"fire-iid",[OT]:"fire-iid-compat",[LT]:"fire-fcm",[MT]:"fire-fcm-compat",[VT]:"fire-perf",[UT]:"fire-perf-compat",[FT]:"fire-rc",[$T]:"fire-rc-compat",[BT]:"fire-gcs",[zT]:"fire-gcs-compat",[qT]:"fire-fst",[WT]:"fire-fst-compat",[HT]:"fire-vertex","fire-js":"fire-js",[KT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl=new Map,XT=new Map,hm=new Map;function U0(t,e){try{t.container.addComponent(e)}catch(n){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function di(t){const e=t.name;if(hm.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;hm.set(e,t);for(const n of Cl.values())U0(n,t);for(const n of XT.values())U0(n,t);return!0}function Md(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Un(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ws=new Yl("app","Firebase",YT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ei=GT;function Yw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:dm,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ws.create("bad-app-name",{appName:String(s)});if(n||(n=Ww()),!n)throw ws.create("no-options");const i=Cl.get(s);if(i){if(Zu(n,i.options)&&Zu(r,i.config))return i;throw ws.create("duplicate-app",{appName:s})}const a=new sT(s);for(const u of hm.values())a.addComponent(u);const c=new JT(n,r,a);return Cl.set(s,c),c}function Vd(t=dm){const e=Cl.get(t);if(!e&&t===dm&&Ww())return Yw();if(!e)throw ws.create("no-app",{appName:t});return e}function Jw(){return Array.from(Cl.values())}function nr(t,e,n){var r;let s=(r=QT[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&c.push("and"),a&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(c.join(" "));return}di(new js(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT="firebase-heartbeat-database",eI=1,Rl="firebase-heartbeat-store";let Xh=null;function Zw(){return Xh||(Xh=yT(ZT,eI,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Rl)}catch(n){console.warn(n)}}}}).catch(t=>{throw ws.create("idb-open",{originalErrorMessage:t.message})})),Xh}async function tI(t){try{const n=(await Zw()).transaction(Rl),r=await n.objectStore(Rl).get(eb(t));return await n.done,r}catch(e){if(e instanceof cr)Dr.warn(e.message);else{const n=ws.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(n.message)}}}async function F0(t,e){try{const r=(await Zw()).transaction(Rl,"readwrite");await r.objectStore(Rl).put(e,eb(t)),await r.done}catch(n){if(n instanceof cr)Dr.warn(n.message);else{const r=ws.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dr.warn(r.message)}}}function eb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=1024,rI=30*24*60*60*1e3;class sI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new oI(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=$0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const c=new Date(a.date).valueOf();return Date.now()-c<=rI}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=$0(),{heartbeatsToSend:r,unsentEntries:s}=iI(this._heartbeatsCache.heartbeats),i=Ju(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Dr.warn(n),""}}}function $0(){return new Date().toISOString().substring(0,10)}function iI(t,e=nI){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),B0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),B0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class oI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Wk()?Kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tI(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return F0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return F0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function B0(t){return Ju(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(t){di(new js("platform-logger",e=>new _T(e),"PRIVATE")),di(new js("heartbeat",e=>new sI(e),"PRIVATE")),nr(um,V0,t),nr(um,V0,"esm2017"),nr("fire-js","")}aI("");function Vp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function tb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lI=tb,nb=new Yl("auth","Firebase",tb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ed=new Lp("@firebase/auth");function cI(t,...e){ed.logLevel<=de.WARN&&ed.warn(`Auth (${Ei}): ${t}`,...e)}function xu(t,...e){ed.logLevel<=de.ERROR&&ed.error(`Auth (${Ei}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t,...e){throw Up(t,...e)}function mn(t,...e){return Up(t,...e)}function rb(t,e,n){const r=Object.assign(Object.assign({},lI()),{[e]:n});return new Yl("auth","Firebase",r).create(e,{appName:t.name})}function rr(t){return rb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Up(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return nb.create(t,...e)}function Q(t,e,...n){if(!t)throw Up(e,...n)}function Nr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xu(e),new Error(e)}function Or(t,e){t||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function sb(){return z0()==="http:"||z0()==="https:"}function z0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(sb()||Bk()||"connection"in navigator)?navigator.onLine:!0}function dI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Or(n>e,"Short delay should be less than long delay!"),this.isMobile=Uk()||zk()}get(){return uI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t,e){Or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI=new Jl(3e4,6e4);function en(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cn(t,e,n,r,s={}){return ob(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const c=Wo(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return $k()||(d.referrerPolicy="no-referrer"),ib.fetch()(ab(t,t.config.apiHost,n,c),d)})}async function ob(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},hI),e);try{const s=new pI(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw za(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const c=i.ok?a.errorMessage:a.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw za(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw za(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw za(t,"user-disabled",a);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw rb(t,f,d);qn(t,f)}}catch(s){if(s instanceof cr)throw s;qn(t,"network-request-failed",{message:String(s)})}}async function Ms(t,e,n,r,s={}){const i=await Cn(t,e,n,r,s);return"mfaPendingCredential"in i&&qn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function ab(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Fp(t.config,s):`${t.config.apiScheme}://${s}`}function mI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pI{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(mn(this.auth,"network-request-failed")),fI.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function za(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=mn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){return t!==void 0&&t.getResponse!==void 0}function H0(t){return t!==void 0&&t.enterprise!==void 0}class gI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return mI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t){return(await Cn(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function xI(t,e){return Cn(t,"GET","/v2/recaptchaConfig",en(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vI(t,e){return Cn(t,"POST","/v1/accounts:delete",e)}async function lb(t,e){return Cn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _I(t,e=!1){const n=Ce(t),r=await n.getIdToken(e),s=$p(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:rl(Yh(s.auth_time)),issuedAtTime:rl(Yh(s.iat)),expirationTime:rl(Yh(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Yh(t){return Number(t)*1e3}function $p(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return xu("JWT malformed, contained fewer than 3 sections"),null;try{const s=zw(n);return s?JSON.parse(s):(xu("Failed to decode base64 JWT payload"),null)}catch(s){return xu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function W0(t){const e=$p(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof cr&&wI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function wI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=rl(this.lastLoginAt),this.creationTime=rl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function td(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Al(t,lb(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const a=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?cb(i.providerUserInfo):[],c=EI(t.providerData,a),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new mm(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function NI(t){const e=Ce(t);await td(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function cb(t){return t.map(e=>{var{providerId:n}=e,r=Vp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(t,e){const n=await ob(t,{},async()=>{const r=Wo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=ab(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ib.fetch()(a,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kI(t,e){return Cn(t,"POST","/v2/accounts:revokeToken",en(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):W0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=W0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await jI(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new bo;return r&&(Q(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Er{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Vp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new mm(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Al(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return _I(this,e)}reload(){return NI(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Er(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await td(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Un(this.auth.app))return Promise.reject(rr(this.auth));const e=await this.getIdToken();return await Al(this,vI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,a,c,u,d,f;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,C=(a=n.photoURL)!==null&&a!==void 0?a:void 0,T=(c=n.tenantId)!==null&&c!==void 0?c:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,N=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:v,emailVerified:b,isAnonymous:O,providerData:L,stsTokenManager:_}=n;Q(v&&_,e,"internal-error");const y=bo.fromJSON(this.name,_);Q(typeof v=="string",e,"internal-error"),Yr(m,e.name),Yr(g,e.name),Q(typeof b=="boolean",e,"internal-error"),Q(typeof O=="boolean",e,"internal-error"),Yr(w,e.name),Yr(C,e.name),Yr(T,e.name),Yr(R,e.name),Yr(x,e.name),Yr(N,e.name);const j=new Er({uid:v,auth:e,email:g,emailVerified:b,displayName:m,isAnonymous:O,photoURL:C,phoneNumber:w,tenantId:T,stsTokenManager:y,createdAt:x,lastLoginAt:N});return L&&Array.isArray(L)&&(j.providerData=L.map(S=>Object.assign({},S))),R&&(j._redirectEventId=R),j}static async _fromIdTokenResponse(e,n,r=!1){const s=new bo;s.updateFromServerResponse(n);const i=new Er({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await td(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?cb(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new bo;c.updateFromIdToken(r);const u=new Er({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new mm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0=new Map;function jr(t){Or(t instanceof Function,"Expected a class definition");let e=K0.get(t);return e?(Or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,K0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}ub.type="NONE";const G0=ub;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(t,e,n){return`firebase:${t}:${e}:${n}`}class No{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=vu(this.userKey,s.apiKey,i),this.fullPersistenceKey=vu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Er._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new No(jr(G0),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||jr(G0);const a=vu(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(a);if(f){const m=Er._fromJSON(e,f);d!==i&&(c=m),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new No(i,e,r):(i=u[0],c&&await i._set(a,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new No(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(db(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gb(e))return"Blackberry";if(yb(e))return"Webos";if(hb(e))return"Safari";if((e.includes("chrome/")||fb(e))&&!e.includes("edge/"))return"Chrome";if(pb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function db(t=Vt()){return/firefox\//i.test(t)}function hb(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fb(t=Vt()){return/crios\//i.test(t)}function mb(t=Vt()){return/iemobile/i.test(t)}function pb(t=Vt()){return/android/i.test(t)}function gb(t=Vt()){return/blackberry/i.test(t)}function yb(t=Vt()){return/webos/i.test(t)}function Bp(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function TI(t=Vt()){var e;return Bp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function II(){return qk()&&document.documentMode===10}function xb(t=Vt()){return Bp(t)||pb(t)||yb(t)||gb(t)||/windows phone/i.test(t)||mb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e=[]){let n;switch(t){case"Browser":n=Q0(Vt());break;case"Worker":n=`${Q0(Vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ei}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,c)=>{try{const u=e(i);a(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(t,e={}){return Cn(t,"GET","/v2/passwordPolicy",en(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=6;class AI{constructor(e){var n,r,s,i;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:RI,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,a,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X0(this),this.idTokenSubscription=new X0(this),this.beforeStateQueue=new SI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=jr(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await No.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await lb(this,{idToken:e}),r=await Er._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Un(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await td(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Un(this.app))return Promise.reject(rr(this));const n=e?Ce(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Un(this.app)?Promise.reject(rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Un(this.app)?Promise.reject(rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(jr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CI(this),n=new AI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yl("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&jr(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await No.create(this,[jr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{a=!0,u()}}else{const u=e.addObserver(n);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&cI(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Fr(t){return Ce(t)}class X0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jk(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DI(t){Zl=t}function zp(t){return Zl.loadJS(t)}function OI(){return Zl.recaptchaV2Script}function LI(){return Zl.recaptchaEnterpriseScript}function MI(){return Zl.gapiScript}function _b(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const VI="recaptcha-enterprise",UI="NO_RECAPTCHA";class FI{constructor(e){this.type=VI,this.auth=Fr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,c)=>{xI(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new gI(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,a,c){const u=window.grecaptcha;H0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(UI)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,a)=>{r(this.auth).then(c=>{if(!n&&H0(window.grecaptcha))s(c,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=LI();u.length!==0&&(u+=c),zp(u).then(()=>{s(c,i,a)}).catch(d=>{a(d)})}}).catch(c=>{a(c)})})}}async function Y0(t,e,n,r=!1){const s=new FI(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:i}):Object.assign(a,{captchaResponse:i}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function pm(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Y0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Y0(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(t,e){const n=Md(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Zu(i,e??{}))return s;qn(s,"already-initialized")}return n.initialize({options:e})}function $I(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function BI(t,e,n){const r=Fr(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=bb(e),{host:a,port:c}=zI(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${a}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),qI()}function bb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function zI(t){const e=bb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:J0(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:J0(a)}}}function J0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function qI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,n){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function HI(t,e){return Cn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,e){return Ms(t,"POST","/v1/accounts:signInWithPassword",en(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(t,e){return Ms(t,"POST","/v1/accounts:signInWithEmailLink",en(t,e))}async function GI(t,e){return Ms(t,"POST","/v1/accounts:signInWithEmailLink",en(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl extends Ud{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Pl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Pl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pm(e,n,"signInWithPassword",WI);case"emailLink":return KI(e,{email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return pm(e,r,"signUpPassword",HI);case"emailLink":return GI(e,{idToken:n,email:this._email,oobCode:this._password});default:qn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(t,e){return Ms(t,"POST","/v1/accounts:signInWithIdp",en(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="http://localhost";class hi extends Ud{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):qn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Vp(n,["providerId","signInMethod"]);if(!r||!s)return null;const a=new hi(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Eo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Eo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Eo(e,n)}buildRequest(){const e={requestUri:QI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Wo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XI(t,e){return Cn(t,"POST","/v1/accounts:sendVerificationCode",en(t,e))}async function YI(t,e){return Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",en(t,e))}async function JI(t,e){const n=await Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",en(t,e));if(n.temporaryProof)throw za(t,"account-exists-with-different-credential",n);return n}const ZI={USER_NOT_FOUND:"user-not-found"};async function eS(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Ms(t,"POST","/v1/accounts:signInWithPhoneNumber",en(t,n),ZI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends Ud{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new sl({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new sl({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return YI(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return JI(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return eS(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new sl({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nS(t){const e=$a(Ba(t)).link,n=e?$a(Ba(e)).deep_link_id:null,r=$a(Ba(t)).deep_link_id;return(r?$a(Ba(r)).link:null)||r||n||e||t}class qp{constructor(e){var n,r,s,i,a,c;const u=$a(Ba(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,m=tS((s=u.mode)!==null&&s!==void 0?s:null);Q(d&&f&&m,"argument-error"),this.apiKey=d,this.operation=m,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=nS(e);try{return new qp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,n){return Pl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=qp.parseLink(n);return Q(r,"argument-error"),Pl._fromEmailAndCode(e,r.code,r.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ec extends Nb{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends ec{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ns.credential(e.oauthAccessToken)}catch{return null}}}ns.FACEBOOK_SIGN_IN_METHOD="facebook.com";ns.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return rs.credential(n,r)}catch{return null}}}rs.GOOGLE_SIGN_IN_METHOD="google.com";rs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends ec{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ss.credential(e.oauthAccessToken)}catch{return null}}}ss.GITHUB_SIGN_IN_METHOD="github.com";ss.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends ec{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return is.credential(n,r)}catch{return null}}}is.TWITTER_SIGN_IN_METHOD="twitter.com";is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rS(t,e){return Ms(t,"POST","/v1/accounts:signUp",en(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Er._fromIdTokenResponse(e,r,s),a=Z0(r);return new fi({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Z0(r);return new fi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Z0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd extends cr{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,nd.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new nd(e,n,r,s)}}function Eb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?nd._fromErrorAndOperation(t,i,e,r):i})}async function sS(t,e,n=!1){const r=await Al(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return fi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iS(t,e,n=!1){const{auth:r}=t;if(Un(r.app))return Promise.reject(rr(r));const s="reauthenticate";try{const i=await Al(t,Eb(r,s,e,t),n);Q(i.idToken,r,"internal-error");const a=$p(i.idToken);Q(a,r,"internal-error");const{sub:c}=a;return Q(t.uid===c,r,"user-mismatch"),fi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&qn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jb(t,e,n=!1){if(Un(t.app))return Promise.reject(rr(t));const r="signIn",s=await Eb(t,r,e),i=await fi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function kb(t,e){return jb(Fr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(t){const e=Fr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function _u(t,e,n){if(Un(t.app))return Promise.reject(rr(t));const r=Fr(t),a=await pm(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rS).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Tb(t),u}),c=await fi._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(c.user),c}function oS(t,e,n){return Un(t.app)?Promise.reject(rr(t)):kb(Ce(t),Ko.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Tb(t),r})}function aS(t,e,n,r){return Ce(t).onIdTokenChanged(e,n,r)}function lS(t,e,n){return Ce(t).beforeAuthStateChanged(e,n)}function cS(t,e,n,r){return Ce(t).onAuthStateChanged(e,n,r)}function uS(t){return Ce(t).signOut()}async function dS(t){return Ce(t).delete()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hS(t,e){return Cn(t,"POST","/v2/accounts/mfaEnrollment:start",en(t,e))}const rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=1e3,mS=10;class Sb extends Ib{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);II()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,mS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},fS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sb.type="LOCAL";const Cb=Sb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb extends Ib{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Rb.type="SESSION";const Ab=Rb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Fd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(a).map(async d=>d(n.origin,i)),u=await pS(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((c,u)=>{const d=Hp("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(){return window}function yS(t){ot().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(){return typeof ot().WorkerGlobalScope<"u"&&typeof ot().importScripts=="function"}async function xS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function _S(){return Wp()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="firebaseLocalStorageDb",wS=1,sd="firebaseLocalStorage",Db="fbase_key";class tc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $d(t,e){return t.transaction([sd],e?"readwrite":"readonly").objectStore(sd)}function bS(){const t=indexedDB.deleteDatabase(Pb);return new tc(t).toPromise()}function gm(){const t=indexedDB.open(Pb,wS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(sd,{keyPath:Db})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(sd)?e(r):(r.close(),await bS(),e(await gm()))})})}async function ex(t,e,n){const r=$d(t,!0).put({[Db]:e,value:n});return new tc(r).toPromise()}async function NS(t,e){const n=$d(t,!1).get(e),r=await new tc(n).toPromise();return r===void 0?null:r.value}function tx(t,e){const n=$d(t,!0).delete(e);return new tc(n).toPromise()}const ES=800,jS=3;class Ob{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>jS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fd._getInstance(_S()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xS(),!this.activeServiceWorker)return;this.sender=new gS(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await gm();return await ex(e,rd,"1"),await tx(e,rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ex(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>NS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>tx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=$d(s,!1).getAll();return new tc(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ES)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ob.type="LOCAL";const Lb=Ob;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t,e){return Cn(t,"POST","/v2/accounts/mfaSignIn:start",en(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=500,IS=6e4,Yc=1e12;class SS{constructor(e){this.auth=e,this.counter=Yc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new CS(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Yc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Yc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Yc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class CS{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;Q(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=RS(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},IS)},TS))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function RS(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh=_b("rcb"),AS=new Jl(3e4,6e4);class PS{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=ot().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return Q(DS(n),e,"argument-error"),this.shouldResolveImmediately(n)&&q0(ot().grecaptcha)?Promise.resolve(ot().grecaptcha):new Promise((r,s)=>{const i=ot().setTimeout(()=>{s(mn(e,"network-request-failed"))},AS.get());ot()[Jh]=()=>{ot().clearTimeout(i),delete ot()[Jh];const c=ot().grecaptcha;if(!c||!q0(c)){s(mn(e,"internal-error"));return}const u=c.render;c.render=(d,f)=>{const m=u(d,f);return this.counter++,m},this.hostLanguage=n,r(c)};const a=`${OI()}?${Wo({onload:Jh,render:"explicit",hl:n})}`;zp(a).catch(()=>{clearTimeout(i),s(mn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=ot().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function DS(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class OS{async load(e){return new SS(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="recaptcha",LS={theme:"light",type:"image"};class nx{constructor(e,n,r=Object.assign({},LS)){this.parameters=r,this.type=Mb,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Fr(e),this.isInvisible=this.parameters.size==="invisible",Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof n=="string"?document.getElementById(n):n;Q(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new OS:new PS,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=a=>{a&&(this.tokenChangeListeners.delete(i),s(a))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Q(!this.parameters.sitekey,this.auth,"argument-error"),Q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=ot()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){Q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Q(sb()&&!Wp(),this.auth,"internal-error"),await MS(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await yI(this.auth);Q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function MS(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=sl._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function US(t,e,n){if(Un(t.app))return Promise.reject(rr(t));const r=Fr(t),s=await FS(r,e,Ce(n));return new VS(s,i=>kb(r,i))}async function FS(t,e,n){var r;const s=await n.verify();try{Q(typeof s=="string",t,"argument-error"),Q(n.type===Mb,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const a=i.session;if("phoneNumber"in i)return Q(a.type==="enroll",t,"internal-error"),(await hS(t,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{Q(a.type==="signin",t,"internal-error");const c=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return Q(c,t,"missing-multi-factor-info"),(await kS(t,{mfaPendingCredential:a.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await XI(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return a}}finally{n._reset()}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t,e){return e?jr(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends Ud{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BS(t){return jb(t.auth,new Kp(t),t.bypassAuthState)}function zS(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),iS(n,new Kp(t),t.bypassAuthState)}async function qS(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),sS(n,new Kp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:c}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BS;case"linkViaPopup":case"linkViaRedirect":return qS;case"reauthViaPopup":case"reauthViaRedirect":return zS;default:qn(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HS=new Jl(2e3,1e4);class mo extends Vb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,mo.currentPopupAction&&mo.currentPopupAction.cancel(),mo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=Hp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,mo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,HS.get())};e()}}mo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="pendingRedirect",wu=new Map;class KS extends Vb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wu.get(this.auth._key());if(!e){try{const r=await GS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wu.set(this.auth._key(),e)}return this.bypassAuthState||wu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GS(t,e){const n=YS(e),r=XS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function QS(t,e){wu.set(t._key(),e)}function XS(t){return jr(t._redirectPersistence)}function YS(t){return vu(WS,t.config.apiKey,t.name)}async function JS(t,e,n=!1){if(Un(t.app))return Promise.reject(rr(t));const r=Fr(t),s=$S(r,e),a=await new KS(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=10*60*1e3;class eC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Ub(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(mn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZS&&this.cachedEventUids.clear(),this.cachedEventUids.has(rx(e))}saveEventToCache(e){this.cachedEventUids.add(rx(e)),this.lastProcessedEventTime=Date.now()}}function rx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Ub({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ub(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(t,e={}){return Cn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sC=/^https?/;async function iC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nC(t);for(const n of e)try{if(oC(n))return}catch{}qn(t,"unauthorized-domain")}function oC(t){const e=fm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!sC.test(n))return!1;if(rC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=new Jl(3e4,6e4);function sx(){const t=ot().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lC(t){return new Promise((e,n)=>{var r,s,i;function a(){sx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sx(),n(mn(t,"network-request-failed"))},timeout:aC.get()})}if(!((s=(r=ot().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=ot().gapi)===null||i===void 0)&&i.load)a();else{const c=_b("iframefcb");return ot()[c]=()=>{gapi.load?a():n(mn(t,"network-request-failed"))},zp(`${MI()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw bu=null,e})}let bu=null;function cC(t){return bu=bu||lC(t),bu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new Jl(5e3,15e3),dC="__/auth/iframe",hC="emulator/auth/iframe",fC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pC(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Fp(e,hC):`https://${t.config.authDomain}/${dC}`,r={apiKey:e.apiKey,appName:t.name,v:Ei},s=mC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Wo(r).slice(1)}`}async function gC(t){const e=await cC(t),n=ot().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:pC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=mn(t,"network-request-failed"),c=ot().setTimeout(()=>{i(a)},uC.get());function u(){ot().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xC=500,vC=600,_C="_blank",wC="http://localhost";class ix{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bC(t,e,n,r=xC,s=vC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},yC),{width:r.toString(),height:s.toString(),top:i,left:a}),d=Vt().toLowerCase();n&&(c=fb(d)?_C:n),db(d)&&(e=e||wC,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,C])=>`${g}${w}=${C},`,"");if(TI(d)&&c!=="_self")return NC(e||"",c),new ix(null);const m=window.open(e||"",c,f);Q(m,t,"popup-blocked");try{m.focus()}catch{}return new ix(m)}function NC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="__/auth/handler",jC="emulator/auth/handler",kC=encodeURIComponent("fac");async function ox(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ei,eventId:s};if(e instanceof Nb){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",Yk(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,m]of Object.entries({}))a[f]=m}if(e instanceof ec){const f=e.getScopes().filter(m=>m!=="");f.length>0&&(a.scopes=f.join(","))}t.tenantId&&(a.tid=t.tenantId);const c=a;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${kC}=${encodeURIComponent(u)}`:"";return`${TC(t)}?${Wo(c).slice(1)}${d}`}function TC({config:t}){return t.emulator?Fp(t,jC):`https://${t.authDomain}/${EC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="webStorageSupport";class IC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ab,this._completeRedirectFn=JS,this._overrideRedirectResult=QS}async _openPopup(e,n,r,s){var i;Or((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const a=await ox(e,n,r,fm(),s);return bC(e,a,Hp())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await ox(e,n,r,fm(),s);return yS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Or(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gC(e),r=new eC(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zh,{type:Zh},s=>{var i;const a=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Zh];a!==void 0&&n(!!a),qn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xb()||hb()||Bp()}}const SC=IC;var ax="@firebase/auth",lx="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function AC(t){di(new js("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:c}=r.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:a,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vb(t)},d=new PI(r,s,i,u);return $I(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),di(new js("auth-internal",e=>{const n=Fr(e.getProvider("auth").getImmediate());return(r=>new CC(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nr(ax,lx,RC(t)),nr(ax,lx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=5*60,DC=Kw("authIdTokenMaxAge")||PC;let cx=null;const OC=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>DC)return;const s=n==null?void 0:n.token;cx!==s&&(cx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LC(t=Vd()){const e=Md(t,"auth");if(e.isInitialized())return e.getImmediate();const n=wb(t,{popupRedirectResolver:SC,persistence:[Lb,Cb,Ab]}),r=Kw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=OC(i.toString());lS(n,a,()=>a(n.currentUser)),aS(n,c=>a(c))}}const s=qw("auth");return s&&BI(n,`http://${s}`),n}function MC(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}DI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=mn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",MC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});AC("Browser");var VC="firebase",UC="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr(VC,UC,"app");var ux=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,Fb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(_,y){function j(){}j.prototype=y.prototype,_.D=y.prototype,_.prototype=new j,_.prototype.constructor=_,_.C=function(S,P,D){for(var A=Array(arguments.length-2),te=2;te<arguments.length;te++)A[te-2]=arguments[te];return y.prototype[P].apply(S,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(_,y,j){j||(j=0);var S=Array(16);if(typeof y=="string")for(var P=0;16>P;++P)S[P]=y.charCodeAt(j++)|y.charCodeAt(j++)<<8|y.charCodeAt(j++)<<16|y.charCodeAt(j++)<<24;else for(P=0;16>P;++P)S[P]=y[j++]|y[j++]<<8|y[j++]<<16|y[j++]<<24;y=_.g[0],j=_.g[1],P=_.g[2];var D=_.g[3],A=y+(D^j&(P^D))+S[0]+3614090360&4294967295;y=j+(A<<7&4294967295|A>>>25),A=D+(P^y&(j^P))+S[1]+3905402710&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(j^D&(y^j))+S[2]+606105819&4294967295,P=D+(A<<17&4294967295|A>>>15),A=j+(y^P&(D^y))+S[3]+3250441966&4294967295,j=P+(A<<22&4294967295|A>>>10),A=y+(D^j&(P^D))+S[4]+4118548399&4294967295,y=j+(A<<7&4294967295|A>>>25),A=D+(P^y&(j^P))+S[5]+1200080426&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(j^D&(y^j))+S[6]+2821735955&4294967295,P=D+(A<<17&4294967295|A>>>15),A=j+(y^P&(D^y))+S[7]+4249261313&4294967295,j=P+(A<<22&4294967295|A>>>10),A=y+(D^j&(P^D))+S[8]+1770035416&4294967295,y=j+(A<<7&4294967295|A>>>25),A=D+(P^y&(j^P))+S[9]+2336552879&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(j^D&(y^j))+S[10]+4294925233&4294967295,P=D+(A<<17&4294967295|A>>>15),A=j+(y^P&(D^y))+S[11]+2304563134&4294967295,j=P+(A<<22&4294967295|A>>>10),A=y+(D^j&(P^D))+S[12]+1804603682&4294967295,y=j+(A<<7&4294967295|A>>>25),A=D+(P^y&(j^P))+S[13]+4254626195&4294967295,D=y+(A<<12&4294967295|A>>>20),A=P+(j^D&(y^j))+S[14]+2792965006&4294967295,P=D+(A<<17&4294967295|A>>>15),A=j+(y^P&(D^y))+S[15]+1236535329&4294967295,j=P+(A<<22&4294967295|A>>>10),A=y+(P^D&(j^P))+S[1]+4129170786&4294967295,y=j+(A<<5&4294967295|A>>>27),A=D+(j^P&(y^j))+S[6]+3225465664&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^j&(D^y))+S[11]+643717713&4294967295,P=D+(A<<14&4294967295|A>>>18),A=j+(D^y&(P^D))+S[0]+3921069994&4294967295,j=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(j^P))+S[5]+3593408605&4294967295,y=j+(A<<5&4294967295|A>>>27),A=D+(j^P&(y^j))+S[10]+38016083&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^j&(D^y))+S[15]+3634488961&4294967295,P=D+(A<<14&4294967295|A>>>18),A=j+(D^y&(P^D))+S[4]+3889429448&4294967295,j=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(j^P))+S[9]+568446438&4294967295,y=j+(A<<5&4294967295|A>>>27),A=D+(j^P&(y^j))+S[14]+3275163606&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^j&(D^y))+S[3]+4107603335&4294967295,P=D+(A<<14&4294967295|A>>>18),A=j+(D^y&(P^D))+S[8]+1163531501&4294967295,j=P+(A<<20&4294967295|A>>>12),A=y+(P^D&(j^P))+S[13]+2850285829&4294967295,y=j+(A<<5&4294967295|A>>>27),A=D+(j^P&(y^j))+S[2]+4243563512&4294967295,D=y+(A<<9&4294967295|A>>>23),A=P+(y^j&(D^y))+S[7]+1735328473&4294967295,P=D+(A<<14&4294967295|A>>>18),A=j+(D^y&(P^D))+S[12]+2368359562&4294967295,j=P+(A<<20&4294967295|A>>>12),A=y+(j^P^D)+S[5]+4294588738&4294967295,y=j+(A<<4&4294967295|A>>>28),A=D+(y^j^P)+S[8]+2272392833&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^j)+S[11]+1839030562&4294967295,P=D+(A<<16&4294967295|A>>>16),A=j+(P^D^y)+S[14]+4259657740&4294967295,j=P+(A<<23&4294967295|A>>>9),A=y+(j^P^D)+S[1]+2763975236&4294967295,y=j+(A<<4&4294967295|A>>>28),A=D+(y^j^P)+S[4]+1272893353&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^j)+S[7]+4139469664&4294967295,P=D+(A<<16&4294967295|A>>>16),A=j+(P^D^y)+S[10]+3200236656&4294967295,j=P+(A<<23&4294967295|A>>>9),A=y+(j^P^D)+S[13]+681279174&4294967295,y=j+(A<<4&4294967295|A>>>28),A=D+(y^j^P)+S[0]+3936430074&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^j)+S[3]+3572445317&4294967295,P=D+(A<<16&4294967295|A>>>16),A=j+(P^D^y)+S[6]+76029189&4294967295,j=P+(A<<23&4294967295|A>>>9),A=y+(j^P^D)+S[9]+3654602809&4294967295,y=j+(A<<4&4294967295|A>>>28),A=D+(y^j^P)+S[12]+3873151461&4294967295,D=y+(A<<11&4294967295|A>>>21),A=P+(D^y^j)+S[15]+530742520&4294967295,P=D+(A<<16&4294967295|A>>>16),A=j+(P^D^y)+S[2]+3299628645&4294967295,j=P+(A<<23&4294967295|A>>>9),A=y+(P^(j|~D))+S[0]+4096336452&4294967295,y=j+(A<<6&4294967295|A>>>26),A=D+(j^(y|~P))+S[7]+1126891415&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~j))+S[14]+2878612391&4294967295,P=D+(A<<15&4294967295|A>>>17),A=j+(D^(P|~y))+S[5]+4237533241&4294967295,j=P+(A<<21&4294967295|A>>>11),A=y+(P^(j|~D))+S[12]+1700485571&4294967295,y=j+(A<<6&4294967295|A>>>26),A=D+(j^(y|~P))+S[3]+2399980690&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~j))+S[10]+4293915773&4294967295,P=D+(A<<15&4294967295|A>>>17),A=j+(D^(P|~y))+S[1]+2240044497&4294967295,j=P+(A<<21&4294967295|A>>>11),A=y+(P^(j|~D))+S[8]+1873313359&4294967295,y=j+(A<<6&4294967295|A>>>26),A=D+(j^(y|~P))+S[15]+4264355552&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~j))+S[6]+2734768916&4294967295,P=D+(A<<15&4294967295|A>>>17),A=j+(D^(P|~y))+S[13]+1309151649&4294967295,j=P+(A<<21&4294967295|A>>>11),A=y+(P^(j|~D))+S[4]+4149444226&4294967295,y=j+(A<<6&4294967295|A>>>26),A=D+(j^(y|~P))+S[11]+3174756917&4294967295,D=y+(A<<10&4294967295|A>>>22),A=P+(y^(D|~j))+S[2]+718787259&4294967295,P=D+(A<<15&4294967295|A>>>17),A=j+(D^(P|~y))+S[9]+3951481745&4294967295,_.g[0]=_.g[0]+y&4294967295,_.g[1]=_.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,_.g[2]=_.g[2]+P&4294967295,_.g[3]=_.g[3]+D&4294967295}r.prototype.u=function(_,y){y===void 0&&(y=_.length);for(var j=y-this.blockSize,S=this.B,P=this.h,D=0;D<y;){if(P==0)for(;D<=j;)s(this,_,D),D+=this.blockSize;if(typeof _=="string"){for(;D<y;)if(S[P++]=_.charCodeAt(D++),P==this.blockSize){s(this,S),P=0;break}}else for(;D<y;)if(S[P++]=_[D++],P==this.blockSize){s(this,S),P=0;break}}this.h=P,this.o+=y},r.prototype.v=function(){var _=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);_[0]=128;for(var y=1;y<_.length-8;++y)_[y]=0;var j=8*this.o;for(y=_.length-8;y<_.length;++y)_[y]=j&255,j/=256;for(this.u(_),_=Array(16),y=j=0;4>y;++y)for(var S=0;32>S;S+=8)_[j++]=this.g[y]>>>S&255;return _};function i(_,y){var j=c;return Object.prototype.hasOwnProperty.call(j,_)?j[_]:j[_]=y(_)}function a(_,y){this.h=y;for(var j=[],S=!0,P=_.length-1;0<=P;P--){var D=_[P]|0;S&&D==y||(j[P]=D,S=!1)}this.g=j}var c={};function u(_){return-128<=_&&128>_?i(_,function(y){return new a([y|0],0>y?-1:0)}):new a([_|0],0>_?-1:0)}function d(_){if(isNaN(_)||!isFinite(_))return m;if(0>_)return R(d(-_));for(var y=[],j=1,S=0;_>=j;S++)y[S]=_/j|0,j*=4294967296;return new a(y,0)}function f(_,y){if(_.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(_.charAt(0)=="-")return R(f(_.substring(1),y));if(0<=_.indexOf("-"))throw Error('number format error: interior "-" character');for(var j=d(Math.pow(y,8)),S=m,P=0;P<_.length;P+=8){var D=Math.min(8,_.length-P),A=parseInt(_.substring(P,P+D),y);8>D?(D=d(Math.pow(y,D)),S=S.j(D).add(d(A))):(S=S.j(j),S=S.add(d(A)))}return S}var m=u(0),g=u(1),w=u(16777216);t=a.prototype,t.m=function(){if(T(this))return-R(this).m();for(var _=0,y=1,j=0;j<this.g.length;j++){var S=this.i(j);_+=(0<=S?S:4294967296+S)*y,y*=4294967296}return _},t.toString=function(_){if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(C(this))return"0";if(T(this))return"-"+R(this).toString(_);for(var y=d(Math.pow(_,6)),j=this,S="";;){var P=b(j,y).g;j=x(j,P.j(y));var D=((0<j.g.length?j.g[0]:j.h)>>>0).toString(_);if(j=P,C(j))return D+S;for(;6>D.length;)D="0"+D;S=D+S}},t.i=function(_){return 0>_?0:_<this.g.length?this.g[_]:this.h};function C(_){if(_.h!=0)return!1;for(var y=0;y<_.g.length;y++)if(_.g[y]!=0)return!1;return!0}function T(_){return _.h==-1}t.l=function(_){return _=x(this,_),T(_)?-1:C(_)?0:1};function R(_){for(var y=_.g.length,j=[],S=0;S<y;S++)j[S]=~_.g[S];return new a(j,~_.h).add(g)}t.abs=function(){return T(this)?R(this):this},t.add=function(_){for(var y=Math.max(this.g.length,_.g.length),j=[],S=0,P=0;P<=y;P++){var D=S+(this.i(P)&65535)+(_.i(P)&65535),A=(D>>>16)+(this.i(P)>>>16)+(_.i(P)>>>16);S=A>>>16,D&=65535,A&=65535,j[P]=A<<16|D}return new a(j,j[j.length-1]&-2147483648?-1:0)};function x(_,y){return _.add(R(y))}t.j=function(_){if(C(this)||C(_))return m;if(T(this))return T(_)?R(this).j(R(_)):R(R(this).j(_));if(T(_))return R(this.j(R(_)));if(0>this.l(w)&&0>_.l(w))return d(this.m()*_.m());for(var y=this.g.length+_.g.length,j=[],S=0;S<2*y;S++)j[S]=0;for(S=0;S<this.g.length;S++)for(var P=0;P<_.g.length;P++){var D=this.i(S)>>>16,A=this.i(S)&65535,te=_.i(P)>>>16,ke=_.i(P)&65535;j[2*S+2*P]+=A*ke,N(j,2*S+2*P),j[2*S+2*P+1]+=D*ke,N(j,2*S+2*P+1),j[2*S+2*P+1]+=A*te,N(j,2*S+2*P+1),j[2*S+2*P+2]+=D*te,N(j,2*S+2*P+2)}for(S=0;S<y;S++)j[S]=j[2*S+1]<<16|j[2*S];for(S=y;S<2*y;S++)j[S]=0;return new a(j,0)};function N(_,y){for(;(_[y]&65535)!=_[y];)_[y+1]+=_[y]>>>16,_[y]&=65535,y++}function v(_,y){this.g=_,this.h=y}function b(_,y){if(C(y))throw Error("division by zero");if(C(_))return new v(m,m);if(T(_))return y=b(R(_),y),new v(R(y.g),R(y.h));if(T(y))return y=b(_,R(y)),new v(R(y.g),y.h);if(30<_.g.length){if(T(_)||T(y))throw Error("slowDivide_ only works with positive integers.");for(var j=g,S=y;0>=S.l(_);)j=O(j),S=O(S);var P=L(j,1),D=L(S,1);for(S=L(S,2),j=L(j,2);!C(S);){var A=D.add(S);0>=A.l(_)&&(P=P.add(j),D=A),S=L(S,1),j=L(j,1)}return y=x(_,P.j(y)),new v(P,y)}for(P=m;0<=_.l(y);){for(j=Math.max(1,Math.floor(_.m()/y.m())),S=Math.ceil(Math.log(j)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),D=d(j),A=D.j(y);T(A)||0<A.l(_);)j-=S,D=d(j),A=D.j(y);C(D)&&(D=g),P=P.add(D),_=x(_,A)}return new v(P,_)}t.A=function(_){return b(this,_).h},t.and=function(_){for(var y=Math.max(this.g.length,_.g.length),j=[],S=0;S<y;S++)j[S]=this.i(S)&_.i(S);return new a(j,this.h&_.h)},t.or=function(_){for(var y=Math.max(this.g.length,_.g.length),j=[],S=0;S<y;S++)j[S]=this.i(S)|_.i(S);return new a(j,this.h|_.h)},t.xor=function(_){for(var y=Math.max(this.g.length,_.g.length),j=[],S=0;S<y;S++)j[S]=this.i(S)^_.i(S);return new a(j,this.h^_.h)};function O(_){for(var y=_.g.length+1,j=[],S=0;S<y;S++)j[S]=_.i(S)<<1|_.i(S-1)>>>31;return new a(j,_.h)}function L(_,y){var j=y>>5;y%=32;for(var S=_.g.length-j,P=[],D=0;D<S;D++)P[D]=0<y?_.i(D+j)>>>y|_.i(D+j+1)<<32-y:_.i(D+j);return new a(P,_.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Fb=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=f,ri=a}).apply(typeof ux<"u"?ux:typeof self<"u"?self:typeof window<"u"?window:{});var Jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $b,qa,Bb,Nu,ym,zb,qb,Hb;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,p){return l==Array.prototype||l==Object.prototype||(l[h]=p.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jc=="object"&&Jc];for(var h=0;h<l.length;++h){var p=l[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var p=r;l=l.split(".");for(var E=0;E<l.length-1;E++){var M=l[E];if(!(M in p))break e;p=p[M]}l=l[l.length-1],E=p[l],h=h(E),h!=E&&h!=null&&e(p,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var p=0,E=!1,M={next:function(){if(!E&&p<l.length){var V=p++;return{value:h(V,l[V]),done:!1}}return E=!0,{done:!0,value:void 0}}};return M[Symbol.iterator]=function(){return M},M}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,p){return l.call.apply(l.bind,arguments)}function m(l,h,p){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var M=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(M,E),l.apply(h,M)}}return function(){return l.apply(h,arguments)}}function g(l,h,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:m,g.apply(null,arguments)}function w(l,h){var p=Array.prototype.slice.call(arguments,1);return function(){var E=p.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function C(l,h){function p(){}p.prototype=h.prototype,l.aa=h.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(E,M,V){for(var W=Array(arguments.length-2),je=2;je<arguments.length;je++)W[je-2]=arguments[je];return h.prototype[M].apply(E,W)}}function T(l){const h=l.length;if(0<h){const p=Array(h);for(let E=0;E<h;E++)p[E]=l[E];return p}return[]}function R(l,h){for(let p=1;p<arguments.length;p++){const E=arguments[p];if(u(E)){const M=l.length||0,V=E.length||0;l.length=M+V;for(let W=0;W<V;W++)l[M+W]=E[W]}else l.push(E)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function N(l){return/^[\s\xa0]*$/.test(l)}function v(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function b(l){return b[" "](l),l}b[" "]=function(){};var O=v().indexOf("Gecko")!=-1&&!(v().toLowerCase().indexOf("webkit")!=-1&&v().indexOf("Edge")==-1)&&!(v().indexOf("Trident")!=-1||v().indexOf("MSIE")!=-1)&&v().indexOf("Edge")==-1;function L(l,h,p){for(const E in l)h.call(p,l[E],E,l)}function _(l,h){for(const p in l)h.call(void 0,l[p],p,l)}function y(l){const h={};for(const p in l)h[p]=l[p];return h}const j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let p,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(p in E)l[p]=E[p];for(let V=0;V<j.length;V++)p=j[V],Object.prototype.hasOwnProperty.call(E,p)&&(l[p]=E[p])}}function P(l){var h=1;l=l.split(":");const p=[];for(;0<h&&l.length;)p.push(l.shift()),h--;return l.length&&p.push(l.join(":")),p}function D(l){c.setTimeout(()=>{throw l},0)}function A(){var l=ee;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class te{constructor(){this.h=this.g=null}add(h,p){const E=ke.get();E.set(h,p),this.h?this.h.next=E:this.g=E,this.h=E}}var ke=new x(()=>new ft,l=>l.reset());class ft{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Ge,H=!1,ee=new te,ne=()=>{const l=c.Promise.resolve(void 0);Ge=()=>{l.then(_e)}};var _e=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(p){D(p)}var h=ke;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}H=!1};function xe(){this.s=this.s,this.C=this.C}xe.prototype.s=!1,xe.prototype.ma=function(){this.s||(this.s=!0,this.N())},xe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Fe(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Fe.prototype.h=function(){this.defaultPrevented=!0};var tn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const p=()=>{};c.addEventListener("test",p,h),c.removeEventListener("test",p,h)}catch{}return l}();function Rn(l,h){if(Fe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(O){e:{try{b(h.nodeName);var M=!0;break e}catch{}M=!1}M||(h=null)}}else p=="mouseover"?h=l.fromElement:p=="mouseout"&&(h=l.toElement);this.relatedTarget=h,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:nn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Rn.aa.h.call(this)}}C(Rn,Fe);var nn={2:"touch",3:"pen",4:"mouse"};Rn.prototype.h=function(){Rn.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var rn="closure_listenable_"+(1e6*Math.random()|0),Br=0;function pc(l,h,p,E,M){this.listener=l,this.proxy=null,this.src=h,this.type=p,this.capture=!!E,this.ha=M,this.key=++Br,this.da=this.fa=!1}function zr(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Us(l){this.src=l,this.g={},this.h=0}Us.prototype.add=function(l,h,p,E,M){var V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);var W=Ii(l,h,E,M);return-1<W?(h=l[W],p||(h.fa=!1)):(h=new pc(h,this.src,V,!!E,M),h.fa=p,l.push(h)),h};function dr(l,h){var p=h.type;if(p in l.g){var E=l.g[p],M=Array.prototype.indexOf.call(E,h,void 0),V;(V=0<=M)&&Array.prototype.splice.call(E,M,1),V&&(zr(h),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Ii(l,h,p,E){for(var M=0;M<l.length;++M){var V=l[M];if(!V.da&&V.listener==h&&V.capture==!!p&&V.ha==E)return M}return-1}var Si="closure_lm_"+(1e6*Math.random()|0),Ci={};function ta(l,h,p,E,M){if(Array.isArray(h)){for(var V=0;V<h.length;V++)ta(l,h[V],p,E,M);return null}return p=oa(p),l&&l[rn]?l.K(h,p,d(E)?!!E.capture:!1,M):gc(l,h,p,!1,E,M)}function gc(l,h,p,E,M,V){if(!h)throw Error("Invalid event type");var W=d(M)?!!M.capture:!!M,je=Ri(l);if(je||(l[Si]=je=new Us(l)),p=je.add(h,p,E,W,V),p.proxy)return p;if(E=na(),p.proxy=E,E.src=l,E.listener=p,l.addEventListener)tn||(M=W),M===void 0&&(M=!1),l.addEventListener(h.toString(),E,M);else if(l.attachEvent)l.attachEvent(sa(h.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return p}function na(){function l(p){return h.call(l.src,l.listener,p)}const h=ia;return l}function ra(l,h,p,E,M){if(Array.isArray(h))for(var V=0;V<h.length;V++)ra(l,h[V],p,E,M);else E=d(E)?!!E.capture:!!E,p=oa(p),l&&l[rn]?(l=l.i,h=String(h).toString(),h in l.g&&(V=l.g[h],p=Ii(V,p,E,M),-1<p&&(zr(V[p]),Array.prototype.splice.call(V,p,1),V.length==0&&(delete l.g[h],l.h--)))):l&&(l=Ri(l))&&(h=l.g[h.toString()],l=-1,h&&(l=Ii(h,p,E,M)),(p=-1<l?h[l]:null)&&Wn(p))}function Wn(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[rn])dr(h.i,l);else{var p=l.type,E=l.proxy;h.removeEventListener?h.removeEventListener(p,E,l.capture):h.detachEvent?h.detachEvent(sa(p),E):h.addListener&&h.removeListener&&h.removeListener(E),(p=Ri(h))?(dr(p,l),p.h==0&&(p.src=null,h[Si]=null)):zr(l)}}}function sa(l){return l in Ci?Ci[l]:Ci[l]="on"+l}function ia(l,h){if(l.da)l=!0;else{h=new Rn(h,this);var p=l.listener,E=l.ha||l.src;l.fa&&Wn(l),l=p.call(E,h)}return l}function Ri(l){return l=l[Si],l instanceof Us?l:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function oa(l){return typeof l=="function"?l:(l[hr]||(l[hr]=function(h){return l.handleEvent(h)}),l[hr])}function nt(){xe.call(this),this.i=new Us(this),this.M=this,this.F=null}C(nt,xe),nt.prototype[rn]=!0,nt.prototype.removeEventListener=function(l,h,p,E){ra(this,l,h,p,E)};function mt(l,h){var p,E=l.F;if(E)for(p=[];E;E=E.F)p.push(E);if(l=l.M,E=h.type||h,typeof h=="string")h=new Fe(h,l);else if(h instanceof Fe)h.target=h.target||l;else{var M=h;h=new Fe(E,l),S(h,M)}if(M=!0,p)for(var V=p.length-1;0<=V;V--){var W=h.g=p[V];M=Fs(W,E,!0,h)&&M}if(W=h.g=l,M=Fs(W,E,!0,h)&&M,M=Fs(W,E,!1,h)&&M,p)for(V=0;V<p.length;V++)W=h.g=p[V],M=Fs(W,E,!1,h)&&M}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var p=l.g[h],E=0;E<p.length;E++)zr(p[E]);delete l.g[h],l.h--}}this.F=null},nt.prototype.K=function(l,h,p,E){return this.i.add(String(l),h,!1,p,E)},nt.prototype.L=function(l,h,p,E){return this.i.add(String(l),h,!0,p,E)};function Fs(l,h,p,E){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var M=!0,V=0;V<h.length;++V){var W=h[V];if(W&&!W.da&&W.capture==p){var je=W.listener,bt=W.ha||W.src;W.fa&&dr(l.i,W),M=je.call(bt,E)!==!1&&M}}return M&&!E.defaultPrevented}function aa(l,h,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function Ai(l){l.g=aa(()=>{l.g=null,l.i&&(l.i=!1,Ai(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class yc extends xe{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vn(l){xe.call(this),this.h=l,this.g={}}C(vn,xe);var la=[];function Pi(l){L(l.g,function(h,p){this.g.hasOwnProperty(p)&&Wn(h)},l),l.g={}}vn.prototype.N=function(){vn.aa.N.call(this),Pi(this)},vn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Di=c.JSON.stringify,xc=c.JSON.parse,vc=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function Oi(){}Oi.prototype.h=null;function ca(l){return l.h||(l.h=l.i())}function Kn(){}var qr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Hr(){Fe.call(this,"d")}C(Hr,Fe);function Li(){Fe.call(this,"c")}C(Li,Fe);var Gn={},ua=null;function An(){return ua=ua||new nt}Gn.La="serverreachability";function _c(l){Fe.call(this,Gn.La,l)}C(_c,Fe);function $s(l){const h=An();mt(h,new _c(h))}Gn.STAT_EVENT="statevent";function Mi(l,h){Fe.call(this,Gn.STAT_EVENT,l),this.stat=h}C(Mi,Fe);function ut(l){const h=An();mt(h,new Mi(h,l))}Gn.Ma="timingevent";function Vi(l,h){Fe.call(this,Gn.Ma,l),this.size=h}C(Vi,Fe);function Wr(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function fr(){this.g=!0}fr.prototype.xa=function(){this.g=!1};function Ui(l,h,p,E,M,V){l.info(function(){if(l.g)if(V)for(var W="",je=V.split("&"),bt=0;bt<je.length;bt++){var pe=je[bt].split("=");if(1<pe.length){var St=pe[0];pe=pe[1];var Ct=St.split("_");W=2<=Ct.length&&Ct[1]=="type"?W+(St+"="+pe+"&"):W+(St+"=redacted&")}}else W=null;else W=V;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+h+`
`+p+`
`+W})}function da(l,h,p,E,M,V,W){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+h+`
`+p+`
`+V+" "+W})}function mr(l,h,p,E){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+wc(l,p)+(E?" "+E:"")})}function ha(l,h){l.info(function(){return"TIMEOUT: "+h})}fr.prototype.info=function(){};function wc(l,h){if(!l.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var E=p[l];if(!(2>E.length)){var M=E[1];if(Array.isArray(M)&&!(1>M.length)){var V=M[0];if(V!="noop"&&V!="stop"&&V!="close")for(var W=1;W<M.length;W++)M[W]=""}}}}return Di(p)}catch{return h}}var Kr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fa={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Fi;function Pn(){}C(Pn,Oi),Pn.prototype.g=function(){return new XMLHttpRequest},Pn.prototype.i=function(){return{}},Fi=new Pn;function Qn(l,h,p,E){this.j=l,this.i=h,this.l=p,this.R=E||1,this.U=new vn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new bc}function bc(){this.i=null,this.g="",this.h=!1}var Nc={},ma={};function pa(l,h,p){l.L=1,l.v=qi(ae(h)),l.m=p,l.P=!0,rt(l,null)}function rt(l,h){l.F=Date.now(),$i(l),l.A=ae(l.v);var p=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Gg(p.i,"t",E),l.C=0,p=l.j.J,l.h=new bc,l.g=hy(l.j,p?h:null,!l.m),0<l.O&&(l.M=new yc(g(l.Y,l,l.g),l.O)),h=l.U,p=l.g,E=l.ca;var M="readystatechange";Array.isArray(M)||(M&&(la[0]=M.toString()),M=la);for(var V=0;V<M.length;V++){var W=ta(p,M[V],E||h.handleEvent,!1,h.h||h);if(!W)break;h.g[W.key]=W}h=l.H?y(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),$s(),Ui(l.i,l.u,l.A,l.l,l.R,l.m)}Qn.prototype.ca=function(l){l=l.target;const h=this.M;h&&gr(l)==3?h.j():this.Y(l)},Qn.prototype.Y=function(l){try{if(l==this.g)e:{const Ct=gr(this.g);var h=this.g.Ba();const Qi=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||ty(this.g)))){this.J||Ct!=4||h==7||(h==8||0>=Qi?$s(3):$s(2)),ya(this);var p=this.g.Z();this.X=p;t:if(ga(this)){var E=ty(this.g);l="";var M=E.length,V=gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){pr(this),Bs(this);var W="";break t}this.h.i=new c.TextDecoder}for(h=0;h<M;h++)this.h.h=!0,l+=this.h.i.decode(E[h],{stream:!(V&&h==M-1)});E.length=0,this.h.g+=l,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,da(this.i,this.u,this.A,this.l,this.R,Ct,p),this.o){if(this.T&&!this.K){t:{if(this.g){var je,bt=this.g;if((je=bt.g?bt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(je)){var pe=je;break t}}pe=null}if(p=pe)mr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xa(this,p);else{this.o=!1,this.s=3,ut(12),pr(this),Bs(this);break e}}if(this.P){p=!0;let Dn;for(;!this.J&&this.C<W.length;)if(Dn=dh(this,W),Dn==ma){Ct==4&&(this.s=4,ut(14),p=!1),mr(this.i,this.l,null,"[Incomplete Response]");break}else if(Dn==Nc){this.s=4,ut(15),mr(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else mr(this.i,this.l,Dn,null),xa(this,Dn);if(ga(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||W.length!=0||this.h.h||(this.s=1,ut(16),p=!1),this.o=this.o&&p,!p)mr(this.i,this.l,W,"[Invalid Chunked Response]"),pr(this),Bs(this);else if(0<W.length&&!this.W){this.W=!0;var St=this.j;St.g==this&&St.ba&&!St.M&&(St.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),yh(St),St.M=!0,ut(11))}}else mr(this.i,this.l,W,null),xa(this,W);Ct==4&&pr(this),this.o&&!this.J&&(Ct==4?ly(this.j,this):(this.o=!1,$i(this)))}else Y1(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,ut(12)):(this.s=0,ut(13)),pr(this),Bs(this)}}}catch{}finally{}};function ga(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function dh(l,h){var p=l.C,E=h.indexOf(`
`,p);return E==-1?ma:(p=Number(h.substring(p,E)),isNaN(p)?Nc:(E+=1,E+p>h.length?ma:(h=h.slice(E,E+p),l.C=E+p,h)))}Qn.prototype.cancel=function(){this.J=!0,pr(this)};function $i(l){l.S=Date.now()+l.I,Ec(l,l.I)}function Ec(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Wr(g(l.ba,l),h)}function ya(l){l.B&&(c.clearTimeout(l.B),l.B=null)}Qn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ha(this.i,this.A),this.L!=2&&($s(),ut(17)),pr(this),this.s=2,Bs(this)):Ec(this,this.S-l)};function Bs(l){l.j.G==0||l.J||ly(l.j,l)}function pr(l){ya(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Pi(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function xa(l,h){try{var p=l.j;if(p.G!=0&&(p.g==l||Bi(p.h,l))){if(!l.K&&Bi(p.h,l)&&p.G==3){try{var E=p.Da.g.parse(h)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)Rc(p),Sc(p);else break e;gh(p),ut(18)}}else p.za=M[1],0<p.za-p.T&&37500>M[2]&&p.F&&p.v==0&&!p.C&&(p.C=Wr(g(p.Za,p),6e3));if(1>=_a(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ws(p,11)}else if((l.K||p.g==l)&&Rc(p),!N(h))for(M=p.Da.g.parse(h),h=0;h<M.length;h++){let pe=M[h];if(p.T=pe[0],pe=pe[1],p.G==2)if(pe[0]=="c"){p.K=pe[1],p.ia=pe[2];const St=pe[3];St!=null&&(p.la=St,p.j.info("VER="+p.la));const Ct=pe[4];Ct!=null&&(p.Aa=Ct,p.j.info("SVER="+p.Aa));const Qi=pe[5];Qi!=null&&typeof Qi=="number"&&0<Qi&&(E=1.5*Qi,p.L=E,p.j.info("backChannelRequestTimeoutMs_="+E)),E=p;const Dn=l.g;if(Dn){const Pc=Dn.g?Dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pc){var V=E.h;V.g||Pc.indexOf("spdy")==-1&&Pc.indexOf("quic")==-1&&Pc.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(zi(V,V.h),V.h=null))}if(E.D){const xh=Dn.g?Dn.g.getResponseHeader("X-HTTP-Session-Id"):null;xh&&(E.ya=xh,Ne(E.I,E.D,xh))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),E=p;var W=l;if(E.qa=dy(E,E.J?E.ia:null,E.W),W.K){k(E.h,W);var je=W,bt=E.L;bt&&(je.I=bt),je.B&&(ya(je),$i(je)),E.g=W}else oy(E);0<p.i.length&&Cc(p)}else pe[0]!="stop"&&pe[0]!="close"||Ws(p,7);else p.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?Ws(p,7):ph(p):pe[0]!="noop"&&p.l&&p.l.ta(pe),p.v=0)}}$s(4)}catch{}}var hh=class{constructor(l,h){this.g=l,this.map=h}};function jc(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function va(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _a(l){return l.h?1:l.g?l.g.size:0}function Bi(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function zi(l,h){l.g?l.g.add(h):l.h=h}function k(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}jc.prototype.cancel=function(){if(this.i=$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function $(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const p of l.g.values())h=h.concat(p.D);return h}return T(l.i)}function B(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],p=l.length,E=0;E<p;E++)h.push(l[E]);return h}h=[],p=0;for(E in l)h[p++]=l[E];return h}function re(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var p=0;p<l;p++)h.push(p);return h}h=[],p=0;for(const E in l)h[p++]=E;return h}}}function ve(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var p=re(l),E=B(l),M=E.length,V=0;V<M;V++)h.call(void 0,E[V],p&&p[V],l)}var Re=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(l,h){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var E=l[p].indexOf("="),M=null;if(0<=E){var V=l[p].substring(0,E);M=l[p].substring(E+1)}else V=l[p];h(V,M?decodeURIComponent(M.replace(/\+/g," ")):"")}}}function pt(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof pt){this.h=l.h,Ee(this,l.j),this.o=l.o,this.g=l.g,$e(this,l.s),this.l=l.l;var h=l.i,p=new ba;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),sn(this,p),this.m=l.m}else l&&(h=String(l).match(Re))?(this.h=!1,Ee(this,h[1]||"",!0),this.o=zs(h[2]||""),this.g=zs(h[3]||"",!0),$e(this,h[4]),this.l=zs(h[5]||"",!0),sn(this,h[6]||"",!0),this.m=zs(h[7]||"")):(this.h=!1,this.i=new ba(null,this.h))}pt.prototype.toString=function(){var l=[],h=this.j;h&&l.push(qs(h,wa,!0),":");var p=this.g;return(p||h=="file")&&(l.push("//"),(h=this.o)&&l.push(qs(h,wa,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(qs(p,p.charAt(0)=="/"?Hi:le,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",qs(p,Wi)),l.join("")};function ae(l){return new pt(l)}function Ee(l,h,p){l.j=p?zs(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function $e(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function sn(l,h,p){h instanceof ba?(l.i=h,q1(l.i,l.h)):(p||(h=qs(h,Hs)),l.i=new ba(h,l.h))}function Ne(l,h,p){l.i.set(h,p)}function qi(l){return Ne(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function zs(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function qs(l,h,p){return typeof l=="string"?(l=encodeURI(l).replace(h,fh),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function fh(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var wa=/[#\/\?@]/g,le=/[#\?:]/g,Hi=/[#\?]/g,Hs=/[#\?@]/g,Wi=/#/g;function ba(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function Gr(l){l.g||(l.g=new Map,l.h=0,l.i&&st(l.i,function(h,p){l.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=ba.prototype,t.add=function(l,h){Gr(this),this.i=null,l=Ki(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(h),this.h+=1,this};function Wg(l,h){Gr(l),h=Ki(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Kg(l,h){return Gr(l),h=Ki(l,h),l.g.has(h)}t.forEach=function(l,h){Gr(this),this.g.forEach(function(p,E){p.forEach(function(M){l.call(h,M,E,this)},this)},this)},t.na=function(){Gr(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let E=0;E<h.length;E++){const M=l[E];for(let V=0;V<M.length;V++)p.push(h[E])}return p},t.V=function(l){Gr(this);let h=[];if(typeof l=="string")Kg(this,l)&&(h=h.concat(this.g.get(Ki(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)h=h.concat(l[p])}return h},t.set=function(l,h){return Gr(this),this.i=null,l=Ki(this,l),Kg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Gg(l,h,p){Wg(l,h),0<p.length&&(l.i=null,l.g.set(Ki(l,h),T(p)),l.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var E=h[p];const V=encodeURIComponent(String(E)),W=this.V(E);for(E=0;E<W.length;E++){var M=V;W[E]!==""&&(M+="="+encodeURIComponent(String(W[E]))),l.push(M)}}return this.i=l.join("&")};function Ki(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function q1(l,h){h&&!l.j&&(Gr(l),l.i=null,l.g.forEach(function(p,E){var M=E.toLowerCase();E!=M&&(Wg(this,E),Gg(this,M,p))},l)),l.j=h}function H1(l,h){const p=new fr;if(c.Image){const E=new Image;E.onload=w(Qr,p,"TestLoadImage: loaded",!0,h,E),E.onerror=w(Qr,p,"TestLoadImage: error",!1,h,E),E.onabort=w(Qr,p,"TestLoadImage: abort",!1,h,E),E.ontimeout=w(Qr,p,"TestLoadImage: timeout",!1,h,E),c.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else h(!1)}function W1(l,h){const p=new fr,E=new AbortController,M=setTimeout(()=>{E.abort(),Qr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:E.signal}).then(V=>{clearTimeout(M),V.ok?Qr(p,"TestPingServer: ok",!0,h):Qr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(M),Qr(p,"TestPingServer: error",!1,h)})}function Qr(l,h,p,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(p)}catch{}}function K1(){this.g=new vc}function G1(l,h,p){const E=p||"";try{ve(l,function(M,V){let W=M;d(M)&&(W=Di(M)),h.push(E+V+"="+encodeURIComponent(W))})}catch(M){throw h.push(E+"type="+encodeURIComponent("_badmap")),M}}function kc(l){this.l=l.Ub||null,this.j=l.eb||!1}C(kc,Oi),kc.prototype.g=function(){return new Tc(this.l,this.j)},kc.prototype.i=function(l){return function(){return l}}({});function Tc(l,h){nt.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}C(Tc,nt),t=Tc.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,Ea(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Na(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ea(this)),this.g&&(this.readyState=3,Ea(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?Na(this):Ea(this),this.readyState==3&&Qg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Na(this))},t.Qa=function(l){this.g&&(this.response=l,Na(this))},t.ga=function(){this.g&&Na(this)};function Na(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ea(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=h.next();return l.join(`\r
`)};function Ea(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Tc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Xg(l){let h="";return L(l,function(p,E){h+=E,h+=":",h+=p,h+=`\r
`}),h}function mh(l,h,p){e:{for(E in p){var E=!1;break e}E=!0}E||(p=Xg(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):Ne(l,h,p))}function Qe(l){nt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}C(Qe,nt);var Q1=/^https?$/i,X1=["POST","PUT"];t=Qe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,p,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Fi.g(),this.v=this.o?ca(this.o):ca(Fi),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(V){Yg(this,V);return}if(l=p||"",p=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)p.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())p.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(p.keys()).find(V=>V.toLowerCase()=="content-type"),M=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(X1,h,void 0))||E||M||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of p)this.g.setRequestHeader(V,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ey(this),this.u=!0,this.g.send(l),this.u=!1}catch(V){Yg(this,V)}};function Yg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Jg(l),Ic(l)}function Jg(l){l.A||(l.A=!0,mt(l,"complete"),mt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,mt(this,"complete"),mt(this,"abort"),Ic(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ic(this,!0)),Qe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zg(this):this.bb())},t.bb=function(){Zg(this)};function Zg(l){if(l.h&&typeof a<"u"&&(!l.v[1]||gr(l)!=4||l.Z()!=2)){if(l.u&&gr(l)==4)aa(l.Ea,0,l);else if(mt(l,"readystatechange"),gr(l)==4){l.h=!1;try{const W=l.Z();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var E;if(E=W===0){var M=String(l.D).match(Re)[1]||null;!M&&c.self&&c.self.location&&(M=c.self.location.protocol.slice(0,-1)),E=!Q1.test(M?M.toLowerCase():"")}p=E}if(p)mt(l,"complete"),mt(l,"success");else{l.m=6;try{var V=2<gr(l)?l.g.statusText:""}catch{V=""}l.l=V+" ["+l.Z()+"]",Jg(l)}}finally{Ic(l)}}}}function Ic(l,h){if(l.g){ey(l);const p=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||mt(l,"ready");try{p.onreadystatechange=E}catch{}}}function ey(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function gr(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<gr(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),xc(h)}};function ty(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function Y1(l){const h={};l=(l.g&&2<=gr(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(N(l[E]))continue;var p=P(l[E]);const M=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const V=h[M]||[];h[M]=V,V.push(p)}_(h,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ja(l,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||h}function ny(l){this.Aa=0,this.i=[],this.j=new fr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ja("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ja("baseRetryDelayMs",5e3,l),this.cb=ja("retryDelaySeedMs",1e4,l),this.Wa=ja("forwardChannelMaxRetries",2,l),this.wa=ja("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new jc(l&&l.concurrentRequestLimit),this.Da=new K1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ny.prototype,t.la=8,t.G=1,t.connect=function(l,h,p,E){ut(0),this.W=l,this.H=h||{},p&&E!==void 0&&(this.H.OSID=p,this.H.OAID=E),this.F=this.X,this.I=dy(this,null,this.W),Cc(this)};function ph(l){if(ry(l),l.G==3){var h=l.U++,p=ae(l.I);if(Ne(p,"SID",l.K),Ne(p,"RID",h),Ne(p,"TYPE","terminate"),ka(l,p),h=new Qn(l,l.j,h),h.L=2,h.v=qi(ae(p)),p=!1,c.navigator&&c.navigator.sendBeacon)try{p=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&c.Image&&(new Image().src=h.v,p=!0),p||(h.g=hy(h.j,null),h.g.ea(h.v)),h.F=Date.now(),$i(h)}uy(l)}function Sc(l){l.g&&(yh(l),l.g.cancel(),l.g=null)}function ry(l){Sc(l),l.u&&(c.clearTimeout(l.u),l.u=null),Rc(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function Cc(l){if(!va(l.h)&&!l.s){l.s=!0;var h=l.Ga;Ge||ne(),H||(Ge(),H=!0),ee.add(h,l),l.B=0}}function J1(l,h){return _a(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Wr(g(l.Ga,l,h),cy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const M=new Qn(this,this.j,l);let V=this.o;if(this.S&&(V?(V=y(V),S(V,this.S)):V=this.S),this.m!==null||this.O||(M.H=V,V=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var E=this.i[p];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(h+=E,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=iy(this,M,h),p=ae(this.I),Ne(p,"RID",l),Ne(p,"CVER",22),this.D&&Ne(p,"X-HTTP-Session-Id",this.D),ka(this,p),V&&(this.O?h="headers="+encodeURIComponent(String(Xg(V)))+"&"+h:this.m&&mh(p,this.m,V)),zi(this.h,M),this.Ua&&Ne(p,"TYPE","init"),this.P?(Ne(p,"$req",h),Ne(p,"SID","null"),M.T=!0,pa(M,p,null)):pa(M,p,h),this.G=2}}else this.G==3&&(l?sy(this,l):this.i.length==0||va(this.h)||sy(this))};function sy(l,h){var p;h?p=h.l:p=l.U++;const E=ae(l.I);Ne(E,"SID",l.K),Ne(E,"RID",p),Ne(E,"AID",l.T),ka(l,E),l.m&&l.o&&mh(E,l.m,l.o),p=new Qn(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),h&&(l.i=h.D.concat(l.i)),h=iy(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),zi(l.h,p),pa(p,E,h)}function ka(l,h){l.H&&L(l.H,function(p,E){Ne(h,E,p)}),l.l&&ve({},function(p,E){Ne(h,E,p)})}function iy(l,h,p){p=Math.min(l.i.length,p);var E=l.l?g(l.l.Na,l.l,l):null;e:{var M=l.i;let V=-1;for(;;){const W=["count="+p];V==-1?0<p?(V=M[0].g,W.push("ofs="+V)):V=0:W.push("ofs="+V);let je=!0;for(let bt=0;bt<p;bt++){let pe=M[bt].g;const St=M[bt].map;if(pe-=V,0>pe)V=Math.max(0,M[bt].g-100),je=!1;else try{G1(St,W,"req"+pe+"_")}catch{E&&E(St)}}if(je){E=W.join("&");break e}}}return l=l.i.splice(0,p),h.D=l,E}function oy(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;Ge||ne(),H||(Ge(),H=!0),ee.add(h,l),l.v=0}}function gh(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Wr(g(l.Fa,l),cy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,ay(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Wr(g(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ut(10),Sc(this),ay(this))};function yh(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function ay(l){l.g=new Qn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=ae(l.qa);Ne(h,"RID","rpc"),Ne(h,"SID",l.K),Ne(h,"AID",l.T),Ne(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ne(h,"TO",l.ja),Ne(h,"TYPE","xmlhttp"),ka(l,h),l.m&&l.o&&mh(h,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=qi(ae(h)),p.m=null,p.P=!0,rt(p,l)}t.Za=function(){this.C!=null&&(this.C=null,Sc(this),gh(this),ut(19))};function Rc(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function ly(l,h){var p=null;if(l.g==h){Rc(l),yh(l),l.g=null;var E=2}else if(Bi(l.h,h))p=h.D,k(l.h,h),E=1;else return;if(l.G!=0){if(h.o)if(E==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var M=l.B;E=An(),mt(E,new Vi(E,p)),Cc(l)}else oy(l);else if(M=h.s,M==3||M==0&&0<h.X||!(E==1&&J1(l,h)||E==2&&gh(l)))switch(p&&0<p.length&&(h=l.h,h.i=h.i.concat(p)),M){case 1:Ws(l,5);break;case 4:Ws(l,10);break;case 3:Ws(l,6);break;default:Ws(l,2)}}}function cy(l,h){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*h}function Ws(l,h){if(l.j.info("Error code "+h),h==2){var p=g(l.fb,l),E=l.Xa;const M=!E;E=new pt(E||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Ee(E,"https"),qi(E),M?H1(E.toString(),p):W1(E.toString(),p)}else ut(2);l.G=0,l.l&&l.l.sa(h),uy(l),ry(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ut(2)):(this.j.info("Failed to ping google.com"),ut(1))};function uy(l){if(l.G=0,l.ka=[],l.l){const h=$(l.h);(h.length!=0||l.i.length!=0)&&(R(l.ka,h),R(l.ka,l.i),l.h.i.length=0,T(l.i),l.i.length=0),l.l.ra()}}function dy(l,h,p){var E=p instanceof pt?ae(p):new pt(p);if(E.g!="")h&&(E.g=h+"."+E.g),$e(E,E.s);else{var M=c.location;E=M.protocol,h=h?h+"."+M.hostname:M.hostname,M=+M.port;var V=new pt(null);E&&Ee(V,E),h&&(V.g=h),M&&$e(V,M),p&&(V.l=p),E=V}return p=l.D,h=l.ya,p&&h&&Ne(E,p,h),Ne(E,"VER",l.la),ka(l,E),E}function hy(l,h,p){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Qe(new kc({eb:p})):new Qe(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fy(){}t=fy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Ac(){}Ac.prototype.g=function(l,h){return new on(l,h)};function on(l,h){nt.call(this),this.g=new ny(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!N(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!N(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Gi(this)}C(on,nt),on.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){ph(this.g)},on.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=Di(l),l=p);h.i.push(new hh(h.Ya++,l)),h.G==3&&Cc(h)},on.prototype.N=function(){this.g.l=null,delete this.j,ph(this.g),delete this.g,on.aa.N.call(this)};function my(l){Hr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const p in h){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}C(my,Hr);function py(){Li.call(this),this.status=1}C(py,Li);function Gi(l){this.g=l}C(Gi,fy),Gi.prototype.ua=function(){mt(this.g,"a")},Gi.prototype.ta=function(l){mt(this.g,new my(l))},Gi.prototype.sa=function(l){mt(this.g,new py)},Gi.prototype.ra=function(){mt(this.g,"b")},Ac.prototype.createWebChannel=Ac.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,Hb=function(){return new Ac},qb=function(){return An()},zb=Gn,ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kr.NO_ERROR=0,Kr.TIMEOUT=8,Kr.HTTP_ERROR=6,Nu=Kr,fa.COMPLETE="complete",Bb=fa,Kn.EventType=qr,qr.OPEN="a",qr.CLOSE="b",qr.ERROR="c",qr.MESSAGE="d",nt.prototype.listen=nt.prototype.K,qa=Kn,Qe.prototype.listenOnce=Qe.prototype.L,Qe.prototype.getLastError=Qe.prototype.Ka,Qe.prototype.getLastErrorCode=Qe.prototype.Ba,Qe.prototype.getStatus=Qe.prototype.Z,Qe.prototype.getResponseJson=Qe.prototype.Oa,Qe.prototype.getResponseText=Qe.prototype.oa,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Ha,$b=Qe}).apply(typeof Jc<"u"?Jc:typeof self<"u"?self:typeof window<"u"?window:{});const dx="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Dt.UNAUTHENTICATED=new Dt(null),Dt.GOOGLE_CREDENTIALS=new Dt("google-credentials-uid"),Dt.FIRST_PARTY=new Dt("first-party-uid"),Dt.MOCK_USER=new Dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Go="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new Lp("@firebase/firestore");function Oa(){return mi.logLevel}function X(t,...e){if(mi.logLevel<=de.DEBUG){const n=e.map(Gp);mi.debug(`Firestore (${Go}): ${t}`,...n)}}function Lr(t,...e){if(mi.logLevel<=de.ERROR){const n=e.map(Gp);mi.error(`Firestore (${Go}): ${t}`,...n)}}function pi(t,...e){if(mi.logLevel<=de.WARN){const n=e.map(Gp);mi.warn(`Firestore (${Go}): ${t}`,...n)}}function Gp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(t="Unexpected state"){const e=`FIRESTORE (${Go}) INTERNAL ASSERTION FAILED: `+t;throw Lr(e),new Error(e)}function be(t,e){t||se()}function oe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Kb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Dt.UNAUTHENTICATED))}shutdown(){}}class FC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class $C{constructor(e){this.t=e,this.currentUser=Dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){be(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Tr,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Tr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(be(typeof r.accessToken=="string"),new Wb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return be(e===null||typeof e=="string"),new Dt(e)}}class BC{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class zC{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new BC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HC{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){be(this.o===void 0);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.R;return this.R=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(be(typeof n.token=="string"),this.R=n.token,new qC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=WC(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ye(t,e){return t<e?-1:t>e?1:0}function Do(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ct.fromMillis(Date.now())}static fromDate(e){return ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ie(e)}static min(){return new ie(new ct(0,0))}static max(){return new ie(new ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r){n===void 0?n=0:n>e.length&&se(),r===void 0?r=e.length-n:r>e.length-n&&se(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Dl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Dl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),a=n.get(s);if(i<a)return-1;if(i>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Pe extends Dl{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const KC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xt extends Dl{construct(e,n,r){return new xt(e,n,r)}static isValidIdentifier(e){return KC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new xt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new K(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(a=!a,s++):c!=="."||a?(r+=c,s++):(i(),s++)}if(i(),a)throw new K(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xt(n)}static emptyPath(){return new xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.path=e}static fromPath(e){return new Z(Pe.fromString(e))}static fromName(e){return new Z(Pe.fromString(e).popFirst(5))}static empty(){return new Z(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Z(new Pe(e.slice()))}}function GC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ie.fromTimestamp(r===1e9?new ct(n+1,0):new ct(n,r));return new ks(s,Z.empty(),e)}function QC(t){return new ks(t.readTime,t.key,-1)}class ks{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ks(ie.min(),Z.empty(),-1)}static max(){return new ks(ie.max(),Z.empty(),-1)}}function XC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Z.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class JC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==YC)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,a=!1;e.forEach(c=>{++s,c.next(()=>{++i,a&&i===s&&n()},u=>r(u))}),a=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,a=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{a[d]=f,++c,c===i&&r(a)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function ZC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xp.oe=-1;function Bd(t){return t==null}function id(t){return t===0&&1/t==-1/0}function eR(t){return typeof t=="number"&&Number.isInteger(t)&&!id(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ji(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new We(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zc(this.root,e,this.comparator,!0)}}class Zc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Et.RED,this.left=s??Et.EMPTY,this.right=i??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw se();const e=this.left.check();if(e!==this.right.check())throw se();return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw se()}get value(){throw se()}get color(){throw se()}get left(){throw se()}get right(){throw se()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new We(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new fx(this.data.getIterator())}getIteratorFrom(e){return new fx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class fx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(xt.comparator)}static empty(){return new dn([])}unionWith(e){let n=new kt(xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Do(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Qb("Invalid base64 string: "+i):i}}(e);return new wt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const tR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ts(t){if(be(!!t),typeof t=="string"){let e=0;const n=tR.exec(t);if(be(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Je(t.seconds),nanos:Je(t.nanos)}}function Je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gi(t){return typeof t=="string"?wt.fromBase64String(t):wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jp(t){const e=t.mapValue.fields.__previous_value__;return Yp(e)?Jp(e):e}function Ol(t){const e=Ts(t.mapValue.fields.__local_write_time__.timestampValue);return new ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,n,r,s,i,a,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class Oo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu={mapValue:{}};function yi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yp(t)?4:sR(t)?9007199254740991:rR(t)?10:11:se()}function ar(t,e){if(t===e)return!0;const n=yi(t);if(n!==yi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ol(t).isEqual(Ol(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Ts(s.timestampValue),c=Ts(i.timestampValue);return a.seconds===c.seconds&&a.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return gi(s.bytesValue).isEqual(gi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Je(s.geoPointValue.latitude)===Je(i.geoPointValue.latitude)&&Je(s.geoPointValue.longitude)===Je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Je(s.integerValue)===Je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Je(s.doubleValue),c=Je(i.doubleValue);return a===c?id(a)===id(c):isNaN(a)&&isNaN(c)}return!1}(t,e);case 9:return Do(t.arrayValue.values||[],e.arrayValue.values||[],ar);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},c=i.mapValue.fields||{};if(hx(a)!==hx(c))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(c[u]===void 0||!ar(a[u],c[u])))return!1;return!0}(t,e);default:return se()}}function Ll(t,e){return(t.values||[]).find(n=>ar(n,e))!==void 0}function Lo(t,e){if(t===e)return 0;const n=yi(t),r=yi(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return function(i,a){const c=Je(i.integerValue||i.doubleValue),u=Je(a.integerValue||a.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return mx(t.timestampValue,e.timestampValue);case 4:return mx(Ol(t),Ol(e));case 5:return ye(t.stringValue,e.stringValue);case 6:return function(i,a){const c=gi(i),u=gi(a);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const c=i.split("/"),u=a.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ye(c[d],u[d]);if(f!==0)return f}return ye(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const c=ye(Je(i.latitude),Je(a.latitude));return c!==0?c:ye(Je(i.longitude),Je(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return px(t.arrayValue,e.arrayValue);case 10:return function(i,a){var c,u,d,f;const m=i.fields||{},g=a.fields||{},w=(c=m.value)===null||c===void 0?void 0:c.arrayValue,C=(u=g.value)===null||u===void 0?void 0:u.arrayValue,T=ye(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=C==null?void 0:C.values)===null||f===void 0?void 0:f.length)||0);return T!==0?T:px(w,C)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===eu.mapValue&&a===eu.mapValue)return 0;if(i===eu.mapValue)return 1;if(a===eu.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=a.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let m=0;m<u.length&&m<f.length;++m){const g=ye(u[m],f[m]);if(g!==0)return g;const w=Lo(c[u[m]],d[f[m]]);if(w!==0)return w}return ye(u.length,f.length)}(t.mapValue,e.mapValue);default:throw se()}}function mx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);const n=Ts(t),r=Ts(e),s=ye(n.seconds,r.seconds);return s!==0?s:ye(n.nanos,r.nanos)}function px(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Lo(n[s],r[s]);if(i)return i}return ye(n.length,r.length)}function Mo(t){return xm(t)}function xm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ts(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return gi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Z.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=xm(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${xm(n.fields[a])}`;return s+"}"}(t.mapValue):se()}function gx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function vm(t){return!!t&&"integerValue"in t}function Zp(t){return!!t&&"arrayValue"in t}function yx(t){return!!t&&"nullValue"in t}function xx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Eu(t){return!!t&&"mapValue"in t}function rR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function il(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ji(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=il(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=il(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.value=e}static empty(){return new Qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Eu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=il(n)}setAll(e){let n=xt.emptyPath(),r={},s=[];e.forEach((a,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}a?r[c.lastSegment()]=il(a):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Eu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ar(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Eu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){ji(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Qt(il(this.value))}}function Xb(t){const e=[];return ji(t.fields,(n,r)=>{const s=new xt([n]);if(Eu(r)){const i=Xb(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n,r,s,i,a,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=c}static newInvalidDocument(e){return new Lt(e,0,ie.min(),ie.min(),ie.min(),Qt.empty(),0)}static newFoundDocument(e,n,r,s){return new Lt(e,1,n,ie.min(),r,s,0)}static newNoDocument(e,n){return new Lt(e,2,n,ie.min(),ie.min(),Qt.empty(),0)}static newUnknownDocument(e,n){return new Lt(e,3,n,ie.min(),ie.min(),Qt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Lt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Lt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,n){this.position=e,this.inclusive=n}}function vx(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=Z.comparator(Z.fromName(a.referenceValue),n.key):r=Lo(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _x(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ar(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e,n="asc"){this.field=e,this.dir=n}}function iR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{}class lt extends Yb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new aR(e,n,r):n==="array-contains"?new uR(e,r):n==="in"?new dR(e,r):n==="not-in"?new hR(e,r):n==="array-contains-any"?new fR(e,r):new lt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new lR(e,r):new cR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Lo(n,this.value)):n!==null&&yi(this.value)===yi(n)&&this.matchesComparison(Lo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hn extends Yb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Hn(e,n)}matches(e){return Jb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jb(t){return t.op==="and"}function Zb(t){return oR(t)&&Jb(t)}function oR(t){for(const e of t.filters)if(e instanceof Hn)return!1;return!0}function _m(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+Mo(t.value);if(Zb(t))return t.filters.map(e=>_m(e)).join(",");{const e=t.filters.map(n=>_m(n)).join(",");return`${t.op}(${e})`}}function eN(t,e){return t instanceof lt?function(r,s){return s instanceof lt&&r.op===s.op&&r.field.isEqual(s.field)&&ar(r.value,s.value)}(t,e):t instanceof Hn?function(r,s){return s instanceof Hn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,c)=>i&&eN(a,s.filters[c]),!0):!1}(t,e):void se()}function tN(t){return t instanceof lt?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(t):t instanceof Hn?function(n){return n.op.toString()+" {"+n.getFilters().map(tN).join(" ,")+"}"}(t):"Filter"}class aR extends lt{constructor(e,n,r){super(e,n,r),this.key=Z.fromName(r.referenceValue)}matches(e){const n=Z.comparator(e.key,this.key);return this.matchesComparison(n)}}class lR extends lt{constructor(e,n){super(e,"in",n),this.keys=nN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class cR extends lt{constructor(e,n){super(e,"not-in",n),this.keys=nN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function nN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Z.fromName(r.referenceValue))}class uR extends lt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Zp(n)&&Ll(n.arrayValue,this.value)}}class dR extends lt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ll(this.value.arrayValue,n)}}class hR extends lt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ll(this.value.arrayValue,n)}}class fR extends lt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Zp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ll(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,n=null,r=[],s=[],i=null,a=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=c,this.ue=null}}function wx(t,e=null,n=[],r=[],s=null,i=null,a=null){return new mR(t,e,n,r,s,i,a)}function eg(t){const e=oe(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>_m(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mo(r)).join(",")),e.ue=n}return e.ue}function tg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!iR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_x(t.startAt,e.startAt)&&_x(t.endAt,e.endAt)}function wm(t){return Z.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n=null,r=[],s=[],i=null,a="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function pR(t,e,n,r,s,i,a,c){return new Qo(t,e,n,r,s,i,a,c)}function zd(t){return new Qo(t)}function bx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rN(t){return t.collectionGroup!==null}function ol(t){const e=oe(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let c=new kt(xt.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Ml(i,r))}),n.has(xt.keyField().canonicalString())||e.ce.push(new Ml(xt.keyField(),r))}return e.ce}function sr(t){const e=oe(t);return e.le||(e.le=gR(e,ol(t))),e.le}function gR(t,e){if(t.limitType==="F")return wx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ml(s.field,i)});const n=t.endAt?new od(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new od(t.startAt.position,t.startAt.inclusive):null;return wx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function bm(t,e){const n=t.filters.concat([e]);return new Qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ad(t,e,n){return new Qo(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function qd(t,e){return tg(sr(t),sr(e))&&t.limitType===e.limitType}function sN(t){return`${eg(sr(t))}|lt:${t.limitType}`}function Ji(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>tN(s)).join(", ")}]`),Bd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Mo(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Mo(s)).join(",")),`Target(${r})`}(sr(t))}; limitType=${t.limitType})`}function Hd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of ol(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,c,u){const d=vx(a,c,u);return a.inclusive?d<=0:d<0}(r.startAt,ol(r),s)||r.endAt&&!function(a,c,u){const d=vx(a,c,u);return a.inclusive?d>=0:d>0}(r.endAt,ol(r),s))}(t,e)}function yR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iN(t){return(e,n)=>{let r=!1;for(const s of ol(t)){const i=xR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xR(t,e,n){const r=t.field.isKeyField()?Z.comparator(e.key,n.key):function(i,a,c){const u=a.data.field(i),d=c.data.field(i);return u!==null&&d!==null?Lo(u,d):se()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ji(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Gb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=new We(Z.comparator);function Mr(){return vR}const oN=new We(Z.comparator);function Ha(...t){let e=oN;for(const n of t)e=e.insert(n.key,n);return e}function aN(t){let e=oN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ei(){return al()}function lN(){return al()}function al(){return new Xo(t=>t.toString(),(t,e)=>t.isEqual(e))}const _R=new We(Z.comparator),wR=new kt(Z.comparator);function ue(...t){let e=wR;for(const n of t)e=e.add(n);return e}const bR=new kt(ye);function NR(){return bR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ng(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:id(e)?"-0":e}}function cN(t){return{integerValue:""+t}}function uN(t,e){return eR(e)?cN(e):ng(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this._=void 0}}function ER(t,e,n){return t instanceof Vl?function(s,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Yp(i)&&(i=Jp(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(n,e):t instanceof Ul?hN(t,e):t instanceof Fl?fN(t,e):function(s,i){const a=dN(s,i),c=Nx(a)+Nx(s.Pe);return vm(a)&&vm(s.Pe)?cN(c):ng(s.serializer,c)}(t,e)}function jR(t,e,n){return t instanceof Ul?hN(t,e):t instanceof Fl?fN(t,e):n}function dN(t,e){return t instanceof $l?function(r){return vm(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Vl extends Wd{}class Ul extends Wd{constructor(e){super(),this.elements=e}}function hN(t,e){const n=mN(e);for(const r of t.elements)n.some(s=>ar(s,r))||n.push(r);return{arrayValue:{values:n}}}class Fl extends Wd{constructor(e){super(),this.elements=e}}function fN(t,e){let n=mN(e);for(const r of t.elements)n=n.filter(s=>!ar(s,r));return{arrayValue:{values:n}}}class $l extends Wd{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Nx(t){return Je(t.integerValue||t.doubleValue)}function mN(t){return Zp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pN{constructor(e,n){this.field=e,this.transform=n}}function kR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ul&&s instanceof Ul||r instanceof Fl&&s instanceof Fl?Do(r.elements,s.elements,ar):r instanceof $l&&s instanceof $l?ar(r.Pe,s.Pe):r instanceof Vl&&s instanceof Vl}(t.transform,e.transform)}class TR{constructor(e,n){this.version=e,this.transformResults=n}}class Tn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Tn}static exists(e){return new Tn(void 0,e)}static updateTime(e){return new Tn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ju(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Kd{}function gN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rg(t.key,Tn.none()):new sc(t.key,t.data,Tn.none());{const n=t.data,r=Qt.empty();let s=new kt(xt.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Vs(t.key,r,new dn(s.toArray()),Tn.none())}}function IR(t,e,n){t instanceof sc?function(s,i,a){const c=s.value.clone(),u=jx(s.fieldTransforms,i,a.transformResults);c.setAll(u),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):t instanceof Vs?function(s,i,a){if(!ju(s.precondition,i))return void i.convertToUnknownDocument(a.version);const c=jx(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(yN(s)),u.setAll(c),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ll(t,e,n,r){return t instanceof sc?function(i,a,c,u){if(!ju(i.precondition,a))return c;const d=i.value.clone(),f=kx(i.fieldTransforms,u,a);return d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vs?function(i,a,c,u){if(!ju(i.precondition,a))return c;const d=kx(i.fieldTransforms,u,a),f=a.data;return f.setAll(yN(i)),f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,a,c){return ju(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):c}(t,e,n)}function SR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=dN(r.transform,s||null);i!=null&&(n===null&&(n=Qt.empty()),n.set(r.field,i))}return n||null}function Ex(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Do(r,s,(i,a)=>kR(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sc extends Kd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Vs extends Kd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function yN(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jx(t,e,n){const r=new Map;be(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,c=e.data.field(i.field);r.set(i.field,jR(a,c,n[s]))}return r}function kx(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,ER(i,a,e))}return r}class rg extends Kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CR extends Kd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&IR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ll(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ll(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=lN();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let c=this.applyToLocalView(a,i.mutatedFields);c=n.has(s.key)?null:c;const u=gN(a,c);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(ie.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&Do(this.mutations,e.mutations,(n,r)=>Ex(n,r))&&Do(this.baseMutations,e.baseMutations,(n,r)=>Ex(n,r))}}class sg{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){be(e.mutations.length===r.length);let s=function(){return _R}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new sg(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,he;function DR(t){switch(t){default:return se();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function xN(t){if(t===void 0)return Lr("GRPC error has no .code"),U.UNKNOWN;switch(t){case it.OK:return U.OK;case it.CANCELLED:return U.CANCELLED;case it.UNKNOWN:return U.UNKNOWN;case it.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case it.INTERNAL:return U.INTERNAL;case it.UNAVAILABLE:return U.UNAVAILABLE;case it.UNAUTHENTICATED:return U.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case it.NOT_FOUND:return U.NOT_FOUND;case it.ALREADY_EXISTS:return U.ALREADY_EXISTS;case it.PERMISSION_DENIED:return U.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case it.ABORTED:return U.ABORTED;case it.OUT_OF_RANGE:return U.OUT_OF_RANGE;case it.UNIMPLEMENTED:return U.UNIMPLEMENTED;case it.DATA_LOSS:return U.DATA_LOSS;default:return se()}}(he=it||(it={}))[he.OK=0]="OK",he[he.CANCELLED=1]="CANCELLED",he[he.UNKNOWN=2]="UNKNOWN",he[he.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",he[he.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",he[he.NOT_FOUND=5]="NOT_FOUND",he[he.ALREADY_EXISTS=6]="ALREADY_EXISTS",he[he.PERMISSION_DENIED=7]="PERMISSION_DENIED",he[he.UNAUTHENTICATED=16]="UNAUTHENTICATED",he[he.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",he[he.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",he[he.ABORTED=10]="ABORTED",he[he.OUT_OF_RANGE=11]="OUT_OF_RANGE",he[he.UNIMPLEMENTED=12]="UNIMPLEMENTED",he[he.INTERNAL=13]="INTERNAL",he[he.UNAVAILABLE=14]="UNAVAILABLE",he[he.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=new ri([4294967295,4294967295],0);function Tx(t){const e=OR().encode(t),n=new Fb;return n.update(e),new Uint8Array(n.digest())}function Ix(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ri([n,r],0),new ri([s,i],0)]}class ig{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wa(`Invalid padding: ${n}`);if(r<0)throw new Wa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wa(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ri.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ri.fromNumber(r)));return s.compare(LR)===1&&(s=new ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Tx(e),[r,s]=Ix(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);if(!this.de(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new ig(i,s,n);return r.forEach(c=>a.insert(c)),a}insert(e){if(this.Ie===0)return;const n=Tx(e),[r,s]=Ix(n);for(let i=0;i<this.hashCount;i++){const a=this.Ee(r,s,i);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ic.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Gd(ie.min(),s,new We(ye),Mr(),ue())}}class ic{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ic(r,n,ue(),ue(),ue())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class vN{constructor(e,n){this.targetId=e,this.me=n}}class _N{constructor(e,n,r=wt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Sx{constructor(){this.fe=0,this.ge=Rx(),this.pe=wt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),n=ue(),r=ue();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:se()}}),new ic(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=Rx()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,be(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class MR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mr(),this.qe=Cx(),this.Qe=new We(ye)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:se()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(wm(i))if(r===0){const a=new Z(i.path);this.Ue(n,a,Lt.newNoDocument(a,ie.min()))}else be(r===1);else{const a=this.Ye(n);if(a!==r){const c=this.Ze(e),u=c?this.Xe(c,e,a):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,c;try{a=gi(r).toUint8Array()}catch(u){if(u instanceof Qb)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new ig(a,s,i)}catch(u){return pi(u instanceof Wa?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Le.tt(),c=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,a)=>{const c=this.Je(a);if(c){if(i.current&&wm(c.target)){const u=new Z(c.target.path);this.ke.get(u)!==null||this.it(a,u)||this.Ue(a,u,Lt.newNoDocument(u,e))}i.be&&(n.set(a,i.ve()),i.Ce())}});let r=ue();this.qe.forEach((i,a)=>{let c=!0;a.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,a)=>a.setReadTime(e));const s=new Gd(e,n,this.Qe,this.ke,r);return this.ke=Mr(),this.qe=Cx(),this.Qe=new We(ye),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Sx,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new kt(ye),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Sx),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Cx(){return new We(Z.comparator)}function Rx(){return new We(Z.comparator)}const VR={asc:"ASCENDING",desc:"DESCENDING"},UR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FR={and:"AND",or:"OR"};class $R{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nm(t,e){return t.useProto3Json||Bd(e)?e:{value:e}}function ld(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function BR(t,e){return ld(t,e.toTimestamp())}function ir(t){return be(!!t),ie.fromTimestamp(function(n){const r=Ts(n);return new ct(r.seconds,r.nanos)}(t))}function og(t,e){return Em(t,e).canonicalString()}function Em(t,e){const n=function(s){return new Pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function bN(t){const e=Pe.fromString(t);return be(TN(e)),e}function jm(t,e){return og(t.databaseId,e.path)}function ef(t,e){const n=bN(e);if(n.get(1)!==t.databaseId.projectId)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Z(EN(n))}function NN(t,e){return og(t.databaseId,e)}function zR(t){const e=bN(t);return e.length===4?Pe.emptyPath():EN(e)}function km(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EN(t){return be(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ax(t,e,n){return{name:jm(t,e),fields:n.value.mapValue.fields}}function qR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:se()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(be(f===void 0||typeof f=="string"),wt.fromBase64String(f||"")):(be(f===void 0||f instanceof Buffer||f instanceof Uint8Array),wt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,c=a&&function(d){const f=d.code===void 0?U.UNKNOWN:xN(d.code);return new K(f,d.message||"")}(a);n=new _N(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ef(t,r.document.name),i=ir(r.document.updateTime),a=r.document.createTime?ir(r.document.createTime):ie.min(),c=new Qt({mapValue:{fields:r.document.fields}}),u=Lt.newFoundDocument(s,i,a,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new ku(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ef(t,r.document),i=r.readTime?ir(r.readTime):ie.min(),a=Lt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new ku([],c,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ef(t,r.document),i=r.removedTargetIds||[];n=new ku([],i,s,null)}else{if(!("filter"in e))return se();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new PR(s,i),c=r.targetId;n=new vN(c,a)}}return n}function HR(t,e){let n;if(e instanceof sc)n={update:Ax(t,e.key,e.value)};else if(e instanceof rg)n={delete:jm(t,e.key)};else if(e instanceof Vs)n={update:Ax(t,e.key,e.data),updateMask:eA(e.fieldMask)};else{if(!(e instanceof CR))return se();n={verify:jm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const c=a.transform;if(c instanceof Vl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ul)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fl)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof $l)return{fieldPath:a.field.canonicalString(),increment:c.Pe};throw se()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:BR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:se()}(t,e.precondition)),n}function WR(t,e){return t&&t.length>0?(be(e!==void 0),t.map(n=>function(s,i){let a=s.updateTime?ir(s.updateTime):ir(i);return a.isEqual(ie.min())&&(a=ir(i)),new TR(a,s.transformResults||[])}(n,e))):[]}function KR(t,e){return{documents:[NN(t,e.path)]}}function GR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=NN(t,s);const i=function(d){if(d.length!==0)return kN(Hn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Zi(g.field),direction:YR(g.dir)}}(f))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const c=Nm(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function QR(t){let e=zR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){be(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(m){const g=jN(m);return g instanceof Hn&&Zb(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(m){return m.map(g=>function(C){return new Ml(eo(C.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(C.direction))}(g))}(n.orderBy));let c=null;n.limit&&(c=function(m){let g;return g=typeof m=="object"?m.value:m,Bd(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,w=m.values||[];return new od(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(m){const g=!m.before,w=m.values||[];return new od(w,g)}(n.endAt)),pR(e,s,a,i,c,"F",u,d)}function XR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return se()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function jN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=eo(n.unaryFilter.field);return lt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=eo(n.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=eo(n.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=eo(n.unaryFilter.field);return lt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return se()}}(t):t.fieldFilter!==void 0?function(n){return lt.create(eo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return se()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Hn.create(n.compositeFilter.filters.map(r=>jN(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return se()}}(n.compositeFilter.op))}(t):se()}function YR(t){return VR[t]}function JR(t){return UR[t]}function ZR(t){return FR[t]}function Zi(t){return{fieldPath:t.canonicalString()}}function eo(t){return xt.fromServerFormat(t.fieldPath)}function kN(t){return t instanceof lt?function(n){if(n.op==="=="){if(xx(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NAN"}};if(yx(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(xx(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NOT_NAN"}};if(yx(n.value))return{unaryFilter:{field:Zi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zi(n.field),op:JR(n.op),value:n.value}}}(t):t instanceof Hn?function(n){const r=n.getFilters().map(s=>kN(s));return r.length===1?r[0]:{compositeFilter:{op:ZR(n.op),filters:r}}}(t):se()}function eA(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function TN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r,s,i=ie.min(),a=ie.min(),c=wt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new cs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new cs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.ct=e}}function nA(t){const e=QR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ad(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.un=new sA}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(ks.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(ks.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class sA{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new kt(Pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new kt(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vo(0)}static kn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(){this.changes=new Xo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Lt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ll(r.mutation,s,dn.empty(),ct.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){const s=ei();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Ha();return i.forEach((c,u)=>{a=a.insert(c,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ei();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,c)=>{n.set(a,c)})})}computeViews(e,n,r,s){let i=Mr();const a=al(),c=function(){return al()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Vs)?i=i.insert(d.key,d):f!==void 0?(a.set(d.key,f.mutation.getFieldMask()),ll(f.mutation,d,f.mutation.getFieldMask(),ct.now())):a.set(d.key,dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>a.set(d,f)),n.forEach((d,f)=>{var m;return c.set(d,new oA(f,(m=a.get(d))!==null&&m!==void 0?m:null))}),c))}recalculateAndSaveOverlays(e,n){const r=al();let s=new We((a,c)=>a-c),i=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const c of a)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||dn.empty();f=c.applyToLocalView(d,f),r.set(u,f);const m=(s.get(c.batchId)||ue()).add(u);s=s.insert(c.batchId,m)})}).next(()=>{const a=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,m=lN();f.forEach(g=>{if(!i.has(g)){const w=gN(n.get(g),r.get(g));w!==null&&m.set(g,w),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,m))}return F.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rN(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(ei());let c=-1,u=i;return a.next(d=>F.forEach(d,(f,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,ue())).next(f=>({batchId:c,changes:aN(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Z(n)).next(r=>{let s=Ha();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Ha();return this.indexManager.getCollectionParents(e,i).next(c=>F.forEach(c,u=>{const d=function(m,g){return new Qo(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((m,g)=>{a=a.insert(m,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((u,d)=>{const f=d.getKey();a.get(f)===null&&(a=a.insert(f,Lt.newInvalidDocument(f)))});let c=Ha();return a.forEach((u,d)=>{const f=i.get(u);f!==void 0&&ll(f.mutation,d,dn.empty(),ct.now()),Hd(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ir(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:nA(s.bundledQuery),readTime:ir(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.overlays=new We(Z.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ei();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=ei(),i=n.length+1,a=new Z(n.child("")),c=this.overlays.getIteratorFrom(a);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new We((d,f)=>d-f);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=ei(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=ei(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return F.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new AR(n,r));let i=this.Ir.get(n);i===void 0&&(i=ue(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(){this.Tr=new kt(gt.Er),this.dr=new kt(gt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new gt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Z(new Pe([])),r=new gt(n,e),s=new gt(n,e+1),i=[];return this.dr.forEachInRange([r,s],a=>{this.Vr(a),i.push(a.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Z(new Pe([])),r=new gt(n,e),s=new gt(n,e+1);let i=ue();return this.dr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new gt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Z.comparator(e.key,n.key)||ye(e.wr,n.wr)}static Ar(e,n){return ye(e.wr,n.wr)||Z.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new kt(gt.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new RR(i,n,r,s);this.mutationQueue.push(a);for(const c of s)this.br=this.br.add(new gt(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return F.resolve(a)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),s=new gt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],a=>{const c=this.Dr(a.wr);i.push(c)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(ye);return n.forEach(s=>{const i=new gt(s,0),a=new gt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,a],c=>{r=r.add(c.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Z.isDocumentKey(i)||(i=i.child(""));const a=new gt(new Z(i),0);let c=new kt(ye);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},a),F.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){be(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new gt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new gt(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.Mr=e,this.docs=function(){return new We(Z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():Lt.newInvalidDocument(n))}getEntries(e,n){let r=Mr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Lt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Mr();const a=n.path,c=new Z(a.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||XC(QC(f),r)<=0||(s.has(f.key)||Hd(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){se()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fA(this)}getSize(e){return F.resolve(this.size)}}class fA extends iA{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e){this.persistence=e,this.Nr=new Xo(n=>eg(n),tg),this.lastRemoteSnapshotVersion=ie.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ag,this.targetCount=0,this.kr=Vo.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((a,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(a),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Xp(0),this.Kr=!1,this.Kr=!0,this.$r=new uA,this.referenceDelegate=e(this),this.Ur=new mA(this),this.indexManager=new rA,this.remoteDocumentCache=function(s){return new hA(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tA(n),this.Gr=new lA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new cA,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new dA(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const s=new gA(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class gA extends JC{constructor(e){super(),this.currentSequenceNumber=e}}class lg{constructor(e){this.persistence=e,this.Jr=new ag,this.Yr=null}static Zr(e){return new lg(e)}get Xr(){if(this.Yr)return this.Yr;throw se()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=Z.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ie.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ue(),s=ue();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new cg(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Hk()?8:ZC(Vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new yA;return this.Xi(e,n,a).next(c=>{if(i.result=c,this.zi)return this.es(e,n,a,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Oa()<=de.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",Ji(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(Oa()<=de.DEBUG&&X("QueryEngine","Query:",Ji(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Oa()<=de.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",Ji(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,sr(n))):F.resolve())}Yi(e,n){if(bx(n))return F.resolve(null);let r=sr(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=ad(n,null,"F"),r=sr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=ue(...i);return this.Ji.getDocuments(e,a).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,a,u.readTime)?this.Yi(e,ad(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return bx(n)||s.isEqual(ie.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const a=this.ts(n,i);return this.ns(n,a,r,s)?F.resolve(null):(Oa()<=de.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ji(n)),this.rs(e,a,n,GC(s,-1)).next(c=>c))})}ts(e,n){let r=new kt(iN(e));return n.forEach((s,i)=>{Hd(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Oa()<=de.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Ji(n)),this.Ji.getDocumentsMatchingQuery(e,n,ks.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new We(ye),this._s=new Xo(i=>eg(i),tg),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aA(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function _A(t,e,n,r){return new vA(t,e,n,r)}async function IN(t,e){const n=oe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],c=[];let u=ue();for(const d of s){a.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:c}))})})}function wA(t,e){const n=oe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const m=d.batch,g=m.keys();let w=F.resolve();return g.forEach(C=>{w=w.next(()=>f.getEntry(u,C)).next(T=>{const R=d.docVersions.get(C);be(R!==null),T.version.compareTo(R)<0&&(m.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),f.addEntry(T)))})}),w.next(()=>c.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=ue();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function SN(t){const e=oe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function bA(t,e){const n=oe(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,m)=>{const g=s.get(m);if(!g)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,m)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?w=w.withResumeToken(wt.EMPTY_BYTE_STRING,ie.min()).withLastLimboFreeSnapshotVersion(ie.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(m,w),function(T,R,x){return T.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(g,w,f)&&c.push(n.Ur.updateTargetData(i,w))});let u=Mr(),d=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(NA(i,a,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ie.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return F.waitFor(c).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function NA(t,e,n){let r=ue(),s=ue();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Mr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ie.min())?(e.removeEntry(c,u.readTime),a=a.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(c,u)):X("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:a,Is:s}})}function EA(t,e){const n=oe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function jA(t,e){const n=oe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(a=>(s=new cs(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Tm(t,e,n){const r=oe(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!rc(a))throw a;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function Px(t,e,n){const r=oe(t);let s=ie.min(),i=ue();return r.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,f){const m=oe(u),g=m._s.get(f);return g!==void 0?F.resolve(m.os.get(g)):m.Ur.getTargetData(d,f)}(r,a,sr(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?s:ie.min(),n?i:ue())).next(c=>(kA(r,yR(e),c),{documents:c,Ts:i})))}function kA(t,e,n){let r=t.us.get(e)||ie.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class Dx{constructor(){this.activeTargetIds=NR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TA{constructor(){this.so=new Dx,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Dx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=null;function tf(){return tu===null?tu=function(){return 268435456+Math.round(2147483648*Math.random())}():tu++,"0x"+tu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pt="WebChannelConnection";class RA extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,a){const c=tf(),u=this.xo(n,r.toUriEncodedString());X("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,a),this.No(n,u,d,s).then(f=>(X("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw pi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,a,c){return this.Mo(n,r,s,i,a)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Go}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,a)=>n[a]=i),s&&s.headers.forEach((i,a)=>n[a]=i)}xo(n,r){const s=SA[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=tf();return new Promise((a,c)=>{const u=new $b;u.setWithCredentials(!0),u.listenOnce(Bb.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nu.NO_ERROR:const f=u.getResponseJson();X(Pt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),a(f);break;case Nu.TIMEOUT:X(Pt,`RPC '${e}' ${i} timed out`),c(new K(U.DEADLINE_EXCEEDED,"Request time out"));break;case Nu.HTTP_ERROR:const m=u.getStatus();if(X(Pt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const C=function(R){const x=R.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(x)>=0?x:U.UNKNOWN}(w.status);c(new K(C,w.message))}else c(new K(U.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new K(U.UNAVAILABLE,"Connection failed."));break;default:se()}}finally{X(Pt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);X(Pt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=tf(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Hb(),c=qb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");X(Pt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const m=a.createWebChannel(f,u);let g=!1,w=!1;const C=new CA({Io:R=>{w?X(Pt,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(X(Pt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),X(Pt,`RPC '${e}' stream ${s} sending:`,R),m.send(R))},To:()=>m.close()}),T=(R,x,N)=>{R.listen(x,v=>{try{N(v)}catch(b){setTimeout(()=>{throw b},0)}})};return T(m,qa.EventType.OPEN,()=>{w||(X(Pt,`RPC '${e}' stream ${s} transport opened.`),C.yo())}),T(m,qa.EventType.CLOSE,()=>{w||(w=!0,X(Pt,`RPC '${e}' stream ${s} transport closed`),C.So())}),T(m,qa.EventType.ERROR,R=>{w||(w=!0,pi(Pt,`RPC '${e}' stream ${s} transport errored:`,R),C.So(new K(U.UNAVAILABLE,"The operation could not be completed")))}),T(m,qa.EventType.MESSAGE,R=>{var x;if(!w){const N=R.data[0];be(!!N);const v=N,b=v.error||((x=v[0])===null||x===void 0?void 0:x.error);if(b){X(Pt,`RPC '${e}' stream ${s} received error:`,b);const O=b.status;let L=function(j){const S=it[j];if(S!==void 0)return xN(S)}(O),_=b.message;L===void 0&&(L=U.INTERNAL,_="Unknown error status: "+O+" with message "+b.message),w=!0,C.So(new K(L,_)),m.close()}else X(Pt,`RPC '${e}' stream ${s} received:`,N),C.bo(N)}}),T(c,zb.STAT_EVENT,R=>{R.stat===ym.PROXY?X(Pt,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===ym.NOPROXY&&X(Pt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{C.wo()},0),C}}function nf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qd(t){return new $R(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e,n,r,s,i,a,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new CN(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Lr(n.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class AA extends RN{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=qR(this.serializer,e),r=function(i){if(!("targetChange"in i))return ie.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?ie.min():a.readTime?ir(a.readTime):ie.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=km(this.serializer),n.addTarget=function(i,a){let c;const u=a.target;if(c=wm(u)?{documents:KR(i,u)}:{query:GR(i,u)._t},c.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){c.resumeToken=wN(i,a.resumeToken);const d=Nm(i,a.expectedCount);d!==null&&(c.expectedCount=d)}else if(a.snapshotVersion.compareTo(ie.min())>0){c.readTime=ld(i,a.snapshotVersion.toTimestamp());const d=Nm(i,a.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=XR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=km(this.serializer),n.removeTarget=e,this.a_(n)}}class PA extends RN{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return be(!!e.streamToken),this.lastStreamToken=e.streamToken,be(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){be(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=WR(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=km(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>HR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Mo(e,Em(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(U.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.connection.Lo(e,Em(n,r),s,a,c,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new K(U.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class OA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Lr(n),this.D_=!1):X("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(a=>{r.enqueueAndForget(async()=>{ki(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=oe(u);d.L_.add(4),await oc(d),d.q_.set("Unknown"),d.L_.delete(4),await Xd(d)}(this))})}),this.q_=new OA(r,s)}}async function Xd(t){if(ki(t))for(const e of t.B_)await e(!0)}async function oc(t){for(const e of t.B_)await e(!1)}function AN(t,e){const n=oe(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),fg(n)?hg(n):Yo(n).r_()&&dg(n,e))}function ug(t,e){const n=oe(t),r=Yo(n);n.N_.delete(e),r.r_()&&PN(n,e),n.N_.size===0&&(r.r_()?r.o_():ki(n)&&n.q_.set("Unknown"))}function dg(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ie.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Yo(t).A_(e)}function PN(t,e){t.Q_.xe(e),Yo(t).R_(e)}function hg(t){t.Q_=new MR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Yo(t).start(),t.q_.v_()}function fg(t){return ki(t)&&!Yo(t).n_()&&t.N_.size>0}function ki(t){return oe(t).L_.size===0}function DN(t){t.Q_=void 0}async function MA(t){t.q_.set("Online")}async function VA(t){t.N_.forEach((e,n)=>{dg(t,e)})}async function UA(t,e){DN(t),fg(t)?(t.q_.M_(e),hg(t)):t.q_.set("Unknown")}async function FA(t,e,n){if(t.q_.set("Online"),e instanceof _N&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,a),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cd(t,r)}else if(e instanceof ku?t.Q_.Ke(e):e instanceof vN?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ie.min()))try{const r=await SN(t.localStore);n.compareTo(r)>=0&&await function(i,a){const c=i.Q_.rt(a);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,a))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(wt.EMPTY_BYTE_STRING,f.snapshotVersion)),PN(i,u);const m=new cs(f.target,u,d,f.sequenceNumber);dg(i,m)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await cd(t,r)}}async function cd(t,e,n){if(!rc(e))throw e;t.L_.add(1),await oc(t),t.q_.set("Offline"),n||(n=()=>SN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Xd(t)})}function ON(t,e){return e().catch(n=>cd(t,n,e))}async function Yd(t){const e=oe(t),n=Is(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;$A(e);)try{const s=await EA(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,BA(e,s)}catch(s){await cd(e,s)}LN(e)&&MN(e)}function $A(t){return ki(t)&&t.O_.length<10}function BA(t,e){t.O_.push(e);const n=Is(t);n.r_()&&n.V_&&n.m_(e.mutations)}function LN(t){return ki(t)&&!Is(t).n_()&&t.O_.length>0}function MN(t){Is(t).start()}async function zA(t){Is(t).p_()}async function qA(t){const e=Is(t);for(const n of t.O_)e.m_(n.mutations)}async function HA(t,e,n){const r=t.O_.shift(),s=sg.from(r,e,n);await ON(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Yd(t)}async function WA(t,e){e&&Is(t).V_&&await async function(r,s){if(function(a){return DR(a)&&a!==U.ABORTED}(s.code)){const i=r.O_.shift();Is(r).s_(),await ON(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Yd(r)}}(t,e),LN(t)&&MN(t)}async function Lx(t,e){const n=oe(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=ki(n);n.L_.add(3),await oc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Xd(n)}async function KA(t,e){const n=oe(t);e?(n.L_.delete(2),await Xd(n)):e||(n.L_.add(2),await oc(n),n.q_.set("Unknown"))}function Yo(t){return t.K_||(t.K_=function(n,r,s){const i=oe(n);return i.w_(),new AA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:MA.bind(null,t),Ro:VA.bind(null,t),mo:UA.bind(null,t),d_:FA.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),fg(t)?hg(t):t.q_.set("Unknown")):(await t.K_.stop(),DN(t))})),t.K_}function Is(t){return t.U_||(t.U_=function(n,r,s){const i=oe(n);return i.w_(),new PA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zA.bind(null,t),mo:WA.bind(null,t),f_:qA.bind(null,t),g_:HA.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Yd(t)):(await t.U_.stop(),t.O_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,c=new mg(e,n,a,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pg(t,e){if(Lr("AsyncQueue",`${e}: ${t}`),rc(t))return new K(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Z.comparator(n.key,r.key):(n,r)=>Z.comparator(n.key,r.key),this.keyedMap=Ha(),this.sortedSet=new We(this.comparator)}static emptySet(e){return new jo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new jo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.W_=new We(Z.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):se():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Uo{constructor(e,n,r,s,i,a,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(c=>{a.push({type:0,doc:c})}),new Uo(e,n,jo.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class QA{constructor(){this.queries=Vx(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=oe(n),i=s.queries;s.queries=Vx(),i.forEach((a,c)=>{for(const u of c.j_)u.onError(r)})})(this,new K(U.ABORTED,"Firestore shutting down"))}}function Vx(){return new Xo(t=>sN(t),qd)}async function gg(t,e){const n=oe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new GA,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const c=pg(a,`Initialization of query '${Ji(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&xg(n)}async function yg(t,e){const n=oe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.j_.indexOf(e);a>=0&&(i.j_.splice(a,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function XA(t,e){const n=oe(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const c of a.j_)c.X_(s)&&(r=!0);a.z_=s}}r&&xg(n)}function YA(t,e,n){const r=oe(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function xg(t){t.Y_.forEach(e=>{e.next()})}var Im,Ux;(Ux=Im||(Im={})).ea="default",Ux.Cache="cache";class vg{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Uo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Im.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e){this.key=e}}class UN{constructor(e){this.key=e}}class JA{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=iN(e),this.Ra=new jo(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Mx,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,m)=>{const g=s.get(f),w=Hd(this.query,m)?m:null,C=!!g&&this.mutatedKeys.has(g.key),T=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let R=!1;g&&w?g.data.isEqual(w.data)?C!==T&&(r.track({type:3,doc:w}),R=!0):this.ga(g,w)||(r.track({type:2,doc:w}),R=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(c=!0)):!g&&w?(r.track({type:0,doc:w}),R=!0):g&&!w&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(c=!0)),R&&(w?(a=a.add(w),i=T?i.add(f):i.delete(f)):(a=a.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const f=this.query.limitType==="F"?a.last():a.first();a=a.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:a,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((f,m)=>function(w,C){const T=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return se()}};return T(w)-T(C)}(f.type,m.type)||this.Aa(f.doc,m.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,a.length!==0||d?{snapshot:new Uo(this.query,e.Ra,i,a,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Mx,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new UN(r))}),this.da.forEach(r=>{e.has(r)||n.push(new VN(r))}),n}ba(e){this.Ta=e.Ts,this.da=ue();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Uo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class eP{constructor(e){this.key=e,this.va=!1}}class tP{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Xo(c=>sN(c),qd),this.Ma=new Map,this.xa=new Set,this.Oa=new We(Z.comparator),this.Na=new Map,this.La=new ag,this.Ba={},this.ka=new Map,this.qa=Vo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nP(t,e,n=!0){const r=HN(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await FN(r,e,n,!0),s}async function rP(t,e){const n=HN(t);await FN(n,e,!0,!1)}async function FN(t,e,n,r){const s=await jA(t.localStore,sr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await sP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&AN(t.remoteStore,s),c}async function sP(t,e,n,r,s){t.Ka=(m,g,w)=>async function(T,R,x,N){let v=R.view.ma(x);v.ns&&(v=await Px(T.localStore,R.query,!1).then(({documents:_})=>R.view.ma(_,v)));const b=N&&N.targetChanges.get(R.targetId),O=N&&N.targetMismatches.get(R.targetId)!=null,L=R.view.applyChanges(v,T.isPrimaryClient,b,O);return $x(T,R.targetId,L.wa),L.snapshot}(t,m,g,w);const i=await Px(t.localStore,e,!0),a=new JA(e,i.Ts),c=a.ma(i.documents),u=ic.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(c,t.isPrimaryClient,u);$x(t,n,d.wa);const f=new ZA(e,n,a);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function iP(t,e,n){const r=oe(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(a=>!qd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Tm(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ug(r.remoteStore,s.targetId),Sm(r,s.targetId)}).catch(nc)):(Sm(r,s.targetId),await Tm(r.localStore,s.targetId,!0))}async function oP(t,e){const n=oe(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ug(n.remoteStore,r.targetId))}async function aP(t,e,n){const r=mP(t);try{const s=await function(a,c){const u=oe(a),d=ct.now(),f=c.reduce((w,C)=>w.add(C.key),ue());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let C=Mr(),T=ue();return u.cs.getEntries(w,f).next(R=>{C=R,C.forEach((x,N)=>{N.isValidDocument()||(T=T.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,C)).next(R=>{m=R;const x=[];for(const N of c){const v=SR(N,m.get(N.key).overlayedDocument);v!=null&&x.push(new Vs(N.key,v,Xb(v.value.mapValue),Tn.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,x,c)}).next(R=>{g=R;const x=R.applyToLocalDocumentSet(m,T);return u.documentOverlayCache.saveOverlays(w,R.batchId,x)})}).then(()=>({batchId:g.batchId,changes:aN(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,c,u){let d=a.Ba[a.currentUser.toKey()];d||(d=new We(ye)),d=d.insert(c,u),a.Ba[a.currentUser.toKey()]=d}(r,s.batchId,n),await ac(r,s.changes),await Yd(r.remoteStore)}catch(s){const i=pg(s,"Failed to persist write");n.reject(i)}}async function $N(t,e){const n=oe(t);try{const r=await bA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Na.get(i);a&&(be(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.va=!0:s.modifiedDocuments.size>0?be(a.va):s.removedDocuments.size>0&&(be(a.va),a.va=!1))}),await ac(n,r,e)}catch(r){await nc(r)}}function Fx(t,e,n){const r=oe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,a)=>{const c=a.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(a,c){const u=oe(a);u.onlineState=c;let d=!1;u.queries.forEach((f,m)=>{for(const g of m.j_)g.Z_(c)&&(d=!0)}),d&&xg(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lP(t,e,n){const r=oe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let a=new We(Z.comparator);a=a.insert(i,Lt.newNoDocument(i,ie.min()));const c=ue().add(i),u=new Gd(ie.min(),new Map,new We(ye),a,c);await $N(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),_g(r)}else await Tm(r.localStore,e,!1).then(()=>Sm(r,e,n)).catch(nc)}async function cP(t,e){const n=oe(t),r=e.batch.batchId;try{const s=await wA(n.localStore,e);zN(n,r,null),BN(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ac(n,s)}catch(s){await nc(s)}}async function uP(t,e,n){const r=oe(t);try{const s=await function(a,c){const u=oe(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(m=>(be(m!==null),f=m.keys(),u.mutationQueue.removeMutationBatch(d,m))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);zN(r,e,n),BN(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ac(r,s)}catch(s){await nc(s)}}function BN(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function zN(t,e,n){const r=oe(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Sm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||qN(t,r)})}function qN(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ug(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),_g(t))}function $x(t,e,n){for(const r of n)r instanceof VN?(t.La.addReference(r.key,e),dP(t,r)):r instanceof UN?(X("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||qN(t,r.key)):se()}function dP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(X("SyncEngine","New document in limbo: "+n),t.xa.add(r),_g(t))}function _g(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Z(Pe.fromString(e)),r=t.qa.next();t.Na.set(r,new eP(n)),t.Oa=t.Oa.insert(n,r),AN(t.remoteStore,new cs(sr(zd(n.path)),r,"TargetPurposeLimboResolution",Xp.oe))}}async function ac(t,e,n){const r=oe(t),s=[],i=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{a.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(d){s.push(d);const m=cg.Wi(u.targetId,d);i.push(m)}}))}),await Promise.all(a),r.Ca.d_(s),await async function(u,d){const f=oe(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>F.forEach(d,g=>F.forEach(g.$i,w=>f.persistence.referenceDelegate.addReference(m,g.targetId,w)).next(()=>F.forEach(g.Ui,w=>f.persistence.referenceDelegate.removeReference(m,g.targetId,w)))))}catch(m){if(!rc(m))throw m;X("LocalStore","Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const w=f.os.get(g),C=w.snapshotVersion,T=w.withLastLimboFreeSnapshotVersion(C);f.os=f.os.insert(g,T)}}}(r.localStore,i))}async function hP(t,e){const n=oe(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await IN(n.localStore,e);n.currentUser=e,function(i,a){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new K(U.CANCELLED,a))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ac(n,r.hs)}}function fP(t,e){const n=oe(t),r=n.Na.get(e);if(r&&r.va)return ue().add(r.key);{let s=ue();const i=n.Ma.get(e);if(!i)return s;for(const a of i){const c=n.Fa.get(a);s=s.unionWith(c.view.Va)}return s}}function HN(t){const e=oe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=$N.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lP.bind(null,e),e.Ca.d_=XA.bind(null,e.eventManager),e.Ca.$a=YA.bind(null,e.eventManager),e}function mP(t){const e=oe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uP.bind(null,e),e}class ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return _A(this.persistence,new xA,e.initialUser,this.serializer)}Ga(e){return new pA(lg.Zr,this.serializer)}Wa(e){return new TA}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ud.provider={build:()=>new ud};class Cm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Fx(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hP.bind(null,this.syncEngine),await KA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QA}()}createDatastore(e){const n=Qd(e.databaseInfo.databaseId),r=function(i){return new RA(i)}(e.databaseInfo);return function(i,a,c,u){return new DA(i,a,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,c){return new LA(r,s,i,a,c)}(this.localStore,this.datastore,e.asyncQueue,n=>Fx(this.syncEngine,n,0),function(){return Ox.D()?new Ox:new IA}())}createSyncEngine(e,n){return function(s,i,a,c,u,d,f){const m=new tP(s,i,a,c,u,d);return f&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=oe(s);X("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await oc(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Cm.provider={build:()=>new Cm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Dt.UNAUTHENTICATED,this.clientId=Qp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=pg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rf(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await IN(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Bx(t,e){t.asyncQueue.verifyOperationInProgress();const n=await gP(t);X("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Lx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Lx(e.remoteStore,s)),t._onlineComponents=e}async function gP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await rf(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===U.FAILED_PRECONDITION||s.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;pi("Error using user provided cache. Falling back to memory cache: "+n),await rf(t,new ud)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await rf(t,new ud);return t._offlineComponents}async function WN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await Bx(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await Bx(t,new Cm))),t._onlineComponents}function yP(t){return WN(t).then(e=>e.syncEngine)}async function dd(t){const e=await WN(t),n=e.eventManager;return n.onListen=nP.bind(null,e.syncEngine),n.onUnlisten=iP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oP.bind(null,e.syncEngine),n}function xP(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new wg({next:g=>{f.Za(),a.enqueueAndForget(()=>yg(i,m));const w=g.docs.has(c);!w&&g.fromCache?d.reject(new K(U.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new vg(zd(c.path),f,{includeMetadataChanges:!0,_a:!0});return gg(i,m)}(await dd(t),t.asyncQueue,e,n,r)),r.promise}function vP(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,c,u,d){const f=new wg({next:g=>{f.Za(),a.enqueueAndForget(()=>yg(i,m)),g.fromCache&&u.source==="server"?d.reject(new K(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),m=new vg(c,f,{includeMetadataChanges:!0,_a:!0});return gg(i,m)}(await dd(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KN(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(t,e,n){if(!n)throw new K(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function QN(t,e,n,r){if(e===!0&&r===!0)throw new K(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function qx(t){if(!Z.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Hx(t){if(Z.isDocumentKey(t))throw new K(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Jd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":se()}function Bt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jd(t);throw new K(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function _P(t,e){if(e<=0)throw new K(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}QN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KN((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(U.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Zd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Wx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Wx(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Kb;switch(r.type){case"firstParty":return new zC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=zx.get(n);r&&(X("ComponentProvider","Removing Datastore"),zx.delete(n),r.terminate())}(this),Promise.resolve()}}function XN(t,e,n,r={}){var s;const i=(t=Bt(t,Zd))._getSettings(),a=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==a&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:a,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=Dt.MOCK_USER;else{c=Gw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new K(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Dt(d)}t._authCredentials=new FC(new Wb(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ur(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Ir extends ur{constructor(e,n,r){super(e,n,zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new Z(e))}withConverter(e){return new Ir(this.firestore,e,this._path)}}function fe(t,e,...n){if(t=Ce(t),GN("collection","path",e),t instanceof Zd){const r=Pe.fromString(e,...n);return Hx(r),new Ir(t,null,r)}{if(!(t instanceof Tt||t instanceof Ir))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return Hx(r),new Ir(t.firestore,null,r)}}function J(t,e,...n){if(t=Ce(t),arguments.length===1&&(e=Qp.newId()),GN("doc","path",e),t instanceof Zd){const r=Pe.fromString(e,...n);return qx(r),new Tt(t,null,new Z(r))}{if(!(t instanceof Tt||t instanceof Ir))throw new K(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return qx(r),new Tt(t.firestore,t instanceof Ir?t.converter:null,new Z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new CN(this,"async_queue_retry"),this.Vu=()=>{const r=nf();r&&X("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=nf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=nf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!rc(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(a){let c=a.message||"";return a.stack&&(c=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),c}(r);throw Lr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=mg.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&se()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Gx(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class lr extends Zd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Kx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Kx(e),this._firestoreClient=void 0,await e}}}function YN(t,e){const n=typeof t=="object"?t:Vd(),r=typeof t=="string"?t:"(default)",s=Md(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Hw("firestore");i&&XN(s,...i)}return s}function lc(t){if(t._terminated)throw new K(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||wP(t),t._firestoreClient}function wP(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new nR(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,KN(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new pP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(wt.fromBase64String(e))}catch(n){throw new K(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xi(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=/^__.*__$/;class NP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new sc(e,this.data,n,this.fieldTransforms)}}class JN{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function ZN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw se()}}class bg{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(ZN(this.Cu)&&bP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class EP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Qd(e)}Qu(e,n,r,s=!1){return new bg({Cu:e,methodName:n,qu:r,path:xt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nh(t){const e=t._freezeSettings(),n=Qd(t._databaseId);return new EP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function e1(t,e,n,r,s,i={}){const a=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);jg("Data must be an object, but it was:",a,r);const c=t1(r,a);let u,d;if(i.merge)u=new dn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const f=[];for(const m of i.mergeFields){const g=Rm(e,m,n);if(!a.contains(g))throw new K(U.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);r1(f,g)||f.push(g)}u=new dn(f),d=a.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,d=a.fieldTransforms;return new NP(new Qt(c),u,d)}class rh extends Jo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rh}}class Ng extends Jo{_toFieldTransform(e){return new pN(e.path,new Vl)}isEqual(e){return e instanceof Ng}}class Eg extends Jo{constructor(e,n){super(e),this.$u=n}_toFieldTransform(e){const n=new $l(e.serializer,uN(e.serializer,this.$u));return new pN(e.path,n)}isEqual(e){return e instanceof Eg&&this.$u===e.$u}}function jP(t,e,n,r){const s=t.Qu(1,e,n);jg("Data must be an object, but it was:",s,r);const i=[],a=Qt.empty();ji(r,(u,d)=>{const f=kg(e,u,n);d=Ce(d);const m=s.Nu(f);if(d instanceof rh)i.push(f);else{const g=uc(d,m);g!=null&&(i.push(f),a.set(f,g))}});const c=new dn(i);return new JN(a,c,s.fieldTransforms)}function kP(t,e,n,r,s,i){const a=t.Qu(1,e,n),c=[Rm(e,r,n)],u=[s];if(i.length%2!=0)throw new K(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)c.push(Rm(e,i[g])),u.push(i[g+1]);const d=[],f=Qt.empty();for(let g=c.length-1;g>=0;--g)if(!r1(d,c[g])){const w=c[g];let C=u[g];C=Ce(C);const T=a.Nu(w);if(C instanceof rh)d.push(w);else{const R=uc(C,T);R!=null&&(d.push(w),f.set(w,R))}}const m=new dn(d);return new JN(f,m,a.fieldTransforms)}function TP(t,e,n,r=!1){return uc(n,t.Qu(r?4:3,e))}function uc(t,e){if(n1(t=Ce(t)))return jg("Unsupported field value:",e,t),t1(t,e);if(t instanceof Jo)return function(r,s){if(!ZN(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const c of r){let u=uc(c,s.Lu(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ce(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ct.fromDate(r);return{timestampValue:ld(s.serializer,i)}}if(r instanceof ct){const i=new ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ld(s.serializer,i)}}if(r instanceof eh)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xi)return{bytesValue:wN(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:og(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof th)return function(a,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return ng(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Jd(r)}`)}(t,e)}function t1(t,e){const n={};return Gb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ji(t,(r,s)=>{const i=uc(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function n1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ct||t instanceof eh||t instanceof xi||t instanceof Tt||t instanceof Jo||t instanceof th)}function jg(t,e,n){if(!n1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Jd(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Rm(t,e,n){if((e=Ce(e))instanceof cc)return e._internalPath;if(typeof e=="string")return kg(t,e);throw hd("Field path arguments must be of type string or ",t,!1,void 0,n)}const IP=new RegExp("[~\\*/\\[\\]]");function kg(t,e,n){if(e.search(IP)>=0)throw hd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new cc(...e.split("."))._internalPath}catch{throw hd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hd(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new K(U.INVALID_ARGUMENT,c+t+u)}function r1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SP extends s1{data(){return super.data()}}function sh(t,e){return typeof e=="string"?kg(t,e):e instanceof cc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class ih extends Tg{}function zt(t,e,...n){let r=[];e instanceof Tg&&r.push(e),r=r.concat(n),function(i){const a=i.filter(u=>u instanceof oh).length,c=i.filter(u=>u instanceof dc).length;if(a>1||a>0&&c>0)throw new K(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class dc extends ih{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new dc(e,n,r)}_apply(e){const n=this._parse(e);return o1(e._query,n),new ur(e.firestore,e.converter,bm(e._query,n))}_parse(e){const n=nh(e.firestore);return function(i,a,c,u,d,f,m){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new K(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Xx(m,f);const w=[];for(const C of m)w.push(Qx(u,i,C));g={arrayValue:{values:w}}}else g=Qx(u,i,m)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Xx(m,f),g=TP(c,a,m,f==="in"||f==="not-in");return lt.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function pn(t,e,n){const r=e,s=sh("where",t);return dc._create(s,r,n)}class oh extends Tg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new oh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Hn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const c=i.getFlattenedFilters();for(const u of c)o1(a,u),a=bm(a,u)}(e._query,n),new ur(e.firestore,e.converter,bm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ah extends ih{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new ah(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new K(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ml(i,a)}(e._query,this._field,this._direction);return new ur(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new Qo(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Ss(t,e="asc"){const n=e,r=sh("orderBy",t);return ah._create(r,n)}class lh extends ih{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new lh(e,n,r)}_apply(e){return new ur(e.firestore,e.converter,ad(e._query,this._limit,this._limitType))}}function Ig(t){return _P("limit",t),lh._create("limit",t,"F")}function Qx(t,e,n){if(typeof(n=Ce(n))=="string"){if(n==="")throw new K(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rN(e)&&n.indexOf("/")!==-1)throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!Z.isDocumentKey(r))throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return gx(t,new Z(r))}if(n instanceof Tt)return gx(t,n._key);throw new K(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jd(n)}.`)}function Xx(t,e){if(!Array.isArray(t)||t.length===0)throw new K(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function o1(t,e){const n=function(s,i){for(const a of s)for(const c of a.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new K(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class a1{convertValue(e,n="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw se()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ji(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Je(a.doubleValue));return new th(i)}convertGeoPoint(e){return new eh(Je(e.latitude),Je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ol(e));default:return null}}convertTimestamp(e){const n=Ts(e);return new ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);be(TN(r));const s=new Oo(r.get(1),r.get(3)),i=new Z(r.popFirst(5));return s.isEqual(n)||Lr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sg extends s1{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(sh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cl extends Sg{data(e={}){return super.data(e)}}class Cg{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new po(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cl(this._firestore,this._userDataWriter,r.key,r,new po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(c=>{const u=new cl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new po(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new cl(s._firestore,s._userDataWriter,c.doc.key,c.doc,new po(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=a.indexOf(c.doc.key),a=a.delete(c.doc.key)),c.type!==1&&(a=a.add(c.doc),f=a.indexOf(c.doc.key)),{type:CP(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function CP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return se()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(t){t=Bt(t,Tt);const e=Bt(t.firestore,lr);return xP(lc(e),t._key).then(n=>c1(e,t,n))}class Rg extends a1{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Ye(t){t=Bt(t,ur);const e=Bt(t.firestore,lr),n=lc(e),r=new Rg(e);return i1(t._query),vP(n,t._query).then(s=>new Cg(e,r,t,s))}function Nn(t,e,n){t=Bt(t,Tt);const r=Bt(t.firestore,lr),s=l1(t.converter,e,n);return hc(r,[e1(nh(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Tn.none())])}function Me(t,e,n,...r){t=Bt(t,Tt);const s=Bt(t.firestore,lr),i=nh(s);let a;return a=typeof(e=Ce(e))=="string"||e instanceof cc?kP(i,"updateDoc",t._key,e,n,r):jP(i,"updateDoc",t._key,e),hc(s,[a.toMutation(t._key,Tn.exists(!0))])}function us(t){return hc(Bt(t.firestore,lr),[new rg(t._key,Tn.none())])}function Zo(t,e){const n=Bt(t.firestore,lr),r=J(t),s=l1(t.converter,e);return hc(n,[e1(nh(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Tn.exists(!1))]).then(()=>r)}function Bl(t,...e){var n,r,s;t=Ce(t);let i={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Gx(e[a])||(i=e[a],a++);const c={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Gx(e[a])){const m=e[a];e[a]=(n=m.next)===null||n===void 0?void 0:n.bind(m),e[a+1]=(r=m.error)===null||r===void 0?void 0:r.bind(m),e[a+2]=(s=m.complete)===null||s===void 0?void 0:s.bind(m)}let u,d,f;if(t instanceof Tt)d=Bt(t.firestore,lr),f=zd(t._key.path),u={next:m=>{e[a]&&e[a](c1(d,t,m))},error:e[a+1],complete:e[a+2]};else{const m=Bt(t,ur);d=Bt(m.firestore,lr),f=m._query;const g=new Rg(d);u={next:w=>{e[a]&&e[a](new Cg(d,g,m,w))},error:e[a+1],complete:e[a+2]},i1(t._query)}return function(g,w,C,T){const R=new wg(T),x=new vg(w,R,C);return g.asyncQueue.enqueueAndForget(async()=>gg(await dd(g),x)),()=>{R.Za(),g.asyncQueue.enqueueAndForget(async()=>yg(await dd(g),x))}}(lc(d),f,c,u)}function hc(t,e){return function(r,s){const i=new Tr;return r.asyncQueue.enqueueAndForget(async()=>aP(await yP(r),s,i)),i.promise}(lc(t),e)}function c1(t,e,n){const r=n.docs.get(e._key),s=new Rg(t);return new Sg(t,s,e._key,r,new po(n.hasPendingWrites,n.fromCache),e.converter)}function ge(){return new Ng("serverTimestamp")}function Ka(t){return new Eg("increment",t)}(function(e,n=!0){(function(s){Go=s})(Ei),di(new js("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),c=new lr(new $C(r.getProvider("auth-internal")),new HC(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new K(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oo(d.options.projectId,f)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),nr(dx,"4.7.3",e),nr(dx,"4.7.3","esm2017")})();const Yx=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:a1,Bytes:xi,CollectionReference:Ir,DocumentReference:Tt,DocumentSnapshot:Sg,FieldPath:cc,FieldValue:Jo,Firestore:lr,FirestoreError:K,GeoPoint:eh,Query:ur,QueryCompositeFilterConstraint:oh,QueryConstraint:ih,QueryDocumentSnapshot:cl,QueryFieldFilterConstraint:dc,QueryLimitConstraint:lh,QueryOrderByConstraint:ah,QuerySnapshot:Cg,SnapshotMetadata:po,Timestamp:ct,VectorValue:th,_AutoId:Qp,_ByteString:wt,_DatabaseId:Oo,_DocumentKey:Z,_EmptyAuthCredentialsProvider:Kb,_FieldPath:xt,_cast:Bt,_logWarn:pi,_validateIsNotUsedTogether:QN,addDoc:Zo,collection:fe,connectFirestoreEmulator:XN,deleteDoc:us,doc:J,ensureFirestoreConfigured:lc,executeWrite:hc,getDoc:vt,getDocs:Ye,getFirestore:YN,increment:Ka,limit:Ig,onSnapshot:Bl,orderBy:Ss,query:zt,serverTimestamp:ge,setDoc:Nn,updateDoc:Me,where:pn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="firebasestorage.googleapis.com",d1="storageBucket",RP=2*60*1e3,AP=10*60*1e3,PP=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke extends cr{constructor(e,n,r=0){super(sf(e),`Firebase Storage: ${n} (${sf(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ke.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Oe;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Oe||(Oe={}));function sf(t){return"storage/"+t}function Ag(){const t="An unknown error occurred, please check the error payload for server response.";return new Ke(Oe.UNKNOWN,t)}function DP(t){return new Ke(Oe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function OP(t){return new Ke(Oe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ke(Oe.UNAUTHENTICATED,t)}function MP(){return new Ke(Oe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function VP(t){return new Ke(Oe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function h1(){return new Ke(Oe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function f1(){return new Ke(Oe.CANCELED,"User canceled the upload/download.")}function UP(t){return new Ke(Oe.INVALID_URL,"Invalid URL '"+t+"'.")}function FP(t){return new Ke(Oe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function $P(){return new Ke(Oe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+d1+"' property when initializing the app?")}function m1(){return new Ke(Oe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BP(){return new Ke(Oe.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function zP(){return new Ke(Oe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function qP(t){return new Ke(Oe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Am(t){return new Ke(Oe.INVALID_ARGUMENT,t)}function p1(){return new Ke(Oe.APP_DELETED,"The Firebase app was deleted.")}function HP(t){return new Ke(Oe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ul(t,e){return new Ke(Oe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function La(t){throw new Ke(Oe.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=hn.makeFromUrl(e,n)}catch{return new hn(e,"")}if(r.path==="")return r;throw FP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const a="(/(.*))?$",c=new RegExp("^gs://"+s+a,"i"),u={bucket:1,path:3};function d(b){b.path_=decodeURIComponent(b.path)}const f="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${m}/${f}/b/${s}/o${g}`,"i"),C={bucket:1,path:3},T=n===u1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",x=new RegExp(`^https?://${T}/${s}/${R}`,"i"),v=[{regex:c,indices:u,postModify:i},{regex:w,indices:C,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let b=0;b<v.length;b++){const O=v[b],L=O.regex.exec(e);if(L){const _=L[O.indices.bucket];let y=L[O.indices.path];y||(y=""),r=new hn(_,y),O.postModify(r);break}}if(r==null)throw UP(e);return r}}class WP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t,e,n){let r=1,s=null,i=null,a=!1,c=0;function u(){return c===2}let d=!1;function f(...R){d||(d=!0,e.apply(null,R))}function m(R){s=setTimeout(()=>{s=null,t(w,u())},R)}function g(){i&&clearTimeout(i)}function w(R,...x){if(d){g();return}if(R){g(),f.call(null,R,...x);return}if(u()||a){g(),f.call(null,R,...x);return}r<64&&(r*=2);let v;c===1?(c=2,v=0):v=(r+Math.random())*1e3,m(v)}let C=!1;function T(R){C||(C=!0,g(),!d&&(s!==null?(R||(c=2),clearTimeout(s),m(0)):R||(c=1)))}return m(0),i=setTimeout(()=>{a=!0,T(!0)},n),T}function GP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t){return t!==void 0}function XP(t){return typeof t=="function"}function YP(t){return typeof t=="object"&&!Array.isArray(t)}function ch(t){return typeof t=="string"||t instanceof String}function Jx(t){return Pg()&&t instanceof Blob}function Pg(){return typeof Blob<"u"}function Zx(t,e,n,r){if(r<e)throw Am(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Am(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fc(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function g1(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var si;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(si||(si={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n,r,s,i,a,c,u,d,f,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,C)=>{this.resolve_=w,this.reject_=C,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new nu(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const c=i.getErrorCode()===si.NO_ERROR,u=i.getStatus();if(!c||y1(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===si.ABORT;r(!1,new nu(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new nu(d,i))})},n=(r,s)=>{const i=this.resolve_,a=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());QP(u)?i(u):i()}catch(u){a(u)}else if(c!==null){const u=Ag();u.serverResponse=c.getErrorText(),this.errorCallback_?a(this.errorCallback_(c,u)):a(u)}else if(s.canceled){const u=this.appDelete_?p1():f1();a(u)}else{const u=h1();a(u)}};this.canceled_?n(!1,new nu(!1,null,!0)):this.backoffId_=KP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&GP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function ZP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function e4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function t4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function n4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function r4(t,e,n,r,s,i,a=!0){const c=g1(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return t4(d,e),ZP(d,n),e4(d,i),n4(d,r),new JP(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function i4(...t){const e=s4();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Pg())return new Blob(t);throw new Ke(Oe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function o4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){if(typeof atob>"u")throw qP("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class of{constructor(e,n){this.data=e,this.contentType=n||null}}function l4(t,e){switch(t){case Zn.RAW:return new of(x1(e));case Zn.BASE64:case Zn.BASE64URL:return new of(v1(t,e));case Zn.DATA_URL:return new of(u4(e),d4(e))}throw Ag()}function x1(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,a=t.charCodeAt(++n);r=65536|(i&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function c4(t){let e;try{e=decodeURIComponent(t)}catch{throw ul(Zn.DATA_URL,"Malformed data URL.")}return x1(e)}function v1(t,e){switch(t){case Zn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw ul(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Zn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw ul(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=a4(e)}catch(s){throw s.message.includes("polyfill")?s:ul(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class _1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ul(Zn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=h4(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function u4(t){const e=new _1(t);return e.base64?v1(Zn.BASE64,e.rest):c4(e.rest)}function d4(t){return new _1(t).contentType}function h4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n){let r=0,s="";Jx(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Jx(this.data_)){const r=this.data_,s=o4(r,e,n);return s===null?null:new vr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new vr(r,!0)}}static getBlob(...e){if(Pg()){const n=e.map(r=>r instanceof vr?r.data_:r);return new vr(i4.apply(null,n))}else{const n=e.map(a=>ch(a)?l4(Zn.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(a=>{for(let c=0;c<a.length;c++)s[i++]=a[c]}),new vr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w1(t){let e;try{e=JSON.parse(t)}catch{return null}return YP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function m4(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function b1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t,e){return e}class Ut{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||p4}}let ru=null;function g4(t){return!ch(t)||t.length<2?t:b1(t)}function Dg(){if(ru)return ru;const t=[];t.push(new Ut("bucket")),t.push(new Ut("generation")),t.push(new Ut("metageneration")),t.push(new Ut("name","fullPath",!0));function e(i,a){return g4(a)}const n=new Ut("name");n.xform=e,t.push(n);function r(i,a){return a!==void 0?Number(a):a}const s=new Ut("size");return s.xform=r,t.push(s),t.push(new Ut("timeCreated")),t.push(new Ut("updated")),t.push(new Ut("md5Hash",null,!0)),t.push(new Ut("cacheControl",null,!0)),t.push(new Ut("contentDisposition",null,!0)),t.push(new Ut("contentEncoding",null,!0)),t.push(new Ut("contentLanguage",null,!0)),t.push(new Ut("contentType",null,!0)),t.push(new Ut("metadata","customMetadata",!0)),ru=t,ru}function y4(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new hn(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function x4(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const a=n[i];r[a.local]=a.xform(r,e[a.server])}return y4(r,t),r}function N1(t,e,n){const r=w1(e);return r===null?null:x4(t,r,n)}function v4(t,e,n,r){const s=w1(e);if(s===null||!ch(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const a=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,m=t.fullPath,g="/b/"+a(f)+"/o/"+a(m),w=fc(g,n,r),C=g1({alt:"media",token:d});return w+C})[0]}function E1(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class ea{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(t){if(!t)throw Ag()}function Og(t,e){function n(r,s){const i=N1(t,s,e);return Sr(i!==null),i}return n}function _4(t,e){function n(r,s){const i=N1(t,s,e);return Sr(i!==null),v4(i,s,t.host,t._protocol)}return n}function mc(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=MP():s=LP():n.getStatus()===402?s=OP(t.bucket):n.getStatus()===403?s=VP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function j1(t){const e=mc(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=DP(t.path)),i.serverResponse=s.serverResponse,i}return n}function w4(t,e,n){const r=e.fullServerUrl(),s=fc(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new ea(s,i,Og(t,n),a);return c.errorHandler=j1(e),c}function b4(t,e,n){const r=e.fullServerUrl(),s=fc(r,t.host,t._protocol),i="GET",a=t.maxOperationRetryTime,c=new ea(s,i,_4(t,n),a);return c.errorHandler=j1(e),c}function N4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function k1(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=N4(null,e)),r}function T1(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function c(){let v="";for(let b=0;b<2;b++)v=v+Math.random().toString().slice(2);return v}const u=c();a["Content-Type"]="multipart/related; boundary="+u;const d=k1(e,r,s),f=E1(d,n),m="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=vr.getBlob(m,r,g);if(w===null)throw m1();const C={name:d.fullPath},T=fc(i,t.host,t._protocol),R="POST",x=t.maxUploadRetryTime,N=new ea(T,R,Og(t,n),x);return N.urlParams=C,N.headers=a,N.body=w.uploadData(),N.errorHandler=mc(e),N}class fd{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function Lg(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Sr(!1)}return Sr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function E4(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),a=k1(e,r,s),c={name:a.fullPath},u=fc(i,t.host,t._protocol),d="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},m=E1(a,n),g=t.maxUploadRetryTime;function w(T){Lg(T);let R;try{R=T.getResponseHeader("X-Goog-Upload-URL")}catch{Sr(!1)}return Sr(ch(R)),R}const C=new ea(u,d,w,g);return C.urlParams=c,C.headers=f,C.body=m,C.errorHandler=mc(e),C}function j4(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(d){const f=Lg(d,["active","final"]);let m=null;try{m=d.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Sr(!1)}m||Sr(!1);const g=Number(m);return Sr(!isNaN(g)),new fd(g,r.size(),f==="final")}const a="POST",c=t.maxUploadRetryTime,u=new ea(n,a,i,c);return u.headers=s,u.errorHandler=mc(e),u}const ev=256*1024;function k4(t,e,n,r,s,i,a,c){const u=new fd(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw BP();const d=u.total-u.current;let f=d;s>0&&(f=Math.min(f,s));const m=u.current,g=m+f;let w="";f===0?w="finalize":d===f?w="upload, finalize":w="upload";const C={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${u.current}`},T=r.slice(m,g);if(T===null)throw m1();function R(b,O){const L=Lg(b,["active","final"]),_=u.current+f,y=r.size();let j;return L==="final"?j=Og(e,i)(b,O):j=null,new fd(_,y,L==="final",j)}const x="POST",N=e.maxUploadRetryTime,v=new ea(n,x,R,N);return v.headers=C,v.body=T.uploadData(),v.progressCallback=c||null,v.errorHandler=mc(t),v}const Kt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function af(t){switch(t){case"running":case"pausing":case"canceling":return Kt.RUNNING;case"paused":return Kt.PAUSED;case"success":return Kt.SUCCESS;case"canceled":return Kt.CANCELED;case"error":return Kt.ERROR;default:return Kt.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(e,n,r){if(XP(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class I4{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=si.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=si.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=si.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw La("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw La("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw La("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw La("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw La("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class S4 extends I4{initXhr(){this.xhr_.responseType="text"}}function Xs(){return new S4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Dg(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(Oe.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(y1(s.status,[]))if(i)s=h1();else{this.sleepTime=Math.max(this.sleepTime*2,PP),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(Oe.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=E4(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Xs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=j4(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,Xs,n,r);this._request=i,i.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=ev*this._chunkMultiplier,n=new fd(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let a;try{a=k4(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const c=this._ref.storage._makeRequest(a,Xs,s,i,!1);this._request=c,c.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ev*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=w4(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Xs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=T1(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Xs,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=f1(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=af(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new T4(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(af(this._state)){case Kt.SUCCESS:Yi(this._resolve.bind(null,this.snapshot))();break;case Kt.CANCELED:case Kt.ERROR:const n=this._reject;Yi(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(af(this._state)){case Kt.RUNNING:case Kt.PAUSED:e.next&&Yi(e.next.bind(e,this.snapshot))();break;case Kt.SUCCESS:e.complete&&Yi(e.complete.bind(e))();break;case Kt.CANCELED:case Kt.ERROR:e.error&&Yi(e.error.bind(e,this._error))();break;default:e.error&&Yi(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n){this._service=e,n instanceof hn?this._location=n:this._location=hn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new vi(e,n)}get root(){const e=new hn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return b1(this._location.path)}get storage(){return this._service}get parent(){const e=f4(this._location.path);if(e===null)return null;const n=new hn(this._location.bucket,e);return new vi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw HP(e)}}function R4(t,e,n){t._throwIfRoot("uploadBytes");const r=T1(t.storage,t._location,Dg(),new vr(e,!0),n);return t.storage.makeRequestWithTokens(r,Xs).then(s=>({metadata:s,ref:t}))}function A4(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new C4(t,new vr(e),n)}function P4(t){t._throwIfRoot("getDownloadURL");const e=b4(t.storage,t._location,Dg());return t.storage.makeRequestWithTokens(e,Xs).then(n=>{if(n===null)throw zP();return n})}function D4(t,e){const n=m4(t._location.path,e),r=new hn(t._location.bucket,n);return new vi(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O4(t){return/^[A-Za-z]+:\/\//.test(t)}function L4(t,e){return new vi(t,e)}function I1(t,e){if(t instanceof Mg){const n=t;if(n._bucket==null)throw $P();const r=new vi(n,n._bucket);return e!=null?I1(r,e):r}else return e!==void 0?D4(t,e):t}function M4(t,e){if(e&&O4(e)){if(t instanceof Mg)return L4(t,e);throw Am("To use ref(service, url), the first argument must be a Storage instance.")}else return I1(t,e)}function tv(t,e){const n=e==null?void 0:e[d1];return n==null?null:hn.makeFromBucketSpec(n,t)}function V4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Gw(s,t.app.options.projectId))}class Mg{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=u1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=RP,this._maxUploadRetryTime=AP,this._requests=new Set,s!=null?this._bucket=hn.makeFromBucketSpec(s,this._host):this._bucket=tv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=hn.makeFromBucketSpec(this._url,e):this._bucket=tv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Zx("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Zx("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new vi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new WP(p1());{const a=r4(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const nv="@firebase/storage",rv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="storage";function Pm(t,e,n){return t=Ce(t),R4(t,e,n)}function C1(t,e,n){return t=Ce(t),A4(t,e,n)}function zl(t){return t=Ce(t),P4(t)}function ql(t,e){return t=Ce(t),M4(t,e)}function uh(t=Vd(),e){t=Ce(t);const r=Md(t,S1).getImmediate({identifier:e}),s=Hw("storage");return s&&U4(r,...s),r}function U4(t,e,n,r={}){V4(t,e,n,r)}function F4(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Mg(n,r,s,e,Ei)}function $4(){di(new js(S1,F4,"PUBLIC").setMultipleInstances(!0)),nr(nv,rv,""),nr(nv,rv,"esm2017")}$4();const B4={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.firebasestorage.app",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},cn=Jw().length?Vd():Yw(B4),Bn=Jw().length>0?LC(cn):wb(cn,{persistence:[Lb,Cb]}),q=YN(cn),sv=uh(cn),R1=I.createContext({user:null,role:null,loading:!0,logout:async()=>{},userLocation:null,locationRequired:!1,refreshUserData:async()=>{}}),z4=({children:t})=>{const[e,n]=I.useState(null),[r,s]=I.useState(null),[i,a]=I.useState(!0),[c,u]=I.useState(null),[d,f]=I.useState(!1),m=async()=>{if(!e)return;const w=await vt(J(q,"users",e.uid));if(w.exists()){const C=w.data();u((C==null?void 0:C.location)||null),f(!(C!=null&&C.location))}};I.useEffect(()=>{const w=cS(Bn,async C=>{if(n(C),C){const T=await vt(J(q,"users",C.uid)),R=T.data(),x=T.exists()?R==null?void 0:R.role:null;s(x);const N=R==null?void 0:R.location;if(u(N||null),f((x==="customer"||x==="owner"||x==="courier")&&!N),x==="owner")try{const b=J(q,"restaurants",C.uid);(await vt(b)).exists()||await Nn(b,{name:(R==null?void 0:R.restaurantName)||(R==null?void 0:R.name)||" ",ownerId:C.uid,email:(R==null?void 0:R.email)||C.email||"",phone:"",city:"",location:"",logoUrl:""},{merge:!0})}catch(b){console.warn("    ",b)}}else s(null),u(null),f(!1);a(!1)});return()=>w()},[]);const g=async()=>{await uS(Bn)};return o.jsx(R1.Provider,{value:{user:e,role:r,loading:i,logout:g,userLocation:c,locationRequired:d,refreshUserData:m},children:t})},tt=()=>I.useContext(R1);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),H4=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),iv=t=>{const e=H4(t);return e.charAt(0).toUpperCase()+e.slice(1)},A1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),W4=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var K4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=I.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...c},u)=>I.createElement("svg",{ref:u,...K4,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:A1("lucide",s),...!i&&!W4(c)&&{"aria-hidden":"true"},...c},[...a.map(([d,f])=>I.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(t,e)=>{const n=I.forwardRef(({className:r,...s},i)=>I.createElement(G4,{ref:i,iconNode:e,className:A1(`lucide-${q4(iv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=iv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],X4=Y("arrow-left",Q4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],P1=Y("arrow-right",Y4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Z4=Y("briefcase",J4);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],D1=Y("building-2",eD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tD=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],lf=Y("chart-column",tD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],md=Y("check",nD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]],O1=Y("chef-hat",rD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],iD=Y("chevron-down",sD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],aD=Y("chevron-left",oD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lD=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cD=Y("chevron-up",lD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],pd=Y("circle-alert",uD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Cs=Y("circle-check-big",dD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],fD=Y("circle-check",hD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],L1=Y("circle-x",mD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],gd=Y("clipboard-list",pD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Vg=Y("clock",gD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],Ug=Y("code-xml",yD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],vD=Y("credit-card",xD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Dm=Y("external-link",_D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],ov=Y("file-check",wD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ND=Y("file-text",bD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],jD=Y("funnel",ED);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kD=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],TD=Y("heart",kD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Om=Y("house",ID);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],CD=Y("image",SD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],av=Y("info",RD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AD=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],PD=Y("key-round",AD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],ii=Y("loader-circle",DD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],M1=Y("lock",OD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],Fg=Y("log-in",LD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],V1=Y("mail",MD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],or=Y("map-pin",VD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],FD=Y("menu",UD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["path",{d:"M5 12h14",key:"1ays0h"}]],BD=Y("minus",$D);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],_i=Y("navigation",zD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ko=Y("package",qD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HD=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],lv=Y("pen-line",HD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],$g=Y("phone",WD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Bg=Y("plus",KD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_r=Y("refresh-cw",GD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],U1=Y("save",QD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]],YD=Y("server",XD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JD=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F1=Y("settings",JD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],cv=Y("shield-check",ZD);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],zg=Y("shield",e5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],yd=Y("shopping-bag",t5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],xd=Y("shopping-cart",n5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],s5=Y("smartphone",r5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],uv=Y("sparkles",i5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],ln=Y("store",o5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],l5=Y("target",a5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Fo=Y("trash-2",c5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Lm=Y("triangle-alert",u5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],bs=Y("truck",d5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],f5=Y("upload",h5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Hl=Y("user-plus",m5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],En=Y("user",p5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],y5=Y("users",g5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],v5=Y("utensils",x5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _5=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],$1=Y("wallet",_5);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wi=Y("x",w5),Le=({to:t,label:e,icon:n,onClick:r})=>{const{pathname:s}=Ls(),i=s===t;return o.jsxs(Ve,{to:t,onClick:r,className:"flex items-center gap-2 px-4 py-3 sm:py-2.5 rounded-2xl text-sm font-bold transition-all duration-300 "+(i?"bg-white text-sky-600 shadow-lg shadow-sky-200/50 scale-105":"text-white/90 hover:text-white hover:bg-white/20 backdrop-blur-sm"),children:[n,o.jsx("span",{children:e})]})},b5=()=>{const{user:t,role:e,logout:n}=tt(),[r,s]=I.useState(!1),i=Ls(),a=Ur(),c=i.pathname==="/";return I.useEffect(()=>{s(!1)},[i.pathname]),I.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[r]),o.jsxs("header",{className:"bg-gradient-to-r from-sky-600 via-sky-500 to-sky-600 shadow-xl shadow-sky-200/30",children:[o.jsxs("div",{className:"max-w-6xl mx-auto px-3 sm:px-4 py-3 sm:py-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[!c&&o.jsx("button",{onClick:()=>a(-1),className:"w-9 h-9 sm:w-10 sm:h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center text-white transition-all","aria-label":"",children:o.jsx(P1,{className:"w-5 h-5"})}),o.jsxs("button",{onClick:()=>window.location.href="/",className:"text-xl sm:text-2xl font-black text-white flex items-center gap-2 sm:gap-3 hover:scale-105 transition-transform drop-shadow-lg",children:[o.jsx("div",{className:"w-9 h-9 sm:w-10 sm:h-10 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-xl sm:text-2xl",children:""})}),o.jsx("span",{className:"text-lg sm:text-2xl",children:" "})]})]}),o.jsxs("nav",{className:"hidden md:flex items-center gap-1 lg:gap-2",children:[o.jsx(Le,{to:"/restaurants",label:"",icon:o.jsx(ln,{className:"w-4 h-4"})}),e==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx(Le,{to:"/cart",label:" "}),o.jsx(Le,{to:"/orders",label:""}),o.jsx(Le,{to:"/profile",label:"",icon:o.jsx(En,{className:"w-4 h-4"})})]}),e==="owner"&&o.jsxs(o.Fragment,{children:[o.jsx(Le,{to:"/owner",label:" "}),o.jsx(Le,{to:"/owner/orders",label:" "}),o.jsx(Le,{to:"/owner/courier-requests",label:""})]}),e==="courier"&&o.jsxs(o.Fragment,{children:[o.jsx(Le,{to:"/courier",label:" "}),o.jsx(Le,{to:"/courier/hiring",label:""})]}),e==="admin"&&o.jsx(Le,{to:"/admin",label:" "}),e==="developer"&&o.jsx(Le,{to:"/developer",label:" "}),t?o.jsx("button",{onClick:n,className:"px-5 py-2.5 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300",children:""}):o.jsx(Le,{to:"/login",label:""})]}),o.jsx("button",{className:"md:hidden p-2.5 rounded-2xl bg-white/20 hover:bg-white/30 transition backdrop-blur-sm",onClick:()=>s(!r),children:r?o.jsx(wi,{className:"w-6 h-6 text-white"}):o.jsx(FD,{className:"w-6 h-6 text-white"})})]}),r&&o.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden backdrop-blur-sm",onClick:()=>s(!1)}),o.jsxs("div",{className:`
        fixed top-0 right-0 h-full w-72 max-w-[80vw] bg-gradient-to-b from-sky-500 to-sky-700 
        z-50 md:hidden transform transition-transform duration-300 ease-out shadow-2xl
        ${r?"translate-x-0":"translate-x-full"}
      `,children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-white/20",children:[o.jsx("span",{className:"text-white font-bold text-lg",children:""}),o.jsx("button",{onClick:()=>s(!1),className:"p-2 rounded-xl bg-white/20 hover:bg-white/30 transition",children:o.jsx(wi,{className:"w-5 h-5 text-white"})})]}),o.jsxs("div",{className:"p-4 flex flex-col gap-2 overflow-y-auto max-h-[calc(100vh-80px)]",children:[o.jsx(Le,{to:"/restaurants",label:"",icon:o.jsx(ln,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="customer"&&o.jsxs(o.Fragment,{children:[o.jsx(Le,{to:"/cart",label:"",icon:o.jsx(xd,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Le,{to:"/orders",label:"",icon:o.jsx(ko,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Le,{to:"/profile",label:"",icon:o.jsx(En,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="owner"&&o.jsxs(o.Fragment,{children:[o.jsx(Le,{to:"/owner",label:" ",icon:o.jsx(Om,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Le,{to:"/owner/orders",label:" ",icon:o.jsx(ko,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Le,{to:"/owner/courier-requests",label:"",icon:o.jsx(bs,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="courier"&&o.jsxs(o.Fragment,{children:[o.jsx(Le,{to:"/courier",label:" ",icon:o.jsx(bs,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx(Le,{to:"/courier/hiring",label:"",icon:o.jsx(ko,{className:"w-5 h-5"}),onClick:()=>s(!1)})]}),e==="admin"&&o.jsx(Le,{to:"/admin",label:" ",icon:o.jsx(zg,{className:"w-5 h-5"}),onClick:()=>s(!1)}),e==="developer"&&o.jsx(Le,{to:"/developer",label:" ",icon:o.jsx(Ug,{className:"w-5 h-5"}),onClick:()=>s(!1)}),o.jsx("div",{className:"h-px bg-white/20 my-2"}),t?o.jsx("button",{onClick:()=>{n(),s(!1)},className:"w-full mt-2 px-5 py-3 rounded-2xl text-sm font-bold text-sky-600 bg-white shadow-lg hover:scale-105 transition-all duration-300 text-center",children:"  "}):o.jsx(Le,{to:"/login",label:" ",icon:o.jsx(Om,{className:"w-5 h-5"}),onClick:()=>s(!1)})]})]})]})},B1=I.createContext(null),$r=()=>{const t=I.useContext(B1);if(!t)throw new Error("useDialog must be used within DialogProvider");return t},N5=({children:t})=>{const[e,n]=I.useState({isOpen:!1,message:"",type:"confirm"}),r=I.useCallback(u=>new Promise(d=>{n({...u,isOpen:!0,resolve:d})}),[]),s=I.useCallback(u=>{e.resolve&&e.resolve(u),n(d=>({...d,isOpen:!1}))},[e.resolve]),i=I.useCallback(async()=>{e.onConfirm&&await e.onConfirm(),s(!0)},[e.onConfirm,s]),a=I.useCallback(()=>{e.onCancel&&e.onCancel(),s(!1)},[e.onCancel,s]),c=I.useMemo(()=>({confirm:(u,d={})=>r({message:u,type:"confirm",title:d.title||"",confirmText:d.confirmText||"",cancelText:d.cancelText||"",...d}),alert:(u,d={})=>r({message:u,type:"alert",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),success:(u,d={})=>r({message:u,type:"success",title:d.title||" ",confirmText:d.confirmText||"",...d}).then(()=>{}),error:(u,d={})=>r({message:u,type:"error",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),warning:(u,d={})=>r({message:u,type:"warning",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{}),info:(u,d={})=>r({message:u,type:"info",title:d.title||"",confirmText:d.confirmText||"",...d}).then(()=>{})}),[r]);return o.jsxs(B1.Provider,{value:c,children:[t,o.jsx(E5,{...e,onConfirm:i,onCancel:a})]})},E5=({isOpen:t,title:e,message:n,type:r="confirm",confirmText:s="",cancelText:i="",dangerous:a,onConfirm:c,onCancel:u})=>{if(!t)return null;const f={confirm:{icon:o.jsx(av,{className:"w-8 h-8"}),iconBg:"bg-sky-100",iconColor:"text-sky-600",buttonColor:a?"bg-red-600 hover:bg-red-700":"bg-sky-600 hover:bg-sky-700"},alert:{icon:o.jsx(Lm,{className:"w-8 h-8"}),iconBg:"bg-amber-100",iconColor:"text-amber-600",buttonColor:"bg-amber-600 hover:bg-amber-700"},success:{icon:o.jsx(Cs,{className:"w-8 h-8"}),iconBg:"bg-green-100",iconColor:"text-green-600",buttonColor:"bg-green-600 hover:bg-green-700"},error:{icon:o.jsx(L1,{className:"w-8 h-8"}),iconBg:"bg-red-100",iconColor:"text-red-600",buttonColor:"bg-red-600 hover:bg-red-700"},warning:{icon:o.jsx(Lm,{className:"w-8 h-8"}),iconBg:"bg-orange-100",iconColor:"text-orange-600",buttonColor:"bg-orange-600 hover:bg-orange-700"},info:{icon:o.jsx(av,{className:"w-8 h-8"}),iconBg:"bg-blue-100",iconColor:"text-blue-600",buttonColor:"bg-blue-600 hover:bg-blue-700"}}[r],m=r==="confirm";return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[9998] animate-fadeIn",onClick:u}),o.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4 pointer-events-none",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm pointer-events-auto animate-scaleIn overflow-hidden",onClick:g=>g.stopPropagation(),children:[o.jsxs("div",{className:"relative p-6 pb-0",children:[o.jsx("button",{onClick:u,className:"absolute top-4 left-4 p-1.5 rounded-lg hover:bg-gray-100 transition text-gray-400 hover:text-gray-600",children:o.jsx(wi,{className:"w-5 h-5"})}),o.jsx("div",{className:"flex justify-center mb-4",children:o.jsx("div",{className:`w-16 h-16 rounded-full ${f.iconBg} ${f.iconColor} flex items-center justify-center`,children:f.icon})}),o.jsx("h3",{className:"text-xl font-bold text-center text-gray-900",children:e})]}),o.jsx("div",{className:"p-6 pt-3",children:o.jsx("p",{className:"text-center text-gray-600 leading-relaxed",children:n})}),o.jsxs("div",{className:`p-4 pt-0 flex gap-3 ${m?"flex-row-reverse":"justify-center"}`,children:[o.jsx("button",{onClick:c,className:`flex-1 py-3 px-6 rounded-xl font-bold text-white transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] ${f.buttonColor}`,children:s}),m&&o.jsx("button",{onClick:u,className:"flex-1 py-3 px-6 rounded-xl font-bold text-gray-700 bg-gray-100 hover:bg-gray-200 transition-all duration-200 hover:scale-[1.02] active:scale-[0.98]",children:i})]})]})}),o.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes scaleIn {
          from { opacity: 0; transform: scale(0.9); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.2s ease-out;
        }
        .animate-scaleIn {
          animation: scaleIn 0.2s ease-out;
        }
      `})]})},j5=()=>{const{user:t}=tt(),e=Ur(),n=$r(),r=async()=>{if(!(!t||!await n.confirm("     .     .",{title:"  ",dangerous:!0,confirmText:"  ",cancelText:""})))try{await us(J(q,"users",t.uid)),await dS(Bn.currentUser),n.success("   "),e("/account-deleted")}catch(i){console.error("Error deleting account:",i),n.error("    .   .")}};return o.jsx("footer",{className:"bg-gradient-to-b from-sky-600 to-sky-700 text-white text-center py-8 sm:py-10 mt-12 sm:mt-16 shadow-[0_-10px_40px_rgba(14,165,233,0.2)]",children:o.jsxs("div",{className:"max-w-4xl mx-auto flex flex-col items-center gap-4 sm:gap-6 px-4",children:[o.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[o.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white rounded-xl sm:rounded-2xl flex items-center justify-center shadow-lg",children:o.jsx("span",{className:"text-2xl sm:text-3xl",children:""})}),o.jsx("span",{className:"text-xl sm:text-2xl font-black",children:" "})]}),o.jsxs("p",{className:"text-xs sm:text-sm md:text-base font-medium text-sky-100 flex items-center gap-2",children:["  ",o.jsx(TD,{className:"w-3 h-3 sm:w-4 sm:h-4 text-red-400 fill-red-400"}),"    ",new Date().getFullYear()]}),o.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-2 sm:gap-3",children:[o.jsxs(Ve,{to:"/privacy-policy",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(zg,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),o.jsxs(Ve,{to:"/developer",className:"flex items-center gap-1.5 sm:gap-2 bg-white/20 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-white/30 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(Ug,{className:"w-3 h-3 sm:w-4 sm:h-4"}),""]}),t&&o.jsxs("button",{onClick:r,className:"flex items-center gap-1.5 sm:gap-2 bg-red-500/80 backdrop-blur-sm text-white font-semibold px-3 sm:px-5 py-2 sm:py-2.5 rounded-xl sm:rounded-2xl hover:bg-red-500 hover:scale-105 transition-all duration-300 text-xs sm:text-sm",children:[o.jsx(Fo,{className:"w-3 h-3 sm:w-4 sm:h-4"})," "]})]}),o.jsx("div",{className:"w-24 sm:w-32 h-1 bg-white/20 rounded-full"}),o.jsx("p",{className:"text-[10px] sm:text-xs text-sky-200",children:"     "})]})})},k5=()=>o.jsx("div",{className:"w-full bg-gradient-to-r from-sky-500 via-sky-400 to-sky-500 text-white py-2 sm:py-3 overflow-hidden shadow-lg",children:o.jsxs("div",{className:"flex items-center justify-center gap-1 sm:gap-2 px-2",children:[o.jsx(uv,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"}),o.jsx("div",{className:"marquee whitespace-nowrap font-bold text-xs sm:text-sm tracking-wide",children:"            ! "}),o.jsx(uv,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white animate-pulse flex-shrink-0"})]})}),T5=({onLocationSaved:t})=>{const{user:e,role:n}=tt(),[r,s]=I.useState(null),[i,a]=I.useState(!1),[c,u]=I.useState(!1),[d,f]=I.useState(null),[m,g]=I.useState(!1),[w,C]=I.useState(!1),T={lat:24.7136,lng:46.6753},R=I.useCallback(()=>{if(!navigator.geolocation){f("    ");return}u(!0),f(null),navigator.geolocation.getCurrentPosition(v=>{const b={lat:v.coords.latitude,lng:v.coords.longitude};s(b),u(!1),window.locationRequiredMap&&(window.locationRequiredMap.setView([b.lat,b.lng],17),window.locationRequiredMarker&&window.locationRequiredMarker.setLatLng([b.lat,b.lng]))},v=>{u(!1),v.code===1?f("   .     "):v.code===2?f("  .    GPS"):f("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);I.useEffect(()=>{if(!document.getElementById("leaflet-css")){const v=document.createElement("link");v.id="leaflet-css",v.rel="stylesheet",v.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(v)}if(window.L)g(!0);else{const v=document.createElement("script");v.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",v.onload=()=>g(!0),document.body.appendChild(v)}},[]),I.useEffect(()=>{if(!m||!window.L)return;const v=window.L;if(!document.getElementById("location-required-map"))return;window.locationRequiredMap&&window.locationRequiredMap.remove();const O=r||T,L=v.map("location-required-map",{zoomControl:!0,attributionControl:!1}).setView([O.lat,O.lng],12);v.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(L);const _=v.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),y=v.marker([O.lat,O.lng],{icon:_,draggable:!0}).addTo(L);return y.on("dragend",()=>{const j=y.getLatLng();s({lat:j.lat,lng:j.lng})}),L.on("click",j=>{const{lat:S,lng:P}=j.latlng;s({lat:S,lng:P}),y.setLatLng([S,P])}),window.locationRequiredMap=L,window.locationRequiredMarker=y,()=>{window.locationRequiredMap&&(window.locationRequiredMap.remove(),window.locationRequiredMap=null,window.locationRequiredMarker=null)}},[m]);const x=async()=>{if(!(!r||!e)){C(!0);try{if(await Me(J(q,"users",e.uid),{location:r,locationUpdatedAt:new Date}),n==="owner")try{await Me(J(q,"restaurants",e.uid),{geoLocation:r,locationUpdatedAt:new Date})}catch(v){console.warn("   :",v)}t()}catch{f("   .   ")}finally{C(!1)}}},N=()=>{switch(n){case"owner":return"";case"courier":return" ";default:return""}};return o.jsx("div",{className:"fixed inset-0 z-50 bg-gradient-to-br from-sky-50 via-white to-sky-100 flex items-center justify-center p-4",children:o.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl max-w-lg w-full overflow-hidden",children:[o.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 p-6 text-white text-center",children:[o.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(or,{className:"w-10 h-10"})}),o.jsxs("h1",{className:"text-2xl font-bold mb-2",children:["  ",N()]}),o.jsx("p",{className:"text-sky-100 text-sm",children:n==="owner"?"    ":"     (15 )"})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[d&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-3 flex items-center gap-3 text-red-700",children:[o.jsx(Lm,{className:"w-5 h-5 flex-shrink-0"}),o.jsx("p",{className:"text-sm",children:d})]}),o.jsx("button",{onClick:R,disabled:c,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:c?o.jsxs(o.Fragment,{children:[o.jsx(ii,{className:"w-5 h-5 animate-spin"}),"  ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(_i,{className:"w-5 h-5"}),"   "]})}),o.jsxs("div",{className:"relative",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-2 text-center",children:"      "}),o.jsx("div",{id:"location-required-map",className:"h-64 rounded-xl overflow-hidden border-2 border-gray-200",style:{background:"#f0f9ff"}}),!m&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:o.jsx(ii,{className:"w-8 h-8 animate-spin text-sky-500"})})]}),r&&o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-3 flex items-center gap-3 text-green-700",children:[o.jsx(Cs,{className:"w-5 h-5 flex-shrink-0"}),o.jsxs("div",{className:"text-sm",children:[o.jsx("p",{className:"font-semibold",children:"   "}),o.jsxs("p",{className:"text-xs text-green-600",children:[r.lat.toFixed(6),", ",r.lng.toFixed(6)]})]})]}),o.jsx("button",{onClick:x,disabled:!r||w,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:w?o.jsxs(o.Fragment,{children:[o.jsx(ii,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Cs,{className:"w-5 h-5"}),"  "]})}),o.jsx("p",{className:"text-xs text-gray-400 text-center",children:"       "})]})]})})},Te=({to:t,icon:e,label:n,color:r,emoji:s})=>o.jsxs(Ve,{to:t,className:`flex flex-col items-center justify-center gap-2 p-4 sm:p-5 rounded-2xl bg-gradient-to-br ${r} text-white shadow-lg active:scale-95 transition-all duration-200`,children:[o.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 bg-white/20 rounded-xl flex items-center justify-center",children:s?o.jsx("span",{className:"text-2xl sm:text-3xl",children:s}):e}),o.jsx("span",{className:"font-bold text-sm sm:text-base text-center leading-tight",children:n})]}),I5=()=>{var s;const{user:t,role:e,loading:n,logout:r}=tt();return n?o.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100",children:[o.jsx("div",{className:"w-20 h-20 mb-6 bg-gradient-to-br from-sky-500 to-sky-600 rounded-3xl flex items-center justify-center shadow-2xl animate-pulse",children:o.jsx("span",{className:"text-5xl",children:""})}),o.jsx(ii,{className:"w-8 h-8 text-sky-500 animate-spin mb-3"}),o.jsx("p",{className:"text-sky-600 font-semibold",children:" ..."})]}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-sky-50 via-white to-sky-100 px-3 py-4 sm:px-4 sm:py-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-3 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl sm:rounded-3xl flex items-center justify-center shadow-xl",children:o.jsx("span",{className:"text-4xl sm:text-5xl",children:""})}),o.jsx("h1",{className:"text-2xl sm:text-3xl font-black text-transparent bg-clip-text bg-gradient-to-r from-sky-600 to-sky-500 mb-1",children:" "}),t&&o.jsxs("p",{className:"text-sky-600/80 text-sm",children:[" ",t.displayName||((s=t.email)==null?void 0:s.split("@")[0])," "]})]}),!t&&o.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Te,{to:"/restaurants",emoji:"",icon:o.jsx(ln,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),o.jsx(Te,{to:"/customer-login",emoji:"",icon:o.jsx($g,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),o.jsx(Te,{to:"/login",emoji:"",icon:o.jsx(Fg,{className:"w-6 h-6"}),label:" ",color:"from-amber-500 to-orange-500"}),o.jsx(Te,{to:"/register",emoji:"",icon:o.jsx(Hl,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"})]}),o.jsx("p",{className:"text-center text-sky-600/70 text-xs",children:"      "})]}),e==="customer"&&o.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Te,{to:"/restaurants",emoji:"",icon:o.jsx(ln,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),o.jsx(Te,{to:"/cart",emoji:"",icon:o.jsx(xd,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),o.jsx(Te,{to:"/orders",emoji:"",icon:o.jsx(ko,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),o.jsx(Te,{to:"/profile",emoji:"",icon:o.jsx(En,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),o.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="owner"&&o.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Te,{to:"/owner",emoji:"",icon:o.jsx(O1,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),o.jsx(Te,{to:"/owner/orders",emoji:"",icon:o.jsx(gd,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),o.jsx(Te,{to:"/owner/menu",emoji:"",icon:o.jsx(ln,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),o.jsx(Te,{to:"/owner/edit",emoji:"",icon:o.jsx(F1,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),o.jsx(Te,{to:"/owner/courier-requests",emoji:"",icon:o.jsx(bs,{className:"w-6 h-6"}),label:"",color:"from-cyan-500 to-cyan-600"}),o.jsx(Te,{to:"/profile",emoji:"",icon:o.jsx(En,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),o.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="courier"&&o.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Te,{to:"/courier",emoji:"",icon:o.jsx(bs,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),o.jsx(Te,{to:"/courier/hiring",emoji:"",icon:o.jsx(ln,{className:"w-6 h-6"}),label:" ",color:"from-green-500 to-green-600"}),o.jsx(Te,{to:"/profile",emoji:"",icon:o.jsx(En,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),o.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="admin"&&o.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Te,{to:"/admin",emoji:"",icon:o.jsx(zg,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),o.jsx(Te,{to:"/admin/restaurants",emoji:"",icon:o.jsx(ln,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),o.jsx(Te,{to:"/admin/orders",emoji:"",icon:o.jsx(ko,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),o.jsx(Te,{to:"/restaurants",emoji:"",icon:o.jsx(xd,{className:"w-6 h-6"}),label:" ",color:"from-purple-500 to-purple-600"}),o.jsx(Te,{to:"/profile",emoji:"",icon:o.jsx(En,{className:"w-6 h-6"}),label:"",color:"from-gray-500 to-gray-600"})]}),o.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]}),e==="developer"&&o.jsxs("div",{className:"max-w-sm mx-auto space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsx(Te,{to:"/developer",emoji:"",icon:o.jsx(Ug,{className:"w-6 h-6"}),label:" ",color:"from-sky-500 to-sky-600"}),o.jsx(Te,{to:"/restaurants",emoji:"",icon:o.jsx(ln,{className:"w-6 h-6"}),label:"",color:"from-green-500 to-green-600"}),o.jsx(Te,{to:"/admin/orders",emoji:"",icon:o.jsx(ko,{className:"w-6 h-6"}),label:"",color:"from-amber-500 to-orange-500"}),o.jsx(Te,{to:"/profile",emoji:"",icon:o.jsx(En,{className:"w-6 h-6"}),label:"",color:"from-purple-500 to-purple-600"})]}),o.jsx("button",{onClick:r,className:"w-full py-3 rounded-xl bg-white border border-gray-200 text-gray-500 font-semibold text-sm active:bg-gray-100 transition",children:" "})]})]})},qg=["",""," "," ","","","","","","","","","",""," ","","","","",""," ","","","","","","","","","","","","","",""," ","","","",""];function S5(t,e){const r=su(e.lat-t.lat),s=su(e.lng-t.lng),i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(su(t.lat))*Math.cos(su(e.lat))*Math.sin(s/2)*Math.sin(s/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}function su(t){return t*(Math.PI/180)}const cf=15,C5=()=>{const{userLocation:t,role:e}=tt(),[n,r]=I.useState([]),[s,i]=I.useState(!0),[a,c]=I.useState("");I.useEffect(()=>{(async()=>{const m=(await Ye(fe(q,"restaurants"))).docs.map(w=>({id:w.id,...w.data()}));let g=[];t?(g=m.map(w=>{if(w.geoLocation){const C=S5(t,w.geoLocation);return{...w,distance:C}}return{...w,distance:void 0}}),(e==="customer"||e==="courier")&&(g=g.filter(w=>!w.geoLocation||w.distance===void 0?!1:w.distance<=cf)),g.sort((w,C)=>(w.distance||999)-(C.distance||999))):g=m,r(g),i(!1)})()},[t,e]);const u=I.useMemo(()=>{const f=new Set(n.map(m=>m.city).filter(Boolean));return qg.filter(m=>f.has(m))},[n]),d=I.useMemo(()=>a?n.filter(f=>f.city===a):n,[n,a]);return s?o.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."}):o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-sky-600",children:"  "}),u.length>0&&o.jsxs("div",{className:"mb-6 flex flex-wrap items-center justify-center gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2 text-sky-600",children:[o.jsx(jD,{className:"w-5 h-5"}),o.jsx("span",{className:"font-semibold",children:":"})]}),o.jsx("button",{onClick:()=>c(""),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${a?"bg-sky-100 text-sky-700 hover:bg-sky-200":"bg-sky-500 text-white shadow-lg"}`,children:""}),u.map(f=>o.jsxs("button",{onClick:()=>c(f),className:`px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1 ${a===f?"bg-sky-500 text-white shadow-lg":"bg-sky-100 text-sky-700 hover:bg-sky-200"}`,children:[o.jsx(or,{className:"w-4 h-4"}),f]},f)),a&&o.jsx("button",{onClick:()=>c(""),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:" ",children:o.jsx(wi,{className:"w-5 h-5"})})]}),d.length===0&&o.jsxs("div",{className:"text-center py-10",children:[o.jsx("div",{className:"w-20 h-20 bg-sky-100 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(pd,{className:"w-10 h-10 text-sky-500"})}),t?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:"     "}),o.jsxs("p",{className:"text-gray-400 text-sm mt-2",children:["   ",cf,"  "]})]}):o.jsx(o.Fragment,{children:o.jsx("p",{className:"text-gray-600 text-lg font-semibold",children:a?`     ${a}`:"    "})})]}),t&&d.length>0&&(e==="customer"||e==="courier")&&o.jsxs("div",{className:"mb-6 bg-sky-50 border border-sky-200 rounded-xl p-4 flex items-center gap-3",children:[o.jsx(_i,{className:"w-6 h-6 text-sky-500 flex-shrink-0"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sky-700 font-semibold",children:"    "}),o.jsxs("p",{className:"text-sky-600 text-sm",children:["  : ",cf," "]})]})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(f=>o.jsxs(Ve,{to:`/menu?restaurant=${f.id}`,className:"bg-white border border-gray-200 text-gray-800 rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center relative overflow-hidden",children:[f.distance!==void 0&&o.jsxs("div",{className:"absolute top-3 left-3 bg-sky-500 text-white text-xs font-bold px-3 py-1 rounded-full flex items-center gap-1",children:[o.jsx(_i,{className:"w-3 h-3"}),f.distance<1?`${Math.round(f.distance*1e3)} `:`${f.distance.toFixed(1)} `]}),f.logoUrl?o.jsx("img",{src:f.logoUrl,alt:f.name,className:"w-28 h-28 object-cover rounded-full border-4 border-sky-100 mb-4"}):o.jsx("div",{className:"w-28 h-28 flex items-center justify-center bg-sky-100 rounded-full text-3xl mb-4",children:""}),o.jsx("h3",{className:"font-bold text-xl text-gray-800",children:f.name}),f.city&&o.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center justify-center gap-1",children:[o.jsx(or,{className:"w-4 h-4"}),f.city]})]},f.id))})]})},dv="broast_cart";function Hg(){const[t,e]=I.useState(()=>{try{const c=localStorage.getItem(dv);return c?JSON.parse(c):[]}catch{return[]}});I.useEffect(()=>{localStorage.setItem(dv,JSON.stringify(t))},[t]);const n=(c,u=1)=>{e(d=>{const f=d.findIndex(m=>m.id===c.id);if(f>=0){const m=[...d];return m[f]={...m[f],qty:m[f].qty+u,ownerId:c.ownerId??m[f].ownerId},m}return[...d,{...c,qty:u}]})},r=c=>e(u=>u.filter(d=>d.id!==c)),s=(c,u)=>e(d=>d.map(f=>f.id===c?{...f,qty:u}:f)),i=()=>e([]),a=t.reduce((c,u)=>c+u.price*u.qty,0);return{items:t,add:n,remove:r,changeQty:s,clear:i,subtotal:a}}const z1=I.createContext(null),Ti=()=>{const t=I.useContext(z1);if(!t)throw new Error("useToast must be used within ToastProvider");return t},R5=({children:t})=>{const[e,n]=I.useState([]),r=I.useCallback(a=>{n(c=>c.filter(u=>u.id!==a))},[]),s=I.useCallback((a,c,u)=>{const d=Math.random().toString(36).slice(2),f={id:d,message:a,type:c,title:u==null?void 0:u.title,duration:(u==null?void 0:u.duration)??3e3};n(m=>[...m,f]),f.duration&&f.duration>0&&setTimeout(()=>r(d),f.duration)},[r]),i=I.useMemo(()=>({show:(a,c)=>s(a,(c==null?void 0:c.type)??"info",c),success:(a,c)=>s(a,"success",c),error:(a,c)=>s(a,"error",c),info:(a,c)=>s(a,"info",c),warning:(a,c)=>s(a,"warning",c)}),[s]);return o.jsxs(z1.Provider,{value:i,children:[t,o.jsx(D5,{items:e,onClose:r})]})},A5={success:"bg-green-600 text-white",error:"bg-red-600 text-white",info:"bg-slate-800 text-white",warning:"bg-yellow-500 text-black"},P5={success:"",error:"",info:"",warning:""},D5=({items:t,onClose:e})=>(I.useEffect(()=>{},[]),o.jsxs("div",{className:"fixed z-[9999] inset-0 pointer-events-none flex flex-col items-center sm:items-end gap-2 p-4 sm:p-6",children:[o.jsx("div",{className:"mt-auto w-full sm:w-auto flex flex-col gap-2",children:t.map(n=>o.jsx("div",{className:`pointer-events-auto ${A5[n.type]} rounded-2xl shadow-lg px-4 py-3 sm:min-w-[320px] animate-[toastIn_.2s_ease]`,children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-xl leading-none",children:P5[n.type]}),o.jsxs("div",{className:"flex-1",children:[n.title&&o.jsx("div",{className:"font-bold",children:n.title}),o.jsx("div",{className:"text-sm",children:n.message})]}),o.jsx("button",{onClick:()=>e(n.id),className:"opacity-80 hover:opacity-100 transition","aria-label":"Close",children:""})]})},n.id))}),o.jsx("style",{children:"@keyframes toastIn{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}"})]})),O5=()=>{const[t,e]=I.useState([]),[n,r]=I.useState(!0),[s,i]=I.useState(null),{add:a,subtotal:c,items:u}=Hg(),{user:d,role:f}=tt(),m=Ti(),[g]=Ck(),w=g.get("restaurant");I.useEffect(()=>{(async()=>{let x;if(w){x=zt(fe(q,"menuItems"),pn("available","==",!0),pn("ownerId","==",w));const O=await vt(J(q,"restaurants",w));O.exists()&&i(O.data().name)}else x=zt(fe(q,"menuItems"),pn("available","==",!0));const v=(await Ye(x)).docs.map(O=>({id:O.id,...O.data()})),b=await Promise.all(v.map(async O=>{if(!O.ownerId)return O;const L=await vt(J(q,"restaurants",O.ownerId));return L.exists()?{...O,restaurant:L.data()}:O}));e(b),r(!1)})()},[w]);const C=1.75,T=x=>{var v;if(!x.ownerId){m.warning("    ",{title:""});return}const N=(v=u[0])==null?void 0:v.ownerId;if(N&&N!==x.ownerId){m.warning("           ",{title:""});return}a({id:x.id,name:x.name,price:x.price+C,ownerId:x.ownerId}),m.success("    ")};if(n)return o.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"   ..."});const R=d&&(f==="customer"||f==="admin"||f==="developer"||!f);return o.jsxs("div",{className:"py-10",children:[o.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:s?`  ${s}`:"  "}),w&&o.jsx("div",{className:"text-center mb-6",children:o.jsx(Ve,{to:"/restaurants",className:"text-sky-400 hover:text-sky-300 underline",children:"   "})}),t.length===0&&o.jsx("div",{className:"text-center text-gray-400",children:"    "}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(x=>o.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[x.restaurant&&o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[x.restaurant.logoUrl?o.jsx("img",{src:x.restaurant.logoUrl,alt:x.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):o.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:""}),o.jsx("span",{className:"font-semibold",children:x.restaurant.name})]}),o.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:x.imageUrl?o.jsx("img",{src:x.imageUrl,alt:x.name,className:"w-full h-full object-cover rounded-xl"}):o.jsx("span",{className:"text-gray-400",children:" "})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:x.name}),x.desc&&o.jsx("p",{className:"text-sm text-gray-300 mt-1",children:x.desc})]}),o.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[o.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[(x.price+C).toFixed(2)," ."]}),R&&o.jsx("button",{onClick:()=>T(x),disabled:!x.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${x.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"  "})]})]},x.id))}),c>0&&R&&o.jsx("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-40",children:o.jsxs(Ve,{to:"/checkout",className:"block w-full sm:w-auto text-center px-6 py-4 rounded-2xl bg-sky-600 text-white shadow-xl font-bold hover:bg-sky-700 transition text-base sm:text-lg",children:["    ",c.toFixed(2)," ."]})})]})},L5=()=>{const{items:t,subtotal:e,remove:n,clear:r,changeQty:s}=Hg();return t.length===0?o.jsxs("div",{className:"flex flex-col items-center justify-center py-20 px-4",children:[o.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-6",children:o.jsx(yd,{className:"w-12 h-12 text-gray-400"})}),o.jsx("h2",{className:"text-xl font-bold text-gray-700 mb-2",children:" "}),o.jsx("p",{className:"text-gray-500 mb-6",children:"   !"}),o.jsxs(Ve,{to:"/restaurants",className:"flex items-center gap-2 bg-primary text-white px-6 py-3 rounded-xl font-bold hover:bg-sky-600 transition",children:[o.jsx(X4,{className:"w-5 h-5"})," "]})]}):o.jsxs("div",{className:"max-w-3xl mx-auto space-y-4 px-2 sm:px-4",children:[o.jsx("div",{className:"flex items-center justify-between",children:o.jsxs("h1",{className:"text-xl sm:text-2xl font-bold flex items-center gap-2",children:[o.jsx(yd,{className:"w-6 h-6 text-primary"})," ",o.jsx("span",{className:"text-sm bg-primary text-white px-2 py-0.5 rounded-full",children:t.length})]})}),o.jsx("div",{className:"space-y-3",children:t.map(i=>o.jsxs("div",{className:"flex items-center gap-3 bg-white text-gray-900 p-3 sm:p-4 rounded-xl shadow-sm border border-gray-100",children:[o.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-gray-100 rounded-xl flex items-center justify-center flex-shrink-0",children:o.jsx("span",{className:"text-3xl",children:""})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("h3",{className:"font-bold text-sm sm:text-base truncate",children:i.name}),o.jsxs("p",{className:"text-primary font-bold text-sm",children:[i.price.toFixed(2)," ."]}),o.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[o.jsx("button",{onClick:()=>i.qty>1?s(i.id,i.qty-1):n(i.id),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition",children:o.jsx(BD,{className:"w-4 h-4"})}),o.jsx("span",{className:"font-bold text-lg w-8 text-center",children:i.qty}),o.jsx("button",{onClick:()=>s(i.id,i.qty+1),className:"w-7 h-7 sm:w-8 sm:h-8 rounded-lg bg-primary text-white hover:bg-sky-600 flex items-center justify-center transition",children:o.jsx(Bg,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"flex flex-col items-end gap-2",children:[o.jsxs("span",{className:"font-bold text-lg text-gray-900",children:[(i.price*i.qty).toFixed(2)," ."]}),o.jsx("button",{onClick:()=>n(i.id),className:"p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-500 transition",children:o.jsx(Fo,{className:"w-4 h-4"})})]})]},i.id))}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100 space-y-3",children:[o.jsxs("div",{className:"flex justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsxs("span",{className:"font-bold",children:[e.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsx("span",{className:"font-bold",children:"7.00 ."})]}),o.jsx("div",{className:"h-px bg-gray-200"}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"font-bold text-lg",children:""}),o.jsxs("span",{className:"font-bold text-xl text-primary",children:[(e+7).toFixed(2)," ."]})]})]}),o.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pb-6",children:[o.jsxs("button",{onClick:r,className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gray-100 text-gray-700 font-semibold hover:bg-gray-200 transition",children:[o.jsx(Fo,{className:"w-5 h-5"})," "]}),o.jsx(Ve,{to:"/checkout",className:"flex-1 flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl hover:scale-[1.02] transition",children:"  "})]})]})},M5=()=>{const[t,e]=I.useState(""),[n,r]=I.useState(""),[s,i]=I.useState(!1),a=Ur(),c=$r(),u=async d=>{d.preventDefault(),i(!0);try{const m=(await oS(Bn,t,n)).user.uid,g=await vt(J(q,"users",m));if(g.exists()){const w=g.data();console.log("  :",w),w.role==="owner"?a("/owner"):w.role==="admin"?a("/admin"):w.role==="developer"?a("/developer"):w.role==="courier"?a("/courier"):a("/")}else c.warning("   Auth       Firestore")}catch(f){c.error(f.message,{title:"   "})}finally{i(!1)}};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:o.jsx("span",{className:"text-4xl",children:"  "})}),o.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),o.jsx("p",{className:"text-sky-500 mt-1",children:" "})]}),o.jsxs("form",{onSubmit:u,className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(V1,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"email",placeholder:"",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:t,onChange:d=>e(d.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(M1,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"password",placeholder:" ",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                         focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all`,value:n,onChange:d=>r(d.target.value)})]}),o.jsx("button",{disabled:s,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                       shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50`,children:s?o.jsx(o.Fragment,{children:" ..."}):o.jsxs(o.Fragment,{children:[o.jsx(Fg,{className:"w-5 h-5"}),""]})})]}),o.jsxs("p",{className:"mt-8 text-center text-sky-600",children:["  "," ",o.jsx(Ve,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/register",children:"  "})]}),o.jsxs("div",{className:"mt-6 pt-6 border-t border-sky-100",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"    "}),o.jsx(Ve,{to:"/customer-login",className:"block w-full text-center bg-green-50 hover:bg-green-100 text-green-700 font-semibold py-3 px-4 rounded-2xl transition",children:"   "})]})]})]})},V5=()=>{const[t,e]=I.useState(""),[n,r]=I.useState(""),[s,i]=I.useState(""),[a,c]=I.useState(""),[u,d]=I.useState(""),[f,m]=I.useState(""),[g,w]=I.useState(!1),C=Ur(),T=async x=>{if(x.preventDefault(),!f)return alert("  ");if(f==="owner"&&!a)return alert("  ");w(!0);try{const N=await _u(Bn,t,n);await Nn(J(q,"users",N.user.uid),{name:s,email:t,role:f,restaurantName:f==="owner"?a:null}),f==="owner"&&await Nn(J(q,"restaurants",N.user.uid),{name:a||s||" ",ownerId:N.user.uid,email:t,phone:"",city:u||"",location:"",logoUrl:""},{merge:!0}),C("/")}catch(N){alert(N.message)}finally{w(!1)}},R=[{value:"customer",label:"",icon:y5,color:"sky"},{value:"courier",label:"",icon:bs,color:"emerald"},{value:"owner",label:" ",icon:O1,color:"orange"}];return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4 py-8",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-6",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-3",children:o.jsx(Hl,{className:"w-8 h-8 text-white"})}),o.jsx("h1",{className:"text-2xl font-black text-sky-600",children:"  "})]}),o.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(En,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",value:s,onChange:x=>i(x.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(V1,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:"",type:"email",value:t,onChange:x=>e(x.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(M1,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all",placeholder:" ",type:"password",value:n,onChange:x=>r(x.target.value)})]}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:R.map(x=>{const N=x.icon,v=f===x.value;return o.jsxs("label",{className:`relative flex flex-col items-center gap-2 p-4 rounded-2xl cursor-pointer transition-all duration-300 ${v?"bg-gradient-to-br from-sky-500 to-sky-600 text-white shadow-lg shadow-sky-300/50 scale-105":"bg-sky-50 text-sky-600 hover:bg-sky-100 border-2 border-sky-100"}`,children:[o.jsx("input",{type:"radio",name:"role",value:x.value,className:"hidden",onChange:()=>m(x.value)}),o.jsx(N,{className:"w-6 h-6"}),o.jsx("span",{className:"text-sm font-bold",children:x.label})]},x.value)})}),f==="owner"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"relative",children:[o.jsx(ln,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400"}),o.jsx("input",{className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all",placeholder:" ",value:a,onChange:x=>c(x.target.value)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(or,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-orange-400 pointer-events-none"}),o.jsxs("select",{value:u,onChange:x=>d(x.target.value),className:"w-full rounded-2xl p-4 pr-12 bg-orange-50 text-orange-900 border-2 border-orange-200 focus:outline-none focus:border-orange-400 focus:ring-4 focus:ring-orange-100 transition-all appearance-none cursor-pointer",children:[o.jsx("option",{value:"",children:" "}),qg.map(x=>o.jsx("option",{value:x,children:x},x))]})]})]}),o.jsx("button",{disabled:g,className:"w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02]",children:g?" ...":o.jsxs(o.Fragment,{children:[o.jsx(Hl,{className:"w-5 h-5"}),""]})})]}),o.jsxs("p",{className:"mt-6 text-center text-sky-600",children:[" "," ",o.jsx(Ve,{className:"text-sky-500 hover:text-sky-700 font-bold",to:"/login",children:"  "})]})]})]})},hv=t=>{let e=t.replace(/\D/g,"");return e.startsWith("0")&&(e=e.substring(1)),e.startsWith("966")||(e="966"+e),"+"+e},U5=()=>{const[t,e]=I.useState(""),[n,r]=I.useState(""),[s,i]=I.useState("phone"),[a,c]=I.useState(!1),[u,d]=I.useState(null),[f,m]=I.useState(0),g=I.useRef(null),w=I.useRef(null),C=Ur(),T=$r();I.useEffect(()=>(g.current&&!w.current&&(w.current=new nx(Bn,g.current,{size:"invisible",callback:()=>{console.log("reCAPTCHA solved")},"expired-callback":()=>{console.log("reCAPTCHA expired"),w.current=null}})),()=>{w.current&&(w.current.clear(),w.current=null)}),[]),I.useEffect(()=>{if(f>0){const v=setTimeout(()=>m(f-1),1e3);return()=>clearTimeout(v)}},[f]);const R=async()=>{if(!t||t.length<9){T.warning("   ");return}const v=hv(t);console.log("Sending OTP to:",v),c(!0);try{!w.current&&g.current&&(w.current=new nx(Bn,g.current,{size:"invisible"}));const b=await US(Bn,v,w.current);d(b),i("otp"),m(60),T.success("     ")}catch(b){console.error("OTP Error:",b),w.current&&(w.current.clear(),w.current=null),b.code==="auth/invalid-phone-number"?T.error("   "):b.code==="auth/too-many-requests"?T.error("   "):b.code==="auth/quota-exceeded"?T.error("     "):T.error(b.message||"  ")}finally{c(!1)}},x=async()=>{if(!n||n.length!==6){T.warning("     6 ");return}if(!u){T.error("    "),i("phone");return}c(!0);try{const v=await u.confirm(n),b=v.user.uid,O=v.user.phoneNumber,L=await vt(J(q,"users",b));L.exists()?T.success(" ! "):(await Nn(J(q,"users",b),{phone:O,role:"customer",name:"",createdAt:ge()}),T.success("   ! "));const _=L.exists()?L.data():{role:"customer"};_.role==="owner"?C("/owner"):_.role==="admin"?C("/admin"):_.role==="developer"?C("/developer"):_.role==="courier"?C("/courier"):C("/")}catch(v){console.error("Verify Error:",v),v.code==="auth/invalid-verification-code"?T.error("   "):v.code==="auth/code-expired"?(T.error("    "),i("phone")):T.error(v.message||" ")}finally{c(!1)}},N=()=>{f>0||(i("phone"),r(""),d(null))};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-sky-50 via-white to-sky-100 px-4",children:[o.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-sky-300/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute bottom-0 right-0 w-72 h-72 bg-sky-400/20 rounded-full blur-3xl"}),o.jsx("div",{ref:g,id:"recaptcha-container"}),o.jsxs("div",{className:"relative bg-white/80 backdrop-blur-xl border border-sky-100 rounded-[2rem] shadow-2xl shadow-sky-200/50 w-full max-w-md p-8",children:[o.jsxs("div",{className:"flex flex-col items-center mb-8",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-sky-500 to-sky-600 rounded-2xl flex items-center justify-center shadow-xl shadow-sky-300/50 mb-4",children:o.jsx("span",{className:"text-4xl",children:""})}),o.jsx("h1",{className:"text-3xl font-black text-sky-600",children:" "}),o.jsx("p",{className:"text-sky-500 mt-1",children:s==="phone"?" ":"  "})]}),s==="phone"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx($g,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-lg tracking-wider`,value:t,onChange:v=>e(v.target.value.replace(/\D/g,"")),maxLength:10})]}),o.jsx("p",{className:"text-sm text-gray-500 text-center",children:"     SMS"}),o.jsx("button",{onClick:R,disabled:a||t.length<9,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-sky-300/50 transition-all hover:scale-[1.02] hover:shadow-sky-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(_r,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(P1,{className:"w-5 h-5"}),"  "]})})]}),s==="otp"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center mb-4",children:[o.jsx("p",{className:"text-gray-600",children:"   "}),o.jsx("p",{className:"font-bold text-sky-600 text-lg",dir:"ltr",children:hv(t)})]}),o.jsxs("div",{className:"relative",children:[o.jsx(PD,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400"}),o.jsx("input",{type:"text",inputMode:"numeric",placeholder:"000000",dir:"ltr",className:`w-full rounded-2xl p-4 pr-12 bg-sky-50 text-sky-900 border-2 border-sky-100 
                           focus:outline-none focus:border-sky-400 focus:ring-4 focus:ring-sky-100 transition-all text-center text-2xl tracking-[0.5em] font-bold`,value:n,onChange:v=>r(v.target.value.replace(/\D/g,"")),maxLength:6,autoFocus:!0})]}),o.jsx("button",{onClick:x,disabled:a||n.length!==6,className:`w-full flex items-center justify-center gap-3 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-bold p-4 rounded-2xl 
                         shadow-xl shadow-green-300/50 transition-all hover:scale-[1.02] hover:shadow-green-400/50 disabled:opacity-50 disabled:hover:scale-100`,children:a?o.jsxs(o.Fragment,{children:[o.jsx(_r,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Fg,{className:"w-5 h-5"})," "]})}),o.jsx("div",{className:"text-center",children:f>0?o.jsxs("p",{className:"text-gray-500 text-sm",children:["   ",o.jsx("span",{className:"font-bold text-sky-600",children:f})," "]}):o.jsx("button",{onClick:N,className:"text-sky-600 hover:text-sky-700 font-semibold text-sm",children:"    "})}),o.jsx("button",{onClick:()=>{i("phone"),r("")},className:"w-full text-gray-500 hover:text-gray-700 text-sm",children:"   "})]}),o.jsxs("div",{className:"mt-8 pt-6 border-t border-sky-100",children:[o.jsx("p",{className:"text-center text-sm text-gray-500 mb-3",children:"   "}),o.jsx(Ve,{to:"/login",className:"block text-center text-sky-600 hover:text-sky-700 font-semibold",children:"   "})]})]})]})};function F5(){return o.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:o.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"  -   "}),o.jsxs("p",{className:"mb-4",children:["   ",o.jsx("strong",{children:" "}),"          ."]}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1.  "}),o.jsx("p",{className:"mb-4",children:"                   .            ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2.  "}),o.jsx("p",{className:"mb-4",children:"               ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3.  "}),o.jsx("p",{className:"mb-4",children:"              .                 ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4.  "}),o.jsx("p",{className:"mb-4",children:"       (    )         ."}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5.  "}),o.jsxs("p",{className:"mb-4",children:["              .         :",o.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),o.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6.   "}),o.jsx("p",{className:"mb-4",children:"                  ."}),o.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["      ",new Date().toLocaleDateString("ar-SA"),"."]}),o.jsx("div",{className:"mt-8 text-center",children:o.jsx(Ve,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"   "})})]})})}function $5(){return o.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"   "}),o.jsx("p",{className:"text-gray-600 mb-6",children:"          ."}),o.jsx(Ve,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"   "})]})}const B5="modulepreload",z5=function(t){return"/"+t},fv={},mv=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=z5(u),u in fv)return;fv[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":B5,d||(m.as="script"),m.crossOrigin="",m.href=u,c&&m.setAttribute("nonce",c),document.head.appendChild(m),d)return new Promise((g,w)=>{m.addEventListener("load",g),m.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return s.then(a=>{for(const c of a||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},Be=({allow:t,children:e})=>{const{role:n,loading:r}=tt();return r?o.jsx("div",{className:"p-8 text-center",children:" ..."}):!n||!t.includes(n)?o.jsx(Op,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:e})},q5=({isOpen:t,onClose:e,onConfirm:n,initialLocation:r})=>{const[s,i]=I.useState(r||null),[a,c]=I.useState(""),[u,d]=I.useState(!1),[f,m]=I.useState(!1),[g,w]=I.useState(null),[C,T]=I.useState(!1),R={lat:24.7136,lng:46.6753},x=I.useCallback(()=>{if(!navigator.geolocation){w("    ");return}m(!0),w(null),navigator.geolocation.getCurrentPosition(b=>{const O={lat:b.coords.latitude,lng:b.coords.longitude};i(O),m(!1),window.leafletMap&&(window.leafletMap.setView([O.lat,O.lng],17),window.leafletMarker&&window.leafletMarker.setLatLng([O.lat,O.lng]))},b=>{m(!1),b.code===1?w("   .     "):b.code===2?w("  .    GPS"):w("   .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[]);I.useEffect(()=>{if(t){if(!document.getElementById("leaflet-css")){const b=document.createElement("link");b.id="leaflet-css",b.rel="stylesheet",b.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(b)}if(window.L)T(!0);else{const b=document.createElement("script");b.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",b.onload=()=>T(!0),document.body.appendChild(b)}}},[t]),I.useEffect(()=>{if(!t||!C||!window.L)return;const b=window.L;if(!document.getElementById("location-map"))return;window.leafletMap&&window.leafletMap.remove();const L=s||R,_=b.map("location-map",{zoomControl:!1,attributionControl:!1}).setView([L.lat,L.lng],s?17:12);b.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(_);const y=b.divIcon({className:"custom-marker",html:`
        <div style="
          width: 50px; 
          height: 50px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 20px rgba(14, 165, 233, 0.5);
          border: 3px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 20px;"></div>
        </div>
      `,iconSize:[50,50],iconAnchor:[25,50]}),j=b.marker([L.lat,L.lng],{icon:y,draggable:!0}).addTo(_);return j.on("dragend",()=>{const S=j.getLatLng();i({lat:S.lat,lng:S.lng})}),_.on("click",S=>{const{lat:P,lng:D}=S.latlng;j.setLatLng([P,D]),i({lat:P,lng:D})}),window.leafletMap=_,window.leafletMarker=j,s&&i(s),()=>{window.leafletMap&&(window.leafletMap.remove(),window.leafletMap=null,window.leafletMarker=null)}},[t,C]);const N=()=>{s&&window.leafletMap&&window.leafletMap.setView([s.lat,s.lng],17,{animate:!0,duration:.5})},v=()=>{if(!s){w("  ");return}if(!a.trim()){w("  ");return}n(s,a)};return t?o.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[o.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:e}),o.jsxs("div",{className:"relative w-full h-full sm:w-[95%] sm:h-[90%] sm:max-w-2xl sm:rounded-3xl overflow-hidden bg-white shadow-2xl flex flex-col",children:[o.jsxs("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 text-white p-4 flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx(or,{className:"w-5 h-5"})}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold text-lg",children:"  "}),o.jsx("p",{className:"text-sm text-white/80",children:"     "})]})]}),o.jsx("button",{onClick:e,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition",children:o.jsx(wi,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"flex-1 relative",children:[!C&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-sky-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx(ii,{className:"w-12 h-12 text-sky-500 animate-spin mx-auto mb-3"}),o.jsx("p",{className:"text-sky-600 font-medium",children:"  ..."})]})}),o.jsx("div",{id:"location-map",className:"w-full h-full"}),o.jsxs("div",{className:"absolute left-4 top-4 flex flex-col gap-2 z-[1000]",children:[o.jsx("button",{onClick:x,disabled:f,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition disabled:opacity-50",title:" ",children:f?o.jsx(ii,{className:"w-5 h-5 text-sky-500 animate-spin"}):o.jsx(_i,{className:"w-5 h-5 text-sky-500"})}),s&&o.jsx("button",{onClick:N,className:"w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center hover:bg-sky-50 transition",title:"",children:o.jsx(l5,{className:"w-5 h-5 text-gray-600"})})]}),s&&o.jsxs("div",{className:"absolute right-4 top-4 bg-white/95 backdrop-blur-sm rounded-xl shadow-lg p-3 z-[1000] max-w-[200px]",children:[o.jsxs("div",{className:"flex items-center gap-2 text-green-600 mb-1",children:[o.jsx(md,{className:"w-4 h-4"}),o.jsx("span",{className:"text-sm font-medium",children:"  "})]}),o.jsxs("p",{className:"text-xs text-gray-500 font-mono",children:[s.lat.toFixed(6),", ",s.lng.toFixed(6)]})]})]}),o.jsxs("div",{className:"bg-white border-t p-4 space-y-3",children:[g&&o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 rounded-xl p-3 text-sm flex items-center gap-2",children:[o.jsx(wi,{className:"w-4 h-4 flex-shrink-0"}),g]}),o.jsxs("div",{className:"relative",children:[o.jsx(s5,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),o.jsx("input",{type:"text",value:a,onChange:b=>c(b.target.value),placeholder:"  (:       ...)",className:"w-full border-2 border-gray-200 rounded-xl p-3 pr-10 focus:border-sky-400 focus:outline-none transition text-gray-800"})]}),o.jsx("p",{className:"text-xs text-gray-500 text-center",children:"      "}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:e,className:"flex-1 py-3 px-4 rounded-xl border-2 border-gray-200 text-gray-600 font-semibold hover:bg-gray-50 transition",children:""}),o.jsxs("button",{onClick:v,disabled:!s,className:"flex-1 py-3 px-4 rounded-xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-2",children:[o.jsx(md,{className:"w-5 h-5"})," "]})]})]})]}),o.jsx("style",{children:`
        .custom-marker {
          background: transparent !important;
          border: none !important;
        }
        .leaflet-container {
          font-family: inherit;
        }
        .leaflet-control-zoom {
          display: none;
        }
        #location-map {
          background: #f0f9ff;
        }
      `})]}):null},pv=1,iu=.75,H5=()=>{const{items:t,subtotal:e,clear:n}=Hg(),{user:r}=tt(),s=Ur(),i=$r(),a=Ti(),[c,u]=I.useState(""),[d,f]=I.useState(!1),[m,g]=I.useState(null),[w,C]=I.useState(null),[T,R]=I.useState(!1),[x,N]=I.useState("delivery"),v=x==="pickup"?0:7,b=e+v;I.useEffect(()=>{(async()=>{var P,D;if(t.length===0)return;let y=(P=t[0])==null?void 0:P.ownerId;if(!y&&((D=t[0])!=null&&D.id))try{const A=await vt(J(q,"menuItems",t[0].id)),te=A.exists()?A.data():null;y=(te==null?void 0:te.ownerId)||null}catch(A){console.error("    :",A)}if(!y){g(null);return}const j=await vt(J(q,"restaurants",y)),S=j.exists()?j.data():null;g({id:y,name:(S==null?void 0:S.name)||"",referredBy:S==null?void 0:S.referredBy,referrerType:S==null?void 0:S.referrerType,geoLocation:(S==null?void 0:S.geoLocation)||null,city:(S==null?void 0:S.city)||"",location:(S==null?void 0:S.location)||""})})()},[t]);const O=(_,y)=>{C(_),u(y),R(!1),a.success("   ! ")},L=async()=>{var A;if(!r)return;if(t.length===0){i.warning(" ");return}if(x==="delivery"){if(!c){i.warning(" ");return}if(!w){i.warning("   ");return}}let _=m==null?void 0:m.id;if(!_&&((A=t[0])!=null&&A.id)){const te=await vt(J(q,"menuItems",t[0].id)),ke=te.exists()?te.data():null;_=(ke==null?void 0:ke.ownerId)||null}if(!_){i.error("   .    .");return}f(!0);const y=(m==null?void 0:m.referrerType)==="admin"&&(m==null?void 0:m.referredBy),j=t.reduce((te,ke)=>te+ke.qty,0),S=pv*j,P=y?iu*j:0,D=S+(y?0:iu*j);if(await Zo(fe(q,"orders"),{customerId:r.uid,restaurantId:_,restaurantName:(m==null?void 0:m.name)||"",items:t.map(te=>({id:te.id,name:te.name,price:te.price,qty:te.qty,ownerId:te.ownerId??_})),subtotal:e,deliveryFee:v,total:b,status:"pending",address:x==="pickup"?"  ":c,location:x==="pickup"?m==null?void 0:m.geoLocation:w,deliveryType:x,createdAt:ge(),updatedAt:ge(),paymentMethod:"cod",platformFee:S,platformFeePerItem:pv,adminCommission:P,adminCommissionPerItem:iu,totalItemsCount:j,referredBy:(m==null?void 0:m.referredBy)||null}),y&&(m!=null&&m.referredBy)&&P>0)try{const te=J(q,"wallets",m.referredBy);if((await vt(te)).exists())await Me(te,{balance:Ka(P),totalEarnings:Ka(P),updatedAt:ge()});else{const{setDoc:ft}=await mv(async()=>{const{setDoc:Ge}=await Promise.resolve().then(()=>Yx);return{setDoc:Ge}},void 0);await ft(te,{balance:P,totalEarnings:P,totalWithdrawn:0,transactions:[],updatedAt:ge()})}console.log(`   ${P}    ${m.referredBy} (${j}   ${iu} .)`)}catch(te){console.error("    :",te)}try{const te=J(q,"wallets","app_earnings");if((await vt(te)).exists())await Me(te,{balance:Ka(D),totalEarnings:Ka(D),updatedAt:ge()});else{const{setDoc:ft}=await mv(async()=>{const{setDoc:Ge}=await Promise.resolve().then(()=>Yx);return{setDoc:Ge}},void 0);await ft(te,{balance:D,totalEarnings:D,totalWithdrawn:0,transactions:[],updatedAt:ge()})}console.log(`   ${D}   `)}catch(te){console.error("    :",te)}n(),f(!1),s("/orders")};return o.jsx(Be,{allow:["customer","admin"],children:o.jsxs("div",{className:"max-w-xl mx-auto space-y-4",children:[o.jsx("div",{className:"bg-gradient-to-r from-sky-500 to-sky-600 rounded-2xl p-5 text-white shadow-lg",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:o.jsx(yd,{className:"w-6 h-6"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold",children:" "}),o.jsx("p",{className:"text-sm text-white/80",children:(m==null?void 0:m.name)||" ..."})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[o.jsx(yd,{className:"w-5 h-5 text-sky-500"}),o.jsx("span",{className:"font-bold text-gray-800",children:" "}),o.jsxs("span",{className:"text-xs bg-sky-100 text-sky-600 px-2 py-0.5 rounded-full mr-auto",children:[t.length," "]})]}),o.jsx("div",{className:"p-4 space-y-2",children:t.map(_=>o.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("span",{className:"w-8 h-8 bg-sky-100 rounded-lg flex items-center justify-center text-sm",children:[_.qty,""]}),o.jsx("span",{className:"text-gray-800 font-medium",children:_.name})]}),o.jsxs("span",{className:"font-bold text-sky-600",children:[(_.price*_.qty).toFixed(2)," ."]})]},_.id))})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[o.jsx(bs,{className:"w-5 h-5 text-purple-500"}),o.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),o.jsxs("div",{className:"p-4 grid grid-cols-2 gap-3",children:[o.jsxs("button",{onClick:()=>N("delivery"),className:`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${x==="delivery"?"border-sky-500 bg-sky-50 text-sky-700":"border-gray-200 hover:border-gray-300 text-gray-600"}`,children:[o.jsx(bs,{className:`w-8 h-8 ${x==="delivery"?"text-sky-500":"text-gray-400"}`}),o.jsx("span",{className:"font-bold",children:""}),o.jsx("span",{className:"text-xs text-gray-500",children:"7 .  "})]}),o.jsxs("button",{onClick:()=>N("pickup"),className:`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${x==="pickup"?"border-green-500 bg-green-50 text-green-700":"border-gray-200 hover:border-gray-300 text-gray-600"}`,children:[o.jsx(ln,{className:`w-8 h-8 ${x==="pickup"?"text-green-500":"text-gray-400"}`}),o.jsx("span",{className:"font-bold",children:"  "}),o.jsx("span",{className:"text-xs text-green-600 font-semibold",children:" "})]})]})]}),x==="delivery"&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[o.jsx(or,{className:"w-5 h-5 text-green-500"}),o.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),o.jsx("div",{className:"p-4",children:w?o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center flex-shrink-0",children:o.jsx(md,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:"font-bold text-green-700 mb-1",children:"   "}),o.jsx("p",{className:"text-sm text-gray-600 break-words",children:c}),o.jsxs("p",{className:"text-xs text-gray-400 mt-1 font-mono",children:[w.lat.toFixed(5),", ",w.lng.toFixed(5)]})]})]})}),o.jsxs("button",{onClick:()=>R(!0),className:"w-full py-3 px-4 rounded-xl border-2 border-sky-200 text-sky-600 font-semibold hover:bg-sky-50 transition flex items-center justify-center gap-2",children:[o.jsx(or,{className:"w-5 h-5"})," "]})]}):o.jsxs("button",{onClick:()=>R(!0),className:"w-full py-4 rounded-xl bg-gradient-to-r from-sky-500 to-sky-600 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[o.jsx(or,{className:"w-6 h-6"}),o.jsx("span",{children:"  "}),o.jsx(aD,{className:"w-5 h-5"})]})})]}),x==="pickup"&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[o.jsx(ln,{className:"w-5 h-5 text-green-500"}),o.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:o.jsx(ln,{className:"w-6 h-6 text-white"})}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-green-800",children:m==null?void 0:m.name}),(m==null?void 0:m.city)&&o.jsx("p",{className:"text-sm text-green-600",children:m.city})]})]}),(m==null?void 0:m.location)&&o.jsxs("p",{className:"text-sm text-gray-600 bg-white rounded-lg p-2",children:[" ",m.location]})]}),m!=null&&m.geoLocation?o.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${m.geoLocation.lat},${m.geoLocation.lng}`,target:"_blank",rel:"noopener noreferrer",className:"w-full py-4 rounded-xl bg-gradient-to-r from-blue-500 to-blue-600 text-white font-bold shadow-lg hover:shadow-xl transition flex items-center justify-center gap-3",children:[o.jsx(_i,{className:"w-5 h-5"}),o.jsx("span",{children:"   Google Maps"}),o.jsx(Dm,{className:"w-4 h-4"})]}):o.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-amber-700 text-sm",children:"       "}),o.jsx("p",{className:"text-amber-600 text-xs mt-1",children:"     "})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-50 px-4 py-3 border-b flex items-center gap-2",children:[o.jsx(vD,{className:"w-5 h-5 text-amber-500"}),o.jsx("span",{className:"font-bold text-gray-800",children:" "})]}),o.jsxs("div",{className:"p-4 space-y-2",children:[o.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[o.jsx("span",{children:" "}),o.jsxs("span",{className:"font-semibold",children:[e.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex items-center justify-between text-gray-600",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[x==="pickup"?o.jsx(ln,{className:"w-4 h-4"}):o.jsx(bs,{className:"w-4 h-4"}),o.jsx("span",{children:x==="pickup"?"  ":" "})]}),x==="pickup"?o.jsx("span",{className:"font-semibold text-green-600",children:" "}):o.jsxs("span",{className:"font-semibold",children:[v.toFixed(2)," ."]})]}),o.jsx("div",{className:"h-px bg-gray-200 my-2"}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{className:"font-bold text-lg text-gray-800",children:""}),o.jsxs("span",{className:"font-black text-xl text-sky-600",children:[b.toFixed(2)," ."]})]})]})]}),o.jsx("button",{disabled:d||x==="delivery"&&!w,onClick:L,className:"w-full py-4 rounded-2xl bg-gradient-to-r from-green-500 to-green-600 text-white font-bold text-lg shadow-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition flex items-center justify-center gap-3",children:d?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"  ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(md,{className:"w-6 h-6"}),x==="pickup"?"  (  )":"  (  )"]})}),x==="delivery"&&!w&&o.jsx("p",{className:"text-center text-sm text-amber-600 bg-amber-50 rounded-xl p-3",children:"       "}),o.jsx(q5,{isOpen:T,onClose:()=>R(!1),onConfirm:O,initialLocation:w})]})})},W5=()=>{const{user:t}=tt(),[e,n]=I.useState(null),[r,s]=I.useState([]),[i,a]=I.useState(null);I.useEffect(()=>{if(!t)return;n(null),a(null);const u=zt(fe(q,"orders"),pn("customerId","==",t.uid),Ss("createdAt","desc")),d=Bl(u,f=>{s(f.docs.map(m=>({id:m.id,...m.data()}))),n(null)},async f=>{console.error("TrackOrders onSnapshot error:",f),n("   Composite Index  customerId + createdAt.     .");const m=zt(fe(q,"orders"),pn("customerId","==",t.uid)),w=(await Ye(m)).docs.map(R=>({id:R.id,...R.data()})),C=zt(fe(q,"orders"),Ss("createdAt","desc"),Ig(5));let T=[];try{T=(await Ye(C)).docs.map(x=>{var v,b,O,L;const N=x.data();return{id:x.id,customerId:N.customerId,restaurantId:N.restaurantId,createdAt:((L=(O=(b=(v=N.createdAt)==null?void 0:v.toDate)==null?void 0:b.call(v))==null?void 0:O.toISOString)==null?void 0:L.call(O))??null}})}catch{}a({uid:t.uid,fallbackCount:w.length,sample:T}),s(w)});return()=>d()},[t]);const c=u=>({pending:" ",accepted:" ",preparing:" ",ready:" ",out_for_delivery:" ",delivered:" ",cancelled:""})[u]||u;return o.jsxs("div",{className:"space-y-3",children:[o.jsx("h1",{className:"text-xl font-bold",children:""}),e&&o.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[e,i&&o.jsxs("div",{className:"mt-1",children:[o.jsxs("div",{children:["UID: ",o.jsx("b",{children:i.uid})]}),o.jsxs("div",{children:["  : ",o.jsx("b",{children:i.fallbackCount})]}),Array.isArray(i.sample)&&i.sample.length>0&&o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"font-semibold",children:" ( 5):"}),i.sample.map(u=>o.jsxs("div",{className:"truncate",children:["#",u.id,"  customerId: ",String(u.customerId),"  restaurantId: ",String(u.restaurantId),"  createdAt: ",u.createdAt||""]},u.id))]})]})]}),r.map(u=>{var d,f,m;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"font-bold",children:[" #",u.id.slice(-6)]}),o.jsx("div",{className:"text-sm px-3 py-1 rounded-full bg-gray-900 text-white",children:c(u.status)})]}),u.restaurantName&&o.jsxs("div",{className:"mt-1 text-yellow-600 font-semibold",children:[": ",String(u.restaurantName)]}),o.jsx("div",{className:"mt-2 text-sm text-gray-700",children:(d=u.items)==null?void 0:d.map(g=>`${g.name}${g.qty}`).join("  ")}),o.jsxs("div",{className:"mt-2 font-bold",children:[": ",(m=(f=u.total)==null?void 0:f.toFixed)==null?void 0:m.call(f,2)," ."]})]},u.id)}),r.length===0&&!e&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})},K5=()=>{const{user:t,role:e,refreshUserData:n}=tt(),r=$r(),[s,i]=I.useState({name:"",phone:"",city:"",address:"",restaurantName:""}),[a,c]=I.useState(null),[u,d]=I.useState(!0),[f,m]=I.useState(!1),[g,w]=I.useState(!1),[C,T]=I.useState(!1),R={lat:24.7136,lng:46.6753};I.useEffect(()=>{if(!t)return;(async()=>{const O=await vt(J(q,"users",t.uid));if(O.exists()){const L=O.data();i({name:L.name||"",phone:L.phone||t.phoneNumber||"",city:L.city||"",address:L.address||"",restaurantName:L.restaurantName||""}),c(L.location||null)}d(!1)})()},[t]),I.useEffect(()=>{if(!document.getElementById("leaflet-css")){const b=document.createElement("link");b.id="leaflet-css",b.rel="stylesheet",b.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(b)}if(window.L)T(!0);else{const b=document.createElement("script");b.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",b.onload=()=>T(!0),document.body.appendChild(b)}},[]),I.useEffect(()=>{if(u||!C||!window.L)return;const b=window.L;if(!document.getElementById("profile-map"))return;window.profileMap&&window.profileMap.remove();const L=a||R,_=b.map("profile-map",{zoomControl:!0,attributionControl:!1}).setView([L.lat,L.lng],a?15:10);b.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19}).addTo(_);const y=b.divIcon({className:"custom-marker",html:`
        <div style="
          width: 40px; 
          height: 40px; 
          background: linear-gradient(135deg, #0EA5E9, #0284C7);
          border-radius: 50% 50% 50% 0;
          transform: rotate(-45deg);
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 4px 15px rgba(14, 165, 233, 0.5);
          border: 2px solid white;
        ">
          <div style="transform: rotate(45deg); color: white; font-size: 16px;"></div>
        </div>
      `,iconSize:[40,40],iconAnchor:[20,40]}),j=b.marker([L.lat,L.lng],{icon:y,draggable:!0}).addTo(_);return j.on("dragend",()=>{const S=j.getLatLng();c({lat:S.lat,lng:S.lng})}),_.on("click",S=>{const{lat:P,lng:D}=S.latlng;c({lat:P,lng:D}),j.setLatLng([P,D])}),window.profileMap=_,window.profileMarker=j,()=>{window.profileMap&&(window.profileMap.remove(),window.profileMap=null,window.profileMarker=null)}},[u,C]),I.useEffect(()=>{a&&window.profileMap&&window.profileMarker&&window.profileMarker.setLatLng([a.lat,a.lng])(window).profileMap.setView([a.lat,a.lng],15)},[a]);const x=I.useCallback(()=>{if(!navigator.geolocation){r.error("    ");return}w(!0),navigator.geolocation.getCurrentPosition(b=>{const O={lat:b.coords.latitude,lng:b.coords.longitude};c(O),w(!1)},b=>{w(!1),b.code===1?r.error("   .     "):r.error("  .   ")},{enableHighAccuracy:!0,timeout:15e3,maximumAge:0})},[r]),N=async b=>{if(b.preventDefault(),!!t){m(!0);try{if(await Me(J(q,"users",t.uid),{name:s.name,phone:s.phone,city:s.city,address:s.address,location:a,...e==="owner"&&{restaurantName:s.restaurantName}}),e==="owner"&&a)try{await Me(J(q,"restaurants",t.uid),{geoLocation:a,locationUpdatedAt:new Date})}catch(O){console.warn("   :",O)}await n(),r.success("   ! ")}catch{r.error("   ")}finally{m(!1)}}};if(u)return o.jsxs("div",{className:"flex items-center justify-center h-96 text-lg",children:[o.jsx(_r,{className:"w-6 h-6 animate-spin ml-2"}),"  ..."]});const v=()=>e==="owner"?"  ":e==="courier"?"  ":e==="admin"?"  ":" ";return o.jsx("div",{className:"max-w-md mx-auto py-8 px-4",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[o.jsx("div",{className:"w-12 h-12 bg-sky-100 rounded-xl flex items-center justify-center",children:o.jsx(En,{className:"w-6 h-6 text-sky-600"})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-xl font-bold text-gray-800",children:v()}),o.jsx("p",{className:"text-sm text-gray-500",children:(t==null?void 0:t.email)||(t==null?void 0:t.phoneNumber)})]})]}),o.jsxs("form",{onSubmit:N,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(En,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:s.name,onChange:b=>i({...s,name:b.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx($g,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:"05xxxxxxxx",value:s.phone,onChange:b=>i({...s,phone:b.target.value}),dir:"ltr"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(D1,{className:"w-4 h-4 inline ml-1"}),""]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:": ",value:s.city,onChange:b=>i({...s,city:b.target.value})})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(or,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("textarea",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition h-24",placeholder:"     ...",value:s.address,onChange:b=>i({...s,address:b.target.value})})]}),o.jsxs("div",{className:"border-2 border-sky-200 rounded-xl p-4 bg-sky-50/50",children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:[o.jsx(_i,{className:"w-4 h-4 inline ml-1"}),"  "]}),o.jsx("button",{type:"button",onClick:x,disabled:g,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold p-3 rounded-xl shadow-lg transition disabled:opacity-50 mb-3",children:g?o.jsxs(o.Fragment,{children:[o.jsx(ii,{className:"w-5 h-5 animate-spin"}),"  ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(_i,{className:"w-5 h-5"}),"   "]})}),o.jsx("div",{id:"profile-map",className:"h-48 rounded-xl overflow-hidden border border-sky-200",style:{background:"#f0f9ff"}}),o.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"       "}),a&&o.jsxs("div",{className:"mt-3 bg-green-50 border border-green-200 rounded-lg p-2 flex items-center gap-2 text-green-700",children:[o.jsx(Cs,{className:"w-4 h-4 flex-shrink-0"}),o.jsx("span",{className:"text-xs",children:"   "})]})]}),e==="owner"&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:[o.jsx(Om,{className:"w-4 h-4 inline ml-1"})," "]}),o.jsx("input",{className:"w-full border-2 border-gray-200 rounded-xl p-3 focus:border-sky-400 focus:outline-none transition",placeholder:" ",value:s.restaurantName,onChange:b=>i({...s,restaurantName:b.target.value})})]}),o.jsx("button",{type:"submit",disabled:f,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-sky-500 to-sky-600 hover:from-sky-600 hover:to-sky-700 text-white font-bold p-4 rounded-xl shadow-lg transition disabled:opacity-50",children:f?o.jsxs(o.Fragment,{children:[o.jsx(_r,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(U1,{className:"w-5 h-5"})," "]})})]}),o.jsxs("div",{className:"mt-6 pt-4 border-t text-center text-sm text-gray-500",children:[o.jsx("p",{children:"      "}),e==="customer"&&o.jsx("p",{className:"mt-1",children:"    "})]})]})})},G5=()=>{const t=[{to:"/owner/menu",title:" ",desc:"     .",icon:o.jsx(v5,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:" ",desc:"     .",icon:o.jsx(gd,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"  ",desc:"     .",icon:o.jsx(F1,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>o.jsxs(Ve,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col`,children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,o.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),o.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},Q5=({kind:t,message:e,onClose:n})=>{const r=t==="success"?"bg-green-600":t==="error"?"bg-rose-600":t==="warning"?"bg-amber-500":"bg-slate-800";return I.useEffect(()=>{const s=setTimeout(n,2500);return()=>clearTimeout(s)},[n]),o.jsx("div",{className:`fixed bottom-4 right-4 z-50 rounded-xl px-4 py-3 text-white shadow-lg ${r}`,children:e})},gv=()=>({name:"",desc:"",price:0,available:!0,file:null});async function X5(t,e=900,n=.8){try{const r=await createImageBitmap(t),s=Math.min(1,e/r.width),i=Math.round(r.width*s),a=Math.round(r.height*s),c=document.createElement("canvas");c.width=i,c.height=a,c.getContext("2d").drawImage(r,0,0,i,a);const d=t.type.includes("png")?"image/png":"image/jpeg";return await new Promise(m=>c.toBlob(g=>m(g),d,n))}catch{return t}}const Y5=()=>{const{user:t}=tt(),e=$r(),[n,r]=I.useState([]),[s,i]=I.useState(!0),[a,c]=I.useState(gv()),[u,d]=I.useState(!1),[f,m]=I.useState(null),g=(v,b)=>m({kind:v,message:b}),w=uh(cn),C=I.useRef(null),T=async()=>{if(!t)return;i(!0);const v=zt(fe(q,"menuItems"),pn("ownerId","==",t.uid)),b=await Ye(v);r(b.docs.map(O=>({id:O.id,...O.data()}))),i(!1)};I.useEffect(()=>{T()},[t]);const R=async v=>{if(v.preventDefault(),!t){g("warning","    ");return}const b=Number(a.price||0);if(!a.name.trim()){g("warning","   ");return}if(!Number.isFinite(b)||b<=0){g("warning","   ");return}d(!0);const O="temp_"+Date.now(),L=a.file?URL.createObjectURL(a.file):void 0,_={_tempId:O,_optimistic:!0,_progress:a.file?1:100,name:a.name,desc:a.desc||"",price:b,imageUrl:L,available:a.available??!0,ownerId:t.uid};r(y=>[_,...y]);try{let y;if(a.file){const P=await X5(a.file),D=a.file.name.replace(/\s+/g,"_").slice(-60),A=`menuImages/${t.uid}_${Date.now()}_${D}`,te=ql(w,A),ke=C1(te,P,{contentType:a.file.type||"image/jpeg"});await new Promise((ft,Ge)=>{ke.on("state_changed",H=>{const ee=Math.round(H.bytesTransferred/H.totalBytes*100);r(ne=>ne.map(_e=>_e._tempId===O?{..._e,_progress:ee}:_e))},Ge,async()=>{const H=await zl(ke.snapshot.ref);y=`${H}${H.includes("?")?"&":"?"}v=${Date.now()}`,ft()})})}const j={name:_.name,desc:_.desc,price:b,imageUrl:y||"",available:_.available,ownerId:t.uid,..._.categoryId?{categoryId:_.categoryId}:{}},S=await Zo(fe(q,"menuItems"),j);r(P=>P.map(D=>D._tempId===O?{...D,id:S.id,imageUrl:y||D.imageUrl,_optimistic:!1,_progress:100}:D)),g("success","    ")}catch(y){r(j=>j.filter(S=>S._tempId!==O)),g("error",`   : ${(y==null?void 0:y.message)||y}`)}finally{d(!1),c(gv()),C.current&&(C.current.value=""),L&&URL.revokeObjectURL(L)}},x=async(v,b)=>{if(v){r(O=>O.map(L=>L.id===v?{...L,available:!b}:L));try{await Me(J(q,"menuItems",v),{available:!b}),g("success","  ")}catch{r(O=>O.map(L=>L.id===v?{...L,available:!!b}:L)),g("error","  .  .")}}},N=async v=>{if(!v||!await e.confirm("       ",{dangerous:!0,title:" "}))return;const O=n;r(L=>L.filter(_=>_.id!==v));try{await us(J(q,"menuItems",v)),g("success"," ")}catch{r(O),g("error","  .  .")}};return s?o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[o.jsx("div",{className:"h-6 w-40 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-24 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-full bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded animate-pulse"})]}),o.jsx("div",{className:"space-y-3",children:[1,2,3].map(v=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[o.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl animate-pulse"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 w-48 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-3 w-64 bg-gray-200 rounded animate-pulse"}),o.jsx("div",{className:"h-4 w-24 bg-gray-200 rounded animate-pulse"})]})]},v))})]}):o.jsxs(o.Fragment,{children:[f&&o.jsx(Q5,{kind:f.kind,message:f.message,onClose:()=>m(null)}),o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("form",{onSubmit:R,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[o.jsx("h2",{className:"text-lg font-bold",children:" "}),o.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:" ",value:a.name,onChange:v=>c({...a,name:v.target.value})}),o.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:" ()",value:a.desc,onChange:v=>c({...a,desc:v.target.value})}),o.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"",type:"number",min:0,step:.5,inputMode:"decimal",value:Number.isFinite(a.price)?a.price:0,onChange:v=>c({...a,price:Number(v.target.value)})}),o.jsx("input",{ref:C,className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:v=>{var b;return c({...a,file:((b=v.target.files)==null?void 0:b[0])||null})}}),o.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[o.jsx("input",{type:"checkbox",checked:a.available,onChange:v=>c({...a,available:v.target.checked})}),""]}),o.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white disabled:opacity-60",disabled:u,children:u?" ":""})]}),o.jsxs("div",{className:"space-y-3",children:[n.map(v=>{var b,O;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx("img",{src:v.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:L=>{L.currentTarget.style.display="none"}}),v._optimistic&&o.jsx("div",{className:"absolute -bottom-2 left-0 right-0",children:o.jsx("div",{className:"h-1 w-20 rounded bg-gray-200 overflow-hidden",children:o.jsx("div",{className:"h-full bg-yellow-500 transition-[width]",style:{width:`${v._progress||1}%`}})})})]}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold",children:v.name}),v.desc&&o.jsx("div",{className:"text-sm text-gray-600",children:v.desc}),o.jsxs("div",{className:"font-semibold mt-1",children:[(O=(b=v.price)==null?void 0:b.toFixed)==null?void 0:O.call(b,2)," ."]}),v._optimistic&&o.jsx("div",{className:"text-xs text-yellow-600 mt-1",children:" "})]}),o.jsx("button",{onClick:()=>x(v.id,v.available),disabled:!!v._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white disabled:opacity-50",children:v.available?"":""}),o.jsx("button",{onClick:()=>N(v.id),disabled:!!v._optimistic,className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white disabled:opacity-50",children:""})]},v.id||v._tempId)}),n.length===0&&o.jsx("div",{className:"text-gray-600",children:"   ."})]})]})]})},yv=t=>({pending:"  ",accepted:"  ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "})[t]||t,J5=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},Z5=()=>{const{user:t}=tt(),[e,n]=I.useState([]),[r,s]=I.useState(null),i=I.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);I.useEffect(()=>{if(!i)return;s(null);const c=Bl(fe(q,"orders"),u=>{const f=u.docs.map(m=>({id:m.id,...m.data()})).filter(m=>{var C,T;const g=m.restaurantId===i,w=((T=(C=m==null?void 0:m.items)==null?void 0:C[0])==null?void 0:T.ownerId)===i;return g||w});f.sort((m,g)=>{var T,R,x,N;const w=((R=(T=m.createdAt)==null?void 0:T.toMillis)==null?void 0:R.call(T))??0;return(((N=(x=g.createdAt)==null?void 0:x.toMillis)==null?void 0:N.call(x))??0)-w}),n(f),s(null)},u=>{console.error("Firestore error:",u),s("    .")});return()=>c()},[i]);const a=async(c,u)=>{await Me(J(q,"orders",c),{status:u,updatedAt:ge()})};return o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"  "}),r&&o.jsx("div",{className:"text-red-500 text-sm mb-2",children:r}),e.map(c=>{var u,d,f;return o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[o.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[o.jsxs("div",{className:"font-bold text-lg",children:[" #",c.id.slice(-6),o.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(u=c.items)==null?void 0:u.map(m=>`${m.name}${m.qty}`).join("  ")})]}),o.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[(f=(d=c.total)==null?void 0:d.toFixed)==null?void 0:f.call(d,2)," ."]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-sm font-semibold",children:":"}),o.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${J5(c.status)}`,children:yv(c.status||"pending")})]}),o.jsxs("div",{className:"text-sm text-gray-700",children:[o.jsx("span",{className:"font-semibold",children:":"})," ",c.address]}),c.location&&o.jsxs("div",{className:"mt-3",children:[o.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"  :"}),o.jsx("iframe",{title:`map-${c.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${c.location.lat},${c.location.lng}&hl=ar&z=15&output=embed`})]}),o.jsx("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(m=>o.jsx("button",{onClick:()=>a(c.id,m),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gray-100 hover:bg-gray-200 transition",children:yv(m)},m))})]},c.id)}),e.length===0&&!r&&o.jsx("div",{className:"text-gray-400 text-center text-lg",children:"    ."})]})},e6=()=>{const{user:t}=tt(),e=Ti(),[n,r]=I.useState({name:"",phone:"",city:"",location:"",logoUrl:"",commercialLicenseUrl:"",healthCertificateUrl:"",licenseStatus:void 0,licenseNotes:""}),[s,i]=I.useState(null),[a,c]=I.useState(""),[u,d]=I.useState(null),[f,m]=I.useState(null),[g,w]=I.useState(!0),[C,T]=I.useState(!1),R=I.useMemo(()=>!C&&!!t,[C,t]);I.useEffect(()=>{t&&(async()=>{try{const L=await vt(J(q,"restaurants",t.uid));if(L.exists()){const _=L.data();r({name:_.name??"",phone:_.phone??"",city:_.city??"",location:_.location??"",logoUrl:_.logoUrl??"",commercialLicenseUrl:_.commercialLicenseUrl??"",healthCertificateUrl:_.healthCertificateUrl??"",licenseStatus:_.licenseStatus,licenseNotes:_.licenseNotes??""})}}catch{e.error("   ")}finally{w(!1)}})()},[t,e]),I.useEffect(()=>()=>{a&&URL.revokeObjectURL(a)},[a]);const x=L=>{const{name:_,value:y}=L.target;r(j=>({...j,[_]:y}))},N=L=>{var y;const _=((y=L.target.files)==null?void 0:y[0])||null;if(i(_),_){const j=URL.createObjectURL(_);c(j)}else c("")},v=async()=>{if(!t||!s)return;if(!/^image\//.test(s.type)){e.warning("   ");return}const _=3*1024*1024;if(s.size>_){e.warning("        3MB");return}const y=s.name.replace(/\s+/g,"_"),j=`restaurants/${t.uid}/logo_${Date.now()}_${y}`,S=ql(sv,j),P={contentType:s.type||"image/jpeg",cacheControl:"public,max-age=31536000,immutable"};await Pm(S,s,P);const D=await zl(S);return`${D}${D.includes("?")?"&":"?"}v=${Date.now()}`},b=async(L,_)=>{if(!t||!L)return;if(!/^(image\/|application\/pdf)/.test(L.type)){e.warning("      PDF");return}const j=5*1024*1024;if(L.size>j){e.warning("        5MB");return}const S=L.name.replace(/\s+/g,"_"),P=`restaurants/${t.uid}/licenses/${_}_${Date.now()}_${S}`,D=ql(sv,P),A={contentType:L.type,cacheControl:"public,max-age=31536000,immutable"};return await Pm(D,L,A),await zl(D)},O=async L=>{if(L.preventDefault(),!t){e.warning("    ");return}if(!n.name.trim()){e.warning("  ");return}T(!0);try{let _=n.logoUrl,y=n.commercialLicenseUrl,j=n.healthCertificateUrl,S=n.licenseStatus;if(s){e.info("    ");const P=await v();P&&(_=P)}if(u){e.info("     ");const P=await b(u,"commercial");P&&(y=P,S="pending")}if(f){e.info("     ");const P=await b(f,"health");P&&(j=P,S="pending")}await Nn(J(q,"restaurants",t.uid),{...n,logoUrl:_,commercialLicenseUrl:y,healthCertificateUrl:j,licenseStatus:S},{merge:!0}),a&&URL.revokeObjectURL(a),c(""),i(null),d(null),m(null),e.success("    ",{title:" "})}catch(_){e.error(` : ${(_==null?void 0:_.message)||"  "}`)}finally{T(!1)}};return g?o.jsx("div",{className:"p-6 text-center",children:" "}):o.jsxs("div",{className:"max-w-md mx-auto p-6 bg-white rounded-2xl shadow-lg mt-8 text-gray-900",children:[o.jsx("h1",{className:"text-2xl font-bold text-center mb-6",children:"  "}),o.jsxs("form",{onSubmit:O,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block font-semibold",children:" "}),o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border bg-gray-100 shrink-0",children:a||n.logoUrl?o.jsx("img",{src:a||n.logoUrl,className:"w-full h-full object-cover",onError:L=>L.currentTarget.style.display="none",alt:"logo"}):null}),o.jsx("input",{type:"file",accept:"image/*",onChange:N})]}),s&&o.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",o.jsx("span",{className:"font-semibold",children:s.name})]})]}),o.jsx("input",{name:"name",placeholder:" ",value:n.name,onChange:x,className:"w-full border p-3 rounded-xl"}),o.jsx("input",{name:"phone",placeholder:" ",value:n.phone,onChange:x,className:"w-full border p-3 rounded-xl"}),o.jsxs("div",{className:"relative",children:[o.jsx(or,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-sky-400 pointer-events-none"}),o.jsxs("select",{name:"city",value:n.city,onChange:L=>r(_=>({..._,city:L.target.value})),className:"w-full border p-3 pr-10 rounded-xl bg-white appearance-none cursor-pointer focus:border-sky-400 focus:ring-2 focus:ring-sky-100",children:[o.jsx("option",{value:"",children:" "}),qg.map(L=>o.jsx("option",{value:L,children:L},L))]})]}),o.jsx("input",{name:"location",placeholder:"",value:n.location,onChange:x,className:"w-full border p-3 rounded-xl"}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[o.jsx(ND,{className:"w-5 h-5 text-sky-500"})," "]}),n.licenseStatus&&o.jsxs("div",{className:`mb-4 p-3 rounded-xl flex items-center gap-2 ${n.licenseStatus==="approved"?"bg-green-50 text-green-700":n.licenseStatus==="rejected"?"bg-red-50 text-red-700":"bg-yellow-50 text-yellow-700"}`,children:[n.licenseStatus==="approved"&&o.jsx(Cs,{className:"w-5 h-5"}),n.licenseStatus==="rejected"&&o.jsx(pd,{className:"w-5 h-5"}),n.licenseStatus==="pending"&&o.jsx(Vg,{className:"w-5 h-5"}),o.jsxs("span",{className:"font-semibold",children:[n.licenseStatus==="approved"&&"   ",n.licenseStatus==="rejected"&&" ",n.licenseStatus==="pending"&&"  ..."]})]}),n.licenseNotes&&n.licenseStatus==="rejected"&&o.jsxs("div",{className:"mb-4 p-3 bg-red-50 rounded-xl text-red-600 text-sm",children:[o.jsx("strong",{children:":"})," ",n.licenseNotes]}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[o.jsx(cv,{className:"w-4 h-4 text-orange-500"})," "]}),o.jsxs("div",{className:"flex items-center gap-3",children:[n.commercialLicenseUrl&&o.jsx("a",{href:n.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),o.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:L=>{var _;return d(((_=L.target.files)==null?void 0:_[0])||null)},className:"text-sm"})]}),u&&o.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",o.jsx("span",{className:"font-semibold",children:u.name})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("label",{className:"block font-semibold text-gray-700 flex items-center gap-2",children:[o.jsx(cv,{className:"w-4 h-4 text-green-500"})," "]}),o.jsxs("div",{className:"flex items-center gap-3",children:[n.healthCertificateUrl&&o.jsx("a",{href:n.healthCertificateUrl,target:"_blank",rel:"noopener noreferrer",className:"text-sky-500 hover:text-sky-700 text-sm underline",children:"  "}),o.jsx("input",{type:"file",accept:"image/*,.pdf",onChange:L=>{var _;return m(((_=L.target.files)==null?void 0:_[0])||null)},className:"text-sm"})]}),f&&o.jsxs("div",{className:"text-xs text-gray-600",children:[" : ",o.jsx("span",{className:"font-semibold",children:f.name})]})]})]}),o.jsx("button",{type:"submit",disabled:!R,className:"w-full bg-gray-900 hover:bg-gray-800 text-white py-3 rounded-xl font-semibold transition disabled:opacity-60",children:C?" ":""})]})]})},t6=()=>{const{user:t}=tt(),[e,n]=I.useState([]),[r,s]=I.useState(!0);I.useEffect(()=>{t&&(async()=>{const a=zt(fe(q,"hiringRequests"),pn("restaurantId","==",t.uid)),c=await Ye(a);n(c.docs.map(u=>({id:u.id,...u.data()}))),s(!1)})()},[t]);const i=async(a,c)=>{await Me(J(q,"hiringRequests",a),{status:c}),n(u=>u.map(d=>d.id===a?{...d,status:c}:d))};return r?o.jsx("div",{className:"text-center py-10",children:" ..."}):o.jsxs("div",{className:"py-6",children:[o.jsx("h1",{className:"text-2xl font-bold text-yellow-400 text-center mb-6",children:" "}),e.length===0?o.jsx("div",{className:"text-gray-400 text-center",children:"  "}):o.jsx("div",{className:"space-y-3",children:e.map(a=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("div",{className:"font-bold",children:a.courierName}),o.jsx("div",{className:"text-sm text-gray-600",children:a.status==="pending"?" ":a.status})]}),a.status==="pending"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>i(a.id,"accepted"),className:"px-3 py-1 rounded bg-green-500 text-white",children:""}),o.jsx("button",{onClick:()=>i(a.id,"rejected"),className:"px-3 py-1 rounded bg-red-500 text-white",children:""})]})]},a.id))})]})},n6=()=>{const{user:t}=tt(),[e,n]=I.useState([]),[r,s]=I.useState([]);I.useEffect(()=>{const c=zt(fe(q,"orders"),pn("status","in",["ready"]),Ss("createdAt","desc")),u=Bl(c,m=>n(m.docs.map(g=>({id:g.id,...g.data()})))),d=zt(fe(q,"orders"),pn("courierId","==",(t==null?void 0:t.uid)||""),Ss("createdAt","desc")),f=Bl(d,m=>s(m.docs.map(g=>({id:g.id,...g.data()}))));return()=>{u(),f()}},[t==null?void 0:t.uid]);const i=async c=>{t&&await Me(J(q,"orders",c),{courierId:t.uid,status:"out_for_delivery",updatedAt:ge()})},a=async c=>{await Me(J(q,"orders",c),{status:"delivered",updatedAt:ge()})};return o.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold mb-3",children:"  "}),o.jsxs("div",{className:"space-y-3",children:[e.map(c=>{var u,d;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"font-bold",children:["#",c.id.slice(-6),"  ",(d=(u=c.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ."]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[": ",c.address]}),o.jsx("button",{onClick:()=>i(c.id),className:"mt-2 px-3 py-2 rounded-xl bg-gray-900 text-white text-sm",children:" "})]},c.id)}),e.length===0&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})]}),o.jsxs("div",{children:[o.jsx("h2",{className:"font-bold mb-3",children:""}),o.jsxs("div",{className:"space-y-3",children:[r.map(c=>{var u,d;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"font-bold",children:["#",c.id.slice(-6),"  ",(d=(u=c.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ."]}),o.jsxs("div",{className:"text-sm text-gray-600",children:[": ",c.address]}),o.jsx("button",{onClick:()=>a(c.id),className:"mt-2 px-3 py-2 rounded-xl bg-green-600 text-white text-sm",children:" "})]},c.id)}),r.length===0&&o.jsx("div",{className:"text-gray-600",children:"    ."})]})]})]})},r6=()=>{const{user:t}=tt(),e=$r(),[n,r]=I.useState([]),[s,i]=I.useState({}),[a,c]=I.useState(!0),[u,d]=I.useState(null);I.useEffect(()=>{if(!t)return;(async()=>{const w=(await Ye(fe(q,"restaurants"))).docs.map(x=>({id:x.id,...x.data()}));r(w);const C=zt(fe(q,"hiringRequests"),pn("courierId","==",t.uid)),T=await Ye(C),R={};T.docs.forEach(x=>{const N=x.data();R[N.restaurantId]={restaurantId:N.restaurantId,status:N.status}}),i(R),c(!1)})()},[t]);const f=async m=>{if(!t){e.warning("  ");return}d(m.id),await Zo(fe(q,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"",restaurantId:m.id,restaurantName:m.name,status:"pending",createdAt:ge()}),i(g=>({...g,[m.id]:{restaurantId:m.id,status:"pending"}})),d(null)};return a?o.jsx("div",{className:"text-center py-10 text-gray-300",children:"  ..."}):o.jsxs("div",{className:"py-8",children:[o.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[o.jsx(Z4,{className:"w-7 h-7 text-yellow-400"})," "]}),o.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(m=>{const g=s[m.id];return o.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[m.logoUrl?o.jsx("img",{src:m.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):o.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:""}),o.jsx("h3",{className:"font-bold text-lg mb-2",children:m.name}),g?o.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${g.status==="pending"?"bg-gray-500 text-white":g.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[g.status==="pending"&&o.jsx(Vg,{className:"w-4 h-4"}),g.status==="accepted"&&o.jsx(fD,{className:"w-4 h-4"}),g.status==="rejected"&&o.jsx(L1,{className:"w-4 h-4"}),g.status==="pending"?" ":g.status==="accepted"?"  ":" "]}):o.jsx("button",{disabled:u===m.id,onClick:()=>f(m),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:u===m.id?"  ...":"  "})]},m.id)})})]})},s6=()=>{var N,v;const{user:t,role:e}=tt(),n=Ti(),[r,s]=I.useState("dashboard"),[i,a]=I.useState({totalRestaurants:0,totalOrders:0,totalEarnings:0,pendingOrders:0}),[c,u]=I.useState(0),[d,f]=I.useState(!0),[m,g]=I.useState(null),[w,C]=I.useState([]),[T,R]=I.useState("all");I.useEffect(()=>{t&&(async()=>{try{const O=(await Ye(fe(q,"restaurants"))).size,_=(await Ye(fe(q,"orders"))).docs.map(P=>({id:P.id,...P.data()})),y=_.length,j=_.filter(P=>P.status==="pending").length,S=_.reduce((P,D)=>P+(D.deliveryFee||0),0);try{const D=(await vt(J(q,"wallets",t.uid))).data();u((D==null?void 0:D.balance)||0)}catch{u(0)}try{const P=zt(fe(q,"tasks"),pn("assignedTo","==",t.uid)),A=(await Ye(P)).docs.map(te=>({id:te.id,...te.data()}));C(A.sort((te,ke)=>{var ft,Ge;return(((ft=ke.createdAt)==null?void 0:ft.seconds)||0)-(((Ge=te.createdAt)==null?void 0:Ge.seconds)||0)}))}catch(P){console.error("   :",P)}a({totalRestaurants:O,totalOrders:y,totalEarnings:S,pendingOrders:j})}catch(b){console.error("   :",b)}finally{f(!1)}})()},[t]);const x=async(b,O)=>{try{const L={status:O,updatedAt:ge()};O==="completed"&&(L.completedAt=ge()),await Me(J(q,"tasks",b),L),C(_=>_.map(y=>y.id===b?{...y,status:O}:y)),n.success(O==="in_progress"?"  ":O==="completed"?"   ! ":"  ")}catch{n.error("   ")}};return I.useEffect(()=>{t&&(async()=>{try{const b=await vt(J(q,"users",t.uid));b.exists()&&g({uid:b.id,...b.data()})}catch(b){console.error("    :",b)}})()},[t]),d?o.jsx(Be,{allow:["admin"],children:o.jsx("div",{className:"flex items-center justify-center h-96 text-lg",children:" ..."})}):o.jsx(Be,{allow:["admin"],children:o.jsxs("div",{className:"space-y-8",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("h1",{className:"text-4xl font-extrabold text-primary",children:"  "}),o.jsx("p",{className:"text-gray-600 mt-2",children:"   ! "})]}),o.jsxs("div",{className:"flex justify-center gap-4 mb-6",children:[o.jsxs("button",{onClick:()=>s("dashboard"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="dashboard"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(lf,{className:"w-5 h-5"})," "]}),o.jsxs("button",{onClick:()=>s("profile"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 ${r==="profile"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(En,{className:"w-5 h-5"}),""]}),o.jsxs("button",{onClick:()=>s("tasks"),className:`px-6 py-3 rounded-xl font-bold transition flex items-center gap-2 relative ${r==="tasks"?"bg-primary text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[o.jsx(gd,{className:"w-5 h-5"}),"",w.filter(b=>b.status==="pending"||b.status==="in_progress").length>0&&o.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center",children:w.filter(b=>b.status==="pending"||b.status==="in_progress").length})]})]}),r==="profile"&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[o.jsx(En,{className:"w-6 h-6"}),""]}),m?o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-gradient-to-r from-sky-50 to-blue-50 rounded-2xl p-6",children:[o.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[o.jsx("div",{className:"w-20 h-20 bg-primary rounded-full flex items-center justify-center text-white text-3xl font-bold",children:((N=m.name)==null?void 0:N.charAt(0))||((v=m.email)==null?void 0:v.charAt(0))||""}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:m.name||" "}),o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-bold bg-sky-100 text-sky-800 mt-2",children:" "})]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"font-semibold text-gray-900 font-mono",children:m.email})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:""}),o.jsx("p",{className:"font-semibold text-gray-900",children:e==="admin"?"":e})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsx("p",{className:"font-semibold text-gray-600 text-xs font-mono break-all",children:m.uid})]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-sm",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:" "}),o.jsxs("p",{className:"font-bold text-green-600 text-xl",children:[c.toFixed(2)," ."]})]})]})]}),o.jsx(Ve,{to:"/profile",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-4 text-center font-semibold transition",children:"   "})]}):o.jsx("div",{className:"text-center py-8 text-gray-600",children:" ..."})]}),r==="tasks"&&o.jsx("div",{className:"space-y-6",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("h2",{className:"text-2xl font-bold text-primary mb-6 flex items-center gap-2",children:[o.jsx(gd,{className:"w-6 h-6"})," "]}),o.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:["all","pending","in_progress","completed"].map(b=>o.jsxs("button",{onClick:()=>R(b),className:`px-4 py-2 rounded-xl font-semibold transition ${T===b?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[b==="all"&&" ",b==="pending"&&"  ",b==="in_progress"&&"  ",b==="completed"&&" "]},b))}),o.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:w.filter(b=>b.status==="pending").length}),o.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:w.filter(b=>b.status==="in_progress").length}),o.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:w.filter(b=>b.status==="completed").length}),o.jsx("p",{className:"text-sm text-green-700",children:""})]})]}),w.filter(b=>T==="all"||b.status===T).length===0?o.jsxs("div",{className:"text-center py-12 text-gray-500",children:[o.jsx("p",{className:"text-5xl mb-4",children:""}),o.jsxs("p",{className:"text-lg",children:["   ",T!=="all"&&"  "]}),o.jsx("p",{className:"text-sm mt-2",children:"      "})]}):o.jsx("div",{className:"space-y-4",children:w.filter(b=>T==="all"||b.status===T).map(b=>{var O,L,_;return o.jsx("div",{className:`border-2 rounded-2xl p-4 transition ${b.status==="completed"?"bg-green-50 border-green-200":b.status==="in_progress"?"bg-blue-50 border-blue-200":b.priority==="high"?"bg-red-50 border-red-200":"bg-white border-gray-200"}`,children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${b.priority==="high"?"bg-red-100 text-red-700":b.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:b.priority==="high"?" ":b.priority==="medium"?" ":" "}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${b.status==="pending"?"bg-yellow-100 text-yellow-700":b.status==="in_progress"?"bg-blue-100 text-blue-700":b.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[b.status==="pending"&&"  ",b.status==="in_progress"&&"  ",b.status==="completed"&&" ",b.status==="cancelled"&&" "]})]}),o.jsx("h3",{className:"font-bold text-lg text-gray-800",children:b.title}),b.description&&o.jsx("p",{className:"text-gray-600 mt-1",children:b.description}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-sm text-gray-500",children:[b.dueDate&&o.jsxs("span",{className:new Date(b.dueDate)<new Date&&b.status!=="completed"?"text-red-600 font-semibold":"",children:[" ",new Date(b.dueDate).toLocaleDateString("ar-SA"),new Date(b.dueDate)<new Date&&b.status!=="completed"&&" (!)"]}),o.jsxs("span",{children:[" ",((_=(L=(O=b.createdAt)==null?void 0:O.toDate)==null?void 0:L.call(O))==null?void 0:_.toLocaleDateString("ar-SA"))||" "]})]}),b.notes&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-100 p-2 rounded",children:[" ",b.notes]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[b.status==="pending"&&o.jsx("button",{onClick:()=>x(b.id,"in_progress"),className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:" "}),b.status==="in_progress"&&o.jsxs("button",{onClick:()=>x(b.id,"completed"),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(Cs,{className:"w-4 h-4"}),""]}),b.status==="completed"&&o.jsx("span",{className:"text-green-600 font-semibold text-center",children:"  "})]})]})},b.id)})})]})}),r==="dashboard"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-gradient-to-r from-primary to-sky-700 rounded-2xl shadow-lg p-6 text-white",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm opacity-90",children:" "}),o.jsxs("h2",{className:"text-3xl font-bold",children:[c.toFixed(2)," ."]}),o.jsx("p",{className:"text-sm opacity-75 mt-2",children:"   50       "})]}),o.jsx($1,{className:"w-16 h-16 opacity-80"})]})}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-primary mt-2",children:i.totalRestaurants})]}),o.jsx(D1,{className:"w-12 h-12 text-primary opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-blue-600 mt-2",children:i.totalOrders})]}),o.jsx(xd,{className:"w-12 h-12 text-blue-600 opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-yellow-600 mt-2",children:i.pendingOrders})]}),o.jsx(lf,{className:"w-12 h-12 text-yellow-600 opacity-30"})]})}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" "}),o.jsx("h3",{className:"text-3xl font-bold text-green-600 mt-2",children:i.totalEarnings.toFixed(2)})]}),o.jsx(lf,{className:"w-12 h-12 text-green-600 opacity-30"})]})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ve,{to:"/admin/add-restaurant",className:"block w-full bg-primary hover:bg-red-900 text-white rounded-xl p-3 text-center font-semibold transition",children:"   "}),o.jsx(Ve,{to:"/admin/restaurants",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"     "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ve,{to:"/admin/orders",className:"block w-full bg-blue-600 hover:bg-blue-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),o.jsx(Ve,{to:"/admin/orders?status=pending",className:"block w-full bg-yellow-500 hover:bg-yellow-600 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:""}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"       "}),o.jsxs("div",{className:"space-y-2",children:[o.jsx(Ve,{to:"/menu",className:"block w-full bg-green-600 hover:bg-green-700 text-white rounded-xl p-3 text-center font-semibold transition",children:"  "}),o.jsx(Ve,{to:"/orders",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:" "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsx("h3",{className:"text-xl font-bold text-primary mb-4",children:" "}),o.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"      "}),o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"block w-full bg-gradient-to-r from-primary to-sky-700 text-white rounded-xl p-3 text-center font-semibold",children:[" : ",c.toFixed(2)," ."]}),o.jsx(Ve,{to:"/admin/wallet",className:"block w-full bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-xl p-3 text-center font-semibold transition",children:"  "})]})]})]}),o.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 p-6 rounded-lg",children:[o.jsx("h4",{className:"font-bold text-sky-900 mb-2",children:"  :"}),o.jsxs("ul",{className:"text-sky-800 text-sm space-y-1",children:[o.jsxs("li",{children:[" ",o.jsx("strong",{children:"50 "}),"         "]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"1 "}),"     (     )"]}),o.jsxs("li",{children:[" ",o.jsx("strong",{children:"1.5 "}),"       "]}),o.jsx("li",{children:"        "})]})]})]})]})})},i6=()=>{const{user:t,role:e}=tt(),n=Ti(),r=$r(),[s,i]=I.useState([]),[a,c]=I.useState(!0),[u,d]=I.useState(!1),[f,m]=I.useState(!1),[g,w]=I.useState(0),C=I.useRef(null),T=uh(cn),[R,x]=I.useState({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""});I.useEffect(()=>{N()},[]);const N=async()=>{try{const L=(await Ye(fe(q,"restaurants"))).docs.map(_=>({id:_.id,..._.data()}));i(L)}catch(O){n.error("   "),console.error(O)}finally{c(!1)}},v=async O=>{if(O.preventDefault(),!R.name.trim()){n.warning("  ");return}try{m(!0);let L="";if(R.logoFile){const j=R.logoFile.name.replace(/\s+/g,"_").slice(-60),S=`uploads/restaurant_${Date.now()}_${j}`,P=ql(T,S),D=C1(P,R.logoFile,{contentType:R.logoFile.type||"image/jpeg"});await new Promise((A,te)=>{D.on("state_changed",ke=>{const ft=Math.round(ke.bytesTransferred/ke.totalBytes*100);w(ft)},te,async()=>{L=await zl(D.snapshot.ref),A()})})}const _=e==="admin",y=e==="developer";await Zo(fe(q,"restaurants"),{name:R.name,phone:R.phone,city:R.city,location:R.location,ownerId:"admin_"+Date.now(),email:(t==null?void 0:t.email)||"",logoUrl:L,createdAt:new Date,referredBy:_?t==null?void 0:t.uid:null,referrerType:_?"admin":y?"developer":null}),n.success("    "),_&&n.info("   75        "),x({name:"",phone:"",city:"",location:"",logoFile:null,logoPreview:""}),d(!1),w(0),N()}catch(L){n.error("   "),console.error(L)}finally{m(!1)}},b=async O=>{if(await r.confirm("      ",{dangerous:!0,title:" "}))try{await us(J(q,"restaurants",O)),n.success("   "),N()}catch(_){n.error("   "),console.error(_)}};return a?o.jsx(Be,{allow:["admin","developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):o.jsx(Be,{allow:["admin","developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),o.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 bg-primary hover:bg-red-900 text-white px-6 py-3 rounded-xl font-semibold transition",children:[o.jsx(Bg,{className:"w-5 h-5"}),"  "]})]}),u&&o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),o.jsxs("form",{onSubmit:v,className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block font-semibold text-gray-700",children:" "}),o.jsxs("div",{className:"flex items-center gap-4",children:[R.logoPreview?o.jsx("img",{src:R.logoPreview,alt:" ",className:"w-20 h-20 rounded-xl object-cover border-2 border-sky-200"}):o.jsx("div",{className:"w-20 h-20 rounded-xl bg-gray-100 flex items-center justify-center border-2 border-dashed border-gray-300",children:o.jsx(CD,{className:"w-8 h-8 text-gray-400"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("input",{ref:C,type:"file",accept:"image/*",className:"hidden",onChange:O=>{var _;const L=(_=O.target.files)==null?void 0:_[0];L&&x({...R,logoFile:L,logoPreview:URL.createObjectURL(L)})}}),o.jsxs("button",{type:"button",onClick:()=>{var O;return(O=C.current)==null?void 0:O.click()},className:"flex items-center gap-2 px-4 py-2 bg-sky-100 hover:bg-sky-200 text-sky-700 rounded-xl font-semibold transition",children:[o.jsx(f5,{className:"w-4 h-4"}),R.logoFile?" ":" "]}),R.logoFile&&o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R.logoFile.name})]})]}),f&&g>0&&o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-sky-500 h-2 rounded-full transition-all",style:{width:`${g}%`}})})]}),o.jsx("input",{type:"text",placeholder:" ",value:R.name,onChange:O=>x({...R,name:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("input",{type:"text",placeholder:" ",value:R.phone,onChange:O=>x({...R,phone:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("input",{type:"text",placeholder:"",value:R.city,onChange:O=>x({...R,city:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsx("textarea",{placeholder:" / ",value:R.location,onChange:O=>x({...R,location:O.target.value}),className:"w-full border rounded-xl p-3 text-gray-900"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"submit",disabled:f,className:"flex-1 bg-primary hover:bg-red-900 text-white rounded-xl p-3 font-semibold transition disabled:opacity-50",children:f?` ... ${g}%`:" "}),o.jsx("button",{type:"button",onClick:()=>d(!1),className:"flex-1 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-xl p-3 font-semibold transition",children:" "})]})]})]}),o.jsx("div",{className:"grid gap-4",children:s.length===0?o.jsx("div",{className:"text-center text-gray-500 py-12",children:"    "}):s.map(O=>o.jsx("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex gap-4",children:[O.logoUrl?o.jsx("img",{src:O.logoUrl,alt:O.name,className:"w-16 h-16 rounded-xl object-cover border-2 border-sky-100"}):o.jsx("div",{className:"w-16 h-16 rounded-xl bg-sky-100 flex items-center justify-center",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold text-primary",children:O.name}),O.city&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.city]}),O.phone&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.phone]}),O.location&&o.jsxs("p",{className:"text-gray-600 text-sm",children:[" ",O.location]})]})]}),o.jsx("button",{onClick:()=>b(O.id),className:"p-3 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl transition",title:" ",children:o.jsx(Fo,{className:"w-5 h-5"})})]})},O.id))})]})})},uf={pending:"  ",accepted:" ",preparing:"  ",ready:" ",out_for_delivery:"  ",delivered:"  ",cancelled:" "},o6=()=>{const t=Ti(),[e,n]=I.useState([]),[r,s]=I.useState(!0),[i,a]=I.useState("all");I.useEffect(()=>{c()},[i]);const c=async()=>{try{let u;i==="all"?u=zt(fe(q,"orders"),Ss("createdAt","desc")):u=zt(fe(q,"orders"),pn("status","==",i),Ss("createdAt","desc"));const f=(await Ye(u)).docs.map(m=>({id:m.id,...m.data()}));n(f)}catch(u){t.error("   "),console.error(u)}finally{s(!1)}};return r?o.jsx(Be,{allow:["admin","developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:" ..."})}):o.jsx(Be,{allow:["admin","developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-primary",children:" "}),o.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2",children:[o.jsxs("button",{onClick:()=>a("all"),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i==="all"?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[" (",e.length,")"]}),["pending","accepted","preparing","ready","out_for_delivery","delivered"].map(u=>{const d=e.filter(f=>f.status===u).length;return o.jsxs("button",{onClick:()=>a(u),className:`px-4 py-2 rounded-xl font-semibold transition whitespace-nowrap ${i===u?"bg-primary text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"}`,children:[uf[u]," (",d,")"]},u)})]}),o.jsx("div",{className:"space-y-4",children:e.length===0?o.jsxs("div",{className:"text-center text-gray-500 py-12",children:["   ",i!=="all"&&` "${uf[i]}"`]}):e.map(u=>{var d,f;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-6 hover:shadow-lg transition",children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"text-lg font-bold",children:[" #",u.id.slice(-8)]}),o.jsx("p",{className:"text-gray-600 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleDateString("ar-SA"):""})]}),o.jsx("span",{className:`px-4 py-2 rounded-xl font-semibold text-white whitespace-nowrap ${u.status==="pending"?"bg-yellow-500":u.status==="delivered"?"bg-green-600":u.status==="cancelled"?"bg-red-600":"bg-blue-600"}`,children:uf[u.status]})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:" ID"}),o.jsxs("p",{className:"font-mono text-sm text-gray-800",children:[u.customerId.slice(0,12),"..."]})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsx("p",{className:"font-semibold text-gray-800",children:u.restaurantName||""})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsx("p",{className:"text-sm text-gray-800",children:u.address})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-600 text-sm",children:""}),o.jsxs("p",{className:"text-lg font-bold text-primary",children:[((d=u.total)==null?void 0:d.toFixed(2))||0," ."]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-sm",children:[o.jsx("p",{className:"font-semibold mb-2",children:":"}),o.jsx("div",{className:"space-y-1",children:(f=u.items)==null?void 0:f.map((m,g)=>o.jsxs("div",{className:"flex justify-between text-gray-700",children:[o.jsxs("span",{children:[m.name,"  ",m.qty]}),o.jsxs("span",{children:[(m.price*m.qty).toFixed(2)," ."]})]},g))})]})]},u.id)})})]})})},_n={projectId:cn.options.projectId,authDomain:cn.options.authDomain,storageBucket:cn.options.storageBucket,messagingSenderId:cn.options.messagingSenderId,appId:cn.options.appId},a6=()=>{var va,_a,Bi,zi;const{user:t}=tt(),e=Ti(),n=$r(),r=uh(cn),[s,i]=I.useState("overview"),[a,c]=I.useState(!0),[u,d]=I.useState(!1),[f,m]=I.useState({users:0,restaurants:0,menuItems:0,orders:0,pendingOrders:0,deliveredOrders:0,admins:0,couriers:0,customers:0,owners:0,totalAppEarnings:0}),[g,w]=I.useState({}),[C,T]=I.useState([]),[R,x]=I.useState([]),[N,v]=I.useState([]),[b,O]=I.useState([]),[L,_]=I.useState(!1),[y,j]=I.useState({}),[S,P]=I.useState(null),[D,A]=I.useState({}),[te,ke]=I.useState(!1),[ft,Ge]=I.useState(null),[H,ee]=I.useState({}),[ne,_e]=I.useState("all"),[xe,Fe]=I.useState("all"),[tn,Rn]=I.useState(null),[nn,rn]=I.useState(!1),[Br,pc]=I.useState(""),[zr,Us]=I.useState(""),[dr,Ii]=I.useState(""),[Si,Ci]=I.useState(""),[ta,gc]=I.useState(!1),[na,ra]=I.useState(!1),[Wn,sa]=I.useState(""),[ia,Ri]=I.useState(""),[hr,oa]=I.useState(""),[nt,mt]=I.useState(""),[Fs,aa]=I.useState(!1),[Ai,yc]=I.useState(!1),[vn,la]=I.useState(""),[Pi,Di]=I.useState(""),[xc,vc]=I.useState(""),[Oi,ca]=I.useState(""),[Kn,qr]=I.useState(""),[Hr,Li]=I.useState(""),[Gn,ua]=I.useState(!1),[An,_c]=I.useState([]),[$s,Mi]=I.useState(!1),[ut,Vi]=I.useState(""),[Wr,fr]=I.useState(""),[Ui,da]=I.useState(""),[mr,ha]=I.useState("medium"),[wc,Kr]=I.useState(""),[fa,Fi]=I.useState(!1),[Pn,Qn]=I.useState("all");t!=null&&t.email;const bc=async()=>{if(!Br.trim()||!dr.trim()){e.warning("    ");return}if(dr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${Br}
 ${zr||" "}

:         .`,{title:"  "})){gc(!0);try{const B=(await _u(Bn,Br.trim(),dr)).user.uid;await Nn(J(q,"users",B),{email:Br.trim(),name:zr.trim()||" ",phone:Si.trim()||"",role:"admin",createdAt:ge()}),await Nn(J(q,"wallets",B),{balance:0,totalEarnings:0,totalWithdrawn:0,transactions:[],updatedAt:ge()}),e.success("     "),e.info("        "),pc(""),Us(""),Ii(""),Ci(""),rn(!1)}catch($){console.error("   :",$),$.code==="auth/email-already-in-use"?e.error("   "):$.code==="auth/invalid-email"?e.error("   "):$.code==="auth/weak-password"?e.error("   "):e.error("  : "+($.message||"  "))}finally{gc(!1)}}},Nc=async()=>{if(!Wn.trim()||!hr.trim()){e.warning("    ");return}if(hr.length<6){e.warning("     6   ");return}if(await n.confirm(`    :

 ${Wn}
 ${ia||" "}
 ${nt||" "}`,{title:"  "})){aa(!0);try{const B=(await _u(Bn,Wn.trim(),hr)).user.uid;await Nn(J(q,"users",B),{email:Wn.trim(),name:ia.trim()||" ",phone:nt.trim()||"",role:"courier",createdAt:ge()}),e.success("     "),e.info("        "),sa(""),Ri(""),oa(""),mt(""),ra(!1)}catch($){console.error("   :",$),$.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+($.message||"  "))}finally{aa(!1)}}},ma=async()=>{if(!vn.trim()){e.warning("  ");return}if(!Kn.trim()||!Hr.trim()){e.warning("   ");return}if(await n.confirm(`   :

 ${vn}
 ${Pi||" "}
  : ${Kn}`,{title:"  "})){ua(!0);try{const B=(await _u(Bn,Kn.trim(),Hr)).user.uid;await Nn(J(q,"users",B),{email:Kn.trim(),name:vn.trim()+" - ",role:"owner",createdAt:ge()}),await Nn(J(q,"restaurants",B),{name:vn.trim(),ownerId:B,email:Oi.trim()||Kn.trim(),phone:xc.trim()||"",city:Pi.trim()||"",referredBy:t==null?void 0:t.uid,referrerType:"developer",createdAt:ge()}),e.success("      "),e.info("        "),la(""),Di(""),vc(""),ca(""),qr(""),Li(""),yc(!1)}catch($){console.error("   :",$),$.code==="auth/email-already-in-use"?e.error("   "):e.error("  : "+($.message||"  "))}finally{ua(!1)}}},pa=()=>{const k=new Date,$=new Date(k.getFullYear(),k.getMonth(),k.getDate()),B=new Date($.getTime()-7*24*60*60*1e3),re=new Date($.getTime()-30*24*60*60*1e3),ve=N.filter(ae=>{var $e,sn;return(((sn=($e=ae.createdAt)==null?void 0:$e.toDate)==null?void 0:sn.call($e))||new Date(0))>=$&&ae.status!=="cancelled"}),Re=N.filter(ae=>{var $e,sn;return(((sn=($e=ae.createdAt)==null?void 0:$e.toDate)==null?void 0:sn.call($e))||new Date(0))>=B&&ae.status!=="cancelled"}),st=N.filter(ae=>{var $e,sn;return(((sn=($e=ae.createdAt)==null?void 0:$e.toDate)==null?void 0:sn.call($e))||new Date(0))>=re&&ae.status!=="cancelled"}),pt=N.filter(ae=>ae.status==="delivered");return{todayRevenue:ve.reduce((ae,Ee)=>ae+(Ee.total||0),0),todayOrders:ve.length,todayPlatformFee:ve.reduce((ae,Ee)=>ae+(Ee.platformFee||0),0),weekRevenue:Re.reduce((ae,Ee)=>ae+(Ee.total||0),0),weekOrders:Re.length,weekPlatformFee:Re.reduce((ae,Ee)=>ae+(Ee.platformFee||0),0),monthRevenue:st.reduce((ae,Ee)=>ae+(Ee.total||0),0),monthOrders:st.length,monthPlatformFee:st.reduce((ae,Ee)=>ae+(Ee.platformFee||0),0),totalRevenue:pt.reduce((ae,Ee)=>ae+(Ee.total||0),0),totalPlatformFee:pt.reduce((ae,Ee)=>ae+(Ee.platformFee||0),0),totalAdminCommission:pt.reduce((ae,Ee)=>ae+(Ee.adminCommission||0),0)}},rt=async()=>{try{const[k,$,B,re,ve]=await Promise.all([Ye(fe(q,"users")),Ye(fe(q,"restaurants")),Ye(fe(q,"menuItems")),Ye(fe(q,"orders")),Ye(fe(q,"wallets"))]);let Re={docs:[]};try{Re=await Ye(fe(q,"tasks"))}catch{console.log("   ")}const st=k.docs.map(le=>({uid:le.id,...le.data()}));T(st);const pt=$.docs.map(le=>({id:le.id,...le.data()}));x(pt);const ae=re.docs.map(le=>({id:le.id,...le.data()}));v(ae);const Ee=Re.docs.map(le=>({id:le.id,...le.data()}));_c(Ee.sort((le,Hi)=>{var Hs,Wi;return(((Hs=Hi.createdAt)==null?void 0:Hs.seconds)||0)-(((Wi=le.createdAt)==null?void 0:Wi.seconds)||0)}));const $e={};ve.docs.forEach(le=>{$e[le.id]=le.data()});const sn=$e.app_earnings||{balance:0,totalEarnings:0},Ne=st.filter(le=>le.role==="admin"),qi=st.filter(le=>le.role==="courier"),zs=st.filter(le=>le.role==="customer"),qs=st.filter(le=>le.role==="owner"),fh=Ne.map(le=>{const Hi=pt.filter(Wi=>Wi.referredBy===le.uid),Hs=$e[le.uid]||{balance:0,totalEarnings:0};return{uid:le.uid,email:le.email,name:le.name,walletBalance:Hs.balance||0,totalEarnings:Hs.totalEarnings||0,restaurantsCount:Hi.length,restaurants:Hi}});O(fh),m({users:st.length,restaurants:pt.length,menuItems:B.size,orders:ae.length,pendingOrders:ae.filter(le=>le.status==="pending").length,deliveredOrders:ae.filter(le=>le.status==="delivered").length,admins:Ne.length,couriers:qi.length,customers:zs.length,owners:qs.length,totalAppEarnings:sn.totalEarnings||0});const wa=await vt(J(q,"settings","general"));if(wa.exists()){const le=wa.data();w(le),j(le)}else{const le={deliveryFee:7,minOrderAmount:20,maxDeliveryDistance:15,workingHours:{open:"09:00",close:"23:00"},maintenanceMode:!1,appVersion:"1.0.0",platformFee:1,adminCommissionRate:.75};w(le),j(le)}}catch(k){console.error("   :",k),e.error("  ")}finally{c(!1),d(!1)}};I.useEffect(()=>{rt()},[]);const ga=()=>{d(!0),rt(),e.info("  ...")},dh=async()=>{try{await Nn(J(q,"settings","general"),y,{merge:!0}),w(y),_(!1),e.success("    ")}catch(k){console.error("   :",k),e.error("  ")}},$i=async k=>{try{await Me(J(q,"restaurants",k),{...D,updatedAt:ge()}),P(null),e.success("    "),rt()}catch($){console.error("   :",$),e.error("  ")}},Ec=async(k,$)=>{try{ke(!0);const B=`restaurants/${k}/logo_${Date.now()}_${$.name}`,re=ql(r,B);await Pm(re,$);const ve=await zl(re);await Me(J(q,"restaurants",k),{logoUrl:ve,updatedAt:ge()}),e.success("    "),rt()}catch(B){console.error("   :",B),e.error("  ")}finally{ke(!1)}},ya=async k=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await us(J(q,"restaurants",k)),e.success("   "),rt()}catch(B){console.error("   :",B),e.error("  ")}},Bs=async k=>{try{await Me(J(q,"users",k),{...H,updatedAt:ge()}),Ge(null),e.success("    "),rt()}catch($){console.error("   :",$),e.error("  ")}},pr=async k=>{if(await n.confirm("         !",{title:" ",dangerous:!0}))try{await us(J(q,"users",k)),e.success("     "),e.warning(":      Firebase Auth"),rt()}catch(B){console.error("   :",B),e.error("  ")}},xa=async(k,$)=>{try{await Me(J(q,"orders",k),{status:$,updatedAt:ge()}),e.success("    "),rt()}catch(B){console.error("   :",B),e.error("  ")}},hh=k=>{switch(k){case"customer":return" ";case"owner":return"  ";case"courier":return" ";case"admin":return" ";case"developer":return" ";default:return k}},jc=k=>{switch(k){case"pending":return"  ";case"accepted":return" ";case"preparing":return"  ";case"ready":return" ";case"out_for_delivery":return"  ";case"delivered":return"  ";case"cancelled":return" ";default:return k}};return a?o.jsx(Be,{allow:["developer"],children:o.jsx("div",{className:"flex items-center justify-center h-96",children:o.jsxs("div",{className:"text-center",children:[o.jsx(_r,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),o.jsx("p",{className:"text-lg text-gray-600",children:"   ..."})]})})}):o.jsx(Be,{allow:["developer"],children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-extrabold text-primary",children:"   "}),o.jsx("p",{className:"text-gray-600 mt-1",children:"    "})]}),o.jsxs("button",{onClick:ga,disabled:u,className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition disabled:opacity-50",children:[o.jsx(_r,{className:`w-5 h-5 ${u?"animate-spin":""}`}),""]})]}),o.jsx("div",{className:"flex flex-wrap gap-2 border-b pb-4",children:[{id:"overview",label:"  "},{id:"finance",label:" "},{id:"restaurants",label:" "},{id:"licenses",label:" "},{id:"orders",label:" "},{id:"users",label:" "},{id:"couriers",label:" "},{id:"admins",label:" "},{id:"tasks",label:" "},{id:"settings",label:" "},{id:"tools",label:" "}].map(k=>o.jsx("button",{onClick:()=>i(k.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl font-semibold transition ${s===k.id?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:k.label},k.id))}),s==="overview"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.users}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.restaurants}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.orders}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.admins}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.couriers}),o.jsx("p",{className:"text-sm opacity-90",children:" "})]}),o.jsxs("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-2xl p-4 text-white text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:f.totalAppEarnings.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  "})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[o.jsx(YD,{className:"w-6 h-6 text-orange-500"}),o.jsx("h2",{className:"text-xl font-bold",children:" Firebase"})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Project ID"}),o.jsx("p",{className:"font-mono text-sm",children:_n.projectId})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-xs text-gray-500",children:"Storage Bucket"}),o.jsx("p",{className:"font-mono text-sm",children:_n.storageBucket})]})]}),o.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[o.jsx("a",{href:`https://console.firebase.google.com/project/${_n.projectId}/overview`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-orange-100 hover:bg-orange-200 text-orange-700 px-3 py-1 rounded-lg",children:" Console"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${_n.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 px-3 py-1 rounded-lg",children:" Firestore"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${_n.projectId}/authentication`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-green-100 hover:bg-green-200 text-green-700 px-3 py-1 rounded-lg",children:" Auth"}),o.jsx("a",{href:`https://console.firebase.google.com/project/${_n.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"text-sm bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded-lg",children:" Storage"})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h2",{className:"text-xl font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[o.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:f.customers}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:f.owners}),o.jsx("p",{className:"text-sm text-gray-600",children:" "})]}),o.jsxs("div",{className:"text-center p-4 bg-yellow-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:f.couriers}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-purple-600",children:f.admins}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]}),o.jsxs("div",{className:"text-center p-4 bg-red-50 rounded-xl",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:"1"}),o.jsx("p",{className:"text-sm text-gray-600",children:""})]})]})]})]}),s==="finance"&&o.jsx("div",{className:"space-y-6",children:(()=>{const k=pa();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-emerald-700 rounded-2xl shadow-lg p-6 text-white",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:k.totalRevenue.toFixed(0)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:k.totalPlatformFee.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:k.totalAdminCommission.toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]}),o.jsxs("div",{className:"bg-white/20 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-3xl font-bold",children:(k.totalPlatformFee+k.totalAdminCommission).toFixed(2)}),o.jsx("p",{className:"text-sm opacity-90",children:"  (.)"})]})]})]}),o.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-blue-600 mb-4",children:" "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:k.todayOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[k.todayRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[k.todayPlatformFee.toFixed(2)," ."]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-600 mb-4",children:"  7 "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:k.weekOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[k.weekRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[k.weekPlatformFee.toFixed(2)," ."]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold text-orange-600 mb-4",children:"  30 "}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsx("span",{className:"font-bold",children:k.monthOrders})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:":"}),o.jsxs("span",{className:"font-bold",children:[k.monthRevenue.toFixed(2)," ."]})]}),o.jsxs("div",{className:"flex justify-between",children:[o.jsx("span",{className:"text-gray-600",children:" :"}),o.jsxs("span",{className:"font-bold text-green-600",children:[k.monthPlatformFee.toFixed(2)," ."]})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"   "}),o.jsx("div",{className:"space-y-3",children:R.map($=>({...$,ordersCount:N.filter(B=>B.restaurantId===$.id&&B.status==="delivered").length,revenue:N.filter(B=>B.restaurantId===$.id&&B.status==="delivered").reduce((B,re)=>B+(re.total||0),0)})).sort(($,B)=>B.revenue-$.revenue).slice(0,5).map(($,B)=>o.jsxs("div",{className:"flex items-center justify-between bg-gray-50 rounded-xl p-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"text-2xl",children:B===0?"":B===1?"":B===2?"":`#${B+1}`}),o.jsxs("div",{children:[o.jsx("p",{className:"font-bold",children:$.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[$.ordersCount," "]})]})]}),o.jsxs("p",{className:"font-bold text-green-600",children:[$.revenue.toFixed(2)," ."]})]},$.id))})]})]})})()}),s==="restaurants"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",R.length,")"]}),o.jsx("button",{onClick:()=>yc(!Ai),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl font-semibold",children:Ai?" ":"  "})]}),Ai&&o.jsxs("div",{className:"bg-green-50 rounded-2xl p-6 border-2 border-green-200",children:[o.jsx("h3",{className:"text-lg font-bold text-green-800 mb-4",children:"   "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"text",placeholder:":  ",value:vn,onChange:k=>la(k.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:": ",value:Pi,onChange:k=>Di(k.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:xc,onChange:k=>vc(k.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"email",placeholder:"restaurant@example.com",value:Oi,onChange:k=>ca(k.target.value),className:"w-full border rounded-xl p-3"})]})]}),o.jsxs("div",{className:"border-t mt-4 pt-4",children:[o.jsx("h4",{className:"font-bold text-green-800 mb-3",children:"    ( )"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   *"}),o.jsx("input",{type:"email",placeholder:"owner@example.com",value:Kn,onChange:k=>qr(k.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"6   ",value:Hr,onChange:k=>Li(k.target.value),className:"w-full border rounded-xl p-3"})]})]})]}),o.jsx("button",{onClick:ma,disabled:Gn||!vn.trim()||!Kn.trim()||!Hr.trim(),className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Gn?o.jsxs(o.Fragment,{children:[o.jsx(_r,{className:"w-5 h-5 animate-spin"})," ..."]}):"  "})]}),o.jsx("div",{className:"space-y-4",children:R.map(k=>{var $;return o.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:S===k.id?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"text",value:D.name||"",onChange:B=>A({...D,name:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"text",value:D.phone||"",onChange:B=>A({...D,phone:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"email",value:D.email||"",onChange:B=>A({...D,email:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:""}),o.jsx("input",{type:"text",value:D.city||"",onChange:B=>A({...D,city:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:""}),o.jsx("input",{type:"text",value:D.location||"",onChange:B=>A({...D,location:B.target.value}),className:"w-full border rounded-xl p-2 mt-1"})]}),o.jsxs("div",{className:"md:col-span-2",children:[o.jsx("label",{className:"text-sm text-gray-600",children:"  ()"}),o.jsxs("select",{value:D.referredBy||"",onChange:B=>A({...D,referredBy:B.target.value}),className:"w-full border rounded-xl p-2 mt-1",children:[o.jsx("option",{value:"",children:"--   ( ) --"}),C.filter(B=>B.role==="admin").map(B=>o.jsxs("option",{value:B.uid,children:[" ",B.name||B.email]},B.uid))]}),o.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"        "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600",children:" "}),o.jsx("input",{type:"file",accept:"image/*",onChange:B=>{var ve;const re=(ve=B.target.files)==null?void 0:ve[0];re&&Ec(k.id,re)},className:"w-full border rounded-xl p-2 mt-1",disabled:te}),te&&o.jsx("p",{className:"text-sm text-gray-500 mt-1",children:" ..."})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:()=>$i(k.id),className:"flex items-center gap-2 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-xl",children:[o.jsx(U1,{className:"w-4 h-4"})," "]}),o.jsxs("button",{onClick:()=>P(null),className:"flex items-center gap-2 bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-xl",children:[o.jsx(wi,{className:"w-4 h-4"})," "]})]})]}):o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"w-16 h-16 rounded-xl bg-gray-100 overflow-hidden flex-shrink-0",children:k.logoUrl?o.jsx("img",{src:k.logoUrl,alt:k.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center text-2xl",children:""})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg",children:k.name}),o.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-1",children:[k.phone&&o.jsxs("p",{children:[" ",k.phone]}),k.email&&o.jsxs("p",{children:[" ",k.email]}),k.city&&o.jsxs("p",{children:[" ",k.city]}),k.referredBy&&o.jsxs("p",{className:"text-purple-600",children:["  : ",(($=b.find(B=>B.uid===k.referredBy))==null?void 0:$.name)||k.referredBy.slice(0,8)]})]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{P(k.id),A(k)},className:"p-2 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-xl",title:"",children:o.jsx(lv,{className:"w-5 h-5"})}),o.jsx("button",{onClick:()=>ya(k.id),className:"p-2 bg-red-100 hover:bg-red-200 text-red-600 rounded-xl",title:"",children:o.jsx(Fo,{className:"w-5 h-5"})})]}),o.jsxs("select",{value:k.referredBy||"",onChange:async B=>{const re=B.target.value;try{await Me(J(q,"restaurants",k.id),{referredBy:re||null,updatedAt:ge()}),e.success(re?"   ":"   "),rt()}catch{e.error("   ")}},className:"text-xs border rounded-lg p-1",title:" ",children:[o.jsx("option",{value:"",children:"  "}),C.filter(B=>B.role==="admin").map(B=>o.jsxs("option",{value:B.uid,children:[" ",B.name||B.email]},B.uid))]})]})]})},k.id)})})]}),s==="orders"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",N.length,")"]}),o.jsxs("select",{value:ne,onChange:k=>_e(k.target.value),className:"border rounded-xl p-2",children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"accepted",children:""}),o.jsx("option",{value:"preparing",children:" "}),o.jsx("option",{value:"ready",children:""}),o.jsx("option",{value:"out_for_delivery",children:" "}),o.jsx("option",{value:"delivered",children:" "}),o.jsx("option",{value:"cancelled",children:""})]})]}),o.jsx("div",{className:"space-y-3",children:N.filter(k=>ne==="all"||k.status===ne).sort((k,$)=>{var B,re;return(((B=$.createdAt)==null?void 0:B.seconds)||0)-(((re=k.createdAt)==null?void 0:re.seconds)||0)}).map(k=>{var $,B;return o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-start justify-between flex-wrap gap-4",children:[o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold",children:[" #",k.id.slice(-8)]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",k.restaurantName||""]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",k.address]}),o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",($=k.total)==null?void 0:$.toFixed(2)," ."]}),k.platformFee&&o.jsxs("p",{className:"text-xs text-green-600",children:[" : ",k.platformFee," .",k.adminCommission?` |  : ${k.adminCommission} .`:""]})]}),o.jsxs("div",{className:"text-left",children:[o.jsx("span",{className:`inline-block px-3 py-1 rounded-xl text-sm font-semibold ${k.status==="delivered"?"bg-green-100 text-green-700":k.status==="cancelled"?"bg-red-100 text-red-700":k.status==="pending"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:jc(k.status)}),o.jsxs("select",{value:k.status,onChange:re=>xa(k.id,re.target.value),className:"mt-2 w-full border rounded-lg p-1 text-sm",children:[o.jsx("option",{value:"pending",children:" "}),o.jsx("option",{value:"accepted",children:""}),o.jsx("option",{value:"preparing",children:" "}),o.jsx("option",{value:"ready",children:""}),o.jsx("option",{value:"out_for_delivery",children:" "}),o.jsx("option",{value:"delivered",children:" "}),o.jsx("option",{value:"cancelled",children:""})]})]})]}),o.jsxs("div",{className:"mt-3 pt-3 border-t",children:[o.jsx("p",{className:"text-sm text-gray-500 mb-1",children:":"}),o.jsx("div",{className:"flex flex-wrap gap-2",children:(B=k.items)==null?void 0:B.map((re,ve)=>o.jsxs("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded",children:[re.name,"  ",re.qty]},ve))})]})]},k.id)})})]}),s==="users"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",C.length,")"]}),o.jsxs("select",{value:xe,onChange:k=>Fe(k.target.value),className:"border rounded-xl p-2",children:[o.jsx("option",{value:"all",children:" "}),o.jsx("option",{value:"customer",children:""}),o.jsx("option",{value:"owner",children:" "}),o.jsx("option",{value:"courier",children:""}),o.jsx("option",{value:"admin",children:""}),o.jsx("option",{value:"developer",children:""})]})]}),o.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:C.filter(k=>xe==="all"||k.role===xe).map(k=>o.jsx("div",{className:"bg-white rounded-2xl shadow p-4",children:ft===k.uid?o.jsxs("div",{className:"space-y-3",children:[o.jsx("input",{type:"text",placeholder:"",value:H.name||"",onChange:$=>ee({...H,name:$.target.value}),className:"w-full border rounded-xl p-2"}),o.jsx("input",{type:"text",placeholder:"",value:H.phone||"",onChange:$=>ee({...H,phone:$.target.value}),className:"w-full border rounded-xl p-2"}),o.jsxs("select",{value:H.role||"customer",onChange:$=>ee({...H,role:$.target.value}),className:"w-full border rounded-xl p-2",children:[o.jsx("option",{value:"customer",children:""}),o.jsx("option",{value:"owner",children:" "}),o.jsx("option",{value:"courier",children:""}),o.jsx("option",{value:"admin",children:""}),o.jsx("option",{value:"developer",children:""})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Bs(k.uid),className:"flex-1 bg-green-600 text-white py-2 rounded-xl",children:""}),o.jsx("button",{onClick:()=>Ge(null),className:"flex-1 bg-gray-500 text-white py-2 rounded-xl",children:""})]})]}):o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:k.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:k.email}),o.jsx("p",{className:"text-xs mt-1",children:hh(k.role)})]}),o.jsxs("div",{className:"flex gap-1",children:[o.jsx("button",{onClick:()=>{Ge(k.uid),ee(k)},className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg",children:o.jsx(lv,{className:"w-4 h-4"})}),o.jsx("button",{onClick:()=>pr(k.uid),className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:o.jsx(Fo,{className:"w-4 h-4"})})]})]})})},k.uid))})]}),s==="couriers"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["  (",f.couriers,")"]}),o.jsx("button",{onClick:()=>ra(!na),className:"flex items-center gap-2 bg-cyan-600 hover:bg-cyan-700 text-white px-4 py-2 rounded-xl font-semibold",children:na?" ":"  "})]}),na&&o.jsxs("div",{className:"bg-cyan-50 rounded-2xl p-6 border-2 border-cyan-200",children:[o.jsx("h3",{className:"text-lg font-bold text-cyan-800 mb-4",children:"   "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"email",placeholder:"courier@example.com",value:Wn,onChange:k=>sa(k.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"6   ",value:hr,onChange:k=>oa(k.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:" ",value:ia,onChange:k=>Ri(k.target.value),className:"w-full border rounded-xl p-3"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:nt,onChange:k=>mt(k.target.value),className:"w-full border rounded-xl p-3"})]})]}),o.jsx("button",{onClick:Nc,disabled:Fs||!Wn.trim()||!hr.trim(),className:"mt-4 w-full bg-cyan-600 hover:bg-cyan-700 text-white py-3 rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2",children:Fs?o.jsxs(o.Fragment,{children:[o.jsx(_r,{className:"w-5 h-5 animate-spin"})," ..."]}):"   "})]}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[C.filter(k=>k.role==="courier").map(k=>o.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-cyan-100 rounded-full flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:k.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:k.email}),k.phone&&o.jsxs("p",{className:"text-sm text-gray-600",children:[" ",k.phone]})]})]}),o.jsx("div",{className:"mt-4 pt-3 border-t",children:o.jsxs("div",{className:"grid grid-cols-2 gap-2 text-center",children:[o.jsxs("div",{className:"bg-green-50 rounded-lg p-2",children:[o.jsx("p",{className:"text-lg font-bold text-green-600",children:N.filter($=>$.courierId===k.uid&&$.status==="delivered").length}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-lg p-2",children:[o.jsx("p",{className:"text-lg font-bold text-blue-600",children:N.filter($=>$.courierId===k.uid&&$.status==="out_for_delivery").length}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]})]})})]},k.uid)),f.couriers===0&&o.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"   "})]})]}),s==="admins"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold",children:["   (",b.length,")"]}),o.jsxs("button",{onClick:()=>rn(!nn),className:"flex items-center gap-2 bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(Hl,{className:"w-5 h-5"}),nn?"":" "]})]}),nn&&o.jsxs("div",{className:"bg-purple-50 rounded-2xl p-6 border-2 border-purple-200",children:[o.jsx("h3",{className:"text-lg font-bold text-purple-800 mb-4",children:"    "}),o.jsx("p",{className:"text-sm text-purple-600 mb-4",children:"           "}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"text-sm font-semibold text-gray-700 block mb-2",children:"  :"}),o.jsxs("div",{className:"grid gap-2 max-h-48 overflow-y-auto",children:[C.filter(k=>k.role==="customer").slice(0,10).map(k=>o.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl",children:[o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold",children:k.name||" "}),o.jsx("p",{className:"text-sm text-gray-500",children:k.email})]}),o.jsx("button",{onClick:async()=>{if(await n.confirm(`   ${k.name||k.email}  `,{title:"  "}))try{await Me(J(q,"users",k.uid),{role:"admin"}),e.success("     "),rn(!1),rt()}catch{e.error("  ")}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-lg text-sm",children:" "})]},k.uid)),C.filter(k=>k.role==="customer").length===0&&o.jsx("p",{className:"text-gray-500 text-center py-4",children:"    "})]})]}),o.jsxs("div",{className:"border-t pt-4 mt-4",children:[o.jsx("h4",{className:"text-md font-bold text-purple-800 mb-3",children:"     :"}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"email",placeholder:"admin@example.com",value:Br,onChange:k=>pc(k.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  *"}),o.jsx("input",{type:"password",placeholder:"  (6   )",value:dr,onChange:k=>Ii(k.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:""}),o.jsx("input",{type:"text",placeholder:" ",value:zr,onChange:k=>Us(k.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:" "}),o.jsx("input",{type:"tel",placeholder:"05xxxxxxxx",value:Si,onChange:k=>Ci(k.target.value),className:"w-full border rounded-xl p-3 text-gray-900"})]})]}),o.jsx("button",{onClick:bc,disabled:ta||!Br.trim()||!dr.trim(),className:"mt-4 w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white py-3 rounded-xl font-bold transition disabled:opacity-50 flex items-center justify-center gap-2",children:ta?o.jsxs(o.Fragment,{children:[o.jsx(_r,{className:"w-5 h-5 animate-spin"})," ..."]}):o.jsxs(o.Fragment,{children:[o.jsx(Hl,{className:"w-5 h-5"}),"  "]})}),o.jsx("p",{className:"text-xs text-orange-600 mt-2",children:" :        .     ."})]}),o.jsx("div",{className:"border-t pt-4 mt-4",children:o.jsx("p",{className:"text-xs text-gray-500",children:'         ""'})})]}),o.jsxs("div",{className:"space-y-4",children:[b.map(k=>o.jsxs("div",{className:"bg-white rounded-2xl shadow overflow-hidden",children:[o.jsx("div",{className:"p-4 cursor-pointer hover:bg-gray-50",onClick:()=>Rn(tn===k.uid?null:k.uid),children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold",children:k.name||" "}),o.jsx("p",{className:"text-sm text-gray-600",children:k.email})]})]}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsxs("div",{className:"text-left",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx($1,{className:"w-4 h-4 text-green-600"}),o.jsxs("span",{className:"font-bold text-green-600",children:[k.walletBalance.toFixed(2)," ."]})]}),o.jsxs("p",{className:"text-xs text-gray-500",children:[": ",k.totalEarnings.toFixed(2)," . | ",k.restaurantsCount," "]})]}),tn===k.uid?o.jsx(cD,{className:"w-5 h-5 text-gray-400"}):o.jsx(iD,{className:"w-5 h-5 text-gray-400"})]})]})}),tn===k.uid&&o.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[o.jsxs("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:["      (",k.restaurants.length,"):"]}),k.restaurants.length>0?o.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:k.restaurants.map($=>o.jsxs("div",{className:"bg-white rounded-xl p-3 flex items-center gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-100 overflow-hidden",children:$.logoUrl?o.jsx("img",{src:$.logoUrl,alt:$.name,className:"w-full h-full object-cover"}):o.jsx("div",{className:"w-full h-full flex items-center justify-center",children:""})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-sm",children:$.name}),o.jsx("p",{className:"text-xs text-gray-500",children:$.city||" "})]})]},$.id))}):o.jsx("p",{className:"text-gray-500 text-sm",children:"    "}),o.jsx("div",{className:"mt-4 pt-3 border-t",children:o.jsxs("div",{className:"grid grid-cols-3 gap-3 text-center",children:[o.jsxs("div",{className:"bg-green-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-green-700",children:k.walletBalance.toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-blue-700",children:k.totalEarnings.toFixed(2)}),o.jsx("p",{className:"text-xs text-gray-600",children:" "})]}),o.jsxs("div",{className:"bg-purple-100 rounded-lg p-2",children:[o.jsx("p",{className:"font-bold text-purple-700",children:N.filter($=>$.referredBy===k.uid).length}),o.jsx("p",{className:"text-xs text-gray-600",children:"  "})]})]})})]})]},k.uid)),b.length===0&&o.jsx("div",{className:"text-center py-12 text-gray-500 bg-white rounded-2xl",children:"   "})]})]}),s==="settings"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"  "}),L?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>{_(!1),j(g)},className:"bg-gray-500 text-white px-4 py-2 rounded-xl",children:""}),o.jsx("button",{onClick:dh,className:"bg-green-600 text-white px-4 py-2 rounded-xl",children:" "})]}):o.jsx("button",{onClick:()=>_(!0),className:"bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl",children:" "})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow p-6",children:o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   (.)"}),L?o.jsx("input",{type:"number",value:y.deliveryFee||0,onChange:k=>j({...y,deliveryFee:Number(k.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.deliveryFee||7," ."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),L?o.jsx("input",{type:"number",step:"0.1",value:y.platformFee||1,onChange:k=>j({...y,platformFee:Number(k.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.platformFee||1," ./"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   /  (.)"}),L?o.jsx("input",{type:"number",step:"0.05",value:y.adminCommissionRate||.75,onChange:k=>j({...y,adminCommissionRate:Number(k.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.adminCommissionRate||.75," ./"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"   "}),L?o.jsx("input",{type:"number",value:y.minOrderAmount||0,onChange:k=>j({...y,minOrderAmount:Number(k.target.value)}),className:"w-full border rounded-xl p-3"}):o.jsxs("p",{className:"text-2xl font-bold",children:[g.minOrderAmount||20," ."]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),L?o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{type:"time",value:((va=y.workingHours)==null?void 0:va.open)||"09:00",onChange:k=>j({...y,workingHours:{...y.workingHours,open:k.target.value}}),className:"flex-1 border rounded-xl p-3"}),o.jsx("input",{type:"time",value:((_a=y.workingHours)==null?void 0:_a.close)||"23:00",onChange:k=>j({...y,workingHours:{...y.workingHours,close:k.target.value}}),className:"flex-1 border rounded-xl p-3"})]}):o.jsxs("p",{className:"text-2xl font-bold",children:[((Bi=g.workingHours)==null?void 0:Bi.open)||"09:00"," - ",((zi=g.workingHours)==null?void 0:zi.close)||"23:00"]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-sm text-gray-600 block mb-1",children:"  "}),L?o.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[o.jsx("input",{type:"checkbox",checked:y.maintenanceMode||!1,onChange:k=>j({...y,maintenanceMode:k.target.checked}),className:"w-6 h-6"}),o.jsx("span",{className:"text-lg",children:y.maintenanceMode?"":""})]}):o.jsx("p",{className:`text-2xl font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})}),o.jsxs("div",{className:"bg-sky-50 border-l-4 border-sky-500 rounded-lg p-6",children:[o.jsx("h3",{className:"font-bold text-sky-900 mb-3",children:"   (  = 1.75 .):"}),o.jsxs("div",{className:"text-sky-800 space-y-2",children:[o.jsxs("p",{children:[" ",o.jsx("strong",{children:" :"})," ",g.platformFee||1," .   "]}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:" :"})," ",g.adminCommissionRate||.75," .   "]}),o.jsxs("div",{className:"bg-white rounded-xl p-4 mt-3",children:[o.jsx("p",{className:"font-bold mb-2",children:" :   5 "}),o.jsxs("p",{children:[" ",o.jsx("strong",{children:"    :"})]}),o.jsxs("ul",{className:"mr-6 list-disc text-sm",children:[o.jsxs("li",{children:["  : 5  ",g.adminCommissionRate||.75," = ",o.jsxs("strong",{children:[(5*(g.adminCommissionRate||.75)).toFixed(2)," ."]})]}),o.jsxs("li",{children:["  : 5  ",g.platformFee||1," = ",o.jsxs("strong",{children:[(5*(g.platformFee||1)).toFixed(2)," ."]})]}),o.jsxs("li",{className:"text-green-700",children:[": ",o.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})]}),o.jsxs("p",{className:"mt-2",children:[" ",o.jsx("strong",{children:"    :"})]}),o.jsx("ul",{className:"mr-6 list-disc text-sm",children:o.jsxs("li",{children:["    : 5  1.75 = ",o.jsxs("strong",{children:[(5*1.75).toFixed(2)," ."]})]})})]})]})]})]}),s==="tasks"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:"text-xl font-bold",children:"   "}),o.jsxs("button",{onClick:()=>Mi(!0),className:"flex items-center gap-2 bg-primary hover:bg-sky-600 text-white px-4 py-2 rounded-xl font-semibold transition",children:[o.jsx(Bg,{className:"w-5 h-5"})," "]})]}),o.jsx("div",{className:"flex flex-wrap gap-2",children:["all","pending","in_progress","completed","cancelled"].map(k=>o.jsxs("button",{onClick:()=>Qn(k),className:`px-4 py-2 rounded-xl font-semibold transition ${Pn===k?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[k==="all"&&" ",k==="pending"&&"  ",k==="in_progress"&&"  ",k==="completed"&&" ",k==="cancelled"&&" "]},k))}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsxs("div",{className:"bg-yellow-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:An.filter(k=>k.status==="pending").length}),o.jsx("p",{className:"text-sm text-yellow-700",children:" "})]}),o.jsxs("div",{className:"bg-blue-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-blue-600",children:An.filter(k=>k.status==="in_progress").length}),o.jsx("p",{className:"text-sm text-blue-700",children:" "})]}),o.jsxs("div",{className:"bg-green-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-green-600",children:An.filter(k=>k.status==="completed").length}),o.jsx("p",{className:"text-sm text-green-700",children:""})]}),o.jsxs("div",{className:"bg-red-50 rounded-xl p-4 text-center",children:[o.jsx("p",{className:"text-2xl font-bold text-red-600",children:An.filter(k=>k.status==="cancelled").length}),o.jsx("p",{className:"text-sm text-red-700",children:""})]})]}),o.jsx("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:An.filter(k=>Pn==="all"||k.status===Pn).length===0?o.jsxs("div",{className:"p-8 text-center text-gray-500",children:[o.jsx("p",{className:"text-4xl mb-2",children:""}),o.jsxs("p",{children:["   ",Pn!=="all"&&"  "]})]}):o.jsx("div",{className:"divide-y",children:An.filter(k=>Pn==="all"||k.status===Pn).map(k=>{var B,re,ve;const $=C.find(Re=>Re.uid===k.assignedTo);return o.jsx("div",{className:"p-4 hover:bg-gray-50",children:o.jsxs("div",{className:"flex items-start justify-between gap-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${k.priority==="high"?"bg-red-100 text-red-700":k.priority==="medium"?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"}`,children:k.priority==="high"?" ":k.priority==="medium"?" ":" "}),o.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-semibold ${k.status==="pending"?"bg-yellow-100 text-yellow-700":k.status==="in_progress"?"bg-blue-100 text-blue-700":k.status==="completed"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[k.status==="pending"&&"  ",k.status==="in_progress"&&"  ",k.status==="completed"&&" ",k.status==="cancelled"&&" "]})]}),o.jsx("h3",{className:"font-bold text-gray-800",children:k.title}),k.description&&o.jsx("p",{className:"text-sm text-gray-600 mt-1",children:k.description}),o.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-xs text-gray-500",children:[o.jsxs("span",{children:[" ",($==null?void 0:$.name)||k.assignedToName||" "]}),k.dueDate&&o.jsxs("span",{children:[" ",new Date(k.dueDate).toLocaleDateString("ar-SA")]}),o.jsxs("span",{children:[" ",((ve=(re=(B=k.createdAt)==null?void 0:B.toDate)==null?void 0:re.call(B))==null?void 0:ve.toLocaleDateString("ar-SA"))||" "]})]}),k.notes&&o.jsxs("p",{className:"text-sm text-gray-500 mt-2 bg-gray-50 p-2 rounded",children:[" ",k.notes]})]}),o.jsxs("div",{className:"flex flex-col gap-2",children:[k.status==="pending"&&o.jsx("button",{onClick:async()=>{try{await Me(J(q,"tasks",k.id),{status:"in_progress",updatedAt:ge()}),e.success("  "),rt()}catch{e.error("   ")}},className:"text-blue-600 hover:bg-blue-50 p-2 rounded-lg transition",title:" ",children:""}),(k.status==="pending"||k.status==="in_progress")&&o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:async()=>{try{await Me(J(q,"tasks",k.id),{status:"completed",completedAt:ge(),updatedAt:ge()}),e.success("  "),rt()}catch{e.error("   ")}},className:"text-green-600 hover:bg-green-50 p-2 rounded-lg transition",title:" ",children:""}),o.jsx("button",{onClick:async()=>{if(await n.confirm("    ",{dangerous:!0}))try{await Me(J(q,"tasks",k.id),{status:"cancelled",updatedAt:ge()}),e.success("  "),rt()}catch{e.error("   ")}},className:"text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]}),o.jsx("button",{onClick:async()=>{if(await n.confirm("     ",{dangerous:!0}))try{await us(J(q,"tasks",k.id)),e.success("  "),rt()}catch{e.error("   ")}},className:"text-gray-400 hover:text-red-600 hover:bg-red-50 p-2 rounded-lg transition",title:" ",children:""})]})]})},k.id)})})}),$s&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6",children:[o.jsx("h3",{className:"text-xl font-bold mb-4",children:"   "}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),o.jsx("input",{type:"text",value:ut,onChange:k=>Vi(k.target.value),className:"w-full border rounded-xl px-4 py-2",placeholder:":    "})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),o.jsx("textarea",{value:Wr,onChange:k=>fr(k.target.value),className:"w-full border rounded-xl px-4 py-2 h-24",placeholder:" ..."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:"  *"}),o.jsxs("select",{value:Ui,onChange:k=>da(k.target.value),className:"w-full border rounded-xl px-4 py-2",children:[o.jsx("option",{value:"",children:"--   --"}),C.filter(k=>k.role==="admin").map(k=>o.jsx("option",{value:k.uid,children:k.name||k.email},k.uid))]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:""}),o.jsxs("select",{value:mr,onChange:k=>ha(k.target.value),className:"w-full border rounded-xl px-4 py-2",children:[o.jsx("option",{value:"low",children:" "}),o.jsx("option",{value:"medium",children:" "}),o.jsx("option",{value:"high",children:" "})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold mb-1",children:" "}),o.jsx("input",{type:"date",value:wc,onChange:k=>Kr(k.target.value),className:"w-full border rounded-xl px-4 py-2"})]})]})]}),o.jsxs("div",{className:"flex gap-3 mt-6",children:[o.jsx("button",{onClick:()=>{Mi(!1),Vi(""),fr(""),da(""),ha("medium"),Kr("")},className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2 rounded-xl font-semibold transition",children:""}),o.jsx("button",{onClick:async()=>{if(!ut.trim()||!Ui){e.error("   ");return}Fi(!0);try{const k=C.find($=>$.uid===Ui);await Zo(fe(q,"tasks"),{title:ut.trim(),description:Wr.trim(),assignedTo:Ui,assignedToName:(k==null?void 0:k.name)||(k==null?void 0:k.email)||"",status:"pending",priority:mr,dueDate:wc||null,createdBy:t==null?void 0:t.uid,createdAt:ge(),updatedAt:ge(),completedAt:null,notes:""}),e.success("   "),Mi(!1),Vi(""),fr(""),da(""),ha("medium"),Kr(""),rt()}catch(k){console.error(k),e.error("   ")}finally{Fi(!1)}},disabled:fa,className:"flex-1 bg-primary hover:bg-sky-600 text-white py-2 rounded-xl font-semibold transition disabled:opacity-50",children:fa?" ...":" "})]})]})})]}),s==="tools"&&o.jsxs("div",{className:"space-y-6",children:[o.jsx("h2",{className:"text-xl font-bold",children:"  "}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:[o.jsxs("button",{onClick:()=>{const k={exportDate:new Date().toISOString(),users:C.length,restaurants:R.length,orders:N.length,admins:b.length,stats:f,settings:g},$=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),B=URL.createObjectURL($),re=document.createElement("a");re.href=B,re.download=`app-data-${new Date().toISOString().split("T")[0]}.json`,re.click(),e.success("   ")},className:"flex items-center gap-3 bg-blue-100 hover:bg-blue-200 text-blue-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:"  JSON"})]})]}),o.jsxs("button",{onClick:()=>{const k=[[" ","","","",""].join(","),...N.map(ve=>{var Re,st,pt;return[ve.id.slice(-8),ve.restaurantName||" ",ve.total,ve.status,((pt=(st=(Re=ve.createdAt)==null?void 0:Re.toDate)==null?void 0:st.call(Re))==null?void 0:pt.toLocaleDateString("ar-SA"))||""].join(",")})].join(`
`),$=new Blob(["\uFEFF"+k],{type:"text/csv;charset=utf-8"}),B=URL.createObjectURL($),re=document.createElement("a");re.href=B,re.download=`orders-${new Date().toISOString().split("T")[0]}.csv`,re.click(),e.success("   ")},className:"flex items-center gap-3 bg-green-100 hover:bg-green-200 text-green-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]}),o.jsxs("button",{onClick:()=>{const k=[["","","",""].join(","),...C.map(ve=>[ve.name||" ",ve.email,ve.role,ve.phone||""].join(","))].join(`
`),$=new Blob(["\uFEFF"+k],{type:"text/csv;charset=utf-8"}),B=URL.createObjectURL($),re=document.createElement("a");re.href=B,re.download=`users-${new Date().toISOString().split("T")[0]}.csv`,re.click(),e.success("   ")},className:"flex items-center gap-3 bg-purple-100 hover:bg-purple-200 text-purple-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:" "}),o.jsx("p",{className:"text-xs opacity-75",children:" CSV "})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[o.jsxs("button",{onClick:async()=>{const k=N.filter(B=>B.status==="pending");if(k.length===0){e.info("   ");return}if(await n.confirm(`  ${k.length}  .   `,{title:"  ",dangerous:!0}))try{await Promise.all(k.map(B=>Me(J(q,"orders",B.id),{status:"cancelled",updatedAt:ge()}))),e.success(`  ${k.length} `),rt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:"  "}),o.jsxs("p",{className:"text-xs opacity-75",children:[N.filter(k=>k.status==="pending").length,"  "]})]})]}),o.jsxs("button",{onClick:async()=>{const k=new Date;k.setMonth(k.getMonth()-3);const $=N.filter(re=>{var Re,st;return(((st=(Re=re.createdAt)==null?void 0:Re.toDate)==null?void 0:st.call(Re))||new Date)<k&&(re.status==="delivered"||re.status==="cancelled")});if($.length===0){e.info("   ");return}if(await n.confirm(`  ${$.length}   (  3 ).   `,{title:"  ",dangerous:!0}))try{await Promise.all($.map(re=>us(J(q,"orders",re.id)))),e.success(`  ${$.length}  `),rt()}catch{e.error("   ")}},className:"flex items-center gap-3 bg-orange-100 hover:bg-orange-200 text-orange-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"text-right",children:[o.jsx("p",{className:"font-bold",children:"  "}),o.jsx("p",{className:"text-xs opacity-75",children:"   3 "})]})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[o.jsxs("a",{href:`https://console.firebase.google.com/project/${_n.projectId}/firestore`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-blue-50 hover:bg-blue-100 text-blue-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Firestore"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${_n.projectId}/authentication/users`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-green-50 hover:bg-green-100 text-green-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Authentication"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${_n.projectId}/storage`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-purple-50 hover:bg-purple-100 text-purple-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Storage"})]}),o.jsxs("a",{href:`https://console.firebase.google.com/project/${_n.projectId}/hosting`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 bg-orange-50 hover:bg-orange-100 text-orange-800 p-4 rounded-xl transition",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"Hosting"})]})]})]}),o.jsxs("div",{className:"bg-gray-50 rounded-2xl p-6",children:[o.jsx("h3",{className:"text-lg font-bold mb-4",children:"  "}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Project ID"}),o.jsx("p",{className:"font-mono",children:_n.projectId})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:"Storage Bucket"}),o.jsx("p",{className:"font-mono",children:_n.storageBucket})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:"font-bold",children:g.appVersion||"1.0.0"})]}),o.jsxs("div",{children:[o.jsx("p",{className:"text-gray-500",children:" "}),o.jsx("p",{className:`font-bold ${g.maintenanceMode?"text-red-600":"text-green-600"}`,children:g.maintenanceMode?" ":" "})]})]})]})]}),s==="licenses"&&o.jsx(l6,{restaurants:R,onUpdate:ga,toast:e,dialog:n}),o.jsx("div",{className:"bg-gray-100 rounded-2xl p-4 text-sm",children:o.jsxs("div",{className:"flex flex-wrap gap-4 text-gray-600",children:[o.jsxs("span",{children:[" ",t==null?void 0:t.email]}),o.jsxs("span",{children:[" ",t==null?void 0:t.uid.slice(0,12),"..."]}),o.jsxs("span",{children:[" ",new Date().toLocaleDateString("ar-SA")]})]})})]})})},l6=({restaurants:t,onUpdate:e,toast:n,dialog:r})=>{const[s,i]=I.useState("pending"),[a,c]=I.useState({}),[u,d]=I.useState(null),f=t.filter(T=>T.commercialLicenseUrl||T.healthCertificateUrl),m=f.filter(T=>s==="all"?!0:T.licenseStatus===s||!T.licenseStatus&&s==="pending"),g={all:f.length,pending:f.filter(T=>!T.licenseStatus||T.licenseStatus==="pending").length,approved:f.filter(T=>T.licenseStatus==="approved").length,rejected:f.filter(T=>T.licenseStatus==="rejected").length},w=async(T,R)=>{const x=a[T]||"";if(R==="rejected"&&!x.trim()){n.warning("   ");return}const N=R==="approved"?" ":"";if(await r.confirm(`    ${N}   `,{title:`${N} `})){d(T);try{await Me(J(q,"restaurants",T),{licenseStatus:R,licenseNotes:R==="rejected"?x:"",updatedAt:ge()}),n.success(R==="approved"?"    ":"  "),c(b=>({...b,[T]:""})),e()}catch(b){n.error(" : "+(b.message||"  "))}finally{d(null)}}},C=T=>{switch(T){case"approved":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-100 text-green-700 text-xs font-semibold",children:[o.jsx(Cs,{className:"w-3 h-3"})," "]});case"rejected":return o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-red-100 text-red-700 text-xs font-semibold",children:[o.jsx(pd,{className:"w-3 h-3"})," "]});default:return o.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-yellow-100 text-yellow-700 text-xs font-semibold",children:[o.jsx(Vg,{className:"w-3 h-3"}),"  "]})}};return o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[o.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[o.jsx(ov,{className:"w-6 h-6 text-sky-500"})," "]}),o.jsx("div",{className:"flex gap-2",children:["pending","approved","rejected","all"].map(T=>o.jsxs("button",{onClick:()=>i(T),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition ${s===T?"bg-sky-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[T==="all"&&` (${g.all})`,T==="pending"&&`  (${g.pending})`,T==="approved"&&` (${g.approved})`,T==="rejected"&&` (${g.rejected})`]},T))})]}),m.length===0?o.jsxs("div",{className:"text-center py-12 text-gray-400",children:[o.jsx(ov,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),o.jsxs("p",{children:["   ",s==="pending"?" ":s==="approved"?" ":s==="rejected"?"":""]})]}):o.jsx("div",{className:"grid gap-4",children:m.map(T=>o.jsxs("div",{className:"bg-white border rounded-2xl p-5 shadow-sm",children:[o.jsxs("div",{className:"flex items-start justify-between gap-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-lg",children:T.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[T.city||" ","  ",T.email||" "]})]}),C(T.licenseStatus)]}),o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[T.commercialLicenseUrl&&o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),o.jsxs("a",{href:T.commercialLicenseUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[o.jsx(Dm,{className:"w-4 h-4"})," "]})]}),T.healthCertificateUrl&&o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3",children:[o.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"  "}),o.jsxs("a",{href:T.healthCertificateUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-sky-600 hover:text-sky-800 text-sm",children:[o.jsx(Dm,{className:"w-4 h-4"})," "]})]})]}),T.licenseStatus==="rejected"&&T.licenseNotes&&o.jsxs("div",{className:"bg-red-50 text-red-700 rounded-xl p-3 mb-4 text-sm",children:[o.jsx("strong",{children:" :"})," ",T.licenseNotes]}),T.licenseStatus!=="approved"&&o.jsxs("div",{className:"space-y-3",children:[o.jsx("textarea",{placeholder:" ( )...",value:a[T.id]||"",onChange:R=>c(x=>({...x,[T.id]:R.target.value})),className:"w-full border rounded-xl p-3 text-sm resize-none h-20"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsxs("button",{onClick:()=>w(T.id,"approved"),disabled:u===T.id,className:"flex-1 flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[o.jsx(Cs,{className:"w-5 h-5"}),""]}),o.jsxs("button",{onClick:()=>w(T.id,"rejected"),disabled:u===T.id,className:"flex-1 flex items-center justify-center gap-2 bg-red-500 hover:bg-red-600 text-white py-2.5 rounded-xl font-semibold transition disabled:opacity-50",children:[o.jsx(pd,{className:"w-5 h-5"}),""]})]})]}),T.licenseStatus==="approved"&&o.jsx("button",{onClick:()=>w(T.id,"rejected"),disabled:u===T.id,className:"w-full flex items-center justify-center gap-2 bg-gray-100 hover:bg-gray-200 text-gray-700 py-2.5 rounded-xl font-semibold transition",children:" "})]},T.id))})]})},Wt=({children:t})=>{const{user:e,loading:n}=tt();return n?o.jsx("div",{className:"p-8 text-center",children:" ..."}):e?o.jsx(o.Fragment,{children:t}):o.jsx(Op,{to:"/login",replace:!0})},c6=()=>{var c;const[t,e]=I.useState([]),[n,r]=I.useState(!0),[s,i]=I.useState(null);I.useEffect(()=>{(async()=>{try{i(null);const u=zt(fe(q,"orders"),Ss("createdAt","desc"),Ig(10)),f=(await Ye(u)).docs.map(m=>{var w,C,T,R,x,N;const g=m.data();return{id:m.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((C=(w=g==null?void 0:g.items)==null?void 0:w[0])==null?void 0:C.ownerId)??null,customerId:g.customerId??null,createdAtISO:((N=(x=(R=(T=g.createdAt)==null?void 0:T.toDate)==null?void 0:R.call(T))==null?void 0:x.toISOString)==null?void 0:N.call(x))??null}});e(f)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const f=(await Ye(fe(q,"orders"))).docs.map(m=>{var w,C,T,R,x,N;const g=m.data();return{id:m.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((C=(w=g==null?void 0:g.items)==null?void 0:w[0])==null?void 0:C.ownerId)??null,customerId:g.customerId??null,createdAtISO:((N=(x=(R=(T=g.createdAt)==null?void 0:T.toDate)==null?void 0:R.call(T))==null?void 0:x.toISOString)==null?void 0:N.call(x))??null}});e(f),i("     createdAt     .")}catch(d){i("     : "+((d==null?void 0:d.message)||d))}else i("  : "+((u==null?void 0:u.message)||u))}finally{r(!1)}})()},[]);const a=(c=cn.options)==null?void 0:c.projectId;return o.jsxs("div",{className:"p-4 space-y-3",children:[o.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),o.jsxs("div",{className:"text-sm",children:["ProjectId: ",o.jsx("b",{children:String(a)})]}),s&&o.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&o.jsx("div",{children:" Loading"}),!n&&t.length===0&&o.jsxs("div",{className:"text-gray-600",children:["     collection: ",o.jsx("code",{children:"orders"}),"   ."]}),t.map(u=>o.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[o.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),o.jsxs("div",{children:["restaurantId: ",o.jsx("b",{children:String(u.restaurantId)})]}),o.jsxs("div",{children:["items[0].ownerId: ",o.jsx("b",{children:String(u.firstItemOwnerId)})]}),o.jsxs("div",{children:["customerId: ",o.jsx("b",{children:String(u.customerId)})]}),o.jsxs("div",{children:["createdAt: ",o.jsx("b",{children:u.createdAtISO||""})]})]},u.id))]})};function u6(){const{locationRequired:t,refreshUserData:e,loading:n}=tt();return!n&&t?o.jsx(T5,{onLocationSaved:e}):o.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-sky-50 via-white to-sky-50 text-sky-900",children:[o.jsxs("div",{className:"fixed top-0 left-0 right-0 z-50",children:[o.jsx(k5,{}),o.jsx(b5,{})]}),o.jsx("div",{className:"h-[100px] sm:h-[120px]"}),o.jsx("main",{className:"flex-1 max-w-6xl mx-auto w-full px-4 py-8",children:o.jsxs(xk,{children:[o.jsx(Ie,{path:"/",element:o.jsx(I5,{})}),o.jsx(Ie,{path:"/restaurants",element:o.jsx(C5,{})}),o.jsx(Ie,{path:"/menu",element:o.jsx(O5,{})}),o.jsx(Ie,{path:"/cart",element:o.jsx(L5,{})}),o.jsx(Ie,{path:"/login",element:o.jsx(M5,{})}),o.jsx(Ie,{path:"/customer-login",element:o.jsx(U5,{})}),o.jsx(Ie,{path:"/register",element:o.jsx(V5,{})}),o.jsx(Ie,{path:"/privacy-policy",element:o.jsx(F5,{})}),o.jsx(Ie,{path:"/account-deleted",element:o.jsx($5,{})}),o.jsx(Ie,{path:"/checkout",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["customer","admin"],children:o.jsx(H5,{})})})}),o.jsx(Ie,{path:"/orders",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["customer","admin"],children:o.jsx(W5,{})})})}),o.jsx(Ie,{path:"/profile",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["customer","courier","owner","admin","developer"],children:o.jsx(K5,{})})})}),o.jsx(Ie,{path:"/owner",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["owner"],children:o.jsx(G5,{})})})}),o.jsx(Ie,{path:"/owner/menu",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["owner"],children:o.jsx(Y5,{})})})}),o.jsx(Ie,{path:"/owner/orders",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["owner"],children:o.jsx(Z5,{})})})}),o.jsx(Ie,{path:"/owner/edit",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["owner"],children:o.jsx(e6,{})})})}),o.jsx(Ie,{path:"/owner/courier-requests",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["owner","developer"],children:o.jsx(t6,{})})})}),o.jsx(Ie,{path:"/courier",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["courier","developer"],children:o.jsx(n6,{})})})}),o.jsx(Ie,{path:"/courier/hiring",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["courier","developer"],children:o.jsx(r6,{})})})}),o.jsx(Ie,{path:"/admin",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["admin","developer"],children:o.jsx(s6,{})})})}),o.jsx(Ie,{path:"/admin/restaurants",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["admin","developer"],children:o.jsx(i6,{})})})}),o.jsx(Ie,{path:"/admin/orders",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["admin","developer"],children:o.jsx(o6,{})})})}),o.jsx(Ie,{path:"/developer",element:o.jsx(Wt,{children:o.jsx(Be,{allow:["developer","admin"],children:o.jsx(a6,{})})})}),o.jsx(Ie,{path:"/__debug_orders",element:o.jsx(c6,{})}),o.jsx(Ie,{path:"*",element:o.jsx(Op,{to:"/",replace:!0})})]})}),o.jsx(j5,{})]})}I.createContext(void 0);const d6=({children:t})=>o.jsx(o.Fragment,{children:t});df.createRoot(document.getElementById("root")).render(o.jsx(Iv.StrictMode,{children:o.jsx(kk,{children:o.jsx(R5,{children:o.jsx(N5,{children:o.jsx(z4,{children:o.jsxs(d6,{children:["   ",o.jsx(u6,{})]})})})})})}));
